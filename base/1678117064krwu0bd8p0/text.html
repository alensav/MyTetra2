<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p align="center" style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%; background-color:#222222;"><a href="https://count-zero.ru/2018/esp8266_arduino/"><span style=" font-family:'Helvetica,Arial'; font-size:8.25pt; font-weight:600; text-decoration: underline; color:#808080; background-color:#222222;">ESP8266 + Arduino + OpenWRT: проект</span></a></p>
<p align="center" style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%; background-color:#222222;"><a href="https://count-zero.ru/2018/esp8266_arduino/"><span style=" font-family:'Helvetica,Arial'; font-size:8.25pt; font-weight:600; text-decoration: underline; color:#808080; background-color:#222222;"> температурного логера на датчиках DHT11 и</span></a></p>
<p align="center" style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%; background-color:#222222;"><a href="https://count-zero.ru/2018/esp8266_arduino/"><span style=" font-family:'Helvetica,Arial'; font-size:8.25pt; font-weight:600; text-decoration: underline; color:#808080; background-color:#222222;"> DS18B20, пошаговое руководство</span></a></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%; font-family:'Helvetica,Arial'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#222222;"><br /></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%; font-family:'Helvetica,Arial'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#222222;"><br /></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%; font-family:'Helvetica,Arial'; font-size:8.25pt; font-weight:600; color:#000000; background-color:#222222;"><br /></p>
<p align="right" style=" margin-top:10px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><span style=" font-family:'Geneva,Arial,Helvetica,sans-serif'; font-size:8.25pt; font-weight:600; color:#45342e;">разделы: </span><a href="https://count-zero.ru/tags/iot"><span style=" font-family:'Geneva,Arial,Helvetica,sans-serif'; font-size:8.25pt; font-weight:600; text-decoration: underline; color:#337ab7; background-color:transparent;">Интернет вещей </span></a><span style=" font-family:'Geneva,Arial,Helvetica,sans-serif'; font-size:8.25pt; font-weight:600; color:#45342e;">, </span><a href="https://count-zero.ru/tags/arduino"><span style=" font-family:'Geneva,Arial,Helvetica,sans-serif'; font-size:8.25pt; font-weight:600; text-decoration: underline; color:#337ab7; background-color:transparent;">Arduino </span></a><span style=" font-family:'Geneva,Arial,Helvetica,sans-serif'; font-size:8.25pt; font-weight:600; color:#45342e;">, дата: 19 декабря 2018г.</span></p>
<p align="center" style=" margin-top:0px; margin-bottom:10px; margin-left:-15px; margin-right:-15px; -qt-block-indent:0; text-indent:0px;"><img src="image16781169330vmk4yd4li.png" /><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;"><br />Artwork by </span><a href="https://www.artstation.com/pavelbondarenko"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">Павел Бондаренко</span></a></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:-15px; margin-right:-15px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">ESP8266 может работать в двух режимах: в режиме интерпретатора AT-команд или в режиме самостоятельного микроконтроллера с wifi модулем. Работу ESP8266 в режиме интерпретатора AT-команд я рассматривал в </span><a href="https://count-zero.ru/2018/esp8266/"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">предыдущей статье</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">, эта же статья рассматривает работу ESP8266 в качестве самостоятельного микроконтроллера.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:-15px; margin-right:-15px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Способов программирования ESP8266 опять же два, первый - это программирование с помощью </span><a href="https://github.com/esp8266/Arduino"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">ESP8266 фреймворка для Arduino IDE</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">, второй - это программирование через </span><a href="https://github.com/pfalcon/esp-open-sdk"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">esp-open-sdk</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">. В первом случае мы можем использовать готовые библиотеки Arduino, во втором случае вы можем положиться только на функционал SDK и свой собственный код.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:-15px; margin-right:-15px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">В этой статье мне хотелось бы рассмотреть программирование ESP8266 с помощью </span><a href="https://github.com/esp8266/Arduino"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">ESP8266 фреймворка для Arduino IDE</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">. Данная тема решает широкий спектр задач обеспечения радиоканалом разного рода датчиков и простых устройств управления нагрузкой.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">В качестве примера в статье рассматривается пошаговое написание прошивки для температурного логера на датчиках DHT11 и DS18B20. Первый датчик используется для определения комнатной температуры и влажности, второй используется для определения уличной температуры. Я статье используется плата ModeMCU ESP8266, т.к. там есть автозагузка прошивки, но в принципе может быть использована любая другая плата на модуле ESP12E/ESP12F. Данные модули оснащены флеш-памятью на 4 мегабайта, что позволяет забыть о жёсткой оптимизации размера прошивки, когда борьба идёт за каждый байт.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">При работе с ESP8266 есть выбор: либо использование его совместно с &quot;облаками&quot;, либо собственным внешним сайтом, либо собственном сервером расположенным в интросети или автономной работой ESP826, когда веб-сервер запускается на самом ESP8266.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">В данном проекте используется веб-сервер uhttpd на роутере с прошивкой OpenWRT. ESP8266 передаёт на него показания датчиков, а роутер их сохраняет и виде обычных файлов, и делает их доступными для просмотра через web-интерфейс. Можно дать новую жизнь старому смартфону или планшету настроив их на отображение таких web-страниц. Web-интерфейс универсален и может отображаться на любых браузерах любых устройств.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#45342e;">Ссылки на полезные ресурсы и документацию:</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://github.com/esp8266/Arduino"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">ESP8266 фреймворк для Arduino IDE</span></a></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Документация на библиотеку </span><a href="https://arduino-esp8266.readthedocs.io/en/latest/esp8266wifi/readme.html"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">ESP8266WIFI</span></a></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Документация на Arduino библиотеку </span><a href="https://www.arduino.cc/en/Reference/WiFi"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">WiFi library</span></a></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Руководство на датчик AM2320: &quot;</span><a href="https://count-zero.ru/files/AM2320.pdf"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Digital Temperature and Humidity Sensor AM2320 Product Manual</span></a><span style=" font-size:16px;">&quot;</span></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Руководство на датчик DS18B20: &quot;</span><a href="https://count-zero.ru/files/DS18B20.pdf"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">DS18B20 Programmable Resolution 1-Wire Digital Thermometer</span></a><span style=" font-size:16px;">&quot;</span></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Руководство на датчик DHT11: &quot;</span><a href="https://count-zero.ru/files/DHT11-Technical-Data-Sheet-Translated-Version-1143054.pdf"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">DHT11 Humidity &amp; Temperature Sensor</span></a><span style=" font-size:16px;">&quot;</span></li></ol>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#45342e;">Содержание:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">I. Начало работы с ESP8266 фреймворком для Arduino IDE</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://count-zero.ru/2018/esp8266_arduino/#1"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Установка ESP8266 фреймворка для Arduino IDE</span></a></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://count-zero.ru/2018/esp8266_arduino/#2"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Подключение датчика DHT11 к ESP8266</span></a></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://count-zero.ru/2018/esp8266_arduino/#3"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Подключение датчика DS18B20 к ESP8266</span></a></li></ol>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">II. Работа с библиотекой ESP8266WIFI</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://count-zero.ru/2018/esp8266_arduino/#4"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Установка WiFi соединения</span></a></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://count-zero.ru/2018/esp8266_arduino/#5"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Использование режима энергосбережения DeepSleep</span></a></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://count-zero.ru/2018/esp8266_arduino/#6"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Класс WiFiClient, получение web-страницы от сервера на OpenWRT и отправка данных через GET запрос</span></a></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://count-zero.ru/2018/esp8266_arduino/#7"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Отправка на web-сервер данных с датчика DHT11 через GET запрос</span></a></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://count-zero.ru/2018/esp8266_arduino/#8"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Добавление датчика DS18B20</span></a></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://count-zero.ru/2018/esp8266_arduino/#9"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Вывод показаний датчиков через веб-интерфейс</span></a></li></ol>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">III. Добавлено позже</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://count-zero.ru/2018/esp8266_arduino/#10"><span style=" font-size:16px; text-decoration: underline; color:#337ab7; background-color:transparent;">Второй WiFi термометр на датчике AM2320 (добавлено 26.05.19г)</span></a></li></ol>
<p style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><a name="1"></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">1</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">) Установка ESP8266 фреймворка для Arduino IDE</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Домашняя страница ESP8266 фреймворка для Arduino IDE расположена на гитхабе: </span><a href="https://github.com/esp8266/Arduino"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">https://github.com/esp8266/Arduino</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">. Там имеется небольшая инструкция по устаноке фреймворка:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><span style=" font-family:'monospace'; font-size:18pt; color:#ff8c00;">Установка через менеджер плат Arduino</span><span style=" font-family:'monospace'; color:#ff8c00;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><span style=" font-family:'monospace'; color:#ff8c00;">Начиная с версии 1.6.4, Arduino IDE позволяет устанавливать пакеты поддержки сторонних платформ через менеджер плат. Мы имеем пакеты доступные для Windows, Mac OS и Linux (для 32-бит и 64-бит).</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%; font-family:'monospace'; color:#ff8c00;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%; font-family:'monospace'; color:#ff8c00;"><br /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'monospace'; color:#ff8c00;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Установите Arduino IDE версии 1.8 или выше. Текущая версия Arduino IDE находится на сайте проекта Arduino.</li>
<li style=" font-family:'monospace'; color:#ff8c00;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">	</li>
<li style=" font-family:'monospace'; color:#ff8c00;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запустите Arduino IDE и откройте через меню окно настроек (Preferences).</li>
<li style=" font-family:'monospace'; color:#ff8c00;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">	</li>
<li style=" font-family:'monospace'; color:#ff8c00;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Введите в поле адреса дополнительных плат менеджера строку: <a href="http://arduino.esp8266.com/stable/package_esp8266com_index.json"><span style=" text-decoration: underline; color:#337ab7; background-color:transparent;">http://arduino.esp8266.com/stable/package_esp8266com_index.json</span></a>. Вы можете указывать несколько адресов разделяя их запятыми.</li>
<li style=" font-family:'monospace'; color:#ff8c00;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">	</li>
<li style=" font-family:'monospace'; color:#ff8c00;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Откройте менеджер плат через: меню-&gt; инструменты -&gt; платы -&gt; менеджер плат и установите платформу esp8266 (не забудьте выбрать версию вашей ESP8266-платы поле установки).</li></ul>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Действуя в соответствии с этой инструкцией, прописываем в настройках Arduino IDE адрес репозитория &quot;</span><a href="http://arduino.esp8266.com/stable/package_esp8266com_index.json"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">http://arduino.esp8266.com/stable/package_esp8266com_index.json</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">&quot;:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1678116933hfsgebcfqb.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">В менеджере плат устанавливаем пакет поддержки плат esp8266:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1678116933ovbvyaglac.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">После установки пакета поддержки esp8266, выставляем в настройках свою плату, в моем случае это nodemcu на модуле esp12e, а настройки платы можно оставить по умолчанию:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:-15px; margin-right:-15px; -qt-block-indent:0; text-indent:0px;"><img src="image16781169334fue9j360x.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:-15px; margin-right:-15px; -qt-block-indent:0; text-indent:0px;"><img src="image16781169338d6j5ucb7l.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь подключаем плату NodeMCU к компьютеру, выбираем последовательный порт в Arduino IDE, находим в примерах для ESP8266 тестовый скетч &quot;Blink&quot;, компилируем, загружаем и наслаждаемся ровным миганием синего светодиода:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1678116933y8ie82n137.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Прошивка занимает почти четверь мегабайта, а процесс прошивки занимает примерно секунд двадцать. Если вы не горите желанием написать свою реализацию TCP/IP стека, то стоит принять это как данность.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Значение константы LED_BUILTIN определенно в файле ~/.arduino15/packages/esp8266/hardware/esp8266/2.4.2/variants/nodemcu/pins_arduino.h:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">#ifndef Pins_Arduino_h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">#define Pins_Arduino_h</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">#define PIN_WIRE_SDA (4)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">#define PIN_WIRE_SCL (5)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t SDA = PIN_WIRE_SDA;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t SCL = PIN_WIRE_SCL;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">#define LED_BUILTIN 16</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D0   = 16;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D1   = 5;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D2   = 4;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D3   = 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D4   = 2;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D5   = 14;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D6   = 12;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D7   = 13;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D8   = 15;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D9   = 3;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">static const uint8_t D10  = 1;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Т.е. LED_BUILTIN это GPIO_16. Если мы хотим помигать светодиодом который установлен на модуле ESP12E, то приведем скетч к следующему виду:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">setup</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">pinMode</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(D4, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">OUTPUT</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);     </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Initialize the LED_BUILTIN pin as an output</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// the loop function runs over and over again forever</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">digitalWrite</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(D4, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">LOW</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);   </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Turn the LED on (Note that LOW is the voltage level</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// but actually the LED is on; this is because</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// it is active low on the ESP-</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);                      </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Wait for a second</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">digitalWrite</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(D4, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">HIGH</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Turn the LED off by making the voltage HIGH</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">2000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);                      </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Wait for two seconds (to demonstrate the active low LED)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><a name="2"></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">2</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">) Подключение датчика DHT11 к ESP8266</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь нам нужно подключить к ESP8266 несколько сенсоров чтобы впоследствии передавать данные с них через WiFi.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Для начала возьмём популярной датчик температуры и влажности DHT11. Его подключение будет выглядеть так:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1678116933fxbi8wdzuz.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Датчик имеет три рабочих пина: первый пин - питание; второй пин - вывод данных, его следует подтягивать к питанию; третий пин никуда не подключается ; четвертый пин - это земля. Для подтяжки второго пина к питанию я использовал резистор на 4.7К, но т.к. датчик не скоростной, то должны сгодиться резисторы и на 10К или даже на 47К. Датчик может питаться от 3.3 Вольт, что нас вполне устраивает.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">В качестве библиотеки возьмём библиотеку от Adafruit </span><a href="https://github.com/adafruit/DHT-sensor-library"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">https://github.com/adafruit/DHT-sensor-library</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">, т.к. она универсальна и поддерживает датчики DH11, DHT22(AM2302, AM2321) и DHT21(AM2301). Правда для своей работы она требует ещё одну библиотеку: </span><a href="https://github.com/adafruit/Adafruit_Sensor"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">https://github.com/adafruit/Adafruit_Sensor</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">, её тоже надо будет установить.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">После установки библиотек и подключения датчика DHT11 к ESP8266, загрузим в Arduino IDE тестовый скетч:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//This example for use ESP8266 with Adafruit DHT11 library: </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//</span><a href="https://github.com/adafruit/DHT-sensor-library"><span style=" font-family:'monospace'; font-size:10pt; text-decoration: underline; color:#337ab7; background-color:transparent;">https://github.com/adafruit/DHT-sensor-library</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;DHT.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// connect data pin of DHT11 to D2 ESP8266 NodeMCU</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#define DHTPIN D2    </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#6495ed; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Uncomment whatever type you're using!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#define DHTTYPE DHT11   </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// DHT </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">11</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//#define DHTTYPE DHT22   // DHT </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">22</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">  (AM2302), AM2321</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//#define DHTTYPE DHT21   // DHT </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">21</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> (AM2301)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#8080ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Connect pin </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> (on the left) of the sensor to +5V</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// NOTE: If using a board with </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">3.3</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">V logic like an Arduino Due connect pin </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// to </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">3.3</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">V instead of 5V!</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Connect pin </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">2</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> of the sensor to whatever your DHTPIN is</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Connect pin </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">4</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> (on the right) of the sensor to GROUND</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Connect a 10K resistor from pin </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">2</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> (data) to pin </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> (power) of the sensor</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#8080ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">DHT dht(DHTPIN, DHTTYPE);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">bool</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> led_status=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">false</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">setup</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">pinMode</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(LED_BUILTIN, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">OUTPUT</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  dht.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">2000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  led_status=!led_status;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">float</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> h = dht.readHumidity();     </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get humidity</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">float</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> t = dht.readTemperature();  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get temperature</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ( !isnan(h) &amp;&amp; !isnan(t)) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Humidity: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(h);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; %  Temperature: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(t);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; *C &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">digitalWrite</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(LED_BUILTIN,led_status);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Если всё было сделано правильно, то после компиляции и загрузки прошивки, в мониторе последовательного порта можно будет наблюдать показания датчика:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image167811693327hq82xapm.png" /></p>
<p style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><a name="3"></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">3</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">) Подключение датчика DS18B20 к ESP8266</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Вторым датчиком который мы подключим ESP8266, будет DS18B20. Схема его подключения к NodeMCU ESP8266 показана ниже:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1678116933l1imgu22tx.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Здесь, так же как и в случае с DHT11, Data pin подтягивается к шине питания через резистор номиналом 4.7КОм.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Для работы с датчиком DS18B20 будем использовать библиотеку OneWire: </span><a href="https://github.com/PaulStoffregen/OneWire/"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">https://github.com/PaulStoffregen/OneWire/</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">. Эта библиотека как же поддерживает несколько моделей датчиков Dallas Semiconductor, что нам только на руку.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Подключаем датчик к плате NodeMCU, скачиваем библиотеку &quot;OneWire&quot; и открываем пример DS18x20_Temperature.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">В примере правим строку:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">OneWire ds(10);  // on pin 10 (a 4.7K resistor is necessary)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">на:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">OneWire ds(D1);  // on pin 10 (a 4.7K resistor is necessary)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">также можно еще скорость UART поднять до значения 115200</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Serial.begin(115200);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Если все было сделано правильно, то после компиляции примера и загрузки прошивки в микроконтроллер, мы получим следующий лог работы в мониторе последовательного порта:</span><img src="image167811693331j98cx4wh.png" /></p>
<p style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><a name="4"></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">4</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">) Установка WiFi соединения</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь, когда у нас есть данные, которые нужно куда-то передавать, самое время разобраться с библиотекой ESP8266WIFI, с помощью которой мы будем это делать.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Библиотека ESP8266WIFI имеет схожий API c библиотекой </span><a href="https://www.arduino.cc/en/Reference/WiFi"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">Arduino WIFI</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Различия заключаются в следующем (взято из </span><a href="http://esp8266.github.io/Arduino/versions/2.1.0-rc1/doc/libraries.html"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">http://esp8266.github.io/Arduino/versions/2.1.0-rc1/doc/libraries.html</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">):</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Добавлен метод WiFi.mode(m), который устанавливает режим работы WiFi. Здесь m - может принимать значения: WIFI_AP, WIFI_STA, WIFI_AP_STA или WIFI_OFF.</span></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Добавлен метод WiFi.softAP(ssid), который переключает WiFi к режим открытой точки доступа.</span></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Добавлен метод WiFi.softAP(ssid, password), который переключает WiFi к режим закрытой точки доступа с защитой WPA2-PSK, где ключ/password должен быть не менее восьми символов.</span></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">WiFi.macAddress(mac) возвращает MAC-адрес в случае режима STA, WiFi.softAPmacAddress(mac) тоже самое в случае режима AP.</span></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">WiFi.localIP() возвращает локальный IP-адрес в случае режима STA, WiFi.softAPIP() тоже самое в случае режима AP.</span></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">WiFi.printDiag(Serial) печать через UART диагностической информации.</span></li>
<li style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;" style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:16px;">Класс WiFiUDP реализует отправку и приём широковещательных multicast пакетов в STA режиме. При отправке пакетов, метод udp.beginPacket(addr, port)заменяется на udp.beginPacketMulticast(addr, port, WiFi.localIP()). class supports sending and receiving multicast packets on STA interface. При приёме пакетов, udp.beginPacket(addr, port) заменяется на udp.beginMulticast(WiFi.localIP(), multicast_ip_addr, port). Вы можете использовать udp.destinationIP() для задания multicast или unicast адреса.</span></li></ul>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Опираясь на эту информацию, начинаем писать код.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">В составе библиотеки ESP8266WIFI имеется 17 примеров, среди которых имеется пример для сканирования доступных точек доступа: WIFIScan. Я переписал его на свой манер:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;ESP8266WiFi.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">setup</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Set WiFi to station mode and disconnect from an AP if it was previously connected</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; n; ++i) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(i+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.SSID(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; (&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.RSSI(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;)&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ssid=(WiFi.encryptionType(i) == ENC_TYPE_NONE) ? ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> : ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;*\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(ssid);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;no networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Результат работы программы выглядит так:</span><img src="image16781169335nd8esk4ms.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Действие программы соответствует AT-команде CWLAP, её можно свернуть в функцию с названием, скажем list_wifi(). На базе этой функции можно написать другую, которая будет искать определенную точку доступа. Можно ее будет также наделить полезным свойством, возвращать в случае обнаружения заданной точки доступа уровень ее сигнала rssi. Т.о. получим функцию двойного назначения get_rssi():</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;ESP8266WiFi.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Alien&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">setup</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid)))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Success: AP was found.&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Error: AP was not found.&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (ssid.equals(WiFi.SSID(--n))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ret=WiFi.RSSI(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; n; ++i) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(i+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.SSID(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; (&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.RSSI(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;)&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ssid=(WiFi.encryptionType(i) == ENC_TYPE_NONE) ? ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> : ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;*\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(ssid);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;no networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Дело осталось за малым, установить соединение с точной доступа. У меня это получилось так:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;ESP8266WiFi.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Alien&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_pass=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;password&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">setup</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(!get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">5000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid,your_pass);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (WiFi.status() != WL_CONNECTED){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">500</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Connected, IP address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(WiFi.localIP());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;MAC address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(WiFi.macAddress());</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">5000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (ssid.equals(WiFi.SSID(--n))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">          ret=WiFi.RSSI(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; n; ++i) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(i+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.SSID(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; (&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.RSSI(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;)&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ssid=(WiFi.encryptionType(i) == ENC_TYPE_NONE) ? ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> : ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;*\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(ssid);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;no networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><a name="5"></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">5</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">) Использование режима энергосбережения DeepSleep</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь вместо задержки на функции delay() будем посылать ESP8266 в режим энергосбережения. Для этого нам нужно будет соединить выводы D0 и RST:</span><img src="image1678116933lamgihrd9m.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">После этого, заменим в главном цикле стоку delay(5000) на ESP.deepSleep(3e7), которая отправит в ESP8266 в режим энергосбережения. Параметр &quot;3e7&quot; означает 3*10^7 микросекунд, т.е. тридцать секунд.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Лог работы программы будет выглядеть теперь так:</span><img src="image167811693312p6orsv04.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Здесь непечатные символы, это отладочное сообщение при выходе ESP8266 из режима энергосбережения.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Для более корректной работы, мы можем поменять алгоритм таким образом: 1)пусть в начале главного цикла сначала устанавливается WiFi соединение, 2) потом путь передаются данные, 3) после этого WiFi соединение разрывается, и ESP8266 уходит в режим энергосбережения.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Примерно так:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;ESP8266WiFi.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Alien&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_pass=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;password&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">setup</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Connect to SSID</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(!get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">5000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid,your_pass);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (WiFi.status() != WL_CONNECTED){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">500</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\nConnected, IP address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(WiFi.localIP());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;MAC address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(WiFi.macAddress());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// disconnect</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// sleep</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    ESP.deepSleep(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">3e7</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// 30s</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (ssid.equals(WiFi.SSID(--n))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">          ret=WiFi.RSSI(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; n; ++i) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(i+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.SSID(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; (&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.RSSI(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;)&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ssid=(WiFi.encryptionType(i) == ENC_TYPE_NONE) ? ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> : ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;*\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(ssid);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;no networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><a name="6"></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">6</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">) Класс WiFiClient, получение web-страницы от сервера на OpenWRT и отправка данных через GET запрос</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь нужно научиться скачивать что-либо с web-сервера. Так же как и в </span><a href="https://count-zero.ru/2018/esp8266/#13"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">предыдущей статье </span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">, в качестве web-сервера я использовал uhttpd-сервер установленный на роутере с прошивкой OpenWRT.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Класс WiFiCliet реализует установку TCP соединения с сервером. Демонстрационный пример его использования можно найти здесь: </span><a href="https://arduino-esp8266.readthedocs.io/en/latest/esp8266wifi/client-examples.html"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">Client — ESP8266 Arduino Core 2.4.0 documentation</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">. Я адаптировал этот пример под свой случай, и в итоге получилось так:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;ESP8266WiFi.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Alien&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_pass=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;password&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//const char* host = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;</span><a href="http://www.example.com/"><span style=" font-family:'monospace'; font-size:10pt; text-decoration: underline; color:#337ab7; background-color:transparent;">www.example.com</span></a><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">IPAddress host(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">192</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">168</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//  alien</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">const</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> httpPort = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">8010</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">setup</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Connect to SSID</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(!get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">5000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid,your_pass);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (WiFi.status() != WL_CONNECTED){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">500</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\nConnected, IP address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(WiFi.localIP());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;MAC address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(WiFi.macAddress());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// GET request</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFiClient client;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.connect(host, httpPort)) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        client.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;GET /&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; HTTP/1.1\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                      </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Host: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + host + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                      </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Connection: close\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                      </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\r\n&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                    );</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;[Response:]&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.connected() || client.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">available</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">()){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">available</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">()) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> line = client.readStringUntil(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">'\n'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(line);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n[Disconnected]&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        client.stop();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;connection failed&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// disconnect</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// sleep</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    ESP.deepSleep(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">3e7</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// 30s</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (ssid.equals(WiFi.SSID(--n))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">          ret=WiFi.RSSI(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; n; ++i) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(i+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.SSID(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; (&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.RSSI(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;)&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ssid=(WiFi.encryptionType(i) == ENC_TYPE_NONE) ? ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> : ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;*\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(ssid);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;no networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Результат работы программы выглядит так:</span><img src="image1678116933uwx01392a6.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Для контроля можно взглянуть на дамп соединения в Wireshark:</span><img src="image16781169336rn2z29e1w.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Как видно, соединение осуществляется без ошибок. Красная строчка показывает закрытие соединения клиентом, с помощью вызова WiFi.disconnect().</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь аналогично предыдущей статье: </span><a href="https://count-zero.ru/2018/esp8266/#16"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">Отправка данных от ESP8266 на web-сервер OpenWRT через GET запрос</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">, мы можем отправлять на веб-сервер свои данные через GET-запрос.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Изменим в программе строку:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">client.print(String(&quot;GET /&quot;) + &quot; HTTP/1.1\r\n&quot; +</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">на:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">client.print(String(&quot;GET /cgi-bin/esp8266.cgi?var1=11&amp;var2=-30&amp;var3=17&quot;) + &quot; HTTP/1.1\r\n&quot; +</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">После чего заново компилируем и перепрошиваем esp8266. Смотрим на результат работы программы:</span><img src="image1678116933k3hgwysmmr.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Как видно, данные успешно уходят на сервер.</span></p>
<p style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><a name="7"></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">7</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">) Отправка на web-сервер данных с датчика DHT11 через GET запрос</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь нам нужно добавить к получению данных с датчика DHT11, отправку их на web-сервер через GET-запрос, как это делалось в предыдущей статье: </span><a href="https://count-zero.ru/2018/esp8266/#16"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">Отправка данных от ESP8266 на web-сервер OpenWRT через GET запрос</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Программа в данном случае получается такой:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;ESP8266WiFi.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;DHT.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//----------- ESP8266------------------</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Alien&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_pass=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;password&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//const char* host = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;</span><a href="http://www.example.com/"><span style=" font-family:'monospace'; font-size:10pt; text-decoration: underline; color:#337ab7; background-color:transparent;">www.example.com</span></a><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">IPAddress host(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">192</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">168</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//  alien</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">const</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> httpPort = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">8010</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//----------- DHT11------------------- </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#define DHTPIN D2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#define DHTTYPE DHT11   </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// DHT </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">11</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">DHT dht(DHTPIN, DHTTYPE);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//------------------------------------</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">setup</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    dht.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get data from DHT11</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">float</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> h = dht.readHumidity();     </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get humidity</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">float</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> t = dht.readTemperature();  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get temperature</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#8080ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Connect to SSID</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(!get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">5000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid,your_pass);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (WiFi.status() != WL_CONNECTED){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">500</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\nConnected, IP address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(WiFi.localIP());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;MAC address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(WiFi.macAddress());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ( !isnan(h) &amp;&amp; !isnan(t)) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> hum_str=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(h);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> temp_str=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(t);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Humidity: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + hum_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; %  Temperature: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + temp_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; *C &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// GET request</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        WiFiClient client;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.connect(host, httpPort)) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            client.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;GET /cgi-bin/sensors.cgi?var1=&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                          hum_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;&amp;var2=&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + temp_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; HTTP/1.1\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Host: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + host + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Connection: close\r\n\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;[Response:]&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.connected() || client.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">available</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">()){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">available</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">()) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> line = client.readStringUntil(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">'\n'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(line);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n[Disconnected]&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            client.stop();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;connection failed&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// disconnect</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// sleep</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    ESP.deepSleep(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">6e7</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> minute</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (ssid.equals(WiFi.SSID(--n))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">          ret=WiFi.RSSI(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; n; ++i) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(i+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.SSID(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; (&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.RSSI(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;)&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ssid=(WiFi.encryptionType(i) == ENC_TYPE_NONE) ? ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> : ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;*\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(ssid);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;no networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Для приёма данных, на стороне сервера нужно будет добавить cgi скрипт sensors.cgi следующего содержания:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">#!/bin/sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Status: 200 OK\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Content-type: text/html\r\n\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h1&gt;ESP8266 -  GET Request Example&lt;/h1&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">line</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$QUERY_STRING</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|sed</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">s/&amp;/   /g</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> loop </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">in</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$line</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">do</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">name</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">type=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $2}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">var</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">printf</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">${name}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">${type}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">eval</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">printf</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">done</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-z</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> &amp;&amp; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">exit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-z</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> &amp;&amp; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">exit</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var2</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#6495ed; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/site/sensors</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">date +%d_%m_%y</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-d</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> || </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">mkdir</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">-p</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">date</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> humidity: </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> temperature: </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Данный скрипт записывает полученные показания датчиков в файлы вида: '/site/sensors/&quot;дата&quot;/log.txt'. Файлы автоматически разбиваются по дням. Формат файлов выглядит так:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 14:56:18 SAMT 2018 humidity: 19.00 temperature: 24.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 14:57:21 SAMT 2018 humidity: 19.00 temperature: 24.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 14:58:25 SAMT 2018 humidity: 19.00 temperature: 24.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 14:59:32 SAMT 2018 humidity: 19.00 temperature: 24.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 15:00:35 SAMT 2018 humidity: 19.00 temperature: 24.00</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 15:01:39 SAMT 2018 humidity: 19.00 temperature: 24.00</span></p>
<p style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><a name="8"></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">8</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">) Добавление датчика DS18B20</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь нужно добавить опрос датчика DS18B20, и передачу его данных на web-сервер. Для этого я добавил в программу код из примера &quot;DS18x20_Temperature&quot; библиотеки OneWire. Этот пример поддерживает датчики: DS18S20, DS18B20, DS1822. Я не стал его упрощать затачивая конкретно под свой DS18B20, а оставил как есть:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;ESP8266WiFi.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;OneWire.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;DHT.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//----------- ESP8266------------------</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Alien&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_pass=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;viva@calman!&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//const char* host = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;</span><a href="http://www.example.com/"><span style=" font-family:'monospace'; font-size:10pt; text-decoration: underline; color:#337ab7; background-color:transparent;">www.example.com</span></a><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">IPAddress host(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">192</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">168</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//  alien</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">const</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> httpPort = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">8010</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//----------- DHT11------------------- </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#define DHTPIN D2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#define DHTTYPE DHT11   </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// DHT </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">11</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">DHT dht(DHTPIN, DHTTYPE);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//---------- DS18B20-------------------</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">OneWire  ds(D1);  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// on pin </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> (a </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">4.7</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">K resistor is necessary)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//------------------------------------</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">setup</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    dht.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">byte</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> i;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">byte</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> present = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">byte</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> type_s;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">byte</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> data[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">12</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">byte</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> addr[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">8</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">float</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> celsius, fahrenheit;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get data from DHT11</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">float</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> h = dht.readHumidity();     </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get humidity</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">float</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> t = dht.readTemperature();  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get temperature</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#8080ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Connect to SSID</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(!get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">5000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">begin</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(your_ssid,your_pass);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (WiFi.status() != WL_CONNECTED){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">500</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\nConnected, IP address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(WiFi.localIP());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;MAC address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(WiFi.macAddress());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ( !ds.search(addr)) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;No more addresses.&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        ds.reset_search();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">250</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ( !isnan(h) &amp;&amp; !isnan(t)) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> hum_str=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(h);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> temp_str=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(t);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Humidity: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + hum_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; %  Temperature: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + temp_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; *C &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get data from DS18B20 </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;ROM =&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">( i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">8</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i++) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">write</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">' '</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(addr[i], </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">HEX</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (OneWire::crc8(addr, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">7</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) != addr[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">7</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">]) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;CRC is not valid!&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// the first ROM byte indicates which chip</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">switch</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (addr[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">]) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">case</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0x10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;  Chip = DS18S20&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// or old DS1820</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                type_s = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">case</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0x28</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;  Chip = DS18B20&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                type_s = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">case</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0x22</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;  Chip = DS1822&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                type_s = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">default</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">              </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Device is not a DS18x20 family device.&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">              </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        ds.reset();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        ds.select(addr);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        ds.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">write</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0x44</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// start conversion, with parasite power on at the end</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#8080ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);     </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// maybe 750ms is enough, maybe not</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// we might do a ds.depower() here, but the reset will take care of it.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#8080ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        present = ds.reset();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        ds.select(addr);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        ds.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">write</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0xBE</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);         </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Read Scratchpad</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#8080ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;  Data = &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(present, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">HEX</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ( i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">9</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i++) {           </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// we need </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">9</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> bytes</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            data[i] = ds.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">read</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(data[i], </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">HEX</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; CRC=&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(OneWire::crc8(data, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">8</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">), </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">HEX</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Convert the data to actual temperature</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// because the result is a </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">16</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> bit signed integer, it should</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// be stored to an </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;int16_t&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> type, which is always </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">16</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> bits</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// even when compiled on a </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">32</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> bit processor.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int16_t</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> raw = (data[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">] &lt;&lt; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">8</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) | data[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (type_s) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            raw = raw &lt;&lt; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">3</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">9</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> bit resolution default</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (data[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">7</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">] == </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0x10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;count remain&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> gives full </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">12</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> bit resolution</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                raw = (raw &amp; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0xFFF0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">12</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> - data[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">6</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">byte</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> cfg = (data[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">4</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">] &amp; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0x60</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// at lower res, the low bits are undefined, so let's zero them</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (cfg == </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0x00</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) raw = raw &amp; ~</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">7</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">9</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> bit resolution, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">93.75</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> ms</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (cfg == </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0x20</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) raw = raw &amp; ~</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">3</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> bit res, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">187.5</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> ms</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (cfg == </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0x40</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) raw = raw &amp; ~</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">11</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> bit res, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">375</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> ms</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//// default is </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">12</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> bit resolution, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">750</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> ms conversion time</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        celsius = (</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">float</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">)raw / </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">16.0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        fahrenheit = celsius * </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1.8</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">32.0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;  Temperature = &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(celsius);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; Celsius, &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(fahrenheit);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; Fahrenheit&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ds18b20_str=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(celsius);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// GET request</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        WiFiClient client;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.connect(host, httpPort)) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            client.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;GET /cgi-bin/sensors.cgi?var1=&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                          hum_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;&amp;var2=&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + temp_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;&amp;var3=&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + ds18b20_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; HTTP/1.1\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Host: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + host + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Connection: close\r\n\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;[Response:]&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.connected() || client.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">available</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">()){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">available</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">()) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> line = client.readStringUntil(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">'\n'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(line);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n[Disconnected]&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            client.stop();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;connection failed&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// disconnect</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// sleep</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    ESP.deepSleep(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">3e8</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">5</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> minutes</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (ssid.equals(WiFi.SSID(--n))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">          ret=WiFi.RSSI(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; n; ++i) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">String</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(i+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.SSID(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; (&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.RSSI(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;)&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ssid=(WiFi.encryptionType(i) == ENC_TYPE_NONE) ? ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> : ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;*\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">print</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(ssid);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">delay</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">Serial</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">.</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">println</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;no networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Также немного придётся поправить cgi скрипт для приёма и записи показаний датчика DS18B20:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">#!/bin/sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Status: 200 OK\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Content-type: text/html\r\n\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h1&gt;ESP8266 -  GET Request Example&lt;/h1&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">line</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$QUERY_STRING</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|sed</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">s/&amp;/   /g</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> loop </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">in</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$line</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">do</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">name</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">type=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $2}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">var</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">printf</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">${name}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">${type}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">eval</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">printf</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">done</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-z</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> &amp;&amp; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">exit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-z</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> &amp;&amp; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">exit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-z</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var3</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> &amp;&amp; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">exit</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var3</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#6495ed; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/site/sensors</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">date +%d_%m_%y</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-d</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> || </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">mkdir</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">-p</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">date</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> ds18b20: </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var3</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> humidity: </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> temperature: </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь показания датчиков выглядят следующим образом:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 16:34:52 SAMT 2018 ds18b20: 20.88 humidity: 17.00 temperature: 27.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 16:39:42 SAMT 2018 ds18b20: 5.12 humidity: 17.00 temperature: 27.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 16:44:32 SAMT 2018 ds18b20: -2.25 humidity: 19.00 temperature: 24.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 16:49:23 SAMT 2018 ds18b20: -4.44 humidity: 19.00 temperature: 24.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 16:54:14 SAMT 2018 ds18b20: -5.25 humidity: 19.00 temperature: 24.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 16:59:04 SAMT 2018 ds18b20: -5.69 humidity: 19.00 temperature: 23.00</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;">Sat Dec 15 17:03:55 SAMT 2018 ds18b20: -5.87 humidity: 19.00 temperature: 23.00</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Здесь ds18b20 снимает показания по одну сторону окна, а dht11 - по другую.</span></p>
<p style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><a name="9"></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">9</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">) Вывод показаний датчиков через веб-интерфейс</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь нам нужно реализовать вывод данных через веб-интерфейс. Для этого напишем два CGI скрипта. Первый будет выводить лог измерений за текущие сутки, а второй будет выводить текущие значения. К сожалению я не обнаружил в uhttpd сервере поддержки </span><a href="https://ru.wikipedia.org/wiki/SSI_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5)"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">SSI</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">, поэтому генерацию html кода пришлось полностью реализовывать через шелл-скрипы.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">GCI скрипт для вывода лога измерений получился таким:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">#!/bin/sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Status: 200 OK\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Content-type: text/html\r\n\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;!DOCTYPE html&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;html&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;head&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">   &lt;meta charset=&quot;utf-8&quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;style&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">body { background-color: #333333; color: white; } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/style&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;title&gt;Weather Log&lt;/title&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/head&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;body&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/site/sensors</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">date +%d_%m_%y</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-f</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> || </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">exit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while read LINE; do</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;p&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$LINE</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/p&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">done</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&lt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/body&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/html&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Он довольно простой. Второй скрипт будет поинтереснее:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">#!/bin/sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Status: 200 OK\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Content-type: text/html\r\n\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;!DOCTYPE html&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;html&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;head&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">   &lt;meta charset=&quot;utf-8&quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;style&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">body { background-color: #333333; color: white; } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/style&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;title&gt;Weather Station&lt;/title&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/head&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;body&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/site/sensors</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">date +%d_%m_%y</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-f</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> || </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">exit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">tail</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n1 </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h1&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">|awk </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">-F</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">ds18b20</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h1&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Outdoor temperature is:</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F : </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $4}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l3</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F . </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if [</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l3</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-ge</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">];</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">then</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: red; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: blue; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&amp;deg;C</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/span&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Indoor temperature is:</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l4</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F : </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $6}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l5</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l4</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F . </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if [</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l5</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-ge</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">];</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">then</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: red; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: blue; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l4</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&amp;deg;C</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/span&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Indoor humidity is:</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l6</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F : </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $5}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l7</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l6</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F . </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: grey; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l6</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">%</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/span&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/body&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/html&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">По желанию еще можно добавить JavaScript для автоматического обновления содержимого страницы.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Результат работы последнего скрипта на экране мобильника выглядит так:</span><img src="image1678116933jewsoc9dx9.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">В заключение хочу ещё добавить, что нужно внимательно отнестись к установке датчика уличной температуры. Он должен быть защищён от ветра и прямого солнечного света. Также он не должен напрямую соприкасаться со стеной или окном жилого дома. По моим наблюдениям, расстояние в 10см от стены дома достаточно для корректных показаний.</span></p>
<p style=" margin-top:20px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.1%;"><a name="10"></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">1</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; font-weight:496; color:#45342e;">0) Второй WiFi термометр на датчике AM2320 (добавлено 26.05.19г)</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Спустя полгода после изготовления термометра, должен сказать, что он получился довольно удачным. Это очень удобно, проснувшись утром взять смартфон, и тут же посмотреть какая температура сегодня за окном. Не нужно подходить к замороженому окну и пытаться разглядеть что-то за замороженым окном в темноте.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь же, с приближением лета, возникла необходимость в изготовлении второго термометра. Для чего вам может понадобиться второй уличный термометр? Если у вас окна выходят на север, то вы можете не волноваться за результаты показаний термометра, он скорее-всего будет всегда казать температуру приближенную к реальной. Если же у вас все окна выходят на юг, то даже если вы будете как-то пытаться экранировать сенсор, солнце все равно будет засвечивать его, и показания &quot;поплывут&quot;. Если же у вас, как и у меня окна, выходят на восток и запад, то большую часть года вполне можно обойтись термометром на восточном окне. Однако летом, как только встает солнце мой спрятанный под карнизом DS18B20 начинает показывать температуру кипения хлорного ангидрида, что для земной атмосферы несколько ненормально.</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">К счастью, имеется второе окно на западной стороне на которое можно повесить дополнительный WiFi-термометр. Делать еще один термометр на DS18B20 мне было не интересно, поэтому был куплен датчик AM2320 который кроме температуры еще измеряет и относительную влажность воздуха. Согласно даташиту на датчик: &quot;</span><a href="https://count-zero.ru/files/AM2320.pdf"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">Digital Temperature and Humidity Sensor AM2320 Product Manual</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">&quot;, диапазон измеряемой температуры датчика от -40℃ до +80 ℃, с погрешностью в полградуса. Влажность же он измеряет во всем диапазоне с погрешностью +/- 3 %RH. Датчик может питаться от 3 и 5 Вольт, и может работать на I</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">2</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">C протоколе или однопроводному протоколу, наподобие DHT11(не путать с 1-wire).</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Я буду использовать I</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">2</span><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">C интерфейс, на ESP12E/ESP12F он расположен на GPIO4 (SDA) и GPIO5 (SCL). На NodeMCU это соответственно выводы D2 и D1:</span><img src="image1678116933p3go32yqkw.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Подключается датчик к NodeMCU таким образом:</span><img src="image1678116933cvvjqy1l6b.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Подтягивающие резисторы на линии SDA и SDL ставить не надо, они есть в самом датчике. Так же как и в случае с DHT11, для работы с датчиком нам понадобится библиотека </span><a href="https://github.com/adafruit/Adafruit_Sensor"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">https://github.com/adafruit/Adafruit_Sensor</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">. Кроме этого, понадобится библиотека непосредствено работающая с AM2320 </span><a href="https://github.com/adafruit/Adafruit_AM2320"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#337ab7; background-color:transparent;">https://github.com/adafruit/Adafruit_AM2320</span></a><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">. Последняя содержит скетч для проверки работы датчика:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Adafruit_Sensor.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Adafruit_AM2320.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">Adafruit_AM2320 am2320 = Adafruit_AM2320();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> setup() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.begin(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (!Serial) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// hang out until serial port opens</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.println(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Adafruit AM2320 Basic Test&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  am2320.begin();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> loop() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Temp: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); Serial.println(am2320.readTemperature());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Hum: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); Serial.println(am2320.readHumidity());</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">2000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">После компиляции скетча и прошивки NodeMCU, в окне терминала мы должны увидеть лог работы:</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image16781169333ydbeykouh.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Остальное - дело техники. Действуя по аналогии с датчиком DHT11, напишем скетч с соединением с точкой доступа, и уходом в спящий режим:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Adafruit_Sensor.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Adafruit_AM2320.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;ESP8266WiFi.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">Adafruit_AM2320 am2320 = Adafruit_AM2320();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Alien&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_pass=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;password&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(String ssid);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> setup() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.begin(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (!Serial) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// hang out until serial port opens</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  am2320.begin();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> loop() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Connect to SSID</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(!get_rssi(String(your_ssid))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">5000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  WiFi.begin(your_ssid,your_pass);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (WiFi.status() != WL_CONNECTED){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">500</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Connected, IP address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.println(WiFi.localIP());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;MAC address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.println(WiFi.macAddress());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Temp: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); Serial.println(am2320.readTemperature());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Hum: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); Serial.println(am2320.readHumidity());</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// disconnect</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// sleep</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  ESP.deepSleep(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">6e7</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> minute</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(String ssid) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (ssid.equals(WiFi.SSID(--n))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ret=WiFi.RSSI(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        Serial.print(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        Serial.println(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; n; ++i) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            String ssid=String(i+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.SSID(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; (&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.RSSI(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;)&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ssid=(WiFi.encryptionType(i) == ENC_TYPE_NONE) ? ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> : ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;*\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            Serial.print(ssid);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        Serial.println(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;no networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">В терминале должен пойти лог такого вида:</span><img src="image167811693365azj83f85.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Теперь на роутере напишем CGI-скрипт &quot;/site/cgi-bin/am2320.cgi&quot; для приема и сохранения результатов измерений датчика:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">#!/bin/sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Status: 200 OK\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Content-type: text/html\r\n\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h1&gt;ESP8266 -  GET Request Example&lt;/h1&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">line</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$QUERY_STRING</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|sed</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">s/&amp;/   /g</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> loop </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">in</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$line</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">do</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">name</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">type=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$loop</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $2}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">var</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">printf</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">${name}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">${type}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">eval</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">printf</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">done</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-z</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> &amp;&amp; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">exit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-z</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> &amp;&amp; </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">exit</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var2</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#6495ed; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/site/sensors</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">date +%d_%m_%y</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-d</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> || </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">mkdir</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">-p</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">date</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> am2320 - </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> humidity: </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> temperature: </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$var2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&gt;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Осталось привести скетч ESP8266 к окончательному рабочему виду:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Adafruit_Sensor.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Adafruit_AM2320.h&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">#include </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;ESP8266WiFi.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ff40ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">Adafruit_AM2320 am2320 = Adafruit_AM2320();</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_ssid=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Alien&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">char</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> * your_pass=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;password&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">IPAddress host(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">192</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">168</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">, </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//  alien</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">const</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> httpPort = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">8010</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(String ssid);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> setup() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.begin(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">115200</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (!Serial) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">); </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// hang out until serial port opens</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  am2320.begin();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">void</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> loop() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// Connect to SSID</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">(!get_rssi(String(your_ssid))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">5000</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  WiFi.begin(your_ssid,your_pass);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (WiFi.status() != WL_CONNECTED){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">      delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">500</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Connected, IP address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.println(WiFi.localIP());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;MAC address: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.println(WiFi.macAddress());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// get data</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">float</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> t = am2320.readTemperature();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">float</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> h = am2320.readHumidity();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ( !isnan(h) &amp;&amp; !isnan(t)) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        String hum_str=String(h);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        String temp_str=String(t);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        Serial.println(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Humidity: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + hum_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; %  Temperature: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + temp_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; *C &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// GET request</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        WiFiClient client;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.connect(host, httpPort)) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            client.print(String(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;GET /cgi-bin/am2320.cgi?var1=&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                          hum_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;&amp;var2=&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + temp_str + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; HTTP/1.1\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Host: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + host + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> +</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                          </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Connection: close\r\n\r\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            Serial.println(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;[Response:]&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.connected() || client.available()){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (client.available()) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                    String line = client.readStringUntil(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">'\n'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                    Serial.println(line);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">                }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            Serial.println(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n[Disconnected]&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            client.stop();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            Serial.println(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;connection failed&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// disconnect</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Temp: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">); Serial.println(am2320.readTemperature());</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">//Serial.print(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;Hum: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">); Serial.println(am2320.readHumidity());</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#8080ff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// disconnect</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// sleep</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">  ESP.deepSleep(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">6e8</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;"> minutes</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> get_rssi(String ssid) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">while</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (ssid.equals(WiFi.SSID(--n))) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ret=WiFi.RSSI(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">break</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> ret;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffffff; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> list_wifi() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// set wifi mode</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.mode(WIFI_STA);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    WiFi.disconnect();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">100</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">// WiFi.scanNetworks will return the number of networks found</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n = WiFi.scanNetworks();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (n) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        Serial.print(n);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        Serial.println(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">for</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> (</span><span style=" font-family:'monospace'; font-size:10pt; color:#00ff00;">int</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> i = </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">; i &lt; n; ++i) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            String ssid=String(i+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;: &quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.SSID(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot; (&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> + WiFi.RSSI(i) + </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;)&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            ssid=(WiFi.encryptionType(i) == ENC_TYPE_NONE) ? ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> : ssid+</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;*\n&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            Serial.print(ssid);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">            delay(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">10</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">        Serial.println(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&quot;no networks found&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">    </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">return</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> n;</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">}</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Для отображения данных с двух датчиков, скрипт temperature.cgi нужно будет привести, например, к такому виду:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">#!/bin/sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Status: 200 OK\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -en </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Content-type: text/html\r\n\r\n</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;!DOCTYPE html&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;html&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;head&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">   &lt;meta charset=&quot;utf-8&quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;style&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">body { background-color: #333333; color: white; } </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/style&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;title&gt;Weather Station&lt;/title&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/head&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;body&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/site/sensors</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">date +%d_%m_%y</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">[</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-f</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">]</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> || </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">exit</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">grep</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">ds18b20</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|tail</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n1</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">grep</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">am2320</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">/log.txt</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|tail</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n1</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h1&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">|awk </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">-F</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">ds18b20</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h1&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Temperature on east side is:</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F : </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $4}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l3</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F . </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if [</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l3</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-ge</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">];</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">then</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: red; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: blue; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&amp;deg;C</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/span&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h1&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">|awk </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">-F</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">am2320</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h1&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Temperature on west side is:</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">temperature: </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> {</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">print $NF</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">}</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p3</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F . </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if [</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p3</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-ge</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">];</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">then</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: red; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: blue; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p2</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&amp;deg;C</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/span&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Indoor temperature is:</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l4</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F : </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $6}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l5</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l4</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F . </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">if [</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l5</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">-ge</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">0</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">];</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">then</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: red; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">else</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: blue; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l4</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&amp;deg;C</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/span&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Outdor humidity is:</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">p6</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $10}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">#p7=$(echo &quot;$p6&quot;|awk -F . '{print $1}')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: grey; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$p6</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">%</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/span&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:10pt; color:#ffff00; background-color:#333333;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">Indoor humidity is:</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/h2&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#00ffff;">l6</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffffff;">=</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$(</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l1</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk -F : </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $5}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'|</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">awk </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">{print $1}</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#8080ff;">#l7=$(echo &quot;$l6&quot;|awk -F . '{print $1}')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;span style=&quot;color: grey; font-size: 120pt; font-weight: bold; &quot;&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> -n </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#6495ed;">$l6</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">%</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/span&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/body&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#333333;"><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">echo</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;"> </span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span><span style=" font-family:'monospace'; font-size:10pt; color:#ff40ff;">&lt;/html&gt;</span><span style=" font-family:'monospace'; font-size:10pt; color:#ffff00;">'</span></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">Выглядит гадко, но это работает. Итоговый результат на экране смартфона:</span><img src="image167811693327uevp9ik0.png" /></p>
<p style=" margin-top:0px; margin-bottom:10px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e;">В заключение хочу немного сказать об автономном режиме работы ESP8266, т.е. режиме работы от аккумулятора. Мне пока удалось добиться беспрерывной работы всего лишь двое суток. НО. У меня довольно &quot;слабый&quot; аккумулятор. Это одна батарея 18650, сама обычная с али. Ее фактическая емкость где-то 500 или 600 мА. Далее у меня не самая эффективная цепь питания. C батареи питание идет на повышающий до 6 Вольт DC-DC преобразователь. Затем питание проходит через понижающий до 3.3 Вольт линейный преобразователь ams1117-3.3. В итоге, я пока имею только двое суток автономной работы. Work in progress, как говорится.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Helvetica,Arial,sans-serif'; font-size:8.25pt; color:#45342e; vertical-align:middle;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'MS Shell Dlg 2'; font-size:8.25pt;"><br /></span></p></body></html>