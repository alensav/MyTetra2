<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:14pt; color:#000000;">05 октября 2019 г</span></p>
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:14pt; font-weight:600; color:#000000;">Arduino. http запрос. sim800c. Отладка.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:14pt; color:#000000;">Плата Arduino Uno и SIM800c GPRS/GSM Shield</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mirossa.ru/files/arduino/driver_CH341SER.zip"><span style=" font-family:'Times New Roman'; font-size:14pt; font-weight:600; text-decoration: underline; color:#2c415f;">драйвер для USB-UART CH340/CH341 (Windows)</span></a><span style=" font-family:'Times New Roman'; font-size:14pt; color:#000000;"><br /><br /></span><img src="image1960773793.png" /><span style=" font-family:'Times New Roman'; font-size:14pt; color:#000000;"><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:14pt; color:#000000;">Блок питания (например, такой)</span><img src="image628356267.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:14pt; color:#000000;">код скетча.</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#004a43;">#define INTERVALSEND 60000</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#004a43;">#define response_size 100</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#004a43;">#define data_buffer_size 301</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#004a43;">#include </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&lt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#40015a;">SoftwareSerial.h</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#800000; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> TextToInt</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLenRead</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">SoftwareSerial GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">7</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">8</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> onModulePin</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">9</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">long</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> previous</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">response_size</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// это буфер для служебного текста ответов сервера</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> data_buffer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">data_buffer_size</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// это буфер для полезных данных, полученных из ответов сервера</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> userText</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">uint8_t  answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> uint8_t read_answer_httpread</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">const</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> firstPart</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">const</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> secondPart</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">const</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> thirdPart</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> lengthData </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> uint8_t read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">const</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> AtCommand</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">const</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> expected_answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLen</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> uint8_t get_SMSdata_http</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">void</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">void</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> setup</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">begin</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">19200</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">begin</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">9600</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Starting...</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//pinMode(onModulePin,OUTPUT);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//power_on(); // не работает</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  delay</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">3000</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">void</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> loop</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//если отправляем 'g' через монитор порта, то запускается инициализация gprs.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//далее  отправляем 'h' для http запросов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// http соединение каждый раз открывается , делается запрос и оно завершается. Но если возникла ошибка , то соединение не закрылось</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// и его инициализировать не нужно. Но так как пока http-запрос проходит полный цикл, то нужно закрыть незавершенное соединение</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// и это команда 't'. Закрыть gprs - 'q'.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">available</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&gt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     userText </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">read</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">while</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">available</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&gt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">read</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">userText </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'g'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Start GPRS...</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> start_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Start GPRS error.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">userText </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'h'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#3f7f8f;">/////--HTTP--/////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Begin HTTP request.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> get_SMSdata_http</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// данные от вэб сервера пишу в data_buffer[]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">HTTP error.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">           </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// обработка полученных данных</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">userText </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'t'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+HTTPTERM</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">	  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">userText </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'q'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+SAPBR=0,1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> delay</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">3000</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// main loop //////////////////////////////</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> TextToInt</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLenRead</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> c</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> rez </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">for</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> c </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> c </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&lt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strlen</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">DataLenRead</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> c</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">++</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          rez </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> rez </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">10</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLenRead</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">c</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">48</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// 0x30h</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> rez</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// переделать описание !</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// нужно парсить ответ сервера на команду AT+HTTPREAD</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// пересмотреть этот шаг  //1. в параметры команды AT+HTTPREAD передаем количество байт (получили на предыдущем шаге)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// 2. вначале ответа получаем копию нашей команды (AT+HTTPREAD).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// 3. далее должно быть типа &quot;+HTTPREAD:175&quot;. Тут вытаскиваем фактическое количество полученных байт (в идеале такое же)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// 4. после этого считываем ответ дальше и когда прочитали нужное (пришедшее) количество (т.е. 175), то</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// 5. начинаем &quot;завершение&quot; считывания. то есть в оставшемся куске должно быть подтверждающее &quot;ОК&quot; (здесь </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// мы уже ВНЕ полезного ответа и &quot;ОК&quot; - это завершающие символы от сервера, а не часть полезных данных.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// (за &quot;ОК&quot; будет ещё перевод строки \r\n)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">uint8_t read_answer_httpread</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">const</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> firstPart</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">const</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> secondPart</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">const</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> thirdPart</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> lengthData </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">long</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> previous</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      uint8_t x</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> y</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> avail</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> c</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLenRead</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">10</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> poleznieBytes </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLenReadNumber</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      x </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      y </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// !!! решить вопрос . добавить в код возврат answer == 1, обработать &quot;ERROR&quot;, сейчас только по timeout</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      previous </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> millis</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">while</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">available</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&gt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">read</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// Clean the input buffer</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">memset</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'\0'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response_size</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// Initialize the string</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">firstPart</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// Отправка AT команды //!!! ТЕКСТ СТРАНИЦЫ. НУЖНО ПРЕДУСМОТРЕТЬ response/data_buffer &quot;НУЖНОЙ ДЛИНЫ&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">while</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">((</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">millis</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> previous</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&lt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">15000</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//нужно добавить выход из цикла, когда прочитаны все данные. чтобы не зависать.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">available</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&gt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(avail, DEC);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// if there are data in the UART input buffer, reads it and checks for the asnwer</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          avail </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">read</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.write(avail);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">3</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// полезные данные закидываю в другой буфер</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              data_buffer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">y</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> avail</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              y</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">++</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">else</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">x</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> avail</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              x</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">++</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//парсинг ответа</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strstr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> firstPart</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//&quot;AT+HTTPREAD&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">11</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// &quot;AT+HTTPREAD&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">else</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.write(avail);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strstr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> secondPart</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//&quot;+HTTPREAD:&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">10</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// &quot;+HTTPREAD:&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">2</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">           </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">else</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">2</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.write(avail);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strstr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\r\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//*(response + pars) указывает на следующий символ после +HTTPREAD:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//и он может быть пробелом. нужно его пропустить</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">while</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">' '</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                       pars</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">++</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot; 2 - 3 &quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strncpy</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">DataLenRead</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  DataLenRead</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'\0'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// добавить в конец строки символ конца строки</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//char test[40];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//sprintf(test, &quot; *(response + pars) = %d , *(? -1) = %d,  *istr = %d&quot;, *(response + pars), *(response + pars - 1), (int)*istr);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(test);                  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.print(&quot;DataLenRead = &quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.print(DataLenRead);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot;DataLenRead end &quot;);     </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">2</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// это смещение на позицию за &quot;\r\n&quot; на начало полезных данных</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//beginData = response + pars; //начало полезных данных</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">3</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  DataLenReadNumber </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> TextToInt</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">DataLenRead</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">lengthData </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLenReadNumber</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLenReadNumber </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                      stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">4</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">else</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">3</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//шаг считывания полезных данных</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot; q3 &quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          poleznieBytes</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">++</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// доделать : когда прочитано 0 байт</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(DataLenReadNumber, DEC);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  poleznieBytes </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLenReadNumber </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">4</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// после считывания полезных байт будет ожидать &quot;OK\r\n&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//pars += DataLenReadNumber; //будет указывать на  &quot;OK\r\n&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//endData = response + pars - 1; //конец полезных данных</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">else</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">4</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.write(avail);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strstr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> thirdPart</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//&quot;OK\r\n&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">break</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// всё прочитали . прерываем</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#3f7f8f;">///////////////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">   </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">x</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'\0'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(response); // вывод всего пришедшего ответа</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    data_buffer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">y</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'\0'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//char test[10];</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//sprintf(test, &quot;%u - %u&quot;, poleznieBytes, DataLenReadNumber);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">data_buffer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(test);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot;length data_buffer = &quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(strlen( data_buffer )); </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">/*Serial.println(data_buffer[1]);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    Serial.println(data_buffer[2]);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    Serial.println(data_buffer[3]);*/</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// обработка большинства команд завершается на stepP == 1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  uint8_t read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">const</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> AtCommand</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">const</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> expected_answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLen</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">long</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> previous</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      uint8_t x</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> avail</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> cc</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">*</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> ccEnd</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      x </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      previous </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> millis</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">size_t</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> sz</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> sz_ea</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      sz </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strlen</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">AtCommand</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      sz_ea </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strlen</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">expected_answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// error</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">while</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">available</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&gt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">read</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// Clean the input buffer</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">memset</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'\0'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response_size</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// Initialize the string</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">AtCommand</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// Отправка AT команды </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">while</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">((</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">millis</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> previous</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&lt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">10000</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// !!! timeout нужно скидывать, когда получаю байты данных                                         </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">available</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&gt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">         </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          avail </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">read</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">x</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> avail</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          x</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">++</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//парсинг ответа</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strstr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> AtCommand</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot; 0 \n&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> sz</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">else</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strstr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">OK</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\r\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot; 1 \n&quot;);              </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">sz_ea </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//передана пустая строка в expected_answer (в этой команде ждем ОК и завершаем обарботку; )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">break</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// сюда пока попадает только, если отправлена команда &quot;AT+HTTPACTION=0&quot;, требующая доп обработки</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">4</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">2</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot; 1-1 \n&quot;);              </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">continue</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strstr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">ERROR</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\r\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">break</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">else</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">2</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.write(avail);   //  например, +HTTPACTION: 0,606,0    // +HTTPACTION: 0,200,175</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strstr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> expected_answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot; 2 \n&quot;);              </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             pars </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">istr </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> sz_ea </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// пропускаем запятую. встаем на начало длины полученных данных</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             cc </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> response </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">+</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> pars</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// cc - начало длины данных</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">3</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">             </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">else</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> stepP </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">==</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">3</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            ccEnd </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strstr</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">cc</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\r\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// конец</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> ccEnd </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot; 3 \n&quot;);             </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//можно проверить на NULL</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#003060;">strncpy</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">DataLen</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> cc</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> ccEnd </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> cc</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              DataLen</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">ccEnd </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> cc</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'\0'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// добавить в конец строки символ конца строки</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(DataLen);          // тут полученный размер (строка) который затем можно использовать в HTTPREAD</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">              </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">break</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">          </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    response</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">x</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">'\0'</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(response); // вывод всего пришедшего ответа</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// read_answer_HTTP_GPRS()</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#3f7f8f;">////////////////////////////////////////////////////////////////////////////////////////////////////////////////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  uint8_t get_SMSdata_http</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">void</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    uint8_t answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">char</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLen</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">[</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">15</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">]</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">unsigned</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> lengthData</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">int</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> c</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// баланс:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">/*Serial.println(&quot;Отправка: AT+CUSD=1,\&quot;*100#\&quot;&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">  GPRS.println(&quot;AT+CUSD=1,\&quot;*100#\&quot;&quot;);    // Отправка AT команды</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">  delay(2000);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">*/</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">=== Отправка: AT+HTTPINIT</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+HTTPINIT</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//00/////////SSL - эта версия устарела. сейчаc всюду TLS. Не нашёл ресурсов с ssl - не протестировал до конца///////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">/*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    Serial.println(&quot;=== Отправка: AT+HTTPSSL=1\n&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    answer = read_answer_HTTP_GPRS(&quot;AT+HTTPSSL=1&quot;, &quot;&quot;, NULL);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    if (answer != 0){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">        //Serial.println(response); // вывод всего пришедшего ответа</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">        return answer;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    Serial.println(&quot;=== Отправка: AT+HTTPSSL=1  - OK \n&quot;); </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">*/</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">/*  while( GPRS.available() &gt; 0) </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">        Serial.write(GPRS.read());    // Clean the input buffer</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    Serial.println(&quot;Отправка: AT+HTTPSSL?&quot;);    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    GPRS.println(&quot;AT+HTTPSSL?&quot;);    // Отправка AT команды</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    delay(2000);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    x = 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    answer = 0;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">     while (GPRS.available() != 0){    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">       // if there are data in the UART input buffer, reads it and checks for the asnwer</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">       response[x] = GPRS.read();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">       x++;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">       }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    response[x] = '\0';</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    Serial.println(response);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    // check if the desired answer  is in the response of the module</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">       if (strstr(response, &quot;OK&quot;) != NULL){</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">         answer = 1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">       }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    //if (answer == 0)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">      //goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;"> */</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//77////////////////</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Отправка: AT+HTTPPARA=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">CID</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">,1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+HTTPPARA=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">CID</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">,1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//88////////////////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Отправка: AT+HTTPPARA=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">URL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">http://mirossa.ru/q756dd/fcl01/7a888tyt.php</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+HTTPPARA=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">URL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">http://mirossa.ru/q756dd/fcl01/7a888tyt.php?l=12&amp;p=12</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(response);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//88////////// USER AGENT //////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Отправка: USER AGENT</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+HTTPPARA=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">UA</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Go-http-clientQ/1.1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// иначе в USER-AGENT будет &quot;SIMCOM_MODULE&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot;USER AGENT error&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//10////////////////////////////</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Отправка: AT+HTTPACTION=0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+HTTPACTION=0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">+HTTPACTION: 0,200</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DataLen</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// нужно парсить! В sim900 так &quot;+HTTPACTION:0,200&quot;,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                                          </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//  в sim800c так &quot;+HTTPACTION: 0,200&quot;  (с пробелом)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//error</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(response);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//отладка </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">DataLen</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//11//////////  AT+HTTPHEAD  читаем заголовки http-ответа ////////////////////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Отправка: AT+HTTPHEAD</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">while</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">available</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&gt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">         GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">read</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// Clean the input buffer</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+HTTPHEAD</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// Отправка AT команды </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    previous </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> millis</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">while</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">((</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">millis</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">-</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> previous</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&lt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">5000</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// !!! timeout нужно скидывать, когда получаю байты данных                                         </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">available</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&gt;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">         </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">write</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">read</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">())</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">   </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// Теряются последние несколько символов. Это было из-за того, что скорость GPRS была</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">                                </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// установлена больше (19200), чем скорость обмена с монитором порта (9600).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">       </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">   </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">     </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">конец AT+HTTPHEAD</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// пример ответа:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">/* AT+HTTPHEAD</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    +HTTPHEAD: 154</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    http/1.1 200 ok</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    server: nginx</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    date: sun, 18 aug 2019 15:01:27 gmt</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    content-type: text/html; charset=utf-8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    content-length: 9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    connection: keep-alive</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    OK</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">*/</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#3f7f8f;">//////////////////////////////////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot;Отправка: AT+HTTPREAD=0,175&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">=== Отправка: AT+HTTPREAD</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//GPRS.println(&quot;AT+HTTPREAD=0,175&quot;);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_httpread</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+HTTPREAD</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">+HTTPREAD:</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">OK</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\r\n</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">&amp;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">lengthData </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//error</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">=== Успешно: AT+HTTPREAD</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//отладка</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">print</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">=== Получено полезных байт: </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">lengthData</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> DEC</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.print(&quot;=== Начало полезных байт&quot;);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//for (c = 0; c &lt; lengthData; c++  )</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">        </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.write( data_buffer[c] );</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//Serial.println(&quot;=== Конец полезных байт&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//отладка</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//12//////////////////////////////////////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#3f7f8f;">//////////////////////////////////////////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//HTTPTERM:  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    Serial</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">.</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">println</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">Отправка: AT+HTTPTERM</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//answer = read_answer_HTTP_GPRS(&quot;AT+HTTPTERM&quot;);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+HTTPTERM</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#3f7f8f;">/////////////</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// get_SMSdata_http()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#3f7f8f;">////////////////////////// для MTS ////////////////////////////////////////////////////////////////////////////////////////////// </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  uint8_t start_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">void</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      uint8_t answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#406080; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//11111111////////////</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+SAPBR=3,1,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">CONTYPE</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//222222222/////////</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+SAPBR=3,1,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">APN</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">internet.mts.ru</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">            </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//33333333/////////</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+SAPBR=3,1,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">USER</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">mts</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">         </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//4444////////////////////</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+SAPBR=3,1,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">PWD</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">mts</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#0f69ff;">\&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">         </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//555/////////////////</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> read_answer_HTTP_GPRS</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#1060b6;">AT+SAPBR=1,1</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#800000;">&quot;&quot;</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#7d0045;">NULL</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">if</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">answer </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">!=</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">0</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//goto Ext1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">      </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">//666///////////////</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">    </span><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">return</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// start_GPRS</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#595979; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// программное включение питания</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; font-weight:600; color:#200080;">void</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;"> power_on</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  uint8_t answer</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  pinMode</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">onModulePin</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">OUTPUT</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">// checks if the module is started</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  digitalWrite</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">onModulePin</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">LOW</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  delay</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">1000</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  digitalWrite</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">onModulePin</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">HIGH</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  delay</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">2000</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  digitalWrite</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">onModulePin</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">,</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">LOW</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  delay</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">(</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#008c00;">3000</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#308080;">)</span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">/*  answer = read_answer_HTTP_GPRS(&quot;AT&quot;, &quot;&quot;, NULL);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">  if (answer != 0)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    digitalWrite(onModulePin,LOW);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    delay(1000);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    digitalWrite(onModulePin,HIGH);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    delay(2000);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    digitalWrite(onModulePin,LOW);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    delay(3000);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    digitalWrite(onModulePin,HIGH);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    delay(3000);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    digitalWrite(onModulePin,LOW);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    // время ожидания ответа</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    while(answer != 0)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">      {  </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">      // Send AT every n seconds and wait for the answer   </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">      answer = read_answer_HTTP_GPRS(&quot;AT&quot;, &quot;&quot;, NULL);    </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">      }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;">    }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#595979;"> */</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020;">  </span><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#406080;">}</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">Begin HTTP request.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">=== Отправка: AT+HTTPINIT</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">Отправка: AT+HTTPPARA=&quot;CID&quot;,1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">Отправка: AT+HTTPPARA=&quot;URL&quot;,&quot;http://mirossa.ru/q756dd/fcl01/7a888tyt.php&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">Отправка: USER AGENT</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">Отправка: AT+HTTPACTION=0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">178</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">Отправка: AT+HTTPHEAD</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">AT+HTTPHEAD</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">+HTTPHEAD: 179</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">http/1.1 200 ok</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">server: nginx</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">date: fri, 04 oct 2019 23:12:07 gmt</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">content-type: text/html; charset=utf-8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">content-length: 178</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">connection: keep-alive</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">vary: accept-encoding</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">OK</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">конец AT+HTTPHEAD</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">=== Отправка: AT+HTTPREAD</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">&lt;html&gt;&lt;body&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">&lt;p&gt;hello, . machine! and test testovich223?&lt;/p&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">&lt;p&gt;second floor.&lt;/p&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">&lt;p&gt;third machine.&lt;/p&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">&lt;p&gt;Captan&lt;/p&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">&lt;p&gt;sketch 1313&lt;/p&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">&lt;p&gt;Next page is 57.&lt;/p&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">&lt;/body&gt;&lt;/html&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">=== Успешно: AT+HTTPREAD</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">=== Получено полезных байт: 178</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">Отправка: AT+HTTPTERM</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">AT+SAPBR=0,1</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">OK</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:14pt; color:#000000;">https://alex-exe.ru/radio/wireless/gsm-sim900-gprs/<br />http://ak.ale31.ru/работа-c-at-командами-и-gprs-на-arduino/<br />https://www.raviyp.com/embedded/194-sim900-gprs-http-at-commands?start=1</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:14pt; font-weight:600; color:#000000;">Прошивка hex-файлов в Arduino</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Times New Roman'; font-size:14pt; color:#000000;">https://acdc.foxylab.com/avrdude<br />http://mega-avr.com.ua/programma-sinaprog-2-1-1-rus/</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">//запуск из консоли</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#f6f8ff;"><span style=" font-family:'Courier New,courier'; font-size:14pt; color:#000020; background-color:#f6f8ff;">C:\avrdude\avrdude.exe -C avrdude.conf -c arduino -P com3 -p m328p -U flash:w:&quot;C:\avrdude\SoftwareSerialExample_PSP.ino.standard.hex&quot;:a -q</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="comments"></a><span style=" font-family:'Times New Roman'; font-size:14pt; color:#000000;"><br /></span><span style=" font-family:'Times New Roman'; font-size:14pt; color:#000000;"> </span></p></td></tr></table></body></html>