<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:xx-large; font-weight:600;">gpart — пример работы с дисками</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Автор: </span><a href="https://rtfm.co.ua/author/setevoy/"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">setevoy</span></a><span style=" font-family:'Ubuntu';"> | 01/02/2013 </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://rtfm.co.ua/freebsd-gpart-primer-raboty-s-diskami/#disqus_thread"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">2 Comments</span></a><span style=" font-family:'Ubuntu';"> </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" color:#000000; background-color:#ffffff;">Rate this (4 Votes)</span></li></ul></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1853330275.png" /><span style=" font-family:'Ubuntu';">Несколько слов о такой замечательной утилите как </span><span style=" font-family:'Courier New';">gpart</span><span style=" font-family:'Ubuntu';">. Утилита предназначена для работы с дисками и разделами на нём. На самом деле, утилита </span><span style=" font-family:'Courier New';">gpart</span><span style=" font-family:'Ubuntu';"> является жесткой ссылкой на утилиту </span><span style=" font-family:'Courier New';">geom</span><span style=" font-family:'Ubuntu';">. Основная задача утилиты — заменить собой такие устаревшие морально программы для работы с дисками, как </span><span style=" font-family:'Courier New';">bsdlabel</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New';">fdisk</span><span style=" font-family:'Ubuntu';"> (хотя они по-прежнему включены в дистрибутив и есть в портах).</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">И так, имеются 2 жестких диска:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># camcontrol devlist<br />&lt;VMware Virtual IDE Hard Drive 00000001&gt;  at scbus0 target 0 lun 0 (pass0,ada0)<br />&lt;VMware Virtual IDE Hard Drive 00000001&gt;  at scbus0 target 1 lun 0 (pass1,ada1)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На </span><span style=" font-family:'Courier New'; font-style:italic;">ada0</span><span style=" font-family:'Ubuntu';"> установлена сама система, его мы трогать не будем. Нас интересует второй диск — </span><span style=" font-family:'Courier New'; font-style:italic;">ada1</span><span style=" font-family:'Ubuntu';">:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># ls -l /dev/ad*<br />lrwxr-xr-x  1 root  wheel            4 Dec 28 17:42 /dev/ad0 -&gt; ada0<br />lrwxr-xr-x  1 root  wheel            6 Dec 28 17:42 /dev/ad0p1 -&gt; ada0p1<br />lrwxr-xr-x  1 root  wheel            6 Dec 28 17:42 /dev/ad0p2 -&gt; ada0p2<br />lrwxr-xr-x  1 root  wheel            6 Dec 28 17:42 /dev/ad0p3 -&gt; ada0p3<br />lrwxr-xr-x  1 root  wheel            4 Dec 28 17:42 /dev/ad1 -&gt; ada1<br />crw-r——  1 root  operator    0,  90 Dec 28 17:42 /dev/ada0<br />crw-r——  1 root  operator    0,  92 Dec 28 17:42 /dev/ada0p1<br />crw-r——  1 root  operator    0,  94 Dec 28 19:42 /dev/ada0p2<br />crw-r——  1 root  operator    0,  96 Dec 28 17:42 /dev/ada0p3<br />crw-r——  1 root  operator    0,  98 Dec 28 17:42 /dev/ada1</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="more-1703"></a><span style=" font-family:'Ubuntu';">В</span><span style=" font-family:'Ubuntu';">торой диск необходимо разбить аналогично первому. Проверим, что нам скажет </span><span style=" font-family:'Courier New';">gpart</span><span style=" font-family:'Ubuntu';"> о первом диске:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show<br />=&gt;      34  16777149  ada0  GPT  (8.0G)<br />34       128     1  freebsd-boot  (64k)<br />162  15935360     2  freebsd-ufs  (7.6G)<br />15935522    837632     3  freebsd-swap  (409M)<br />16773154      4029        — free —  (2M)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Первый столбец показывает первый блок раздела. Второй — кол-во блоков в этом разделе. Третий — имя раздела. В четвертой колонке указывается тип файловой системы, и в последнем — размер раздела.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На втором диске в настоящий момент нет ничего:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show ada1<br />gpart: No such geom: ada1.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Полезная фича утилиты </span><span style=" font-family:'Courier New';">gpart</span><span style=" font-family:'Ubuntu';"> — это «отложенное» внесение любых изменений. Т.е., если добавить ключи </span><span style=" font-family:'Courier New'; font-style:italic;">-fx</span><span style=" font-family:'Ubuntu';"> — то изменения на диск не будут записываться сразу, а только после того, как вы дадите команду:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart commit</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Либо, если решите отменить все изменения — то:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart undo</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Создаём новую разметку диска, со схемой </span><span style=" font-family:'Ubuntu'; font-weight:600;">GPT</span><span style=" font-family:'Ubuntu';"> (про </span><span style=" font-family:'Ubuntu'; font-weight:600;">MBR</span><span style=" font-family:'Ubuntu';"> мы потихоньку забываем):</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart create -s GPT /dev/ada1<br />ada1 created</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Теперь — посмотрим на диск:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show ada1<br />=&gt;      34  16777149  ada1  GPT  (8.0G)<br />34  16777149        — free —  (8G)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если необходимо удалить схему — выполняем:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart destroy ada1<br />ada1 destroyed</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Смотрим:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show -p ada1<br />gpart: No such geom: ada1.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Размер и смещение начала раздела по-умолчанию задаются в блоках, размер которых обычно соответствует размеру физического сектора, т.е.</span><span style=" font-family:'Ubuntu'; font-weight:600;"> 512 byte</span><span style=" font-family:'Ubuntu';">. Для того чтобы не вычислять количество блоков, эти параметры можно указывать с суффиксом размера: </span><span style=" font-family:'Courier New'; font-style:italic;">B, K, M, G, T, P, E</span><span style=" font-family:'Ubuntu';"> — т.е. от байт до экзабайт. Но лучше указывать размер в секторах, иначе размер может быть вычислен неверно.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Размер раздела указывается после опции </span><span style=" font-family:'Courier New'; font-style:italic;">-s</span><span style=" font-family:'Ubuntu';">, а смещение начала — после </span><span style=" font-family:'Courier New'; font-style:italic;">-b</span><span style=" font-family:'Ubuntu';">. Если не указывать эти параметры — они будут выбраны автоматически: смещение начала — на первый доступный блок, размер — на максимально возможный из доступного свободного пространства.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вычисление индекса партиции обычно можно оставить утилите </span><span style=" font-family:'Courier New';">gpart</span><span style=" font-family:'Ubuntu';">. Если вам нужна какая-нибудь особенная конфигурация, например, чтобы система устанавливалась на </span><span style=" font-family:'Courier New'; font-style:italic;">ada0p3</span><span style=" font-family:'Ubuntu';"> — нужно указать параметр </span><span style=" font-family:'Courier New'; font-style:italic;">-i 3</span><span style=" font-family:'Ubuntu';">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Теперь, создадим загрузочный раздел, как на диске </span><span style=" font-family:'Courier New'; font-style:italic;">ada0</span><span style=" font-family:'Ubuntu';">:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart add -b 34 -s 128 -t freebsd-boot /dev/ada1<br />ada1p1 added</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Смотрим:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show -p ada1<br />=&gt;      34  16777149    ada1  GPT  (8.0G)<br />34       128  ada1p1  freebsd-boot  (64k)<br />162  16777021          — free —  (8G)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Далее, создаём раздел размером 7.6G или 15935360 блоков по 512 bytes.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Посчитаем:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';">; 15935360 * 512<br />8158904320<br />; 8158904320 / 1024<br />7967680</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Итого, получится раздел размером 7967680 КБ, или 7.9G. Фактически, </span><span style=" font-family:'Courier New';">gpart</span><span style=" font-family:'Ubuntu';"> покажет 7.6 G, т.к. около 5% резервируется самой файловой системой.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Укажем:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New'; font-style:italic;">-b</span><span style=" font-family:'Ubuntu';"> 162 — первый сектор, с которого будет начинаться раздел;<br /></span><span style=" font-family:'Courier New'; font-style:italic;">-s</span><span style=" font-family:'Ubuntu';"> 15935360 — кол-во блоков раздела, так же можно указать так 7.9G;<br /></span><span style=" font-family:'Courier New'; font-style:italic;">-t</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New';">freebsd-ufs</span><span style=" font-family:'Ubuntu';"> — тип файловой системы, так же можно указывать </span><span style=" font-family:'Courier New'; font-style:italic;">freebsd-swap, freebsd-boot</span><span style=" font-family:'Ubuntu';"> и другие, подробнее — как обычно, в </span><span style=" font-family:'Courier New';">man gpart.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выполняем:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart add -b 162 -s 15935360 -t freebsd-ufs /dev/ada1<br />ada1p2 added</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверим:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show ada1<br />=&gt;      34  16777149  ada1  GPT  (8.0G)<br />34       128     1  freebsd-boot  (64k)<br />162  15935360     2  freebsd-ufs  (7.6G)<br />15935522    841661        — free —  (411M)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">И последний раздел — для раздела подкачки:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart add -b 15935522 -t freebsd-swap /dev/ada1<br />ada1p3 added</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Тут мы не указываем ключ </span><span style=" font-family:'Courier New'; font-style:italic;">-s</span><span style=" font-family:'Ubuntu';"> — </span><span style=" font-family:'Courier New';">gpart</span><span style=" font-family:'Ubuntu';"> автоматически займёт все оставшееся место на диске.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Смотрим:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show ada1<br />=&gt;      34  16777149  ada1  GPT  (8.0G)<br />34       128     1  freebsd-boot  (64k)<br />162  15935360     2  freebsd-ufs  (7.6G)<br />15935522    841661     3  freebsd-swap  (411M)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сравним со старым диском:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show ada0<br />=&gt;      34  16777149  ada0  GPT  (8.0G)<br />34       128     1  freebsd-boot  (64k)<br />162  15935360     2  freebsd-ufs  (7.6G)<br />15935522    837632     3  freebsd-swap  (409M)<br />16773154      4029        — free —  (2M)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Или — просто запустить </span><span style=" font-family:'Courier New';">gpart show</span><span style=" font-family:'Ubuntu';"> без ключей:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show<br />=&gt;      34  16777149  ada0  GPT  (8.0G)<br />34       128     1  freebsd-boot  (64k)<br />162  15935360     2  freebsd-ufs  (7.6G)<br />15935522    837632     3  freebsd-swap  (409M)<br />16773154      4029        — free —  (2M)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';">=&gt;      34  16777149  ada1  GPT  (8.0G)<br />34       128     1  freebsd-boot  (64k)<br />162  15935360     2  freebsd-ufs  (7.6G)<br />15935522    841661     3  freebsd-swap  (411M)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Удаление разделов производится так же легко. Например, мы хотим удалить раздел </span><span style=" font-family:'Courier New'; font-style:italic;">swap</span><span style=" font-family:'Ubuntu';"> и пересоздать его заново.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Раздел </span><span style=" font-family:'Courier New'; font-style:italic;">freebsd-swap</span><span style=" font-family:'Ubuntu';"> имеет метку 3. Выполняем:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart delete -i 3 /dev/ada1<br />ada1p3 deleted</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Смотрим:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show ada1<br />=&gt;      34  16777149  ada1  GPT  (8.0G)<br />34       128     1  freebsd-boot  (64k)<br />162  15935360     2  freebsd-ufs  (7.6G)<br />15935522    841661        — free —  (411M)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">И теперь — пересоздадим </span><span style=" font-family:'Courier New'; font-style:italic;">swap</span><span style=" font-family:'Ubuntu';">-раздел, сделав его абсолютно аналогичным разделу на первом диске, т.е. укажем начальный блок и размер раздела в блоках:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart add -b 15935522 -s 837632 -t freebsd-swap /dev/ada1<br />ada1p3 added</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сравним ещё раз:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># gpart show<br />=&gt;      34  16777149  ada0  GPT  (8.0G)<br />34       128     1  freebsd-boot  (64k)<br />162  15935360     2  freebsd-ufs  (7.6G)<br />15935522    837632     3  freebsd-swap  (409M)<br />16773154      4029        — free —  (2M)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';">=&gt;      34  16777149  ada1  GPT  (8.0G)<br />34       128     1  freebsd-boot  (64k)<br />162  15935360     2  freebsd-ufs  (7.6G)<br />15935522    837632     3  freebsd-swap  (409M)<br />16773154      4029        — free —  (2M)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Создадим файловую систему, если требуется:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># newfs /dev/ada1p2<br />/dev/ada1p2: 7780.9MB (15935360 sectors) block size 32768, fragment size 4096<br />super-block backups (for fsck -b #) at:<br />192, 1515712, 3031232, 4546752, 6062272, 7577792, 9093312, 10608832, 12124352, 13639872, 15155392</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Посмотрим:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># file -s /dev/ada1p2<br />/dev/ada1p2: Unix Fast File system [v2] (little-endian) last mounted on , last written at Fri Dec 28 19:32:25 2012, clean flag 1, readonly flag 0, number of blocks 1991920, number of data blocks 1959159, number of cylinder groups 11, block size 32768, fragment size 4096, average file size 16384, average number of files in dir 64, pending blocks to free 0, pending inodes to free 0, system-wide uuid 0, minimum percentage of free blocks 8, TIME optimization</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если хотите использовать </span><span style=" font-family:'Courier New';">Soft Updates</span><span style=" font-family:'Ubuntu';"> для этой файловой системы — добавьте ключ </span><span style=" font-family:'Courier New'; font-style:italic;">-U</span><span style=" font-family:'Ubuntu';">:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># newfs -U /dev/ada1p2<br />/dev/ada1p2: 7780.9MB (15935360 sectors) block size 32768, fragment size 4096<br />super-block backups (for fsck -b #) at:<br />192, 1515712, 3031232, 4546752, 6062272, 7577792, 9093312, 10608832, 12124352, 13639872, 15155392</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Примонтируем новый раздел:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># mount /dev/ada1p2 /mnt/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Посмотрим на него:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New';"># cd /mnt/<br /># ls<br />.snap</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Материалы по теме:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://rtfm.co.ua/goto/http://advprog.ru/articles/gpt"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">http://advprog.ru</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://rtfm.co.ua/goto/http://wiki.lissyara.su/wiki/Gpart"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">http://wiki.lissyara.su</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://rtfm.co.ua/goto/http://mechanoid.kiev.ua/networks-freebsd-zfs.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">http://mechanoid.kiev.ua</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://rtfm.co.ua/goto/http://www.unix.ck.ua/content/ustanovka-freebsd-90-s-pomoshchyu-gpart"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">http://www.unix.ck.ua</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://rtfm.co.ua/goto/http://f-andrey.blogspot.com/2009/01/blog-post.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">http://f-andrey.blogspot.com</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://rtfm.co.ua/goto/http://freebsd.3dn.ru/publ/gpart_i_graid_2012/2-1-0-1178"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">http://freebsd.3dn.ru</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://rtfm.co.ua/goto/https://sites.google.com/site/luzanov/freebsd/gpt"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">https://sites.google.com</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://rtfm.co.ua/goto/http://bu7cher.blogspot.com/2010/03/gpart.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">http://bu7cher.blogspot.com</span></a><span style=" font-family:'Ubuntu';"> </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p></body></html>