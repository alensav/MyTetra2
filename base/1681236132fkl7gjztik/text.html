<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:10px; margin-bottom:5px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Roboto Bold'; font-size:x-large; font-weight:600; color:#333333;">Скетч</span></p>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">#include &lt;OneWire.h&gt;</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">#include &lt;DallasTemperature.h&gt;</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; color:#333333;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">#define ONE_WIRE_BUS </span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">0</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;"> </span><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Пин подключения OneWire шины, 0 (D3)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">OneWire oneWire(ONE_WIRE_BUS); </span><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Подключаем бибилотеку OneWire</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">DallasTemperature sensors(&amp;oneWire); </span><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Подключаем бибилотеку DallasTemperature</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-style:italic; color:#93a1a1;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">DeviceAddress temperatureSensors[</span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">3</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">]; </span><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Размер массива определяем исходя из количества установленных датчиков</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">uint8_t deviceCount = </span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">0</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">;</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; color:#333333;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Функция вывода адреса датчика </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#859900; background-color:#f9fafa;">void</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;"> printAddress(DeviceAddress deviceAddress)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">{</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  </span><span style=" font-family:'Courier New,courier'; color:#859900; background-color:#f9fafa;">for</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;"> (uint8_t i = </span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">0</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">; i &lt; </span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">8</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">; i++)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  {</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">    </span><span style=" font-family:'Courier New,courier'; color:#859900; background-color:#f9fafa;">if</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;"> (deviceAddress[i] &lt; </span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">16</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">) Serial.print(</span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">&quot;0&quot;</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">    Serial.print(deviceAddress[i], HEX); </span><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Выводим адрес датчика в HEX формате </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  }</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">}</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; color:#333333;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#859900; background-color:#f9fafa;">void</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;"> setup(</span><span style=" font-family:'Courier New,courier'; color:#859900; background-color:#f9fafa;">void</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">{</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  Serial.begin(</span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">115200</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">); </span><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Задаем скорость соединения с последовательным портом </span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  sensors.begin(); </span><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Иницилизируем датчики</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  deviceCount = sensors.getDeviceCount(); </span><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Получаем количество обнаруженных датчиков</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-style:italic; color:#93a1a1;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  </span><span style=" font-family:'Courier New,courier'; color:#859900; background-color:#f9fafa;">for</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;"> (uint8_t index = </span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">0</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">; index &lt; deviceCount; index++)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  {</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">    sensors.getAddress(temperatureSensors[index], index);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  }</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">}</span></pre>
<pre style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; color:#333333;"><br /></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#859900; background-color:#f9fafa;">void</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;"> loop(</span><span style=" font-family:'Courier New,courier'; color:#859900; background-color:#f9fafa;">void</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">{</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  Serial.println();</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  sensors.requestTemperatures();</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  </span><span style=" font-family:'Courier New,courier'; color:#859900; background-color:#f9fafa;">for</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;"> (int i = </span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">0</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">; i &lt; deviceCount; i++)</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  {</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">    printAddress(temperatureSensors[i]); </span><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Выводим название датчика</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">    Serial.print(</span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">&quot;: &quot;</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">    Serial.println(sensors.getTempC(temperatureSensors[i])); </span><span style=" font-family:'Courier New,courier'; font-style:italic; color:#93a1a1; background-color:#000000;">// Выводим температуру с датчика</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  }</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">  delay(</span><span style=" font-family:'Courier New,courier'; color:#2aa198; background-color:#f9fafa;">1000</span><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">);</span></pre>
<pre style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; color:#333333; background-color:#f9fafa;">}</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> </p></body></html>