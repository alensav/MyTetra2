<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:xx-large; font-weight:600;">Поиск текста в документах или grep в помощь</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://softhelp.org.ua/?p=4943"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Стандартный </span></a></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1995856923.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы успели заметить, то я сменил дизайн сайта. Именно во время работы над изменением внешнего вида шаблона и возникла мысль написать эту статью. Я не являюсь большим знатоком в плане web-дизайна, поэтому знаю языки PHP, HTML поверхностно. А проблема заключалась в следующем, мне нужно было найти название одного графического файла, имя которого упоминалось в .php файлах темы WordPress. На помощь пришла программа grep.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="more-4943"></a><span style=" font-family:'Ubuntu';">Д</span><span style=" font-family:'Ubuntu';">ля справки — команда grep служит для поиска и фильтрации строк, которые содержат образец заданный пользователем.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Итак продолжу. Для поиска нужной части текста нужно выполнить в Терминале следующую команду:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">grep -rl ‘искомая фраза’ /адрес каталога для поиска/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">в итоге у меня получилась вот такая команда:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600; font-style:italic; color:#ff0000;">sudo grep -rl 'icy-logo' /var/www/wordpress/wp-content/themes/icy/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Sudo я добавил, потому что искать пришлось во владениях суперпользователя, ну а поиск по Домашней папке можно без sudo. Нужный файл нашелся буквально за доли секунды. А если использовать такую команду:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600; font-style:italic; color:#ff0000;">sudo grep -r 'icy-logo' /var/www/wordpress/wp-content/themes/icy/ --color</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">то в итоге мы увидим цветной вывод результата, в котором адрес документа и найденная фраза будут подсвечены каждый своим цветом.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<p align="center" style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image2074364874.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Давайте рассмотрим еще несколько примеров использования grep.<br />Напомню еще раз, главная область использования программы grep – поиск слов либо фраз в файлах, а также потоках вывода. Например, чтобы найти слово </span><span style=" font-family:'Ubuntu'; font-style:italic;">“height”</span><span style=" font-family:'Ubuntu';"> в файле </span><span style=" font-family:'Ubuntu'; font-style:italic;">functions.php</span><span style=" font-family:'Ubuntu';"> нужно использовать следующую команду:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600; font-style:italic; color:#ff0000;">grep height functions.php</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Естественно, что вы должны открыть Терминал в той папке, в которой находится документ </span><span style=" font-family:'Ubuntu'; font-style:italic;">functions.php</span><span style=" font-family:'Ubuntu';">, если иначе, тогда нужно указать полный путь к файлу. В итоге grep покажет все вхождения слова </span><span style=" font-family:'Ubuntu'; font-style:italic;">height</span><span style=" font-family:'Ubuntu';">, которые он найдет в содержимом </span><span style=" font-family:'Ubuntu'; font-style:italic;">functions.php</span><span style=" font-family:'Ubuntu';">. Нужно знать, что в данном случае grep будет искать именно набор символов, а не слово. Поэтому будут показаны все строки, которые включают слово </span><span style=" font-family:'Ubuntu'; font-style:italic;">“height”</span><span style=" font-family:'Ubuntu';"> и другие слова, в которых встречается последовательность “height” В моем случае программа вывела строку </span><span style=" font-family:'Ubuntu'; font-style:italic;">‘flex-height’ =&gt; true,.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы указать grep, что нужно найти именно слово, нужно использовать ключ </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic; color:#ff0000;">-w</span><span style=" font-family:'Ubuntu';">. Он ограничит область поиска только нужным словом. Будем искать слово primary в файле functions.php. Команда будет такой:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600; font-style:italic; color:#ff0000;">grep -w primary functions.php</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита grep может производить поиск и по группе файлов, в таком случае в результатах поиска будет указан тот файл, в котором будет обнаружено совпадение. Если добавить ключ </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic; color:#ff0000;">-n</span><span style=" font-family:'Ubuntu';">, то программа укажет еще и номер строки, в которой найдет совпадение, а ключ </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic; color:#ff0000;">-r</span><span style=" font-family:'Ubuntu';"> даст возможность выполнить рекурсивный поиск, т.е. поиск в каталогах, подкаталогах и так далее до самых файлов. Это весьма удобно во время поиска среди файлов с исходными текстами программ. Вид команды с нужными ключами:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600; font-style:italic; color:#ff0000;">grep -rnw call_name /home/dm/doc/office/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вам нужно скрыть имена файлов, тогда воспользуйтесь ключом </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic; color:#ff0000;">-h</span><span style=" font-family:'Ubuntu';">, и наоборот, если нужно вывести только имена файлов, в которых есть искомый текст, то нужно использовать ключ </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic; color:#ff0000;">-l.</span><span style=" font-family:'Ubuntu'; color:#333333;"> Если использовать ключ -i, то команда будет игнорировать регистр символов из чего следует, что поиск будет производиться среди заглавных и строчных букв.</span><span style=" font-family:'Ubuntu'; color:#000000;"><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для полной информации, про все ключи grep, выполните в Терминале:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600; font-style:italic; color:#ff0000;">man grep</span></p></body></html>