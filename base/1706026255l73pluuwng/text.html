<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ffffff;">ESP32 и Ардуино</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ffffff;">8 мин187K</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ffffff;">Компьютерное железоУмный домИнтернет вещейDIY или Сделай сам</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ffffff;"> <br /><br />Случилось то, чего все так долго ждали и о чём так много говорили — новые модули ESP32 стали широко продаваться и пошли в народ. Сегодня мы поговорим об этих модулях с точки зрения непрофессионального пользователя, привыкшего работать с Ардуино и создавать небольшие проекты для домашней автоматизации или просто для удовольствия и самообучения.<br /><br />Работает ли это вообще? Что там с поддержкой этих модулей в Arduino IDE? Стоит ли платить больше или лучше ограничиться ставшим уже привычным ESP8266? Мы постараемся вместе ответить на все эти вопросы, а в конце статьи я дам ссылку на реальное воплощение работы ESP32 с Ардуино — дистрибутив бесплатной версии Arduino Mega Server для платформы ESP32.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ffffff;">Спецификации</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ffffff;"><br />Я не буду здесь подробно останавливаться на спецификациях ESP32, вы без труда найдёте их в Интернет: каждый обзорщик считает своим долгом привести простыню спецификаций в начале обзора ESP32. Скажу только, что они впечатляют и если подходить к делу серьёзно и вдумчиво, то можно потратить не один год на изучение всех возможностей модуля и эксперименты с ним.<br /><br />Оставим это профессионалам (или тем, кто считает себя таковым) и сосредоточимся на практической стороне вопроса, понятной и доступной простому смертному.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ffffff;">Цена вопроса</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ffffff;"><br />Начнём с цены. На данный момент модуль ESP32 в китайских интернет-магазинах стоит 350 рублей и 500 в варианте платы с обвязкой и USB интерфейсом. Это против 100 и 160 рублей для модуля ESP8266, соответственно. Как видим, разница в три с лишним раза, хотя абсолютные значения невелики, каждый, при желании, может позволить себе потратить 350 — 500 рублей на микроконтроллер. Для сравнения, Arduino Mega 2560 в том же Китае стоит 600 рублей, а в России около 1000 (плюс ещё стоимость Ethernet Shield).<br /><br />Осталось только выяснить, стоит ли платить в три раза больше, чем за ESP8266 и что мы за это получим. (Забегая вперёд скажу, что на мой взгляд, безусловно стоит.)<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" background-color:#ffffff;">Поддержка в Arduino IDE</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Для того, чтобы что-то сделать с модулем, нужно сначала иметь его поддержку в Arduino IDE. На данный момент поддержка ESP32 в Arduino IDE находится хоть и на начальном, но вполне приличном и работоспособном уровне. Те, кто боится встретить тут непреодолимые трудности, может не беспокоиться — основные функции работают нормально и вы, скорее всего, не заметите никакой разницы по сравнению с работой на других контроллерах.<br /><br />Несколько хуже дела обстоят с драйверами устройств, но это, безусловно, временное явление. Модуль настолько популярен, что поддержка любой периферии неизбежно появится в ближайшее время.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Добавление поддержки ESP32 в Arduino IDE</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Теперь немного практической информации об инсталляции поддержки ESP32 в Arduino IDE. Интернет полон инструкциями на эту тему, вы их также можете в изобилии найти в нём. Замечу только, что все инструкции делятся на «старые», там, где упоминается Python и «новые», где упоминается GIT. Вам, естественно, нужно руководствоваться новыми.<br /><br />Из множества инструкций лучшей можно назвать (как это ни странно) официальную инструкцию от производителя модуля.<br /><br /></span><a href="https://github.com/espressif/arduino-esp32"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#548eaa; background-color:#000000;">github.com/espressif/arduino-esp32</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br /><br />Которой я и рекомендую пользоваться. Единственное замечание: GIT использовать необязательно, можно просто скачать дистрибутив и распаковать его в нужную директорию.<br /><br /></span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; font-weight:600; font-style:italic; color:#333333;">Примечание</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#333333;">. Все нижеизложенное касается инсталляции под Windows 7 64-bit, поскольку все эксперименты я производил именно на ней, в других операционных системах пути могут отличаться от указанных.</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br /><br />Файлы дистрибутива должны находиться в папке<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">C:\Users\User\Documents\Arduino\hardware\espressif\esp32</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />где C: — это имя вашего диска с Windows, а User — это имя пользователя в операционной системе (и то и другое у вас может отличаться от указанных).<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Неочевидные моменты инсталляции ESP32</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Многие пользователи жалуются, что у них ничего не работает и не появляется поддержка ESP32 в Arduino IDE. Тут дело вот в чём: поскольку драйвера ESP32 только разрабатываются, то несколько изменён порядок расположения системных директорий. В качестве папки для расположения скетчей в настройках Arduino IDE должна быть указана папка<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">C:\Users\User\Documents\Arduino</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />(с теми же поправками на диск и имя пользователя), а файлы дистрибутива должны располагаться внутри этой папки так, как рекомендует производитель. Если не будет учтён этот момент, то поддержка ESP32 в Arduino IDE не появится и ничего работать не будет.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Версии Arduino IDE</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Часто приходится слышать, что поддержка ESP32 есть только в последних версиях Arduino IDE, это не так — ESP32 прекрасно работает в более ранних версиях, например, дистрибутив Arduino Mega Server для ESP32 разрабатывался в версии 1.6.5 r2.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Преимущества ESP32</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Теперь поговорим о преимуществах ESP32 перед его предшественником, ESP8266. На таких очевидных вещах как мощность процессора и объём оперативной памяти я останавливаться не буду, скажу только, что нужно сильно постараться, чтобы загрузить ESP32 полностью на задачах DIY и домашней автоматизации.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Пины</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Ахиллесовой пятой его предшественника, модуля ESP8266, было (и есть) экстремально малое количество выводов. После работы с такими контроллерами как Arduino Mega и Arduino Due с их десятками цифровых и аналоговых пинов, работа с ESP8266 вызывает недоумение: счёт GPIO идёт буквально на единицы и это сильно ограничивает применение этого модуля в реальных проектах.<br /><br /></span><img src="image842038374.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br /><br />ESP32 если не полностью, то в значительной степени лишён этого недостатка. Количество доступных выводов значительно увеличено, появилось также множество аналоговых входов. Полностью свободными и доступными для использования можно назвать 13 выводов<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">GPIO </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">2</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">4</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">12</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">14</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">13</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">15</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">16</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">17</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">25</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">25</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">27</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">32</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">33</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />В случае необходимости к ним можно добавить ограниченно функциональные и работающие только на вход<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">GPIO </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">34</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">35</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">36</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">39</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Если пожертвовать некоторыми возможностями и не использовать в конкретных проектах Serial, SPI или I2C, то к этому числу можно добавить ещё 8 пинов<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">GPIO </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">1</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">3</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">5</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">18</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">19</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">21</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">22</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">23</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Ну и возможно удастся использовать ещё 6 выводов, которые предназначены для работы с внутренней флеш-памятью (например, если подключить внешнюю SD карту)<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">GPIO </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">6</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">7</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">8</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">9</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">10</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">11</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Как видим, с ESP8266 нет никакого сравнения — новый модуль выглядит просто отлично по количеству возможных подключений и это очень ценно в реальных проектах, в которых дорог каждый пин.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Скорость работы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Я уже упоминал мощный процессор, теперь несколько слов нужно сказать о скорости сетевой работы. Я затрудняюсь сказать с чем это связано, возможно с мощным процессором, возможно с оптимизацией сетевого стека, но модуль ESP32 под управлением Arduino Mega Server показал рекордную сетевую производительность.<br /><br /></span><img src="image1883193696.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br /><br />Загрузка страницы с объёмным кодом CSS и JavaScript и обилием графики занимает всего одну с небольшим секунды — быстрее, чем на любом другом протестированном контроллере, включая проводные контроллеры с W5100 и W5500 Ethernet интерфейсом.<br /><br />Применительно к Arduino Mega Server это снимает все ограничения на использование графики и любых JavaScript библиотек как по размеру, так и их количеству.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Прочие достоинства</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />ESP32 это чрезвычайно высокотехнологичное устройство, одно только сухое перечисление доступных возможностей может занять не одну страницу, а перечисление достоинств и возможностей с комментариями займёт целый том. Поэтому я на этом ограничусь, чтобы не загромождать статью и приведу несколько примеров работы с кодом на ESP32 в среде Ардуино.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Примеры работы с кодом</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Энергонезависимая память</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Это то, что применительно к Arduino Mega мы привыкли называть EEPROM. В ESP32 этой памяти нет как таковой, но у этого модуля есть её аналог и соответствующая библиотека для работы с ней. Называется эта память «NVS» (Non-volatile storage).<br /><br />Но для нас нет никакой разницы — можно точно так же сохранять значения и читать их после выключения и последующего включения контроллера.<br /><br />Пример использования. Подключаем библиотеку:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">#include &lt;Preferences.h&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Создаём объект prefs<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">Preferences prefs;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Инициализируем хранилище с идентификатором, например, «nvs»:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">prefs.begin(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#718c00;">&quot;nvs&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-weight:696; color:#8959a8;">false</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />false относится в выбору режима чтение/запись, в данном случае и чтение и запись. Сохраняем байт под именем «addr»:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">prefs.putUChar(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#718c00;">&quot;addr&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">65</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Читаем сохранённый байт:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; font-weight:696; color:#8959a8;">byte</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;"> b = prefs.getUChar(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#718c00;">&quot;addr&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Подобным же образом можно сохранять и читать значения любых других типов данных. Теперь удаляем хранилище.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">prefs.remove(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#718c00;">&quot;nvs&quot;</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Если разобраться, то это даже проще, чем работа со стандартной энергонезависимой памятью EEPROM на контроллерах Ардуино.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">AnalogWrite()</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Ещё одно нововведение, которое может поставить в тупик начинающего пользователя — в ESP32 отсутствует привычная функция AnalogWrite(). В первый момент это очень непривычно, но на самом деле эта функция всего лишь заменена своим более функциональным аналогом.<br /><br />Рассмотрим пример. Начнём с подключения соответствущей библиотеки, хотя библиотекой в полном смысле слова это назвать нельзя, скорее это специализированный файл с описанием нужных функций. Дело в том, что не все функции присутствуют напрямую в Arduino IDE, часть функций доступна в файлах, находящихся в каталоге<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">...\Documents\Arduino\hardware\espressif\esp32\cores\esp32</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />В данном случае нас интересует файл работы с ШИМ и светодиодами, который мы подключаем следующей инструкцией:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">#include </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#718c00;">&quot;esp32-hal-ledc.h&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#718c00; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Далее нам нужно установить номер канала (0), частоту ШИМ (например, 50 Гц) и разрешение (8 бит).<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">ledcSetup(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">50</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">8</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Номера каналов могут устанавливаться в диапазоне от 0 до 15, а разрешение от 1 до 16 бит. При выборе разрешения 8 бит, диапазон данных, управляющих ШИМ, будет находиться в интервале от 0 до 255.<br /><br />Далее нам нужно привязать наш канал (0) к какому-либо выводу GPIO, в данном случае к выводу 22:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">ledcAttachPin(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">22</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />И нужно не забыть обычным образом настроить 22-й пин на выход.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">pinMode(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">22</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, OUTPUT);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Всё, теперь мы можем управлять, например, яркостью свечения светодиода, просто указывая номер канала и значение ШИМ (яркости) из диапазона от 0 до 255.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; background-color:#f7f7f7;"><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">ledcWrite(</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">0</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">, </span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#f5871f;">50</span><span style=" font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%; font-family:'Menlo,Monaco,Consolas,Courier New,Courier,monospace'; font-size:9pt; color:#4d4d4c; background-color:#f7f7f7;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Прочие примеры кода на ESP32</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Дистрибутив Arduino Mega Server, ссылку на который я дам в конце статьи, кроме полностью работоспособной системы являет собой обширный сборник структурированного кода, протестированный и проверенный на работоспособность на модуле ESP32. Вы можете его использовать как обучающее пособие для вхождения в тему программирования под ESP32.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Стабильность работы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Arduino Mega Server для ESP8266 имеет подтверждённые аптаймы в несколько месяцев и демонстрирует абсолютно стабильную работу и у меня нет никаких причин думать, что у модуля ESP32 могут быть какие-то проблемы со стабильностью. По крайней мере за всё время создания дистрибутива AMS для ESP32 я не наблюдал ни единого сбоя или несанкционированной перезагрузки модуля. Всё работает очень чётко и предсказуемо.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Arduino Mega Server для ESP32</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Это ещё один представитель экосистемы AMS, включающей в себя контроллеры и платы Arduino Mega, Due, 101, M0, AMS Home, ESP8266, Sonoff, ESP32, OLIMEX ESP32-EVB и т. д. Благодаря мощному процессору и быстрой сетевой работе модуля ESP32, интерфейс Arduino Mega Server содержит обилие графики и скриптов и это никак не сказывается на скорости его работы — страницы загружается почти мгновенно.<br /><br /></span><img src="image1743505091.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br /><br />Всё работает стабильно и предсказуемо, никаких сбоев или неадекватного поведения системы или модуля не выявлено. Ниже приведён лог загрузки AMS, из которого можно узнать некоторые подробности о системе.<br /><br /></span><img src="image512567918.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br /><br />Температура модуля, измеряемая встроенным датчиком температуры колеблется от 50 градусов Цельсия при старте до 55 градусов в процессе работы. Во время работы ток потребления модуля составляет около 130 мА.<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Перспективы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Не нужно быть особым экспертом, чтобы предсказать, что сейчас как грибы после дождя начнут появляться платы на ESP32 всевозможных форматов и с разнообразным функционалом. Вот одна из первых ласточек OLIMEX </span><a href="https://www.olimex.com/Products/IoT/ESP32-EVB/open-source-hardware"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#548eaa; background-color:#000000;">ESP32-EVB</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;">, очень интересная плата для которой в ближайшее время выйдет специализированный дистрибутив Arduino Mega Server.<br /><br /></span><img src="image701122606.png" /><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Fira Sans,sans-serif'; font-size:9pt; font-weight:496; color:#333333;">Заключение</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"><br />Вот, собственно и всё, что я могу сказать о новом модуле ESP32 и его работе с Ардуино. Впечатления он оставляет исключительно положительные, мне по крайней мере, было очень приятно и интересно с ним работать. Немного портит картину отсутствие библиотек для поддержки датчиков и периферии, но это временное явление и вскоре с этим всё будет в порядке.<br /><br />Скачать дистрибутив Arduino Mega Server для ESP32 вы можете на странице </span><a href="https://hi-lab.ru/arduino-mega-server/details/download"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#548eaa; background-color:#000000;">загрузки</span></a><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#333333;"> официального сайта, вскоре там появится и соответствующая документация, а пока вы можете воспользоваться краткой инструкцией из файла readme.txt, находящегося в дистрибутиве.</span></p>
<p style=" margin-top:24px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28.8px; background-color:#ffffff;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; font-weight:696; color:#333333;">Теги:</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;"> </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%B4%D0%B5%D0%BB%D0%B0%D0%B9%20%D1%81%D0%B0%D0%BC%5D"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">сделай сам</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BDIY%5D"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">DIY</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BESP32%5D"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">ESP32</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BArduino%20Mega%20Server%5D"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">Arduino Mega Server</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BAMS%5D"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">AMS</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%83%D0%BC%D0%BD%D1%8B%D0%B9%20%D0%B4%D0%BE%D0%BC%5D"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">умный дом</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BIoT%5D"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">IoT</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BWi-Fi%5D"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">Wi-Fi</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BArduino%5D"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">Arduino</span></a></li></ul>
<p style=" margin-top:24px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; font-weight:696; color:#333333;">Хабы:</span><span style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;"> </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/hubs/hardware/"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">Компьютерное железо</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/hubs/home_automation/"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">Умный дом</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/hubs/internet_of_things/"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">Интернет вещей</span></a></li>
<li style=" font-family:'-apple-system,BlinkMacSystemFont,Arial,sans-serif'; font-size:9pt; color:#548eaa;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://habr.com/ru/hubs/DIY/"><span style=" font-size:medium; font-weight:496; text-decoration: underline; color:#0000ff; background-color:#000000;">DIY или Сделай сам</span></a></li></ul></body></html>