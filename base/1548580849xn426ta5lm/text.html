<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="articleBody"></a><span style=" font-family:'Ubuntu'; font-size:xx-large; font-weight:600;">С</span><span style=" font-family:'Ubuntu'; font-size:xx-large; font-weight:600;">оздание и удаление баз в MySQL/MariaDB</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image734510742.png" /><span style=" font-family:'Ubuntu';"> Обновлено: 13.10.2017 </span><img src="image734510742.png" /><span style=" font-family:'Ubuntu';"> Опубликовано: 10.08.2016 </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Тематические термины: </span><a href="https://www.dmosk.ru/terminus.php?object=mysql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">MySQL</span></a><span style=" font-family:'Ubuntu';">, </span><a href="https://www.dmosk.ru/terminus.php?object=mariadb"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">MariaDB</span></a><span style=" font-family:'Ubuntu';">, </span><a href="https://www.dmosk.ru/terminus.php?object=phpmyadmin"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">phpMyAdmin</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В данных примерах используется командная оболочка mysql и phpMyAdmin. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-create-db#connect"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Подключение к СУБД</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-create-db#create"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Создание новой базы</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-create-db#create-cmd"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Командная строка</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-create-db#create-phpmyadmin"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">phpMyAdmin</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-create-db#user"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Создание пользователя</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-create-db#drop"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Удаление базы</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-create-db#drop-cmd"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Командная строка</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-create-db#drop-phpmyadmin"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">phpMyAdmin</span></a><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="connect"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">П</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">одключение к СУБД</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для начала заходим в среду управления MySQL. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В Linux вводим команду: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"># mysql -uroot -p </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В Windows переходим в каталог, с установленной СУБД и запускаем одноименную команду mysql, например: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">cd &quot;%ProgramFiles%\MySQL\MySQL Server 5.5\bin\&quot; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql -u root -p </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-style:italic;">* в приведенных примерах идет подключение к mysql/mariadb под учетной записью </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">root </span><span style=" font-family:'Ubuntu'; font-style:italic;">с запросом пароля.</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="create"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">С</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">оздание новой базы</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="create-cmd"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">К</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">омандная строка</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Используйте данный шаблон команды: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; CREATE DATABASE newdb DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-style:italic;">* вышеописанная команда создаст базу данных с названием </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">newdb </span><span style=" font-family:'Ubuntu'; font-style:italic;">и кодировкой </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">UTF-8</span><span style=" font-family:'Ubuntu'; font-style:italic;"> (самая распространенная и универсальная).</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверить, что база появилась можно командой: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; show databases; </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="create-phpmyadmin"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">p</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">hpMyAdmin</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В phpMyAdmin переходим в раздел </span><span style=" font-family:'Ubuntu'; font-weight:600;">Базы данных</span><span style=" font-family:'Ubuntu';"> - вводим название новой базы - выбираем кодировку и нажимаем </span><span style=" font-family:'Ubuntu'; font-weight:600;">Создать</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1164497760.png" /><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">Н</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">астройка доступа</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы к созданной базе можно было подключиться, сразу добавим пользователя: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; GRANT ALL PRIVILEGES ON newdb.* TO dbuser@localhost IDENTIFIED BY 'password' WITH GRANT OPTION; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-style:italic;">* где </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">newdb.*</span><span style=" font-family:'Ubuntu'; font-style:italic;"> — наша база и все ее таблицы; </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">dbuser@localhost</span><span style=" font-family:'Ubuntu'; font-style:italic;"> — имя учетной записи, которая будет подключаться с локального сервера; </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">password</span><span style=" font-family:'Ubuntu'; font-style:italic;"> — придуманный нами пароль.</span><span style=" font-family:'Ubuntu';"><br /></span><span style=" font-family:'Ubuntu'; font-style:italic;">** В данном примере, учетной записи будут предоставлены полные права. Подробнее о правах в MySQL читайте статью </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user"><span style=" font-family:'Ubuntu'; font-style:italic; text-decoration: underline; color:#0000ff;">Как создать пользователя MySQL и дать ему права</span></a><span style=" font-family:'Ubuntu'; font-style:italic;">.</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="drop"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">У</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">даление базы MySQL</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="drop-cmd"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">К</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">омандная консоль</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Попробуем удалить ранее созданную базу: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; DROP DATABASE newdb; </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="drop-phpmyadmin"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">p</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">hpMyAdmin</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выбираем нужную базу галочкой и кликаем по </span><span style=" font-family:'Ubuntu'; font-weight:600;">Удалить</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image898976110.png" /><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://www.dmosk.ru/categories.php?object=servers"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"># Серверы</span></a><span style=" font-family:'Ubuntu';"> </span><a href="https://www.dmosk.ru/categories.php?object=db"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"># Базы данных</span></a><span style=" font-family:'Ubuntu';"> </span><a href="https://www.dmosk.ru/categories.php?object=mysql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"># MySQL</span></a><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="articleBody"></a><span style=" font-family:'Ubuntu'; font-size:xx-large; font-weight:600;">С</span><span style=" font-family:'Ubuntu'; font-size:xx-large; font-weight:600;">оздание пользователей MySQL/MariaDB и предоставление прав доступа</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image2031697828.png" /><span style=" font-family:'Ubuntu';"> Обновлено: 24.09.2018 </span><img src="image2031697828.png" /><span style=" font-family:'Ubuntu';"> Опубликовано: 01.08.2016 </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Тематические термины: </span><a href="https://www.dmosk.ru/terminus.php?object=mysql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">MySQL</span></a><span style=" font-family:'Ubuntu';">, </span><a href="https://www.dmosk.ru/terminus.php?object=mariadb"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">MariaDB</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Учетные записи в СУБД MySQL/MariaDB представлены в виде связки &lt;имя пользователя&gt;@&lt;удаленный хост, с которого можно подключаться&gt;. Это может вызвать путаницу, поэтому необходимо быть внимательнее, например, учетные записи root@localhost и root@192.168.0.15 — разные. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#create"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Создать пользователя</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#show"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Посмотреть пользователей</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#change"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Сменить пароль</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#change-mysql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">MySQL</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#change-mariadb"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">MariaDB</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#change-root"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Суперпользователю</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#examples"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Примеры</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#examples-rights"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Особые права</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#examples-remote"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Удаленное подключение</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#examples-backup"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Права на резервное копирование</span></a><span style=" font-family:'Ubuntu';"><br />    </span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#examples-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">С правами подключения к определенной таблице</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="https://www.dmosk.ru/miniinstruktions.php?mini=mysql-user#errors"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Возможные ошибки</span></a><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="create"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">С</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">оздание пользователя</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Синтаксис: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; GRANT &lt;тип привилегий&gt; ON &lt;объект&gt; TO &lt;пользователь&gt; [IDENTIFIED BY &lt;пароль&gt;] &lt;дополнительные опции&gt;; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Например, эта команда предоставляет права доступа пользователю и, если его не существует, создает его: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'dbuser'@'localhost' IDENTIFIED BY 'password' WITH GRANT OPTION; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Описание команды: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">ALL PRIVILEGES:</span><span style=" font-family:'Ubuntu';"> предоставляет полные права на использование данных.<br /></span><span style=" font-family:'Ubuntu'; font-weight:600;">*.* :</span><span style=" font-family:'Ubuntu';"> права предоставляются на все базы и все таблицы.<br /></span><span style=" font-family:'Ubuntu'; font-weight:600;">dbuser:</span><span style=" font-family:'Ubuntu';"> имя учетной записи.<br /></span><span style=" font-family:'Ubuntu'; font-weight:600;">localhost:</span><span style=" font-family:'Ubuntu';"> доступ для учетной записи будет предоставлен только с локального компьютера.<br /></span><span style=" font-family:'Ubuntu'; font-weight:600;">password:</span><span style=" font-family:'Ubuntu';"> пароль, который будет задан пользователю.<br /></span><span style=" font-family:'Ubuntu'; font-weight:600;">WITH GRANT OPTION:</span><span style=" font-family:'Ubuntu';"> будут предоставлены дополнительные права на изменение структуры баз и таблиц. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">П</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">осмотреть существующих пользователей и их привилегии</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Список пользователей: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; SELECT user, host FROM mysql.user; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Список привилегий (для кажого пользователя смотряться отдельно): </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; SHOW GRANTS FOR 'root'@'localhost'; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-style:italic;">* где </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">'root'@'localhost'</span><span style=" font-family:'Ubuntu'; font-style:italic;"> — учетная запись, для которой смотрим привилегии; если упустить FOR, команда выдаст результат для пользователя, под которым выполнено подключение к СУБД.</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="change"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">С</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">мена пароля</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="change-mysql"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">M</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">ySQL</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Версия 5.7.6 и более современная: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; ALTER USER 'root'@'localhost' IDENTIFIED BY 'New_Password'; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">*** </span><span style=" font-family:'Ubuntu';">mysql&gt; ALTER USER admin@localhost  IDENTIFIED BY 'myub485127sav'; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">ALTER USER admin@192.168.1.42  IDENTIFIED BY 'myub485127sav'; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">ALTER USER  alensav@192.168.1.42  IDENTIFIED BY 'myub485127sav'; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">ALTER USER  alensav@localhost  IDENTIFIED BY 'myub485127sav';</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Версия 5.7.5 и древнее: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; SET PASSWORD FOR 'root'@'localhost' = PASSWORD('New_Password'); </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-style:italic;">* посмотреть версию СУБД можно командой </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">mysql -V</span><span style=" font-family:'Ubuntu'; font-style:italic;">.</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="change-mariadb"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">M</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">ariaDB</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; SET PASSWORD FOR 'root'@'localhost' = PASSWORD('New_Password'); </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="change-root"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">С</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">мена пароля пользователю root</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Первый раз пароль задается из командной строки операционной системы (для MySQL/MariaDB): </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysqladmin -u root password </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для смены пароля root необходимо выполнить команду в оболочке mysql по инструкции, описанной выше. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="examples"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">Д</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">ругие примеры</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Рассмотрим часто встречаемые операции по работе с пользователями сервера баз данных. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="examples-rights"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">1</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">. Особые права</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Предоставление особых прав пользователю: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; GRANT SELECT, UPDATE ON base1.* TO 'dbuser'@'localhost' IDENTIFIED BY 'password'; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-style:italic;">* права на выборку и обновление данных во всех таблицах базы </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">base1 </span><span style=" font-family:'Ubuntu'; font-style:italic;">для пользователя </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">dbuser</span><span style=" font-family:'Ubuntu'; font-style:italic;"><br />** список всех возможных прав: all privileges, alter, create, create temporary tables, delete, drop, execute, file, index, insert, lock tables, process, references, reload, replication client, replication slave, select, show databases, shutdown, super, update, usage</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="examples-remote"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">2</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">. Удаленное подключение</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешение на удаленное подключение и использование базы MySQL: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'dbuser'@'192.168.0.55' IDENTIFIED BY 'password'; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-style:italic;">* предоставит права пользователю </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">dbuser,</span><span style=" font-family:'Ubuntu'; font-style:italic;"> который будет подключаться с компьютера с IP-адресом </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">192.168.0.55.</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="examples-backup"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">3</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">. Права на резервное копирование</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Создание учетной записи MySQL с правами создания резервных копий: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; GRANT SELECT, SHOW VIEW, RELOAD, REPLICATION CLIENT, EVENT, TRIGGER, LOCK TABLES ON *.* TO 'backup'@'localhost' IDENTIFIED BY 'backup'; </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="examples-table"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">. Права доступа к определенной таблице</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">По сути, это такое же предоставление прав, но с указанием конкретной таблицы после базы: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql&gt; GRANT ALL PRIVILEGES ON base1.table1 TO 'dbuser'@'localhost' IDENTIFIED BY 'password'; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-style:italic;">* в данном примере предоставлены все права на таблицу </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">table1</span><span style=" font-family:'Ubuntu'; font-style:italic;"> в базе </span><span style=" font-family:'Ubuntu'; font-weight:600; font-style:italic;">base1</span><span style=" font-family:'Ubuntu'; font-style:italic;">.</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="errors"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">В</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">озможные ошибки</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">1. ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Причина: в новых версиях по умолчанию активированы политики на проверку сложности пароля. Их список можно посмотреть командой: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">&gt; SHOW VARIABLES LIKE 'validate_password%'; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывод команды будет, примерно, следующим: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">+--------------------------------------+--------+<br />| Variable_name                        | Value  |<br />+--------------------------------------+--------+<br />| validate_password_check_user_name    | OFF    |<br />| validate_password_dictionary_file    |        |<br />| validate_password_length             | 8      |<br />| validate_password_mixed_case_count   | 1      |<br />| validate_password_number_count       | 1      |<br />| validate_password_policy             | MEDIUM |<br />| validate_password_special_char_count | 1      |<br />+--------------------------------------+--------+ </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-style:italic;">* где:</span><span style=" font-family:'Ubuntu';"> </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; font-style:italic;">validate_password_check_user_name —</span><span style=" font-style:italic;"> пароль не должен совпадать с именем пользователя.</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; font-style:italic;">validate_password_dictionary_file —</span><span style=" font-style:italic;"> использовать специальный файл со словарем запрещенных паролей.</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; font-style:italic;">validate_password_length —</span><span style=" font-style:italic;"> минимальная длина пароля.</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; font-style:italic;">validate_password_mixed_case_count —</span><span style=" font-style:italic;"> сколько, как минимум, должно быть символов в малой и большой раскладках.</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; font-style:italic;">validate_password_number_count —</span><span style=" font-style:italic;"> какое минимальное количество цифр использовать в пароле.</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; font-style:italic;">validate_password_policy —</span><span style=" font-style:italic;"> позволяет задать определенный набор правил. Доступны значения LOW (или 0), MEDIUM (1), STRONG (2).</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600; font-style:italic;">validate_password_special_char_count —</span><span style=" font-style:italic;"> минимальное количество специальных символов (например, # или !).</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Решение:  </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Привести пароль в соответствие требованиям политик. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Отключить политику, которая не позволяет использовать желаемый пароль. Например, чтобы отключить требование использовать цифры вводим: </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">&gt; SET GLOBAL validate_password_number_count = 0; </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">2. ERROR 1728 (HY000): Cannot load from mysql.tables_priv. The table is probably corrupted</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Причина: система считает, что таблица tables_priv в базе mysql неисправна. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Решение: чаще всего, ошибка возникает при переносе баз с одного сервера в другой. Если версии СУБД разные, таблица tables_priv может работать со сбоями. Для исправления необходимо выполнить команду mysql_upgrade — она проверяет все таблицы на совместимость с текущей версией MySQL/MariaDB и вносит исправления. Применение команды: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysql_upgrade -u root -p </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://www.dmosk.ru/categories.php?object=db"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"># Базы данных</span></a><span style=" font-family:'Ubuntu';"> </span><a href="https://www.dmosk.ru/categories.php?object=mysql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"># MySQL</span></a><span style=" font-family:'Ubuntu';"> </span></p></body></html>