<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:18pt;">ESP8266-1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Знакомство с недорогим и функциональным микроконтроллером ESP8266: прошивка и пример использования</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image610659260.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://tproger.ru/author/80247"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">Александр Ланский</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">08 мая 2019</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:24px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Отредактировано 25 мар 2024</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">Микроконтроллер ESP8266 — недорогая и функциональная микросхема, от производителя Espressif, которая поддерживает WiFi-интерфейса.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">64</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">136К открытий142К показов</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1895970725.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="contentImageViewer"></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">E</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">SP8266 — китайский микроконтроллер (далее МК) от производителя Espressif с поддержкой WiFi-интерфейса. Управлять всем этим можно не только с браузера, но и из приложений на Android/iOS/Desktop. Если МК будет применяться там, куда не достаёт WiFi-сеть, то ESP8266 может работать в режиме точки доступа.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Примечание</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;"> В этой статье не будут рассмотрены практические примеры применения ESP8266. Речь пойдёт об основных преимуществах и возможностях этого МК.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Содержание:</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Разновидности МК серии ESP и их платХарактеристикиКак работать с микроконтроллером ESP8266?ПрошивкаВ чём прошивается?ОсновыРаспределение памяти</li></ol>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Микроконтроллер ESP8266 работает с внешней flash-памятью по интерфейсу SPI. Её объём варьируется от 512 Кбайт до 4 Мбайт. При желании и умении микросхему памяти можно будет перепаять на версию до 32 Мбайт.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="part1"></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Р</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">азновидности МК серии ESP и их плат</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Существует около полутора десятка версий МК серии ESP и огромное количество плат с ними. Рассмотрим самые популярные из них.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Микроконтроллеры ESP8266</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">ESP-01</span></p>
<p style=" margin-top:40px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1075644944.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Микроконтроллер ESP-01</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> Имеет 8 разведённых контактов (VCC, GND, UTXD, URXD, CH_PD, GPIO0, GPIO2, GPIO6) и PCB-антенну (печатный проводник на самой плате).</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Из разведённых выводов тут присутствуют только 3 GPIO, но не стоит видеть в этом одни минусы. Если нужно будет управлять одним реле или получать данные с датчика температуры, вам не понадобятся все выводы МК, достаточно будет лишь пары. К тому же, существуют платы и шилды с возможностью простой коммутации именно к этой версии МК. Например такая:</li></ul>
<p style=" margin-top:40px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image84120355.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Плата WiFi-реле</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">ESP-03</span></p>
<p style=" margin-top:40px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image521675065.png" /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Здесь появляется керамическая антенна. Она считается немного эффективней своего печатного собрата.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Также на плате разведены все доступные выводы GPIO. В <a href="https://habr.com/ru/post/368863/"><span style=" text-decoration: underline; color:#000000;">этой статье</span></a> описана разница между типами антенн для микроконтроллеров ESP8266.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">ESP-07</span></p>
<p style=" margin-top:40px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image808220702.png" /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В этой версии в глаза сразу бросается металлический экран (который перед этим появляется на ESP-06).</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На борту керамическая антенна и разъём для внешней антенны.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">ESP-12</span></p>
<p style=" margin-top:40px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image810553617.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">В свою очередь, существует несколько вариантов этой версии: ESP-12S, ESP-12F, ESP-12E. Вторая и третья версии имеют на торце дополнительно 6 разведённых контактов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Платы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">WeMos D1 mini</span></p>
<p style=" margin-top:40px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1850938890.png" /></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Имеет распайку девяти GPIO-контактов.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На плате имеется небезызвестный мост CH34x (такие часто ставят на клоны Arduino).</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Установлен МК с 4 Мбайт flash-памяти.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Недостаток для некоторых — придётся самому паять контакты на плату (идут в комплекте).</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Конструкционно совместима с различными выпускаемыми шилдами реле/датчиками.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">NodeMCU v0.9/v1</span></p>
<p style=" margin-top:40px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image882056871.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Первое поколение плат серии NodeMCU. На ней распаяны все 11 GPIO-портов. Некоторые из них обладают дополнительными функциями (UART, I2C, SPI, PWM, ADC). Хотя на плате впаяны контакты, она занимает всю ширину беспаечной макетной платы, что затрудняет работу на ней. МК имеет 4 Мбайт flash-памяти. Также имеется мост CH340.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">NodeMCU v3</span></p>
<p style=" margin-top:40px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image196437030.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Финальная версия платы этой серии. Существует и v2 «Amica», которая меньше по габаритам. v3 носит название «LoLin» и отличается от предыдущей версии только размерами и незначительными деталями (например дополнительной распайкой шины питания). Кроме традиционного моста CH340/CH341 на платы ставят чип CP2102, так что внимательней с выбором драйвера на них.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="part2"></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Х</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">арактеристики</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Все эти (и не только эти) платы выполнены на чипсете микроконтроллера ESP8266EX, а следовательно, характеристики у них одинаковые:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Протоколы: 802.11 b/g/n/e/i.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Диапазон частот: 2.4 ГГц – 2.5 ГГц.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Процессорное ядро: Tensilica L106 32 разряда.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Диапазон напряжений питания: 2.5 В – 3.6 В.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Среднее потребление тока: 80 мA.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Режимы WiFi: Station/SoftAP/SoftAP+Station.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Безопасность: WPA/WPA2.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Шифрование: WEP/TKIP/AES.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Обновление прошивки: через UART, по радиоканалу (OTA — Over The Air).</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сетевые протоколы: IPv4, TCP/UDP/HTTP/FTP.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поддержка WiFi Direct (P2P), P2P Discovery, P2P GO (Group Owner) mode, GC (Group Client) mode, P2P Power Management.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Встроенные аппаратные ускорители: CCMP (CBC-MAC, режим счётчика), TKIP (MIC, RC4), WAPI (SMS4), WEP (RC4), CRC.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поддержка <a href="http://wikihandbk.com/wiki/ESP8266:%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80%D1%8B/%D0%9A%D0%B0%D0%BA_%D1%81%D0%BE%D0%B1%D1%80%D0%B0%D1%82%D1%8C_%D0%B2%D0%B5%D0%B1-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80_%D0%BD%D0%B0_%D0%B1%D0%B0%D0%B7%D0%B5_ESP8266"><span style=" text-decoration: underline; color:#000000;">LUA-скриптов</span></a>.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="part3"></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">К</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">ак работать с микроконтроллером ESP8266?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Есть два способа работы с ним:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">управление через AT-команды и автономная работа со своей прошивкой. В первом случае ESP8266 работает только в паре с другими МК, во втором — может работать независимо (хотя никто не запрещает присоединить её к другому МК).</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">«Из коробки» МК поставляется с прошивкой для работы через AT-команды. Для этого ESP8266 подключается к любому другому МК по UART-интерфейсу. Для демонстрации работы AT-команд ESP8266 можно подключить к компьютеру через USB-UART переходник и запустить монитор последовательного порта (например из Arduino IDE). Про то, как работать с этими командами, можно прочитать в <a href="https://radioprog.ru/post/397"><span style=" text-decoration: underline; color:#000000;">этой статье</span></a>.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="part4"></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">П</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">рошивка</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">В большинстве случаев намного удобней прошивать МК и работать с ним со своей прошивкой. Однако тут тоже есть свои нюансы. Вот 3 варианта событий:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">У вас «голый» ESP8266, например ESP-01. Вам потребуется USB-UART переходник, который нужно подключить к МК. Этот переходник обязательно должен быть на 3-вольтовой логике, т. к. иначе можно легко отправить ваш МК в кибер-Вальхаллу. Про процесс подключения можно прочитать <a href="https://esp8266.ru/esp8266-podkluchenie-obnovlenie-proshivki/"><span style=" text-decoration: underline; color:#000000;">здесь</span></a>.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Второй случай идентичен первому, кроме того, что вместо переходника можно использовать любую плату Arduino. Достаточно специальным образом подключить ESP8266 к UART-контактам Arduino, а её саму «отключить», замкнув контакт аппаратного сброса (RESET) на землю. Естественно, питать ESP8266 нужно будет от шины питания 3.3 В. В этом случае в качестве переходника USB-UART будет выступать мост (чаще всего CH340) на самой плате Arduino. Этот процесс также описан в статье <a href="https://esp8266.ru/esp8266-podkluchenie-obnovlenie-proshivki/"><span style=" text-decoration: underline; color:#000000;">выше</span></a>.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Лучший вариант — это плата с USB-UART мостом на борту (как NodeMCU, WeMos и прочие). В этом случае ничего дополнительного делать не нужно — просто подключайте плату через USB.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="part5"></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">В</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;"> чём прошивается?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Например </span><a href="https://github.com/nodemcu/nodemcu-flasher"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">NodeMCU Flasher</span></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;"> (которая подходит не только для плат NodeMCU) или </span><a href="https://github.com/espressif/esptool"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">ESPTool</span></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;"> (необходим </span><a href="https://www.python.org/downloads/"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">Python</span></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Однако в этой статье работа с МК и процесс прошивки будут рассмотрены в Arduino IDE.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Изначально среда Arduino IDE не предназначена для работы с МК серии ESP. Чтобы это исправить, идём в Файл → Настройки и в поле Дополнительные ссылки для Менеджера плат вставляем эту ссылку:</span></p>
<p style=" margin-top:14px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Потом открываем Инструменты → Плата → Менеджер плат и в открывшемся списке в самом низу находим плату «esp8266 by ESP8266 Community» (если с этим возникли трудности — используем поиск вверху окна). Устанавливаем последнюю версию платы (около 150 Мбайт).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">После установки в списке плат появится немалое количество плат. Если не нашли свою плату или не знаете её названия — выбирайте Generic ESP8266 Module. Теперь можно выбрать свой МК в списке COM-портов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">У ESP8266 две скорости передачи: основная — её вы указываете при инициализации последовательного порта, и скорость, на которой передаётся отладочная информация. Она передаётся сразу после подачи питания на МК. Обычно это скорости 115200 бод и 74800 бод 0 соответственно.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="part6"></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">О</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">сновы</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Если вы не владеете базовыми знаниями работы с платформой Arduino, наверстать упущенное можно в нашей статье про </span><a href="https://tproger.ru/curriculum/arduino-quick-start"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">основы использования Arduino</span></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:14px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://tproger.ru/news/kompyuter-s-ryzen-7-8840u--wi-fi-6-i-32-gb-operativki-umestili-v-skladnuyu-klaviaturu"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">🔥 Компьютер с Ryzen 7 8840U, Wi-Fi 6 и 32 ГБ оперативки уместили в складную клавиатуру</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://tproger.ru/news/kompyuter-s-ryzen-7-8840u--wi-fi-6-i-32-gb-operativki-umestili-v-skladnuyu-klaviaturu"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">tproger.ru</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">После скачивания платы ESP8266 с помощью менеджера, в примерах появится большое количество скетчей. Рассмотрим один из них (Файл → Примеры → ESP8266WebServer → HelloServer):</span></p>
<p style=" margin-top:16px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;">#</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">include</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;"> </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&lt;ESP8266WiFi.h&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;">#</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">include</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;"> </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&lt;WiFiClient.h&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;">#</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">include</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;"> </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&lt;ESP8266WebServer.h&gt;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">const</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;"> </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">char</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">* ssid = </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;........&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">; </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Указываем имя существующей точки доступа</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">const</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;"> </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">char</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">* password = </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;........&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">; </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Указываем пароль существующей точки доступа</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;">ESP8266WebServer </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6f42c1; background-color:transparent;">server</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;">80</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;">)</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:9pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">void</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;"> </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6f42c1; background-color:transparent;">handleRoot</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;">() </span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">{ </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Обработчик запроса клиента по корневому адресу</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Отправляем клиенту</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">send</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;">200</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">, </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;text/plain&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">, </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;Привет от ESP8266!&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:9pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">void</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;"> </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6f42c1; background-color:transparent;">handleNotFound</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;">() </span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">{ </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Обрабатываем небезызвестную ошибку 404</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  String message = </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;File Not Found\n\n&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  message += </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;URI: &quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  message += server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">uri</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  message += </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;\nMethod: &quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  message += (server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">method</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">() == HTTP_GET) ? </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;GET&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;"> : </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;POST&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  message += </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;\nArguments: &quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  message += server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">args</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  message += </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">for</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;"> (</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">uint8_t</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;"> i = </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;">0</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">; i &lt; server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">args</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(); i++) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">    message += </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot; &quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;"> + server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">argName</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(i) + </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;: &quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;"> + server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">arg</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(i) + </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;\n&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  }</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">send</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;">404</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">, </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;text/plain&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">, message);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:9pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">void</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;"> </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6f42c1; background-color:transparent;">setup</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">void</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;">) </span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  Serial.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">begin</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;">115200</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:9pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  WiFi.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">mode</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(WIFI_STA); </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Устанавливаем Wi-Fi модуль в режим клиента (STA)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  WiFi.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">begin</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(ssid, password); </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Устанавливаем ssid и пароль от сети, подключаемся</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">while</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;"> (WiFi.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">status</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">() != WL_CONNECTED) { </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Ожидаем подключения к Wi-Fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">    </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">delay</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;">500</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">    Serial.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">print</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;.&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  }</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:9pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Выводим информацию о подключении</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  Serial.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">println</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  Serial.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">print</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;Подключено к &quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  Serial.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">println</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(ssid);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  Serial.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">print</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;IP адрес: &quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  Serial.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">println</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(WiFi.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">localIP</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">());</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:9pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Устанавливаем обработчики. Можно сделать двумя способами:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">on</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;/&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">, handleRoot);</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:9pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">on</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;/inline&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">, []() {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">    server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">send</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#005cc5; background-color:transparent;">200</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">, </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;text/plain&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">, </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;Отличная работа!&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  });</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:9pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">onNotFound</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(handleNotFound); </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Вызывается, когда обработчик не назначен</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Запускаем сервер</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">begin</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  Serial.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">println</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;HTTP-сервер запущен&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">}</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'monospace'; font-size:9pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">void</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;"> </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6f42c1; background-color:transparent;">loop</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">void</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#000000; background-color:transparent;">) </span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">{</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">  server.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">handleClient</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Что делает этот скетч? МК подключается к вашей WiFi-сети и запускает сервер. В монитор последовательного порта выведется локальный IP-адрес (к примеру, </span><span style=" font-family:'monospace'; font-size:9pt;">192.168.0.105</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">). Вбиваем этот IP в адресную строку браузера, после чего в нём должна отобразиться строка «Привет от ESP8266!». Таким же образом можно проверить адрес </span><span style=" font-family:'monospace'; font-size:9pt;">/inline</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Ознакомиться с API МК можно в их официальном </span><a href="https://github.com/esp8266/Arduino"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">репозитории</span></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="part7"></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Р</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">аспределение памяти</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Внешняя память распределена на следующие разделы:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">скетчи (память для прошивки);</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">файловая система SPIFFS;</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">OTA-Update (прошивка, переданная «по воздуху»);</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">EEPROM (да-да, её у МК тоже нет, поэтому она имитируется на flash-памяти);</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">конфигурация WiFi.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Файловая система SPIFFS</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Один из плюсов внешней flash-памяти — файловая система. В неё можно с лёгкостью записать файлы (веб-странички, медиа-файлы и прочее) на микроконтроллеры ESP8266. На аппаратном уровне это можно было бы реализовать подключив к МК модуль SD-карт. Однако это решение требует свободных портов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Размер файловой системы (от 32 Кбайт до 15 Мбайт) зависит от самого объема flash-памяти и от конфигурации, выставленной в Инстурменты → Flash size. Например, конфигурация </span><span style=" font-family:'monospace'; font-size:9pt;">4M (2M SPIFFS)</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;"> предназначена для МК с общим объёмом flash-памяти 4 Мбайт, 2 Мбайт из которых будут выделены под файловую систему.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">SPIFFS не работает с папками — она содержит только список файлов. Соответственно, если загрузить в неё папку style, в которой будет файл header.css, то в файловую систему систему запишется файл с именем /style/header.css. Об этом стоит помнить, потому что длина файлового имени не должна превышать 31 символ (читается 32, но символ с кодом 0 отведён под завершение строки).</span></p>
<p style=" margin-top:14px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://tproger.ru/articles/skaz-o-tom--kak-ya-za-god-rewil-bolee-600-leetcode-zadach"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">Сказ о том, как я за год решил более 600 leetcode задач</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://tproger.ru/articles/skaz-o-tom--kak-ya-za-god-rewil-bolee-600-leetcode-zadach"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">tproger.ru</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Для загрузки файлов потребуется инструмент </span><a href="https://github.com/esp8266/arduino-esp8266fs-plugin/releases/download/0.3.0/ESP8266FS-0.3.0.zip"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">ESP8266FS</span></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">, интегрирующийся в Arduino IDE. Инструкция по установке:</span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Качаем инструмент по ссылке выше.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В папке Arduino IDE создайте папку tools (если её там ещё нет).</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В папку tools распакуйте скачанный архив. Должно быть так:<br />…/Arduino/tools/ESP8266FS/tool/esp8266fs.jar.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После запуска среды в папке скетча (Скетч → Показать папку скетча) нужно создать папку data. Её содержимое будет загружаться в файловую систему.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После кликаем в Инструменты → ESP8266 Sketch Data Upload, чтобы загрузить данные в файловую систему. После загрузки в панели статуса высветится «SPIFFS Image Uploaded». Перед процессом загрузки в файловую систему обратите внимание: если открыт монитор последовательного порта — закрываем его.</li></ol>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Как работать с SPIFFS и файлами в ней, можно узнать в </span><a href="http://wikihandbk.com/wiki/ESP8266:%D0%9F%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B8/Arduino/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D1%81_%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BE%D0%B9_%D0%B2_%D0%B0%D0%B4%D0%B4%D0%BE%D0%BD%D0%B5_ESP8266_%D0%B4%D0%BB%D1%8F_IDE_Arduino"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">этой статье</span></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Энергонезависимая память EEPROM</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Работа с внешней памятью немного отличается от </span><a href="https://arduinoplus.ru/arduino-eeprom/"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">стандартной</span></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">.</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Перед считыванием или записью данных нужно инициализировать EEPROM, указав при этом выделяемую под неё память (от 4 до 4096 байт) функцией <span style=" font-family:'monospace';">EEPROM.begin(size)</span>.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Привычная функция <span style=" font-family:'monospace';">EEPROM.write(addr, value)</span> записывает данные не на саму энергонезависимую память, а в оперативную.</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы внесённые данные записались в память, нужна функция <span style=" font-family:'monospace';">EEPROM.commit()</span> (или же <span style=" font-family:'monospace';">EEPROM.end()</span>, чтобы заодно очистить данные из оперативной памяти).</li>
<li style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Метод <span style=" font-family:'monospace';">EEPROM.read(addr)</span> возвращает байт из памяти по адресу.</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Прошивка «по воздуху» OTA-Update</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Для этого вам потребуется установленный </span><a href="https://www.python.org/downloads/"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">Python</span></a><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">В скетч нужно добавить файл: </span><span style=" font-family:'monospace'; font-size:9pt;">#include &lt;ArduinoOTA.h&gt;</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">. Инициализируем и настраиваем OTA следующими строками:</span></p>
<p style=" margin-top:16px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">ArduinoOTA.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">setHostname</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">(</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;Host-ESP&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Имя хоста</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">ArduinoOTA.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">setPassword</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">((</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">const</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;"> </span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#d73a49; background-color:transparent;">char</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;"> *)</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#032f62; background-color:transparent;">&quot;password&quot;</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">);</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Пароль для подключения к хосту. Если не нужен — комментируем эту строку</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">ArduinoOTA.</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#e36209; background-color:transparent;">begin</span><span style=" font-family:'monospace'; font-size:9pt; color:#000000; background-color:transparent;">();</span><span style=" font-family:'Jetbrains Mono,Jetbrains Mono override,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace'; font-size:9pt; color:#6a737d; background-color:transparent;">// Инициализация</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">После этого достаточно в метод </span><span style=" font-family:'monospace'; font-size:9pt;">loop()</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;"> добавить строку: </span><span style=" font-family:'monospace'; font-size:9pt;">ArduinoOTA.handle()</span><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Прошиваем МК по проводу. В случае успешной загрузки в списке портов появится новый хост с именем «esp8266-xxxxxx», где esp8266 — указанное выше имя хоста, а xxxxxx — локальный IP-адрес МК. Выбираем его.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt;">Теперь микроконтроллер ESP8266 можно прошивать «по воздуху».</span></p>
<p style=" margin-top:14px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://tproger.ru/articles/smart-home-on-arduino-and-alisa"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">Как сделать умный дом своими руками на Arduino и Яндекс.Алиса — пошаговая инструкция</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://tproger.ru/articles/smart-home-on-arduino-and-alisa"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">tproger.ru</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image605680985.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Inter,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"><br /></span></p></body></html>