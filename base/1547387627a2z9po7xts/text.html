<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Начало работы с Vagrant и зачем он вообще нужен</span> </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">19 января 2015 </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В первом приближении Vagrant — это такой CLI для VirtualBox. То есть, утилита, которая говорит «создать виртуалку», «запустить виртуалку» и так далее. На самом деле, Vagrant представляет собой нечто куда большее. В частности, помимо VirtualBox есть немало других так называемых <span style=" font-style:italic;">провайдеров</span> — VMWare, <a href="https://eax.me/aws-intro/"><span style=" text-decoration: underline; color:#0000ff;">Amazon EC2</span></a>, LXC и libvirt. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для каких задач может пригодиться Vagrant?</p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вам просто нравится CLI и нужна виртуальная машина чтобы с чем-то там поиграться;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Такой жесткий способ изолировать ненадежное, например, в плане безопасности, приложение ото всей остальной системы;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Быстрый способ развернуть на сервере какой-нибудь готовый LAMP ценой накладных расходов на виртуализацию;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверить, как ведет себя распределенное приложение при сетевых проблемах и падении машин;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Еще при тестировании удобно иметь какой-то начальный образ системы, к которому можно откатиться перед следующим прогоном тестов;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">И опять таки, тестирование — вы разрабатываете под x64 c 16 Гб памяти, а хотите проверить, что программа работает на x86 с 512 Мб памяти;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Иногда выгоднее купить одну жирную тачку и разместить на ней несколько ВМ, чем покупать несколько физических машин;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В ряде случаев с Vagrant’ом намного удобнее мигрировать приложение с хоста на хост (в частности, передать сайт другому владельцу);</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Как замена deb- и rpm-пакетам, которая умеет разрешать конфликты зависимостей всяких криво написанных приложений, как бы создавая для них «песочницы»;</li>
<li style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вы сидите под Ubuntu, а вам для решения каких-то задач иногда нужна другая ОС — CentOS, FreeBSD, OpenBSD или Windows;</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Как видите, штука полезная. Давайте же научимся ею пользоваться!</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">VirtualBox качаем <a href="https://www.virtualbox.org/wiki/Linux_Downloads"><span style=" text-decoration: underline; color:#0000ff;">отсюда</span></a>, а Vagrant — <a href="https://www.vagrantup.com/downloads.html"><span style=" text-decoration: underline; color:#0000ff;">отсюда</span></a>. Устанавливаем:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo dpkg -i virtualbox-4.3_4.3.20-96996~Ubuntu~raring_amd64.deb<br />sudo dpkg -i vagrant_1.6.5_x86_64.deb</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы не возиться со всякими там ISO-образами в Vagrant есть такое понятие, как <span style=" font-style:italic;">боксы</span>. Бокс — это сохраненный образ системы. Чтобы создать новую виртуалку, вам нужен бокс. Когда вы архивируете состояние вашей ВМ, на выходе также получаете бокс. Скачаем бокс с Ubuntu 14.04:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vagrant box add ubuntu/trusty64<br />vagrant box list</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Теперь создадим новую виртуалку:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">mkdir -p ~/vagrant/ubuntu-test<br />cd ~/vagrant/ubuntu-test<br />vagrant init ubuntu/trusty64</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В каталоге появится файл с именем Vagrantfile. Здесь задаются параметры ВМ. Можно изменить <a href="https://docs.vagrantup.com/v2/virtualbox/configuration.html"><span style=" text-decoration: underline; color:#0000ff;">ограничения по памяти и CPU</span></a>, включить или отключить шаринг каталогов с хост-системой, поправить настройки сети, в том числе — настроить проброс портов из гостевой системы в хост-систему, и так далее. Кстати, по умолчанию все виртуалки находятся в одной виртуальной LAN и видят друг друга. Здесь и далее в качестве провайдера мы будем использовать VirtualBox. Он очень гибок в плане настроек. В частности, в Vagrantfile можно передать <a href="https://www.virtualbox.org/manual/ch08.html"><span style=" text-decoration: underline; color:#0000ff;">любые аргументы утилите VBoxMange</span></a>, что не удивительно, так как под капотом всю виртуализацию Vagrant делает с ее помощью.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы у ВМ были красивые имена в интерфейсе VirtualBox, а также выводе <span style=" font-family:'Courier New,courier';">vagrant global-status</span>, я всегда прописываю в Vagrantfile что-то вроде:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">  # имя в `vagrant global-status`<br />  config.vm.define &quot;ubuntu1&quot; do |t|<br />  end<br />  # имя в VirtualBox<br />  config.vm.provider &quot;virtualbox&quot; do |v|<br />    v.name = &quot;ubuntu1&quot;<br />  end</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запустим виртуалку и зайдем в нее по ssh:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vagrant up<br />vagrant ssh<br /># что дописать в ~/.ssh/config для входа в виртуалку:<br /># vagrant ssh-config</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Тут следует отметить, что говоря <span style=" font-family:'Courier New,courier';">vagrant up</span> вы должны находится в одном каталоге с Vagrantfile. При этом после запуска ВМ вы сможете обращаться к ней по id уже из любого каталога. А физически все виртуалки лежат вовсе не рядом с Vagrantfile, а в каталоге ~/VirtualBox VMs/. Есть подозрения, что интерфейс у Vagrant мог бы быть более однотипным, и от этого более простым и понятным, но уж как сделали.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Попав внутрь ВМ вы обнаружите, что работаете под пользователем vagrant, который может делать sudo без пароля. При этом есть возможность обмениваться файлами с хост-системой:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">echo &quot;hello from vagrant&quot; &gt; /vagrant/hello</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Файл hello появится в каталоге ~/vagrant/ubuntu-test хост-системы. В гостевой системе доступ к каталогу /vagrant/ имеет только пользователь vagrant. Если вдруг такой способ взаимодействия с гостевой системой кажется вам неудобным, ничто не мешает завести обычного пользователя, сказать ssh-copy-id и обмениваться файлами с помощью scp.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если в хост-системе сказать:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vagrant global-status</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">… то можно увидеть все ВМ и их состояние.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если ВМ удалялась не через Vagrant, она может остаться в global-status. Лечится это так:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vagrant global-status --prune</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Виртуалки можно ставить на паузу:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vagrant suspend 1f2a1a5<br />vagrant resume ubuntu1</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Заметьте, что можно использовать не полный id вируталки (1f2a1a5), а только его начало (например, 1f). Кроме того, если вы присвоили ВМ имена, как было описано выше, то можно использовать их.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Полная останова и запуск:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vagrant halt 1f<br />vagrant up 1f</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Удаление ВМ:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vagrant destroy 1f</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Можно создать из виртуалки бокс, сказав в каталоге с Vagrantfile:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vagrant package</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Появится файл package.box (у меня он получился около 350 Мб). Упаковывать его не нужно, это уже сжатый файл.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Импорт бокса:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vagrant box add myubuntu package.box<br />vagrant box list<br />vagrant box remove myubuntu</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Часто требуется присвоить виртуалке фиксированный IP в LAN. Для этого находим в Vagrantfile строку, похожую на следующую, раскомментируем и правим:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">config.vm.network &quot;private_network&quot;, ip: &quot;10.110.0.10&quot;</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверяем:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">vagrant reload 1f<br />ping 10.110.0.10</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В качестве примера альтернативного провайдера рассмотрим vagrant-lxc. Как вы догадались, он позволяет делать все, что было описано выше, используя LXC вместо VirtualBox. Если в двух словах:</p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"># ставим плагин<br />vagrant plugin install vagrant-lxc<br /># создаем и запускаем виртуалку<br />vagrant init fgrehm/precise64-lxc<br />vagrant up --provider=lxc</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Подробности можно найти на <a href="https://github.com/fgrehm/vagrant-lxc"><span style=" text-decoration: underline; color:#0000ff;">GitHub’е плагина</span></a>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Как видите, все довольно просто. Дополнительную информацию вы можете найти по следующим ссылкам:</p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://docs.vagrantup.com/v2/"><span style=" text-decoration: underline; color:#0000ff;">https://docs.vagrantup.com/v2/</span></a> — документация по Vagrant;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://atlas.hashicorp.com/boxes/search"><span style=" text-decoration: underline; color:#0000ff;">https://atlas.hashicorp.com/boxes/search</span></a> — каталог готовых боксов;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://stackoverflow.com/a/18104177/1565238"><span style=" text-decoration: underline; color:#0000ff;">http://stackoverflow.com/a/18104177/1565238</span></a> — автозапуск виртуалки;</li>
<li style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://serverfault.com/a/358040"><span style=" text-decoration: underline; color:#0000ff;">http://serverfault.com/a/358040</span></a> — оверхед, правда, в случае VMWare;</li>
<li style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://groups.google.com/forum/#!forum/vagrant-up"><span style=" text-decoration: underline; color:#0000ff;">https://groups.google.com/forum/#!forum/vagrant-up</span></a> — список рассылки;</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">А пользуетесь ли вы Vagrant и если да, то для каких задач?</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">Дополнение:</span> Также вас могут заинтересовать заметки <a href="https://eax.me/openvz/"><span style=" text-decoration: underline; color:#0000ff;">Контейнерная виртуализация при помощи OpenVZ</span></a>, <a href="https://eax.me/docker/"><span style=" text-decoration: underline; color:#0000ff;">Зачем нужен Docker и практика работы с ним</span></a> и <a href="https://eax.me/lxc/"><span style=" text-decoration: underline; color:#0000ff;">Туториал по контейнеризации при помощи LXC</span></a>. </p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">Метки: </span><a href="https://eax.me/tag/linux/"><span style=" font-style:italic; text-decoration: underline; color:#0000ff;">Linux</span></a><span style=" font-style:italic;">, </span><a href="https://eax.me/tag/virtualization/"><span style=" font-style:italic; text-decoration: underline; color:#0000ff;">Виртуализация</span></a><span style=" font-style:italic;">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">====================================</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-style:italic;">https://www.shellhacks.com/ru/vagrant-tutorial-for-beginners/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Что такое Vagrant?</span> Vagrant — это простой и удобный в использовании инструмент, позволяющий легко управлять виртуальными машинами из командной строки.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Vagrant из коробки поддерживает VirtualBox, Hyper-V, Docker, а также имеет возможность управлять другими типами машин, как например VMWare или Amazon EC2, с помощью других так называемых <a href="https://www.vagrantup.com/docs/providers"><span style=" text-decoration: underline; color:#0000ff;">провайдеров</span></a>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В данной статье я покажу, как создать новое Vagrant-окружение, скачать, сконфигурировать и запустить виртуальную машину, как подключиться к ней по <span style=" font-family:'Courier New,courier';">SSH</span> и как затем остановить или полностью уничтожить ее.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Это руководство предполагает, что вы уже установили один из поддерживаемых виртуальных провайдеров, как например VirtualBox или Docker.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Дельный Совет:</span> Установите Docker в <a href="https://www.shellhacks.com/ru/install-docker-ubuntu-16-04/"><span style=" text-decoration: underline; color:#0000ff;">Ubuntu-16.04</span></a> или <a href="https://www.shellhacks.com/ru/install-docker-ubuntu-18-04/"><span style=" text-decoration: underline; color:#0000ff;">Ubuntu-18.04</span></a> и используйте его вместе с Vagrant!</p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Установка Vagrant</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Скачайте и установить последнюю версию Vagrant из <a href="https://www.vagrantup.com/downloads.html"><span style=" text-decoration: underline; color:#0000ff;">официального источника</span></a>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы убедиться в том, что Vagrant был успешно установлен — проверьте его версию:</p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant -v</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Vagrant 2.0.0</span></pre>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Vagrant Boxes</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Стандартные темплейты виртуальных машин в Vagrant называются боксами.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Список общедоступных боксов для Vagrant может быть найден на странице <a href="https://app.vagrantup.com/boxes/search"><span style=" text-decoration: underline; color:#0000ff;">поиска боксов</span></a>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">VirtualBox ≠ VMWare:</span> Все Vagrant-боксы провайдеро-зависимые. Не все боксы доступны для всех провайдеров. Возможно, чтобы сузить область поиска, вам следует отсортировать результаты по тому провайдеру, который необходим именно вам.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Как только вы нашли образ который хотите использовать — создайте директорию в которой будет храниться ваш новый проект:</p>
<pre style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ mkdir -p vagrant-projects/tutorial</span></pre>
<pre style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ cd vagrant-projects/tutorial</span></pre>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="aswift_1_expand"></a>Чтобы создать новое Vagrant-окружение внутри папки проекта — выполните <span style=" font-family:'Courier New,courier';">vagrant init &lt;boxpath&gt;</span>, где <span style=" font-family:'Courier New,courier';">&lt;boxpath&gt;</span> — название Vagrant-бокса.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Например, чтобы установить базовый образ Ubuntu-16.04, выполните:</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant init ubuntu/xenial64</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Команда <span style=" font-family:'Courier New,courier';">vagrant init</span> в текущей директории создает файл <span style=" font-family:'Courier New,courier';">Vagrantfile</span>, в котором описывается тип необходимой для проекта машины, каким образом ее сконфигурировать и какие ресурсы выделить.</p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Vagrant Up</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запустите Vagrant-окружение:</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant up</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Команда <span style=" font-family:'Courier New,courier';">vagrant up</span> создает, настраивает и запускает виртуальную машину исходя из параметров заданных в <span style=" font-family:'Courier New,courier';">Vagrantfile</span>.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При первом запуске она автоматически скачивает необходимый Vagrant-бокс из <a href="https://app.vagrantup.com/boxes/search"><span style=" text-decoration: underline; color:#0000ff;">репозитория</span></a> и выделяет соответствующие ресурсы для новой виртуальной машины.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Дельный Совет:</span> Каждый DevOps должен знать основы работы с Git. И вы можете освоить их прямо сейчас! <a href="https://www.shellhacks.com/ru/git-basic-workflow/"><span style=" text-decoration: underline; color:#0000ff;">Читать далее →</span></a></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Vagrant SSH</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы подключиться по <span style=" font-family:'Courier New,courier';">SSH</span> к запущенной Vagrant-машине и попасть в консоль, выполните:</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant ssh</span></pre>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:x-large; font-weight:600;">Очистка Vagrant</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если необходимо приостановить процесс разработки — вы можете полностью остановить Vagrant-машину либо просто приостановить ее.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Остановить Vagrant-машину:</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant halt</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Приостановить машину (запомнить состояние):</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant suspend</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы полностью очистить окружение — вы можете уничтожить машину.</p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Остановить и удалить все следы Vagrant-машины:</p>
<pre style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ vagrant destroy</span></pre>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Когда вам снова понадобиться чистое Vagrant-окружение на основе стандартного темплейта — просто выполнитье <span style=" font-family:'Courier New,courier';">vagrant up</span>.</p></body></html>