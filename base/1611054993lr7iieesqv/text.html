<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:xx-large; font-weight:600;">OpenCart 2+ описание процесса загрузки приложения.</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Категория: </span><a href="https://klisl.com/category/opencart"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">OpenСart</span></a><span style=" font-family:'Ubuntu';"> </span><a href="https://klisl.com/tag/classes"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Классы</span></a><span style=" font-family:'Ubuntu';">, </span><a href="https://klisl.com/tag/architecture"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Архитектура</span></a><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image859504978.png" /><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для того, чтобы хорошо разбираться в том, с чем работаешь, необходимо знать процесс &quot;изнутри&quot;. В данной статье я распишу пошагово процесс работы ядра фреймворка или CMS (кому как нравится) OpenCart версии 2+. Тем более, что OpenCart построен с учетом концепции MVC (модель-вод-контроллер), а значит имеет довольно понятную структуру с которой удобно работать и удобно расширять. Чего пока не хватает - так это документации и русскоязычных статей в интернете.<br /><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">Файл index.php </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файл находится в корне сайта.<br />Это точка входа для всего приложения. Все запросы к серверу проходят через этот файл, который подключает нужные библиотеки и координирует дальнейшее выполнение скрипта.<br />Рассмотрим этапы его работы.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Устанавливается константа с версией OC</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">define('VERSION', '2.3.0.2.2');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При наличии файла config.php в корневой папке, он подключается и устанавливает ряд констант, устанавливающих пути к служебным (system) и рабочим (catalog) папкам, а так же константы доступа к базе данных.</li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">if (is_file('config.php')) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    require_once('config.php');</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В случае отсутствия файла config.php в корневой папке, константа DIR_APPLICATION оказывается не установленной. Тогда отсылается заголовок на переадресацию в папку install, которая запускает процесс установки OC и завершает на этом этапе работу скрипта</li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">if (!defined('DIR_APPLICATION')) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    header('Location: install/index.php');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    exit;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если дошли до этой строки - конфигурация загружена, подключается файл из папки system/startup.php</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">require_once(DIR_SYSTEM . 'startup.php');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Последняя строка файла index.php</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">start('catalog'); </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">выполнится лишь после подключения файла 'startup.php', о чем ниже.<br /><br /><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">Файл system/startup.php</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Устанавливается протоколирование всех ошибок</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">error_reporting(E_ALL);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверяется версия php, должна быть не ниже 5.4</li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">if (version_compare(phpversion(), '5.4.0', '&lt;') == true) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    exit('PHP5.4+ Required');</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Устанавливается временная зона по-умолчанию</li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">if (!ini_get('date.timezone')) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    date_default_timezone_set('UTC');</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Далее устанавливаются значения суперглобального массива <span style=" font-weight:600;">$_SERVER</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span><span style=" font-family:'Ubuntu'; font-weight:600;">$_SERVER['DOCUMENT_ROOT']</span><span style=" font-family:'Ubuntu';"> - содержит путь к корневой директории сервера, если скрипт выполняется в виртуальном хосте, в данном элементе указывается путь к корневой директории виртуального хоста.<br /></span><span style=" font-family:'Ubuntu'; font-weight:600;">$_SERVER['REQUEST_URI'] </span><span style=" font-family:'Ubuntu';">- содержит имя скрипта, начиная от корневой директории виртуального хоста и параметры. Например: /index.php?route=extension/feed/google_sitemapy<br /></span><span style=" font-family:'Ubuntu'; font-weight:600;">$_SERVER['HTTP_HOST']</span><span style=" font-family:'Ubuntu';"> - доменное имя сайта.<br /></span><span style=" font-family:'Ubuntu'; font-weight:600;">$_SERVER['HTTPS']</span><span style=" font-family:'Ubuntu';"> - сохраняет в массив признак защищенного соединения HTTPS<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Объявление функции <span style=" font-weight:600;">modification()</span>, которая используется для получения пути к </li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">модифицированным файлам CMS (например при подключении дополнений). <br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">function modification($filename) {…}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />При этом в начале функции прописаны проверки на область видимости от куда выполняется скрипт – админка, папка </span><span style=" font-family:'Ubuntu'; font-weight:600;">install </span><span style=" font-family:'Ubuntu';">или </span><span style=" font-family:'Ubuntu'; font-weight:600;">catalog</span><span style=" font-family:'Ubuntu';">. Каждая из этих областей видимости определяет свои константы, на основе их и построены данные проверки.<br />В переменную </span><span style=" font-family:'Ubuntu'; font-weight:600;">$file</span><span style=" font-family:'Ubuntu';"> сохраняется путь к файлу начиная от папки </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system/storage/modification</span><span style=" font-family:'Ubuntu';">. Если переданный функции файл там найден, то возвращается данный путь. Если нет – значит файл не модифицировался и возвращается тот же путь к файлу, который передан функции в качестве аргумента.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Подключение файла <span style=" font-weight:600;">autoload.php</span>, которого нет по-умолчанию в OpenCart 2.3. </li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">// Autoloader</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">if (is_file(DIR_SYSTEM . '../../vendor/autoload.php')) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    require_once(DIR_SYSTEM . '../../vendor/autoload.php');</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В данном файле можно подключить сторонние автозагрузчики или что-то еще.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Далее код автозагрузки системных классов OC. </li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Функция </span><span style=" font-family:'Ubuntu'; font-weight:600;">spl_autoload_register()</span><span style=" font-family:'Ubuntu';"> при каждом запросе неизвестного класса вызывает функцию</span><span style=" font-family:'Ubuntu'; font-weight:600;"> library()</span><span style=" font-family:'Ubuntu';">, которая ищет и загружает запрашиваемый класс из папки </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system/library</span><span style=" font-family:'Ubuntu';"> или же </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system/storage/modification/system/library</span><span style=" font-family:'Ubuntu';"> если есть модификация запрашиваемого файла класса, т.к. используется функция modification() для такой проверки.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Подключается ряд важных системных классов, нужных для работы CMS из папки <span style=" background-color:#fff2ca;">system\engine</span>. </li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Экземпляры данных классов будут созданы чуть позже в главном файле фреймворка </span><span style=" font-family:'Ubuntu'; font-weight:600;">system\framework.php</span><span style=" font-family:'Ubuntu';"> (описано ниже) и сохранены в реестр для доступа к ним из любого места приложения через загрузчик </span><span style=" font-family:'Ubuntu'; font-weight:600;">engine/loader.php</span><span style=" font-family:'Ubuntu';">.<br />Предварительно наличие файла проверяется среди модифицированных с помощью функции modification()<br /></span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">require_once(modification(DIR_SYSTEM . 'engine/action.php'));</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">…</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Из папки <span style=" color:#000000; background-color:#fff2ca;">system/helper </span>подключается несколько файлов содержащие функции-помошники</li></ul>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">general.php – Файл для обеспечения безопастности. Содержит функцию token() для генерации случайной строки (токена), функцию <span style=" font-weight:600;">hash_equals()</span> для сравнения хеш-строк</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">utf8.php – устанавливает кодировку</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">json.php – кодирует/раскодирует данные в формате json</li></ol>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В конце данного файла объявление функции <span style=" font-weight:600;">start()</span>, которая должна подключить главный файл фреймворка-<span style=" font-weight:600;"> framework.php</span>, реализующий дальнейшую работу приложения согласно модели MVC.</li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">function start($application_config) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    require_once(DIR_SYSTEM . 'framework.php');    </span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />После этого, выполнение скрипта возвращается к файлу </span><span style=" font-family:'Ubuntu'; font-weight:600;">index.php</span><span style=" font-family:'Ubuntu';"> в котором выполняется последняя строка, запускающая подключение к фалу</span><span style=" font-family:'Ubuntu'; font-weight:600;"> framework.php</span><span style=" font-family:'Ubuntu';"><br />В качестве аргумента, функции передается указатель на рабочий каталог- </span><span style=" font-family:'Ubuntu'; font-weight:600;">backend(admin)</span><span style=" font-family:'Ubuntu';"> или</span><span style=" font-family:'Ubuntu'; font-weight:600;"> frontend(catalog)</span><span style=" font-family:'Ubuntu';"><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">start('catalog');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /><br /><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">Файл system/framework.php</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не забываем, что все классы в данном файле загружаются с помощью автозагрузчика, с проверкой на модификацию (сначала поиск в папке </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system/storage/modification/system/…</span><span style=" font-family:'Ubuntu';">)<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Первой строкой создается объект класса <span style=" font-weight:600;">Registry</span>. Файл <span style=" background-color:#fff2ca;">system\engine\registry.php</span></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$registry = new Registry();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Это самый важный объект приложения. Данный класс используется для хранения(получения, проверки на наличие) в массиве </span><span style=" font-family:'Ubuntu'; font-weight:600;">$data</span><span style=" font-family:'Ubuntu';"> служебных объектов (Config, Event, Loader, Request, Response, Database, Session, Cache, Url, Language, Document). Далее в данном файле (</span><span style=" font-family:'Ubuntu'; font-weight:600;">framework.php</span><span style=" font-family:'Ubuntu';">) создаются эти самые служебные объекты и с помощью метода </span><span style=" font-family:'Ubuntu'; font-weight:600;">set()</span><span style=" font-family:'Ubuntu';"> сохраняются в закрытой переменной </span><span style=" font-family:'Ubuntu'; font-weight:600;">$data</span><span style=" font-family:'Ubuntu';"> класса </span><span style=" font-family:'Ubuntu'; font-weight:600;">Registry</span><span style=" font-family:'Ubuntu';">. Так же, многие из этих объектов, получают </span><span style=" font-family:'Ubuntu'; font-weight:600;">Registry </span><span style=" font-family:'Ubuntu';">в качестве аргумента конструктора, при их создании, для получения доступа из них к реестру, а из него к другим служебным объектам. <br /><br /></span><span style=" font-family:'Ubuntu'; font-weight:600;">Пример.</span><span style=" font-family:'Ubuntu';"><br />Любой контроллер наследует от абстрактного класса Controller, который получает объект Registry при создании:<br /></span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">abstract class Controller {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    protected $registry;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    public function __construct($registry) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        $this-&gt;registry = $registry;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    }</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">так же есть магические методы<br /></span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">public function __get($key) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    return $this-&gt;registry-&gt;get($key);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">public function __set($key, $value) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    $this-&gt;registry-&gt;set($key, $value);</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Таким образом, при запросе свойства класса, которое у него отсутствует, идет передача вызова на объект Registry (который был передан в protected $registry).<br />Таким образом, при вызове в контроллере<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$this-&gt;load-&gt;model('...');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">после того, как не будет найдено свойство </span><span style=" font-family:'Ubuntu'; font-weight:600;">load </span><span style=" font-family:'Ubuntu';">контроллера, будет вызвано $registry-&gt;load.<br /><br />То есть, объект Registry используется, в последствии, многими другими объектами для получения доступа к хранимым в нем служебным объектам (их свойствам и методам). <br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Config</span>. Файл <span style=" background-color:#fff2ca;">system\library\config.php</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Данный объект собирает массив настроек (private $data) для различных частей приложения. Он имеет три метода для сохранения, получения и проверки наличия определенной настройки.<br />Сразу после создания объекта, вызывается метод загрузки конфигурации из файла </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system\config\default.php</span><span style=" font-family:'Ubuntu';"><br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$config-&gt;load('default');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">в данном файле хранятся настройки по умолчанию касающиеся БД, эл.почты, вывода ошибок, сессии, кэша, кодировки и др. (см. файл </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system\config\default.php</span><span style=" font-family:'Ubuntu';">)<br /><br />Следующей строкой в массив настроек добавляются настройки из файла<br />- </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system\config\catalog.php</span><span style=" font-family:'Ubuntu';"> (если фреймворк запущен из frontend – в index.php строкой start('catalog');) <br />или<br />- </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system\config\admin.php</span><span style=" font-family:'Ubuntu';"> (для админки)<br />Затем, экземпляр класса Config сохраняется в массив $data класса Registry<br />Данные одного из этих файлов (который загрузится) дополняет и где-то меняет настройки по-умолчанию из файла default.php<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Event</span>. Файл <span style=" background-color:#fff2ca;">system\engine\event.php</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Объект данного класса работает с событиями OC. События используются для вставки своего кода в существующий на определенном этапе его выполнения.<br />Строкой <br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$event = new Event($registry);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">передается объект Registry в конструктор класса Event, для использования в методе trigger() при вызове нужных функций.<br /><br />- Event Register. Регистрируюся все события, которые были получены объектом Config и сохранены в массиве action_event. Они записываются в массив data[$trigger] объекта Event.<br /></span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">if ($config-&gt;has('action_event')) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    foreach ($config-&gt;get('action_event') as $key =&gt; $value) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        $event-&gt;register($key, new Action($value));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    }</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Loader</span>. Файл <span style=" background-color:#fff2ca;">system\engine\loader.php</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Объект позволяет загрузить нужные классы controller, model, view, language, а так же служебные классы из папок library, helper, config<br />Экземпляр класса Loader сохраняется в массив объекта Registry с ключем 'load', поэтому доступен как load.<br />Пример загрузки из класса контроллера:<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$this-&gt;load-&gt;model('account/custom_field');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Делает он это, опять таки, с помощью переданного ему, в качестве аргумента для конструктора, объекта Registry, хранящему все служебные объекты с их свойствами (читать выше).<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Request </span>(запрос браузера на сервер). Файл <span style=" background-color:#fff2ca;">system\library\request.php</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Данный класс сохраняет в своих свойствах элементы глобальных массивов (_GET _POST _REQUEST _COOKIE _FILES _SERVER), пропуская, предварительно, ключи и значения через метод clean(), которая преобразует специальные символы в HTML-сущности.<br />С помощью данного класса, обращаться к элементам суперглобальных массивов можно так:<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$this-&gt;request-&gt;post['address_id']</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">в результате будет получено значение массива $_POST по ключу 'address_id'.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Response </span>(ответ сервера браузеру). Файл <span style=" background-color:#fff2ca;">system\library\response.php</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После создания объекта Response, следующей строкой, создается заголовок с кодировкой по-умолчанию.<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$response-&gt;addHeader('Content-Type: text/html; charset=utf-8');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />В данный объект можно сохранять свои заголовки методом addHeader($header), которые будут добавляться в private $headers.<br />Есть так же метод для переадресации redirect($url, $status = 302), метод для сжатия страницы сервером перед отправкой браузеру compress().<br />Метод setOutput($output) вызывается во многих контроллерах для сохранения страницы (после формирования файла представления) в private $output объекта Response, для последующего вывода:<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$this-&gt;response-&gt;setOutput($this-&gt;load-&gt;view('checkout/checkout', $data));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Метод output() – передает браузеру для вывода заголовки и все содержимое страницы. Он выполняется в самом конце файла framework.php<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">DB</span>. Класс для работы с базой данных. <span style=" background-color:#ffffff;">Файл </span><span style=" background-color:#fff2ca;">system\library\db.php</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При создании объекта проверяется существование класса, отвечающего за работу с указанным расширением (указывается в конфиге, в массиве «db_type» - например mysqli). Если класс найден, на основании других данных из конфига создается соединение с БД. <br />Данный объект используется в моделях:<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$this-&gt;db-&gt;query(&quot;INSERT INTO…</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Session</span>. Класс для работы с сессиями. Файл <span style=" background-color:#fff2ca;">system\library\session.php </span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В настройках проверяется нужно ли сразу стартовать сессию (для каталога admin стартует сразу)<br /><br />В конструкторе класса Session есть строка определяющая параметры для куки сессии<br /></span><span style=" font-family:'Ubuntu'; font-style:italic;">session_set_cookie_params(0, '/');</span><span style=" font-family:'Ubuntu';"><br />ноль значит, что при закрытии браузера куки удалятся (например товары из корзины). Поэтому можно установить свое значение в секундах.<br />Так же с сессиями работают: <br /></span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">класс <span style=" font-weight:600;">Session\DB </span>из файла <span style=" background-color:#fff2ca;">system\library\session\db.php</span> который сохраняет определенные данные в БД устанавливая в одно из полей идентификатор текущей сессии (нужно предварительно раскомментировать код создания таблицы session в начале файла); </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">класс <span style=" font-weight:600;">Session\File</span> из файла <span style=" background-color:#fff2ca;">system\library\session\file.php</span> который создает файл имеющий название '/sess_' + идентификатор сессии и сохраняет в него данные.</li></ol>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Идентификатор сессии, данные классы, получают из класса Session с помощью метода getId()<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Cache</span>. Класс для работы с кэшем. Файл <span style=" background-color:#fff2ca;">system\library\cache.php</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Данный класс подключает один из файлов, который определяет место хранения кэша. Место хранения передается конструктору при создании объекта в качестве аргумента $adaptor. <br />Возможные способы хранения кэша:<br /></span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">APC (system\library\cache\apc.php)</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Файл (system\library\cache\file.php)</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Оперативная память (system\library\cache\mem.php)</li></ol>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">По умолчанию в настройках стоит хранение кэша в файле и срок 3600 (1 час)<br />Методы работы с кэшем get() set() delete(), в зависимости от указанного места хранения, перенаправляются к одному из соответствующих классов.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Url</span>. Объект данного класса генерирует URL (ссылки). Файл <span style=" background-color:#fff2ca;">system\library\url.php</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Методу link() передаются параметры из которых он формирует и возвращает полный URL.<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$data['customlink'] = $this-&gt;url-&gt;link('custom/custom');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Language</span>. Файл подключающий языковые файлы и получающий из них запрашиваемую строку. Файл <span style=" background-color:#fff2ca;">system\library\language.php</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Язык используемый по-умолчанию, прописывается в файле конфигурации system\config\default.php:<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$_['language_default'] = 'en-gb';</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Метод load данного класса, принимает, в качестве первого аргумента путь к файлу перевода, который подключается:<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$this-&gt;load-&gt;language('checkout/checkout');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В данной строке, load является не методом класса language, а объектом класса Loader, который содержит метод language(), вызывающий (через регистратор объектов- Registry) метод load уже объекта language, передавая ему параметры в скобках.<br /><br />Получение данных из массива подключаемого языкового файла осуществляется с помощью метода get():<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$this-&gt;language-&gt;get('heading_title')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Document</span>. Объект данного класса содержит данные (собирает и возвращает) выводимые в основном в шапке HTML документа, такие как заголовок страницы, описание, ключевые слова, стили, js скрипты и др. Файл <span style=" background-color:#fff2ca;">system\library\document.php</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Методы класса состоят из get – получающих значение элемента и set(add) устанавливающих значение или массив значений. Таким образом можно, например добавить свой файл стилей в массив:<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$this-&gt;document-&gt;addStyle('catalog/view/mystyle.css');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">далее, в контроллере получаем все стили и передаем в представление (header.tpl), где в цикле они извлекаются. <br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Config Autoload</span>. Производится автозагрузка конфигурационных файлов, которые можно добавить в system\config\admin.php</li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Данные файлы нужно указать в system\config\default.php в массиве <br /></span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">// Autoload Configs</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$_['config_autoload'] = array();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Language Autoload</span>. Загружает автоматически языковые файлы, указанные в system\config\default.php</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$_['language_autoload'] = array('en-gb');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Library Autoload</span>. Позволяет автоматически загрузить указанные классы библиотек. Например для frontend загружается дополнительно библиотека openbay, указанная в файле <span style=" background-color:#fff2ca;">system\config\catalog.php</span></li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$_['library_autoload'] = array(</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    'openbay'</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Model Autoload</span>. Позволяет автоматически загрузить модель из списка указанном в конфигурационных файлах, например в <span style=" background-color:#fff2ca;">system\config\default.php</span></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$_['model_autoload'] = array();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Front Controller</span>. Объект используется для выполнения переданных ему действий (вызов определенного метода нужного контроллера) до выполнения метода контроллера переданного в route (полученного из URL). </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$controller = new Front($registry);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Создается объект класса Front хранящий обработчики событий в массиве (private $pre_action) и вызывающий для их обработки метод execute объекта Action. Файл </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system\engine\front.php</span><span style=" font-family:'Ubuntu';"><br /><br />Метод </span><span style=" font-family:'Ubuntu'; font-weight:600;">addPreAction()</span><span style=" font-family:'Ubuntu';"> формирует массив объектов класса Action для последующего выполнения.<br />Метод </span><span style=" font-family:'Ubuntu'; font-weight:600;">dispatch()</span><span style=" font-family:'Ubuntu';"> сначала выполняет все элементы из массива </span><span style=" font-family:'Ubuntu'; font-weight:600;">$pre_action</span><span style=" font-family:'Ubuntu';">, а затем переданный в качестве аргумента Action $action. Для выполнения он передает объекты методу </span><span style=" font-family:'Ubuntu'; font-weight:600;">execute()</span><span style=" font-family:'Ubuntu';">, где вызывается одноименный метод объекта Action, который и выполняет метод (по-умолчанию index) переданного ему контроллера. <br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Pre Actions</span>. В данном блоке, в фронт-контроллер устанавливаются действия, которые должны выполняться до выполнения любых других действий.</li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">if ($config-&gt;has('action_pre_action')) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    foreach ($config-&gt;get('action_pre_action') as $value) {</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        $controller-&gt;addPreAction(new Action($value));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    }</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />В конфигурационном файле проверяется наличие действий (контроллеров), методы (index) которых нужно выполнить сразу же. Например в </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system\config\catalog.php</span><span style=" font-family:'Ubuntu';">:<br /></span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$_['action_pre_action'] = array(</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    'startup/session',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    'startup/startup',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    'startup/error',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    'startup/event',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    'startup/maintenance',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        'startup/'.$seo_type</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">);</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В цикле, данные массива передаются в метод </span><span style=" font-family:'Ubuntu'; font-weight:600;">addPreAction() </span><span style=" font-family:'Ubuntu';">объекта </span><span style=" font-family:'Ubuntu'; font-weight:600;">Front</span><span style=" font-family:'Ubuntu';">, где они сохраняются в массив </span><span style=" font-family:'Ubuntu'; font-weight:600;">$pre_action</span><span style=" font-family:'Ubuntu';"> для дальнейшего выполнения.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Dispatch</span>. Данная строка кода:</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$controller-&gt;dispatch(new Action($config-&gt;get('action_router')), new Action($config-&gt;get('action_error')));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">отправляет на выполнение объект Action с аргументом из конфигурационного файла (startup/router.php) и вторым аргументом объект с указанием файла который должен обработать ошибки, если будут. В данном случае это «error/not_found»<br /><br />То есть вызов метода </span><span style=" font-family:'Ubuntu'; font-weight:600;">$controller-&gt;dispatch()</span><span style=" font-family:'Ubuntu';"> в OC начинает процесс работы контроллера/метода указанных в route в данный момент (из URL), перед этим выполнив методы (index по-умолчанию если не указаны другие) данных классов (из 'action_pre_action'):<br /></span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'startup/session',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'startup/startup',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'startup/error',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'startup/event',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'startup/maintenance',</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'startup/'.$seo_type</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указанные контроллеры находятся в папке </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">catalog\controller\startup</span><span style=" font-family:'Ubuntu';"><br /><br />Выполнив предварительные методы из списка, последним в списке вызывается </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">catalog\controller\startup\router.php</span><span style=" font-family:'Ubuntu';"><br />он из URL отбирает только значение «route»- контроллер/действие и создает объект класса Action передав ему их в качестве аргумента для конструктора. Далее вызывается метод </span><span style=" font-family:'Ubuntu'; font-weight:600;">execute() </span><span style=" font-family:'Ubuntu';">объекта </span><span style=" font-family:'Ubuntu'; font-weight:600;">Action</span><span style=" font-family:'Ubuntu';">, который и выполняет переданные ему контроллер/метод. Остальные GET параметры используются уже в этих контроллерах.<br /><br /></span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Далее</span></li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$response-&gt;setCompression($config-&gt;get('config_compression'));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Считывается из конфигурации и сохраняется в свойстве объекта </span><span style=" font-family:'Ubuntu'; font-weight:600;">Response </span><span style=" font-family:'Ubuntu';">уровень сжатия для функции </span><span style=" font-family:'Ubuntu'; font-weight:600;">gzencode()</span><span style=" font-family:'Ubuntu';">. По умолчанию – 0 (без сжатия).<br />Завершающая строка выполняемая фреймворком<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$response-&gt;output();</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вызывает метод </span><span style=" font-family:'Ubuntu'; font-weight:600;">output() </span><span style=" font-family:'Ubuntu';">объекта </span><span style=" font-family:'Ubuntu'; font-weight:600;">Response</span><span style=" font-family:'Ubuntu';">, в котором производится вызов метода сжатия</span><span style=" font-family:'Ubuntu'; font-weight:600;"> compress()</span><span style=" font-family:'Ubuntu';"> если до этого был выбран уровень сжатия, затем отсылаются заголовки и выводится контент строкой </span><span style=" font-family:'Ubuntu'; font-style:italic;">echo $output</span><span style=" font-family:'Ubuntu';">;<br /></span></p>
<hr />
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Стоит еще вспомнить класс</span><span style=" font-family:'Ubuntu'; font-weight:600;"> Action</span><span style=" font-family:'Ubuntu';">, который был подключен в файле </span><span style=" font-family:'Ubuntu'; font-weight:600;">system/startup.php</span><span style=" font-family:'Ubuntu';">. Файл </span><span style=" font-family:'Ubuntu'; background-color:#fff2ca;">system\engine\action.php</span><span style=" font-family:'Ubuntu';"><br />Объект его создается в основном в данном файле (</span><span style=" font-family:'Ubuntu'; font-weight:600;">framework.php</span><span style=" font-family:'Ubuntu';">) когда нужно выполнить какой-то метод определенного контроллера. При создании его объекта, конструктору передается $route – путь к выполняемому контроллеру/метод. Если метод не передан – будет выполняться метод index.<br />В файле </span><span style=" font-family:'Ubuntu'; font-weight:600;">framework.php</span><span style=" font-family:'Ubuntu';"> объект класса Action передается <br />- для выполнения методов служебных объектов (предзагрузки) массива '</span><span style=" font-family:'Ubuntu'; font-weight:600;">action_pre_action</span><span style=" font-family:'Ubuntu';">' файла конфигурации<br />- методу </span><span style=" font-family:'Ubuntu'; font-weight:600;">dispatch() </span><span style=" font-family:'Ubuntu';">объекта</span><span style=" font-family:'Ubuntu'; font-weight:600;"> Front Controller</span><span style=" font-family:'Ubuntu';">, который сначала в цикле выполняет действия добавленные в предзагрузку и затем действие(контроллер) </span><span style=" font-family:'Ubuntu'; font-weight:600;">startup/router</span><span style=" font-family:'Ubuntu';">, который разбирает текущий URL и выполняет указанный там контроллер/действие. <br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Автор: Сергей Дата публикации: 18.04.2017 <br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Другие статьи: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/response_OC.html"><span style=" text-decoration: underline; color:#0000ff;">Процесс вывода страницы в OpenCart согласно полученного URL.</span></a> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/events_OpenCart.html"><span style=" text-decoration: underline; color:#0000ff;">События в OpenCart 2.2+</span></a> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/category_module_OC.html"><span style=" text-decoration: underline; color:#0000ff;">Модуль вывода категорий для OpenCart 2.3. Процесс создания модуля.</span></a> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/action_OC.html"><span style=" text-decoration: underline; color:#0000ff;">Класс Action в OpenCart 2.</span></a> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/registry_OC.html"><span style=" text-decoration: underline; color:#0000ff;">Регистратор объектов в OpenCart 2. Класс Registry.</span></a> </li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image541654625.png" /><a name="comment"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">К</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">омментарии (без регистрации)</span><span style=" font-family:'Ubuntu';"> </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image481798176.png" /> Антон 14.05.2018 10:07 </li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Спасибо за статью. Первый раз вижу настолько подробную статью о работе фреймверка opencart, хоть и давно работаю с ним. Ответить <br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Добавление новых комментариев временно отключено.<br /></span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">Рубрики</span><span style=" font-family:'Ubuntu';"> </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/category/php"><span style=" text-decoration: underline; color:#0000ff;">PHP</span></a> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/category/yii2"><span style=" text-decoration: underline; color:#0000ff;">Yii2</span></a> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/category/laravel"><span style=" text-decoration: underline; color:#0000ff;">Laravel</span></a> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/category/symfony"><span style=" text-decoration: underline; color:#0000ff;">Symfony</span></a> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/category/opencart"><span style=" text-decoration: underline; color:#0000ff;">OpenСart</span></a> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="https://klisl.com/category/sundry"><span style=" text-decoration: underline; color:#0000ff;">Разное</span></a> </li></ul>
<p align="center" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="tags_list"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">М</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">етки</span><span style=" font-family:'Ubuntu';"> </span></p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="w0"></a><span style=" font-family:'Ubuntu';"> </span><a href="https://klisl.com/tag/session"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Сессии</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/logs"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Логи</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/pagination"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Пагинация</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/mailing"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Рассылка</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/composer"><span style=" font-family:'Ubuntu'; font-size:10pt; text-decoration: underline; color:#0000ff;">Composer</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/packages"><span style=" font-family:'Ubuntu'; font-size:14pt; text-decoration: underline; color:#0000ff;">Расширения/пакеты</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/architecture"><span style=" font-family:'Ubuntu'; font-size:17pt; text-decoration: underline; color:#0000ff;">Архитектура</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/actions"><span style=" font-family:'Ubuntu'; font-size:10pt; text-decoration: underline; color:#0000ff;">actions</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/tests"><span style=" font-family:'Ubuntu'; font-size:14pt; text-decoration: underline; color:#0000ff;">Тестирование</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/search"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Поиск</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/apache"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Apache</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/events"><span style=" font-family:'Ubuntu'; font-size:12pt; text-decoration: underline; color:#0000ff;">События</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/ajax"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Ajax</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/sitemap"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Карта сайта</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/behaviors"><span style=" font-family:'Ubuntu'; font-size:10pt; text-decoration: underline; color:#0000ff;">behaviors</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/url"><span style=" font-family:'Ubuntu'; font-size:13pt; text-decoration: underline; color:#0000ff;">URL</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/api"><span style=" font-family:'Ubuntu'; font-size:10pt; text-decoration: underline; color:#0000ff;">API</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/server"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Сервер</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/widgets"><span style=" font-family:'Ubuntu'; font-size:14pt; text-decoration: underline; color:#0000ff;">Виджеты</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/authentication"><span style=" font-family:'Ubuntu'; font-size:12pt; text-decoration: underline; color:#0000ff;">Аутентификация</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/cache"><span style=" font-family:'Ubuntu'; font-size:10pt; text-decoration: underline; color:#0000ff;">Кэш</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/rest"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">REST</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/avtorizac"><span style=" font-family:'Ubuntu'; font-size:13pt; text-decoration: underline; color:#0000ff;">Авторизация</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/template"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Шаблон</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/Modules"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Модули</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/MySQL"><span style=" font-family:'Ubuntu'; font-size:13pt; text-decoration: underline; color:#0000ff;">БД MySQL</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/sundry_yii"><span style=" font-family:'Ubuntu'; font-size:12pt; text-decoration: underline; color:#0000ff;">Разное</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/debug"><span style=" font-family:'Ubuntu'; font-size:10pt; text-decoration: underline; color:#0000ff;">Debug</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/filters"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Фильтры</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/classes"><span style=" font-family:'Ubuntu'; font-size:15pt; text-decoration: underline; color:#0000ff;">Классы</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/multilingual"><span style=" font-family:'Ubuntu'; font-size:10pt; text-decoration: underline; color:#0000ff;">Мультиязычность</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/controller"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Контроллер</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/git"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Git</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/functions"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">функции</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/menu"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Меню</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/errors-exceptions"><span style=" font-family:'Ubuntu'; font-size:9pt; text-decoration: underline; color:#0000ff;">Ошибки/исключения</span></a><span style=" font-family:'Ubuntu';">   </span><a href="https://klisl.com/tag/subscription"><span style=" font-family:'Ubuntu'; font-size:10pt; text-decoration: underline; color:#0000ff;">Подписка</span></a><span style=" font-family:'Ubuntu';">  </span></p></body></html>