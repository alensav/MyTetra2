<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'markup-bold';">Docker Volumes &amp; Data Persistence</span> → Контейнеры по умолчанию временные, их данные исчезают после остановки или удаления. → Docker даёт механизмы для постоянного хранения, чтобы данные переживали перезапуски. → Самый надёжный способ - использовать <span style=" font-family:'markup-bold';">Docker volumes</span>. </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'markup-bold';">1. Почему важна устойчивость данных</span> → Контейнеры часто пересоздаются при обновлениях и масштабировании. → Без персистентности пропадут логи, базы данных, загрузки пользователей, конфиги. → Docker volumes решают это, вынося данные за пределы файловой системы контейнера. </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'markup-bold';">2. Варианты хранилищ в Docker</span> <span style=" font-family:'markup-bold';">a) Volumes</span> → Управляются Docker. → Хранятся в /var/lib/docker/volumes/. → Не зависят от контейнеров. → Лучший выбор для БД и долгоживущих данных. <span style=" font-family:'markup-bold';">b) Bind Mounts</span> → Привязывают локальную директорию хоста к контейнеру. → Удобно в разработке. → Менее переносимые. <span style=" font-family:'markup-bold';">c) tmpfs Mounts</span> → Данные только в памяти. → Очень быстрые, но непостоянные. → Для временных и чувствительных данных. </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'markup-bold';">3. Что такое Docker Volume</span> → Это область постоянного хранения, управляемая Docker. → Не удаляется при удалении контейнера. → Можно безопасно шарить между контейнерами. Создать volume: docker volume create mydata Использовать: <span style=" font-family:'markup-monospace';">docker run -v mydata:/app/data nginx </span>Посмотреть: <span style=" font-family:'markup-monospace';">docker volume inspect mydata</span> </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'markup-bold';">4. Типы Volumes</span> <span style=" font-family:'markup-bold';">a) Named Volumes</span> → Создаются вручную. → Чистая изоляция от файлов системы хоста. → Лучший вариант для продакшена. <span style=" font-family:'markup-bold';">b) Anonymous Volumes</span> → Без имени. → Могут удаляться вместе с контейнером. → Для временных задач. </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'markup-bold';">5. Преимущества Docker Volumes</span> → Данные переживают рестарты. → Легко бэкапить и переносить. → Работают при обновлении контейнеров. → Можно шарить между контейнерами. → Docker оптимизирует хранение под производительность.</p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"> <span style=" font-family:'markup-bold';">6. Bind Mounts</span> → Позволяют смонтировать директорию хоста: </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'markup-monospace';">docker run -v /host/path:/container/path myapp</span> </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">→ Удобно в разработке (горячая перезагрузка кода). → В продакшене использовать аккуратно. </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'markup-bold';">7. Persistency в Docker Compose</span> Compose автоматически управляет volumes. Пример: <span style=" font-family:'markup-monospace';">services:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'markup-monospace';"> db: image: postgres volumes: - pgdata:/var/lib/postgresql/data volumes: pgdata: </span>→ База сохраняет данные между перезапусками. </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">8. Бэкап и восстановление Volumes Бэкап: </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">docker run --rm -v mydata:/data -v $(pwd):/backup alpine tar czvf /backup/backup.tar.gz /data Восстановление: </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">docker run --rm -v mydata:/data -v $(pwd):/backup alpine tar xzvf /backup/backup.tar.gz -C / </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">9. Как выбрать способ хранения → Volumes - лучший вариант для продакшена. → Bind mounts - для разработки. → tmpfs - для временных и быстрых операций. Quick tip → Docker volumes - основа устойчивости данных. → Даёт гибкость, скорость и надёжность. → Незаменимы для баз данных, stateful-сервисов и реальных продакшен-приложений.```</p></body></html>