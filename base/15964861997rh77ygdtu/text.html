<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:18px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:xx-large; font-weight:600;">Установка и настройка Postfix в Ubuntu 18.04</span><span style=" font-family:'Ubuntu';"> </span><a href="https://www.digitalocean.com/community/tags/ubuntu"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Ubuntu</span></a><a href="https://www.digitalocean.com/community/tags/email"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Email</span></a><a href="https://www.digitalocean.com/community/tags/ubuntu-18-04"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Ubuntu 18.04</span></a><span style=" font-family:'Ubuntu';"> </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1056511951.png" /><a href="https://www.digitalocean.com/community/users/jellingwood"><span style=" text-decoration: underline; color:#0000ff;"> </span></a></li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image349223195.png" /><a href="https://www.digitalocean.com/community/users/hjet"><span style=" text-decoration: underline; color:#0000ff;"> </span></a></li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">By <a href="https://www.digitalocean.com/community/users/jellingwood"><span style=" text-decoration: underline; color:#0000ff;">Justin Ellingwood</span></a> and <a href="https://www.digitalocean.com/community/users/hjet"><span style=" text-decoration: underline; color:#0000ff;">Hanif Jetha</span></a> PostedJanuary 7, 2020 11.3k views </li></ul>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Введение"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">В</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">ведение</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Postfix — популярный почтовый агент (MTA) с открытым исходным кодом, который можно использовать для маршрутизации и доставки почты в системе Linux. Согласно оценкам, примерно 25% публичных почтовых серверов в Интернете используют Postfix. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В этом обучающем модуле мы научим вас быстро развертывать Postfix на сервере Ubuntu 18.04. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Предварительные-требования"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">П</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">редварительные требования</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для выполнения заданий этого обучающего модуля вам потребуется доступ к пользователю без прав root с привилегиями </span><span style=" font-family:'Courier New,courier';">sudo</span><span style=" font-family:'Ubuntu';">. Для создания такого пользователя следуйте указаниям руководства </span><a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-18-04"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">«Начальная настройка сервера Ubuntu 18.04»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для правильной настройки Postfix вам потребуется полностью квалифицированное доменное имя, указывающее на сервер Ubuntu 18.04. Полезную информацию по настройке доменного имени с помощью DigitalOcean можно найти в </span><a href="https://www.digitalocean.com/community/articles/how-to-set-up-a-host-name-with-digitalocean"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">этом руководстве</span></a><span style=" font-family:'Ubuntu';">. Если вы планируете принимать почту, вам также потребуется запись MX, указывающая на ваш почтовый сервер. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для целей этого обучающего модуля мы предположим, что вы настраиваете хост с FQDN </span><span style=" font-family:'Courier New,courier';">mail.example.com</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Шаг-1-—-Установка-postfix"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">Ш</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">аг 1 — Установка Postfix</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Postfix входит в репозитории Ubuntu по умолчанию, поэтому установку выполнить очень просто. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вначале обновите кэш локального пакета </span><span style=" font-family:'Courier New,courier';">apt</span><span style=" font-family:'Ubuntu';">, а затем установите программное обеспечение. Мы добавим в команду установки переменную среды </span><span style=" font-family:'Courier New,courier';">DEBIAN_PRIORITY=low</span><span style=" font-family:'Ubuntu';">, чтобы включить несколько дополнительных диалогов:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo apt update</li>
<li style=" font-family:'Courier New,courier';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo DEBIAN_PRIORITY=low apt install postfix</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Используйте следующую информацию, чтобы правильно ввести данные для своей среды: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">General type of mail configuration?</span>: Для данного параметра мы выберем пункт <span style=" font-weight:600;">Internet Site</span>, соответствующий потребностям нашей инфраструктуры.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">System mail name</span>: это базовый домен, используемый для построения корректного адреса электронной почты, когда имеется только часть адреса с именем учетной записи. Например, имя хоста нашего сервера <span style=" font-family:'Courier New,courier';">mail.example.com</span>, но мы будем использовать для системной почты <span style=" font-family:'Courier New,courier';">example.com</span>, так что для имени пользователя <span style=" font-family:'Courier New,courier';">user1</span> в Postfix будет использоваться адрес <span style=" font-family:'Courier New,courier';">user1@example.com</span>.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Root and postmaster mail recipient</span>: это учетная запись Linux, на которую будет перенаправляться почта, адресованная <span style=" font-family:'Courier New,courier';">root@</span> и <span style=" font-family:'Courier New,courier';">postmaster@</span>. Используйте для этой цели свою основную учетную запись. В нашем случае это <span style=" font-weight:600;">sammy</span>.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Other destinations to accept mail for</span>: определение получателей почты, которых будет принимать этот экземпляр Postfix. Если вам потребуется добавить любые другие домены, почту для которых этот сервер будет получать, вы можете сделать это здесь. В противном случае, параметры по умолчанию отлично подойдут.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Force synchronous updates on mail queue?</span>: поскольку вы вероятно используете журнальную файловую систему, выберите <span style=" font-weight:600;">No</span>.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Local networks</span>: это перечень локальных сетей, для которых ваш почтовый сервер настроен как реле пересылки сообщений. Значение по умолчанию подойдет для большинства случаев. Если вы пожелаете изменить его, постарайтесь максимально ограничить диапазон сетей.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Mailbox size limit</span>: используется для ограничения размера сообщений. Значение «0» отключает любые ограничения размера.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Local address extension character</span>: символ, используемый для отделения обычной части адреса от расширения (используется для создания динамических псевдонимов).</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Internet protocols to use</span>: укажите, нужно ли ограничивать версии протокола IP, поддерживаемые Postfix. В нашем случае мы выберем «all». </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Итак, для целей этого обучающего модуля мы используем следующие настройки параметров: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">General type of mail configuration?</span>: Internet Site</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">System mail name</span>: example.com (not mail.example.com)</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Root and postmaster mail recipient</span>: sammy</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Other destinations to accept mail for</span>: $myhostname, example.com, mail.example.com, localhost.example.com, localhost</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Force synchronous updates on mail queue?</span>: No</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Local networks</span>: 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Mailbox size limit</span>: 0</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Local address extension character</span>: +</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Internet protocols to use</span>: all </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вам потребуется изменить эти настройки, используйте следующую команду:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo dpkg-reconfigure postfix</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для параметров будут указаны заданные ранее значения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Завершив настройку параметров, мы можем еще немного изменить конфигурацию, чтобы настроить систему желаемым образом. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Шаг-2-—-Настройка-конфигурации-postfix"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">Ш</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">аг 2 — Настройка конфигурации Postfix</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Теперь мы настроим некоторые параметры, для которых не выводились диалоги. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вначале мы зададим почтовый ящик. Мы используем формат </span><span style=" font-family:'Ubuntu'; font-weight:600;">Maildir</span><span style=" font-family:'Ubuntu';">, который разделяет сообщения на отдельные файлы, перемещаемые между каталогами в зависимости от действий пользователя. Также можно использовать формат </span><span style=" font-family:'Ubuntu'; font-weight:600;">mbox</span><span style=" font-family:'Ubuntu';"> (здесь мы не будем говорить о нем), хранящий все сообщения в одном файле. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Мы зададим для переменной </span><span style=" font-family:'Courier New,courier';">home_mailbox</span><span style=" font-family:'Ubuntu';"> значение </span><span style=" font-family:'Courier New,courier';">Maildir/</span><span style=" font-family:'Ubuntu';">, в результате чего в домашнем каталоге пользователя будет создана структура каталогов с этим именем. Команду </span><span style=" font-family:'Courier New,courier';">postconf</span><span style=" font-family:'Ubuntu';"> можно использовать для запроса или установки параметров конфигурации. Настройте </span><span style=" font-family:'Courier New,courier';">home_mailbox</span><span style=" font-family:'Ubuntu';"> с помощью следующей команды:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo postconf -e 'home_mailbox= Maildir/'</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Теперь мы можем задать расположение таблицы </span><span style=" font-family:'Courier New,courier';">virtual_alias_maps</span><span style=" font-family:'Ubuntu';">. Эта таблица сопоставляет произвольные учетные записи электронной почты с системными учетными записями Linux. Мы создадим эту таблицу по адресу </span><span style=" font-family:'Courier New,courier';">/etc/postfix/virtual</span><span style=" font-family:'Ubuntu';">. Для этого мы снова можем использовать команду </span><span style=" font-family:'Courier New,courier';">postconf</span><span style=" font-family:'Ubuntu';">:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo postconf -e 'virtual_alias_maps= hash:/etc/postfix/virtual'</li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Шаг-3-—-Сопоставление-почтовых-адресов-с-учетными-записями-linux"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">Ш</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">аг 3 — Сопоставление почтовых адресов с учетными записями Linux</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Теперь мы можем настроить файл виртуальных карт. Откройте в файл в своем текстовом редакторе:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo nano /etc/postfix/virtual</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таблица карт виртуальных псевдонимов имеет очень простой формат. Слева перечисляются все адреса, для которых вы хотите принимать электронную почту. Затем идет разделенный пробелами перечень пользователей Linux, которым вы хотите доставлять эту почту. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Например, если вы хотите принимать электронную почту на адреса </span><span style=" font-family:'Courier New,courier';">contact@example.com</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">admin@example.com</span><span style=" font-family:'Ubuntu';"> и доставлять ее пользователю Linux с именем </span><span style=" font-family:'Courier New,courier';">sammy</span><span style=" font-family:'Ubuntu';">, вы можете настроить файл следующим образом:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">/etc/postfix/virtual</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">contact@example.com sammy</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">admin@example.com sammy</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После сопоставления всех почтовых адресов с соответствующими учетными записями сервера вы можете сохранить и закрыть файл. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Мы можем применить сопоставление с помощью следующей команды:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo postmap /etc/postfix/virtual</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Перезапустите процесс Postfix, чтобы убедиться в применении всех наших изменений:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo systemctl restart postfix</li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Шаг-4-—-Настройка-брандмауэра"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">Ш</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">аг 4 — Настройка брандмауэра</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы используете брандмауэр UFW, настроенный в соответствии с руководством по начальной настройке сервера, нам потребуется добавить исключение для Postfix. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы можете разрешить подключение к службе с помощью следующей команды:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo ufw allow Postfix</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Серверный компонент Postfix установлен и готов к работе. Теперь мы настроим клиент, который будет принимать почту, которую будет обрабатывать Postfix. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Шаг-5-—-Настройка-среды-для-соответствия-расположению-почты"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">Ш</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">аг 5 — Настройка среды для соответствия расположению почты</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Перед установкой клиента нужно убедиться, что переменная среда </span><span style=" font-family:'Courier New,courier';">MAIL</span><span style=" font-family:'Ubuntu';"> задана правильно. Клиент использует эту переменную для определения места, где он будет искать почту пользователя. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы переменная существовала вне зависимости от способа доступа к учетной записи (через </span><span style=" font-family:'Courier New,courier';">ssh</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">su</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">su -</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">sudo</span><span style=" font-family:'Ubuntu';"> и т. д.), ее нужно задать в нескольких местах. Мы добавим ее в </span><span style=" font-family:'Courier New,courier';">/etc/bash.bashrc</span><span style=" font-family:'Ubuntu';"> и в файл в каталоге </span><span style=" font-family:'Courier New,courier';">/etc/profile.d</span><span style=" font-family:'Ubuntu';">, чтобы она была настроена для каждого пользователя. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы добавить переменную в эти файлы, введите:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">echo 'export MAIL=~/Maildir' | sudo tee -a /etc/bash.bashrc | sudo tee -a /etc/profile.d/mail.sh</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы прочитать переменную для текущего сеанса, вы можете использовать в качестве источника файл </span><span style=" font-family:'Courier New,courier';">/etc/profile.d/mail.sh</span><span style=" font-family:'Ubuntu';">:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">source /etc/profile.d/mail.sh</li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Шаг-6-—-Установка-и-настройка-почтового-клиента"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">Ш</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">аг 6 — Установка и настройка почтового клиента</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для взаимодействия с доставляемой почтой мы установим пакет </span><span style=" font-family:'Courier New,courier';">s-nail</span><span style=" font-family:'Ubuntu';">. Это вариант клиента BSD </span><span style=" font-family:'Courier New,courier';">xmail</span><span style=" font-family:'Ubuntu';">, который имеет много функций, может правильно обрабатывать формат Maildir и в основном обладает обратной совместимостью. Версия </span><span style=" font-family:'Courier New,courier';">mail</span><span style=" font-family:'Ubuntu';"> для GNU имеет несколько ограничений, в частности, прочитанная почта всегда сохраняется в формате mbox вне зависимости от исходного формата. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для установки пакета </span><span style=" font-family:'Courier New,courier';">s-nail</span><span style=" font-family:'Ubuntu';"> введите:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo apt install s-nail</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Нам нужно изменить несколько параметров. Откройте файл </span><span style=" font-family:'Courier New,courier';">/etc/s-nail.rc</span><span style=" font-family:'Ubuntu';"> в своем редакторе:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">sudo nano /etc/s-nail.rc</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Добавьте в конце файла следующие опции:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">/etc/s-nail.rc</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">. . .</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">set emptystart</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">set folder=Maildir</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">set record=+sent</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Так клиент будет открываться даже при пустом почтовом ящике. Кроме того каталог </span><span style=" font-family:'Courier New,courier';">Maildir</span><span style=" font-family:'Ubuntu';"> будет задан во внутренней переменной </span><span style=" font-family:'Courier New,courier';">folder</span><span style=" font-family:'Ubuntu';">, которая будет использоваться для создания файла </span><span style=" font-family:'Courier New,courier';">sent</span><span style=" font-family:'Ubuntu';"> mbox для хранения отправленных писем. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сохраните файл и закройте его после завершения. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Шаг-7-—-Инициализация-maildir-и-тестирование-клиента"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">Ш</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">аг 7 — Инициализация Maildir и тестирование клиента</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Теперь мы можем протестировать клиент. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Инициализация-структуры-каталогов"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">И</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">нициализация структуры каталогов</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Самый простой способ создания структуры Maildir в домашнем каталоге — отправить себе электронное письмо. Для этого мы можем использовать команду </span><span style=" font-family:'Courier New,courier';">s-nail.</span><span style=" font-family:'Ubuntu';"> Поскольку файл </span><span style=" font-family:'Courier New,courier';">sent</span><span style=" font-family:'Ubuntu';"> будет доступен только после создания Maildir, нам нужно отключить запись в него для нашего первого письма. Опция </span><span style=" font-family:'Courier New,courier';">-Snorecord</span><span style=" font-family:'Ubuntu';"> поможет нам в этом. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для отправки письма добавьте строку в команду </span><span style=" font-family:'Courier New,courier';">s-nail</span><span style=" font-family:'Ubuntu';">. Измените команду, чтобы сделать получателем вашего пользователя Linux:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">echo 'init' | s-nail -s 'init' -Snorecord sammy</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы </span><span style=" font-family:'Ubuntu'; font-style:italic;">можете</span><span style=" font-family:'Ubuntu';"> получить следующий ответ:</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">OutputCan't canonicalize &quot;/home/sammy/Maildir&quot;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Это нормально, и такой ответ может появиться только при отправке первого сообщения. Мы можем еще раз проверить создание каталога, выполнив поиск нашего каталога </span><span style=" font-family:'Courier New,courier';">~/Maildir</span><span style=" font-family:'Ubuntu';">:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">ls -R ~/Maildir</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы должны увидеть созданную структуру каталогов и новое сообщение в каталоге </span><span style=" font-family:'Courier New,courier';">~/Maildir/new</span><span style=" font-family:'Ubuntu';">:</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Output/home/sammy/Maildir/:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cur  new  tmp</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/home/sammy/Maildir/cur:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/home/sammy/Maildir/new:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">1463177269.Vfd01I40e4dM691221.mail.example.com</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/home/sammy/Maildir/tmp:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Похоже наше письмо доставлено. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Управление-почтой-с-помощью-клиента"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">У</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">правление почтой с помощью клиента</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Используйте клиент для проверки почты:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">s-nail</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы должны увидеть новое сообщение:</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Outputs-nail version v14.8.6.  Type ? for help.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&quot;/home/sammy/Maildir&quot;: 1 message 1 new</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;N  1 sammy@example.com     Wed Dec 31 19:00   14/369   init</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Просто нажмите </span><span style=" font-family:'Courier New,courier';">ENTER</span><span style=" font-family:'Ubuntu';"> для вывода этого сообщения:</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Output[-- Message  1 -- 14 lines, 369 bytes --]:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">From sammy@example.com Wed Dec 31 19:00:00 1969</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Date: Fri, 13 May 2016 18:07:49 -0400</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">To: sammy@example.com</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Subject: init</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Message-Id: &lt;20160513220749.A278F228D9@mail.example.com&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">From: sammy@example.com</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">init</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы можете веернуться к списку сообщений, введя </span><span style=" font-family:'Courier New,courier';">h</span><span style=" font-family:'Ubuntu';"> и нажав </span><span style=" font-family:'Courier New,courier';">ENTER</span><span style=" font-family:'Ubuntu';">:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">h</li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Outputs-nail version v14.8.6.  Type ? for help.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&quot;/home/sammy/Maildir&quot;: 1 message 1 new</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&gt;R  1 sammy@example.com     Wed Dec 31 19:00   14/369   init</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Поскольку это сообщение не очень полезно, мы можем удалить его, введя </span><span style=" font-family:'Courier New,courier';">d</span><span style=" font-family:'Ubuntu';"> и нажав </span><span style=" font-family:'Courier New,courier';">ENTER</span><span style=" font-family:'Ubuntu';">:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">d</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для выхода и возврата в терминал введите </span><span style=" font-family:'Courier New,courier';">q</span><span style=" font-family:'Ubuntu';"> и нажмите </span><span style=" font-family:'Courier New,courier';">ENTER</span><span style=" font-family:'Ubuntu';">:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">q</li></ul>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Отправка-писем-с-помощью-клиента"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">О</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">тправка писем с помощью клиента</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы можете протестировать функцию отправки писем, набрав сообщение в текстовом редакторе:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">nano ~/test_message</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Введите текст, которы вы хотите отправить по почте:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">~/test_message</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Hello,</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">This is a test.  Please confirm receipt!</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Мы можем использовать команду </span><span style=" font-family:'Courier New,courier';">cat</span><span style=" font-family:'Ubuntu';">, чтобы направить сообщение в процесс </span><span style=" font-family:'Courier New,courier';">s-nail</span><span style=" font-family:'Ubuntu';">. По умолчанию сообщение будет отправлено от имени вашего пользователя Linux. При желании вы можете изменить поле «From» с помощью атрибута </span><span style=" font-family:'Courier New,courier';">-r</span><span style=" font-family:'Ubuntu';">:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">cat ~/test_message | s-nail -s 'Test email subject line' -r from_field_account user@email.com</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Приведенные выше опции: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-s</span>: строка темы письма</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-r</span>: изменение поля «From» письма. По умолчанию в этом поле указан текущий пользователь Linux. Опция <span style=" font-family:'Courier New,courier';">-r</span> позволяет задать другого отправителя.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user@email.com</span>: учетная запись получателя письма. Измените этот адрес на адрес учетной записи, к которому у вас есть доступ . </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы можете просмотреть отправленные сообщения в клиенте </span><span style=" font-family:'Courier New,courier';">s-nail</span><span style=" font-family:'Ubuntu';">. Запустите интерактивный клиент еще раз с помощью следующей команды:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">s-nail</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После этого откройте список отправленных сообщений с помощью следующей команды:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Courier New,courier';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">file +sent</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы можете управлять отправленными письмами с помощью тех же команд, которые используются для входящих писем. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="Заключение"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">З</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">аключение</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Теперь почтовая система Postfix настроена на вашем сервере Ubuntu 18.04. Управление серверами электронной почты — непростая задача для начинающих администраторов, но такая конфигурация обеспечит все базовые функции MTA, которые помогут вам начать работу. </span></p></body></html>