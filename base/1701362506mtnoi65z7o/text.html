<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.2%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Arduino IDE: разбираемся с меню Tools и некоторыми другими функциями.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.2%; font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Итальянцы молодцы. Запустили в мир DIY настоящего монстра. С появлением экосистемы Arduino весь рынок цифрового DIY получил мощнейший толчок. Тысячи, сотни тысяч, миллионы пользователей принялись покупать оригинальные и совместимые платы для их последующего программирования и использования в своих поделках. Причина такой популярности в первую очередь связывают с низким порогом для входа в эту среду. Вам не нужно тратить много денег на приобретение плат: открытый стандарт дал дорогу на рынок множеству последователей и копировщиков. Вам так же не стоит сильно заморачиваться над программированием: поставляемая «в комплекте» Arduino IDE упрощена настолько, насколько это возможно. Пользователь просто пишет код и не задумывается о настройках компилятора, о том, что программировать при помощи Arduino IDE можно разными программаторами, а иногда и вообще голые микросхемы.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">И вот, наступает момент, когда стандартная Arduino IDE становится тесновата, а ее неудобство начинает просто выбешивать, особенно, если пользователь знаком с более продвинутыми средами разработки по другим платформам и языкам программирования. Кто-то начинает мигрировать на что-то более интересное, например, на </span><a href="https://ide.atom.io/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">Atom</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> или </span><a href="https://code.visualstudio.com/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">VS.Code</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> в смеси с </span><a href="https://platformio.org/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">PlatformIO</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">, а кто-то старается выжать из Arduino IDE все, что только можно.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Сегодня я выступлю как раз в роли подобного «особо интересующегося персонажа» и попробую вместе с читателем разобраться чуть-чуть побольше в тонкостях Arduino IDE. Все ниженаписанное более-менее соответствует версии 1.8.9 Arduino IDE.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Темная тема для Arduino IDE</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Очень многих раздражает простенькое оформление Arduino IDE в корпоративных цветах Arduino. Все такое белое и «слепое». Долго работать в таком цветовом решении не всегда комфортно, особенно если это ночь, вокруг темно и все спят.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image96224884.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7686"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">В</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">ариант темной темы под Mac. Скриншот с GitHub.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Для такого случая сторонний разработчик разработал так называемую </span><a href="https://github.com/jeffThompson/DarkArduinoTheme"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">темную тему</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">, тему которая позволяет вернуть знакомый с детства вариант черного фона и светлого текста на нем. Тема не идеальна, так как не позволяет полностью настроить все нюансы, но ограничение это связано не с самой темой, а с ограничениями Arduino IDE. Тему, при желании, можно подредактировать самостоятельно.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Меню Sketch</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Я, как и большинство других пользователей Arduino IDE, загружаю свои скетчи в платы при помощи панели инструментов. Щелкнул на кнопку загрузки и скетч начал заливать в плату. Удобно. Но, как оказывается, меню Sketch (здесь и далее я буду использовать английский вариант интерфейса Arduino) содержит не мало интересных и полезных новшеств. Итак, кратенько пробежимся по ним.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image707915772.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7687"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">М</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">еню Sketch Arduino IDE</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Пункты меню </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Very/Compile</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> и </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Upload</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> стандартны и знакомы всем. Именно они используются для проверки правильности кода и последующей нормальной загрузки. А вот пункт </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Upload using programmer</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> для меня до недавнего времени оставался Terra incognita. Как оказалась, данный пункт необходимо применять при загрузки скетча без использования загрузчика (bootloader), но с использованием полноценного программатора. О загрузчиках и программаторах поговорим немного позже, пока же просто запомним этот пункт.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">В этом же меню присутствует весьма полезный пункт </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Export compiled Binary</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Применяется он в том же направлении, что и </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Upload using programmer</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. По умолчанию Arduino IDE компилирует исходный код в файл, который сохраняется во временную директорию и после завершения загрузки она должна очищаться. Временная директория находится в каких-то дебрях файловой системы, а искать там скомпилированный файл с непонятным наименованием — то еще удовольствие. Так вот функция </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Export compiled Binary</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> как раз и применяется для того, чтобы сохранить уже откомпилированный скетч в виде бинарных-файлов в папке самого скетча. В дальнейшем скомпилированные скетчи могут быть прошиты при помощи внешнего программатора или же USB-TTL преобразователя.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Кстати, просмотреть папку скетча можно все через тоже самое меню Sketch при помощи пункта </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Show Sketch Folder</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Кстати, при вызове </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Export compiled Binary</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> компилируется сразу два файла: с и без загрузчика. Для чего это нужно, опять же немного ниже. При компилировании при помощи </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Export compiled Binary </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">следует учитывать, что примеры из поставки Arduino так откомпилировать не выйдет. Папки, в которых хранятся эти скетчи имеют режим только для чтения, а IDE необходимо куда-то записать скомпилированные файлы (обычно в таком случае возникает ошибка «Export canceled, changes must first be saved.»). Поэтому тренируемся на своих собственных скетчах или же пересохраняем скетч в новую папку.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Меню Tools</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Меню Tools в Arduino IDE дает куда больше интересного и полезного, нежели Sketch. Более того, сам вид меню зависит от того, какую платформу вы выбрали в качестве целевой.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image2014442966.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7688"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">М</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">еню Tools Arduino IDE с выбранным микроконтроллером семейства AVR.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Начнем с общего и тех пунктов, которые есть в оригинальных платах, построенных на микроконтроллерах </span><a href="https://www.microchip.com/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">Atmel</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> (ее все же купила Microchip).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Пункт </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Auto Format</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> позволяет отформатировать ваш исходный текст по общепринятому в Arduino IDE стандарту. Отформатированный текст позволяет легче находить ошибки, да и сама программа выглядит опрятно. Так же, зачастую, при форматировании при помощи автоформата получается найти такие ошибки, как отсутствующие скобки, что при большом количестве вложений несколько затруднительно. Оная же функция вызывается и в самом редакторе в контекстном меню доступном по правой кнопке мышки.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Archive Sketch</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> позволяет упростить навигацию по папке в которой хранятся все ваши скетчи. Напомню, что каждый скетч хранится в отдельной папке, куда складывается все, что к нему относится. Если скетчей у вас много, особенно если плодить версии в новых папках, то разобраться во всем этом нагромождении становится очень сложно. Для этого и можно применить функцию архивирования. Папка со скетчем будет сжата в архив ZIP, а затем стерта из каталога. Останется только архив.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Serial Plotter</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> противовес </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Serial Monitor</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> предназначен для вывода графика из данных выдаваемых в последовательный порт. Все, что от вас требуется для построения графика — выплевывать в порт цифры при помощи </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">Serial.println()</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Неплохой пример использования плоттера </span><a href="http://wikihandbk.com/wiki/Arduino:%D0%97%D0%BD%D0%B0%D0%BA%D0%BE%D0%BC%D1%81%D1%82%D0%B2%D0%BE_%D1%81_Arduino/%D0%98%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82_IDE_Arduino_%E2%80%93_%D0%9F%D0%BB%D0%BE%D1%82%D1%82%D0%B5%D1%80_%D0%BF%D0%BE_%D0%BF%D0%BE%D1%81%D0%BB%D0%B5%D0%B4%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%BC%D1%83_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8E"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">приведен</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> на страницах проекта wikihandbk.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Приведенные выше пункты стандартны. Их использование, вкупе с </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Library Manager</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> должны быть известны даже неопытным пользователям. А дальше попробуем погрузиться в чащобы Arduino IDE и мир программирования микроконтроллеров.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">WiFi101 / WiFiNINA Firmware Updater</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Сетевое взаимодействие для оригинальных плат Arduino всегда было ахиллесовой пятой. Их просто нет в стандартной поставке, а все решения в виде внешних плат настолько ди́ки, что просто пропадает всякое желание их использовать. По этой причине многие используют платы на основе </span><a href="https://blog.kvv213.com/?s=esp8266"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">ESP8266</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">, которые дешевле, мощнее и сразу с WiFi на борту. Но итальянцы, да и ардуинщики вообще, ребята упорные, поэтому вместо того, чтобы переходить на нормальные платы, продолжают изобретать очередные ужасы, к которым и относятся </span><a href="https://www.arduino.cc/en/Guide/ArduinoWiFiShield101"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">WiFi101</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> и </span><a href="https://www.arduino.cc/en/Reference/WiFiNINA"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">WiFiNINA</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image1973635775.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7689"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">W</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">iFi 101 Shield. Взято откуда-то с просторов сети.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Собственно этот пункт меню предназначен для обновления прошивки и сертификатов соответствующих плат.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image2041718591.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7690"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">A</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">rduino Uno с платой WiFi под библиотеку WiFiNINO</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Дичь полнейшая и подобные платы лучше не использовать, так как они до жути непопулярны, стоят дорого, потребляют уйму энергии. В общем, гораздо проще и элегантнее все решается на базе плат семейства ESP. В целом на Arduino присутствует подробный </span><a href="https://www.arduino.cc/en/Tutorial/FirmwareUpdater"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">туториал</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">, где разжевано как и что обновляется при помощи данной функции.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">ESP Exception Decoder</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Плагин для Arduino IDE под непонятным названием </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">ESP Exception Decoder</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> предназначен для более легкой отладки программ под платформу ESP8266. Exception или «исключение» обозначает возникновение ошибочной ситуации которая не была корректно обработана кодом. Например, деление на 0 однозначно вызовет исключение, и работа программы будет прервана. В языке, на котором программируют в Arduino IDE нет возможности использовать блоки </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">try {} catch {}</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">, соответственно работа с исключениями невозможна (точнее по синтаксису он есть, но компилятор его отвергнет, по крайней мере для плат на основе AVR). Программист обязан предусматривать и проверять данные и предупреждать возникновение подобных ситуаций. Иначе результат может быть непредсказуемым.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">На первоначальной экосистеме Arduino, построенной на Atmel AVR (об этом опять же дальше) нет места исключениям. И даже несмотря на то, что язык, применяемый для программирования в Arduino IDE есть ни что иное как диалект C++, в нем так же нет исключений и они не поддерживаются компилятором, ибо в AVR нет исключений, слишком там мало места для еще и исключений. Сильно жизнь это не осложняет, просто программы пишутся куда более аккуратно. А вот в экосистеме ESP, в том числе и под Arduino, исключения присутствуют.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">И в этом возникает проблема. При возникновении исключительной ситуации, того же деления на 0, микроконтроллер, например, esp8266 выдаст в последовательный порт информацию о возникновении исключения, стек вызовов функций, где оно возникло, сохранит некоторые сведения во внутренней памяти (к ним можно будет обратиться после перезагрузки).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image137725955.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7691"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">В</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">от такую вот информацию сохраняет esp8266 после перезагрузки. В этом случае произошла перезагрузка по питанию.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Система в чипах ESP более замороченная, чем в AVR и при возникновении нештатной ситуации выплевывает в последовательный порт некий стек адресов, по которым можно добраться до истинной причины возникновения ошибки. Но выдаются адреса в совсем нечитаемом человеком виде. Чтобы сопоставить строчку в исходном коде с конкретным адресом, выданным в стеке, и был придумал ESP Exception Decoder.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image112024921.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7692"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">Н</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">амеренный вызов исключения на WeMos Mini</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">После возникновения ошибки необходимо перенести стек в декодировщик и он выдаст «путь» по которому можно дойти до строки в годе где и возникла исключительная ситуация. В некоторых случаях функция исключительно удобная. Ознакомиться с подробной инструкцией по применению декодировщика можно на </span><a href="https://arduino-esp8266.readthedocs.io/en/latest/faq/a02-my-esp-crashes.html"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">страничке</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> проекта ESP Arduino Core.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Get Board Info</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Пожалуй, самая бесполезная функция, которое позволяет, в некоторых случаях, понять, какая плата подключена к компьютеру для прошивки. В большинстве случаев вы это и так знаете. А если не знаете, то функция отобразит, опять же, в большинстве случаев информацию только об оригинальных платах.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Burn Bootloader</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Наконец-то мы начинаем подбираться к действительно интересным пунктам меню. Начнем с пункта загрузки загрузчика (Burn Bootloader). Но для начала попытаемся понять, что такое bootloader и для чего он нужен. В старые далекие ламповые времена тоже существовали программируемые микросхемы. Но программировались они весьма жестким способом. Использовался специальный программатор, в который вставлялась микросхема, происходило таинство, и микросхему можно было использовать в оборудовании.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Сей способ с одной стороны достаточно прост, но с другой он очень неудобен. Ведь чтобы сменить прошивку на уже прошитой микросхеме, если это вообще возможно, ее необходимо вытащить из устройства, установить в программатор и повторить процедуру. Что далеко не всегда возможно, так как микросхема может быть впаянной в плату и без специализированного оборудования достать ее оттуда нельзя или же само устройство летает на спутнике. Именно для этих целей была придумана методика </span><a href="https://en.wikipedia.org/wiki/In-system_programming"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">ISP</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> (In-System Programming), что в переводе означает ни что иное как «</span><a href="https://ru.wikipedia.org/wiki/%D0%92%D0%BD%D1%83%D1%82%D1%80%D0%B8%D1%81%D1%85%D0%B5%D0%BC%D0%BD%D0%BE%D0%B5_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">внутрисхемное программирование</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">». ISP не стоит путать с </span><a href="https://ru.wikipedia.org/wiki/Serial_Peripheral_Interface"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">SPI</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> (Serial Peripheral Interface). ISP это именно внутрисхемная прошивка, а SPI это стандарт взаимодействия между устройствами. И пусть даже вас не вводят в заблуждения сильно похожие разъемы и наименования контактов. ISP и SPI это разные вещи.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">В общем случае ISP позволяет программировать микроконтроллер через любой его интерфейс и даже программироваться самостоятельно с изменением своего кода посредством своего собственного же кода. Но для осуществления подобных фокусов требуется некая программа, которая будет сидеть в микроконтроллере и управлять этим программированием. Именно она и называется загрузчиком (bootloader). И именно благодаря ей есть возможность прошивать микроконтроллеры просто подключив их к USB-порту, или же применив простейший программатор на параллельном порту компьютера (у кого они еще остались), а в некоторых случаях обновление прошивки можно загружать вообще по воздуху применяя прием </span><a href="https://ru.wikipedia.org/wiki/%D0%9E%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D0%BE_%D0%B2%D0%BE%D0%B7%D0%B4%D1%83%D1%85%D1%83"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">OTA</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> (Over The Air).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Вообще микроконтроллер можно прошить и без загрузчика. Именно для этих целей и предназначен соответствующий пункт в меню Sketch. В этом случае места под ваш скетч в памяти микроконтроллера будет больше. Однако, в последствии уже нельзя будет загрузить обновление прошивки обыкновенным путем. Придется при помощи программатора либо прошить загрузчик, либо далее прошивать прошивку без загрузчиков.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Для Arduino существует несколько вариантов загрузчиков. Стандартный, который прошивается еще при изготовлении платы Arduino, многие не любят. Дескать он притормаживает при загрузке устройства в ожидании передачи данных для прошивки и только спустя десять секунд запускает ваш прошитый скетч. Дело в том, что некоторые платы Arduino, в которых не реализован механизм DTR (Data Terminal Ready) / RTS (Ready To Send) действительно нужно прошивать очень быстро иначе bootloader просто передаст управление той микропрограмме, что уже находится в микропроцессоре. Вот и начали все, кому не лень, модифицировать штатный загрузчик или же писать свой собственный.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image915868104.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7693"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">С</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">тандартные загрузчики для плат Arduino</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Где брать загрузчики? Вообще стандартный загрузчик можно загрузить прямо из Arduino. Для этих целей и предназначен пункт меню </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Burn Bootloader</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. А сами загрузчики из стандартной поставки можно найти в папке с установленным Arduino в поддиректории hardware. Если же вы используете платы отличные от Arduino AVR, например, ESP3288, то все дополнительные загрузчики и прочие инструменты можно найти в личном профиле пользователя (AppData\Local).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image531749111.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7703"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">З</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">агрузчик для плат семейства ESP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Но если вы скачиваете дополнительные загрузчики и хотите установить их в Arduino IDE, то можно использовать папку </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">hardware</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> в вашем каталоге для скетчей. После перезагрузки IDE загрузчики из этой папки так же будут доступны, однако не следует забывать про файл </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">boards.txt</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> который должен присутствовать в подпапках папки </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">hardware</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Если у вас вдруг нет текстового редактора или же вы испытываете трудности с редактированием </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">boards.txt</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> то есть решение. Один энтузиаст создал специальную программу </span><a href="https://sourceforge.net/projects/arduinobdeditor/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">Arduino BOARDS.TXT Editor</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">, которая позволяет с легкостью вносить изменения в указанный файл.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Так, где же брать эти самые альтернативные загрузчики? Искать в сети. Поисковики выдают просто немыслимое количество разнообразных вариантов. Для начала можно остановиться на </span><a href="https://github.com/Optiboot/optiboot"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">OptiBoot</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">, попробовать </span><a href="http://homes-smart.ru/index.php/oborudovanie/arduino/avr-zagruzchik"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">калькулятор</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> «формирующий» загрузчик под конкретную плату или начать просматривать ссылки с официальной </span><a href="https://playground.arduino.cc/Main/ArduinoCoreHardware/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">страницы</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> загрузчиков Arduino.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">И подводя промежуточный итог, если нам нужно загрузить прошивку без загрузчика (так для нее останется больше места) в микроконтроллер, то подключаем его к программатору и загружаем прошивку через Sketch – Upload Using Programmer. Если же хотим вернуться к обычной и удобной загрузке скетчей через среду Arduino по USB и без прочих танцев африканских народов, то прошиваем загрузчик обратно (или же мы купили микроконтроллер без загрузчика) уже посредством Tools – Burn Bootloader. В обоих случаях незабываем про корректный выбор платы, программатора и прочих настроек.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">И еще раз, если в плате установлен загрузчик, то после перезагрузки платы он первым получит управление, послушает немного выделенные порты в надежде если вдруг там кто-то хочет залить прошивку. Если признаков заливания прошивки нет, то он со спокойной душой передает управление основной программе. А если в плате нет загрузчика, то тогда управление после перезагрузки сразу передается основной программе. Все просто, по крайней мере на пальцах.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">AVR и прочие</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Для лучшего понимания дальнейшей информации я хочу привести некоторые сведения о самих микроконтроллерах с которых пошло-поехало Arduino. Мы уже знаем, что оригинальные Arduino построены на микроконтроллерах (больших интегральных схемах, которые можно программировать и которые могут работать и сами по себе без внешней обвязки, подавай только напряжение) от компании Atmel (нынче Microchip).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">У компании Atmel наработано несколько линеек микроконтроллеров, но нас в первую очередь интересует линейка AVR (кстати, аббревиатура AVR официально никак не расшифровывается), так как именно на ней и построены оригинальные Arduino. Линейка появилась аж в 1996 году и, пожалуй, была одна из первых на рынке предложившей решение, где микроконтроллер и память (ОЗУ и ПЗУ) расположены в рамках одного единственного кристалла. Повторюсь, чтобы система работала достаточно только одной микросхемы AVR на которую подается питание. Все остальное у нее уже есть внутри.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">AVR линейка делится на несколько основных групп:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14px;">tinyAVR – с уменьшенным количеством линий ввода-вывода, уменьшенным количеством памяти всех типов, обозначается как ATtinyxxx.</span></li>
<li style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14px;">megaAVR – увеличенное количество памяти всех типов, увеличенное количество линий ввода-вывода, расширенный набор для периферии и тому подобное. Обозначается как ATmegaxxx.</span></li>
<li style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14px;">XMEGA – ко всему увеличенному у megaAVR тут еще увеличили памяти и добавили встроенный контроллер для быстрой работы с памятью. Обозначается как ATxmegaxxx.</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Именно микросхемы AVR обеспечивают поддержку таких функций как АЦП, ШИМ, SPI, I2C и прочих. Arduino же просто их использует (хотя с появлением более мощных микроконтроллеров, тех же esp8266, появилась возможность эмуляции вышеназванных функций программным способом).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">И вопреки возможности прошивки AVR методом ISP посредством стандарта SPI через установленный загрузчик, для программирования микроконтроллеров применяется великое множество программаторов. Как простых и собираемых на коленке, так и сложных с внешним питанием и обилием всевозможных функций. Но прежде, чем мы перейдем к рассмотрению программаторов следует пояснить еще один момент. При программировании микроконтроллера с использованием внешнего программатора (без использования загрузчика) необходимо четко понимать, что такое fuses или не трогать настройки, связанные с ними, если такого понимания нет. Fuse/фьюзы/предохранительные биты — это настройки внутри микроконтроллера, в частности AVR. Они прошиваются точно так же, при помощи внешнего программатора (без применения ISP). И обычно применяются для настройки самого микроконтроллера, например, можно включить или отключить возможность самопрошивки контроллера, включение или отключение внешнего сброса устройства (и соответственно возможности его прошивки через bootloader), включение и отключение очистки памяти при перепрограммировании чипа и тому подобное. Подробнее ознакомиться с фьюзами можно (и нужно) в документации к конкретному контроллеру. К чипу ATmega328, одному из самых популярных чипов на Arduino, </span><a href="http://ww1.microchip.com/downloads/en/DeviceDoc/ATmega48A-PA-88A-PA-168A-PA-328-P-DS-DS40002061A.pdf"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">документация</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> доступна на официальном сайте производителя.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Programmer:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Пожалуй, что пункт меню Tools под кодовым названием Programmer является самым таинственным местом всего Arduino IDE. Информации по данному пункту очень мало, и она настолько скудна что может привести к разочарованию даже самого стойкого прагматика. Очевидно, что данный пункт содержит выбор программаторов для программирования плат. И кажется, что одну и ту же плату можно запрограммировать кучей разных способов и программаторов. Но, а что же нам на этот счет говорит документация к Arduino IDE? А она нам вещает о том, что данный пункт меню Tools имеет смысл </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#000000;">только при прошивке загрузчика</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Во всех остальных случаях используемый «прошивальщик» зашит в тот самый </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">boards.txt</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">, что обсуждался немного ранее. Причем для микроконтроллеров AVR это всегда </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">avrdude</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">, а для ESP это всегда </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">esptool</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Кроме того, для плат AVR может применяться, в штатной поставке, целых два различных протокола «закачки» прошивки в микроконтроллер: </span><a href="http://ww1.microchip.com/downloads/en/AppNotes/doc1644.pdf"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; text-decoration: underline; color:#21759b;">avr109</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> и </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">arduino</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Разные протоколы, как не сложно догадаться, применяются для разных загрузчиков, установленных в конкретные микроконтроллеры.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">В штатной поставке Arduino IDE с подключенной инфраструктурой ESP для прошивки загрузчика можно применить несколько типов программаторов. Кратко пройдемся по ним всем. По факту все AVR в Arduino IDE прошиваются посредством приблуды </span><a href="http://www.nongnu.org/avrdude/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">AVRDUDE</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> (бывший AVRProg) и различия между «программаторами» только в используемом протоколе и настройках AVRDUDE. На текущий момент AVRDUDE поддерживает 39 программаторов, но в Arduino IDE используется только 14. Ознакомиться с настройками каждого из них можно в файле </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">programmers.txt</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> в той самой директории </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">hardware,</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> где складируется файлик </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">boards.txt</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Информация по настройкам для каждого из программатора доступна в файле </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">avrdude.conf</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> (располагается обычно в </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">Arduino\hardware\tools\avr\etc</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">) и в куцей </span><a href="http://www.nongnu.org/avrdude/user-manual/avrdude_4.html"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">документации</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> к самому AVRDUDE.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">AVR ISP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">AVRISP есть ни что иное как фирменный программатор от Atmel. Он позволят программировать AVR. И похоже, что на этом все. Мне ну далось найти хоть сколько-нибудь достоверной информации про данный программатор, кажется, что он сошел со сцены и осел где-то в дебрях плат у аксакалов еще до появления Интернет.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image543981321.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7695"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">О</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">тладочная плата Atmel STK500. Фото производителя.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Единственное, что хоть как-то проливает свет на данный программатор, так это то, что он по факту является частью </span><a href="https://www.microchip.com/webdoc/stk500/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">STK500</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> (такая отладочная плата для AVR от Atmel) версии 1, которая подкачается к компьютеру посредством последовательно порта.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">AVRISP mkII</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">А вот AVRISP mkii является актуальным программатором, подключаемым к USB. По крайней мере о нем есть </span><a href="https://www.microchip.com/webdoc/avrispmkii/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">информация</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> на сайте производителя и большинство безродных программаторов, которые продаются бесчисленными компаниями как раз и являются клонами именно этого программатора.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image142644742.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7694"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">Ф</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">ирменный программатор AVRISP mkII. Фото производителя.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Тем не менее, он так же является частью отладочной платы STK500, но уже версии 2, которая подключается к компьютеру уже по интерфейсу USB. Хотя, по отзывам очевидцев и версия 1 может использовать с USB посредством конвертера COM-USB.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">USBtinyISP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Это один из программаторов, который можно собрать своими руками, он прост и дешев, а в качестве «сердца» у него используется чип tinyAVR. Вот только возникает вопрос – как же его прошивать, если он сам и предназначен для прошивки AVR?</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Тем не менее, программатор поддерживается Arduino IDE и весьма популярен. Программатор был </span><a href="https://dicks.home.xs4all.nl/avr/usbtiny/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">разработан</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> в Нидерландах, но в настоящее время поддерживается </span><a href="https://learn.adafruit.com/usbtinyisp"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">AdaFruit</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">ArduinoISP и ArduinoISP.org</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Что подразумевали под этими двумя программаторами разработчики Arduino IDE остается только гадать, да угадывать. Сайт </span><a href="http://www.arduinoisp.org/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">ArudinoISP.org</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> дает перенаправление на </span><a href="https://www.arduino.cc/en/Tutorial/ArduinoISP"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">туториал</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> на сайте Arduino.cc по использованию Arduino as ISP. Единственное отличие этих двух от Arduino as ISP только лишь используемый протокол. Вероятно, что они были когда-то собраны в качестве поддержки особого загрузчика, а с течением времени исчезли с лица истории. По крайней мере в документации AVRDUDE никакого упоминания ни про </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">arduinoisp</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> ни про </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">arduinoisporg</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> просто нет.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">USBasp</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Еще один простой </span><a href="https://www.fischl.de/usbasp/"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">программатор</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">, который можно собрать дома на коленке. И он тоже построен на чипе от Atmel. Проект был развернут немецкий программистом, а затем подхвачен всем миром. Как и с USBtinyISP чип от Atmel для программатора необходимо запрограммировать.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Parallel Programmer</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Данный тип программатора считается одним из самый простых, если не самым простым. По сути «параллельный программатор» — распиновка параллельного порта компьютера и соответствующее программное обеспечение.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Для сборки данного программатора требуется компьютер с параллельным интерфейсом (раньше по нему было модно подключать принтеры) и всего три резистора двух номиналов. Подробная схема (от руки) и описание по сборке (с фотографиями) </span><a href="https://www.arduino.cc/en/Hacking/ParallelProgrammer"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">доступна</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> на официальном сайте Arduino.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Arduino as ISP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Поскольку платы Arduino сами по себе являются микроконтроллерами, да еще и с навороченными входами/выходами, то их вполне можно использовать в качестве программаторов.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Для этого в плату Arduino закачивается скетч из примеров под именем ArduinoISP, соединяются проводки (между платой, в которую залит скетч и платой, которую нужно прошить), и прошивается загрузчик (не забываем выбрать программатор Arduino as ISP). Подробная инструкция </span><a href="https://www.arduino.cc/en/Tutorial/ArduinoISP"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">доступна</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> опять же на странице официального сайта Arduino.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Arduino Gemma</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Если подходить формально, то Gemma это не программатор. Это </span><a href="https://learn.adafruit.com/introducing-gemma/introduction"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">микроскопическая плата</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> от AdaFruit предназначенная для вшивания/встраивания в одежду/обувь. Она лишь частично совместима с Arduino, так как содержит очень мало вводов/выводов. Чтобы подключить ее к USB разработчику пришлось выдумать отдельный загрузчик, и отдельный PID для USB устройства. По этой причине прошивается Gemma как отдельный программатор (в реальности там встроенный USBtiny), имеет отдельный конфиг для AVRDUDE с жестко прописанным bootloader. Другими словами, прошить этой платой ничего нельзя, но зато ее можно прошить саму загрузчиком.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">BusPirate as ISP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">BusPirate это не только программатор, скорее это не совсем и вовсе не программатор, а одноплатный компьютер специализированный для изучения и программирования новых и неизвестных микропроцессоров. Его конструкция такова, что на одной плате собраны все мыслимые и не очень интерфейсы для исследования того, что же попало к вам в руки. Штука интересная и если вы уж работаете с таким, то должны знать, что с AVRDUDE у компьютера могут быть определенные проблемы, связанные с прошивкой самого </span><a href="http://dangerousprototypes.com/docs/Bus_Pirate"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">BusPirate</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Обходятся они, естественно, настройками AVRDUDE и некоторым шаманством с железом.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Atmel STK500 development board</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Та самая отладочная плата, что упоминается в AVR ISP и AVR ISP mkII. В Arduino IDE не делается различия между версиями и предполагается, что AVRDUDE самостоятельно определит версию протокола обмена и осуществит самонастройку. Если же этого не происходит, то в </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">programmers.txt</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> нужно четко прописать </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">stk500v1</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> или </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">stk500v2</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> в качестве применяемого протокола.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Atmel JTAGICE3 (ISP mode) и Atmel JTAGICE3 (JTAG mode)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">JTAGICE3 — современное решение для отладки чипов семейств AVR, SAM и Cortex. Разумеется, только тех чипов, что поддерживают внутричиповую отладку. Попутно эта коробочка еще и программирует их всех.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image1618759026.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7696"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">A</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">tmel JTAGICE3 отладчик/программатор.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Продукт актуальный, у производителя имеется </span><a href="https://www.microchip.com/webdoc/jtagice3/jtagice3.preface.html"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">документация</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Разница между программаторами только в применяемых протоколах. В ISP режиме применяется протокол JTAG3ISP, а в </span><a href="https://en.wikipedia.org/wiki/JTAG"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">JTAG</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> просто JTAG3.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Atmel-ICE (AVR)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Так же активный </span><a href="https://www.microchip.com/DevelopmentTools/ProductDetails/atatmel-ice"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">продукт</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> Atmel и его можно купить. Как и JTAGICE3 он позволяет не только производить отладку у чипов, поддерживающих такую функцию, так и программировать их. Для прошивки используется протокол </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">atmelice_isp</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. В общем использовать программаторы на подобие JTAGICE3 или Atmel-ICE только для прошивки 8-битных микроконтроллеров это как стрелять из пушки по клопам. Слишком уж мощные и дорогие решения для задачи, которая решается куда проще.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Обширное семейство ESP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Выше мы рассмотрели специфику прошивки контроллеров семейства AVR. Но при этом обойти не менее многочисленное и популярное семейство контроллеров ESP было бы просто некрасиво. Тем более, что при выборе одного из семейства, меню Tools значительно увеличивается в объеме. Пройдемся по меню и попробуем понять, что каждый из пунктов увеличенного меню означает. Здесь и далее я рассматриваю SDK ESP версии 2.5.0.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image1089801816.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7697"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">М</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">еню Tools в Arduino IDE при выборе одной из плат семейства ESP.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Часть меню все же остается тем же самым, что и прежде, поэтому излишне повторяться не будем.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Upload speed</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Позволяет выбрать скорость, с которой будет происходить загрузка прошивки и других частей в микроконтроллер. Платы семейства ESP могут комплектоваться мегабайтами памяти (в то время как AVR речь идет в лучшем случае о сотнях килобайт) и загрузка на скорости 9600 может занять непростительно долгий отрезок времени.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Поддерживаемые скорости прописываются для каждой из плат индивидуально.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">CPU Frequency</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Многие платы семейства ESP могут из коробки работать сразу на нескольких частотах. В Arduino регулировать частоту процессора можно при прошивке микроконтроллера. Опять же, доступные варианты указываются для каждой из плат отдельно.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Flash Size</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Здесь указывается каким образом разделять всю доступную ПЗУ для хранения кода программы и для файлов. Микроконтроллеры ESP поддерживают память SPIFFS (Serial Peripheral Interface Flash File System). По сути, SPIFFS это файловая система для последовательного доступа. И у программиста есть возможность определить, сколько памяти отводить для файловой системы (туда можно записать, например, HTML-файлы или картинки) и сколько для своего скетча. Но тут есть некоторая тонкость. На текущий момент, насколько мне известно, как минимум платы EPS8266 не могут закачать скетч размерностью более 1 мегабайта. Есть обходные пути, но ведь еще нужно умудриться написать скетч, который в компилированном виде будет занимать более 1 мегабайта. Поэтому рекомендуется использовать как можно больший SPIFF, дабы уменьшить время загрузки скетча.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">В тоже самое время есть сведения от потерпевших, что платы ESP32 могут испытывать проблемы связанные с «не хватает места для скетча». Но проблемы эти всего лишь из-за еще сырой поддержки плат EPS32 в инфраструктуре ESP для Arduino.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Debug port</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Пункт может принимать значения Disabled, Serial и Serial1. Данная настройка предназначена для вывода отладочной информации в последовательный порт (хотя включить ее можно и программно, например, через </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">Serial.setDebugOutput(true)</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">). Если в скетче инициализируется соответствующий порт (Serial или Serial1), то в него могут выводиться отладочные сообщения, которые не мешают выводу в этот же порт другой информации.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">При инициализации и включении вывода отладочной информации рекомендуется устанавливать максимальную скорость работы порта. В противном случае, при большом объеме вывода могут наблюдаться фризы исполнения программы или же сброс буфера вывода. Подробнее о выдаче отладочных сообщений можно </span><a href="https://arduino-esp8266.readthedocs.io/en/latest/Troubleshooting/debugging.html?highlight=debug%20port"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">прочитать</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> в статье на сайте проекта ESP8266 Core.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">У ESP обычно присутствует два последовательных порта. Первый, Serial использует UART0 и GPIO1 (TX) с GPIO3(RX). Второй, Serial1 использует UART1 и только GPIO2 (TX). Соответственно Serial1 не может быть использован на прием. Тем не менее, в обоих случаях есть возможность программного </span><a href="https://arduino-esp8266.readthedocs.io/en/latest/reference.html?highlight=serial1"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">переназначения</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> пинов, как и скорости, четности и прочих характеристик.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Debug Level</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Настройка позволяет выделить те отладочные сообщения, которые важны пользователю. Выбор комбинаций оставляют огромное пространство для маневра, но при этом обязательно должна быть включена предыдущая функция.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">lwIP Variant</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Настройка предназначена для выбора </span><a href="https://en.wikipedia.org/wiki/LwIP"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">варианта</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> реализации сетевого стека </span><a href="https://en.wikipedia.org/wiki/Internet_protocol_suite"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">IP</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Прошу обратить внимание, тут именно lwIP (lightweight IP), первая буква L, а не i.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image925689063.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:2%;"><a name="caption-attachment-7699"></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">В</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#757575;">ариант выбора IwIP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">По умолчанию используется самый верхний вариант, уменьшающий использование памяти. Но если ваш микроконтроллер активно работает с сетью, то можно пожертвовать памятью и получить наивысшую скорость. Аналогично можно включить поддержку IPv6 или вернуться на стек версии 1.4, где такой поддержки не было вообще. Под features тут понимается всякого рода ICMP, IGMP и прочие навороты, без которых можно обойтись. Основная </span><a href="http://www.nongnu.org/lwip/2_1_x/index.html"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">документация</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> по версии ветки 2.х доступна на сайте разработчика. Постоянно растущий </span><a href="https://lwip.fandom.com/wiki/LwIP_Wiki"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">Wiki</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> по теме lwIP доступен на страницах проекта FanDom.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">VTables</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Под VTables в IDE подразумевается механизм виртуальной таблицы для позднего связывания объектов. Не буду вдаваться в подробности, о них можно задумчиво почитать в </span><a href="https://ru.wikipedia.org/wiki/%D0%A2%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0_%D0%B2%D0%B8%D1%80%D1%82%D1%83%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D1%85_%D0%BC%D0%B5%D1%82%D0%BE%D0%B4%D0%BE%D0%B2"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">Википедии</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">. Остановлюсь лишь на самих доступных опциях, а их всего три:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14px;">Flash – постоянное запоминающее устройство, таблицы хранятся в файловой системе. Метод по умолчанию в репозитарии GitHub.</span></li>
<li style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14px;">Heap – куча, оперативная память предназначенная для динамического выделения памяти.</span></li>
<li style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14px;">IRAM – внутренняя память микроконтроллера.</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Понятно, что самый быстрый способ хранения и обработки виртуальных таблиц это IRAM, а самый медленный Flash. Но тут следует так же смотреть на то, как активно работает программа с объектами, есть ли множественное наследование и как часто объекты создаются и уничтожаются. В обычных применениях такая таблица и вовсе может быть статической и отлично проживать на Flash, с другой стороны, она может быть весьма крупной и просто не влезать в IRAM (область ОЗУ для хранения кода программы).</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Exceptions</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Пункт меню позволяет включить или отключить использование исключительных ситуаций. О них мы уже рассуждали выше, в том числе и в разделе об ESP Exception Decoder. При включении исключений программист в коде уже может использовать структуры try {} catch {}, что увеличивает потребление памяти, но позволяет легче программировать сложные алгоритмы. Напомню, что try-catch будет работать только для плат семейства ESP. Отрадно замечать, что программисты работающие над библиотеками для семейства ESP для Arduino уже начали использовать механизм try {} catch {} в своем коде на </span><a href="https://github.com/esp8266/Arduino"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">GitHub</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Erase Flash</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Пункт предлагает стирать внутреннюю память микроконтроллера в следующих пропорциях:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14px;">Only Sketch – стирает только пространство отведенное под скетч. Остальное остается нетронутым.</span></li>
<li style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14px;">Sketch + WiFi Settings – пространство для скетча и настройки WiFi. Дело в том, что при подключении к точке доступа микроконтроллер запоминает параметры подключения и в следующий раз подключается к той же точке быстрее.</span></li>
<li style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-size:14px;">All Flash Contents – стирается все, включая файловую систему.</span></li></ul>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.84615%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Прочее по ESP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">В заключение статьи хотелось бы добавить, что при прошивке загрузчика в ESP всегда используется прошивальщик esptool. И всегда применяется один и тот же загрузчик eboot. Чтобы пользователь там не выставил в </span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-style:italic; color:#000000;">Programmer</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.6%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Итог</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Статья получилась весьма увесистая, но я полагаю, что она даст ответы на некоторые животрепещущие вопросы. Подавляющее большинство информации приходилось искать по крупицам в Сети. Похоже, что с течением времени возрастает сложность даже такого простого инструмента как Arduino IDE и в скором времени может случиться так, что начинающий быстрее плюнет, чем начнет разбираться с мегатоннами документации, техник, приемов и способов, тем более что большинство из них поддерживается энтузиастами, что ведет к повышенному почкованию указанных техник, методик, документаций.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">Однако, хочу надеться, что авторы Arduino IDE все же смогут удержать свое творение в приличных рамках и оставить его все таким же легким в освоении инструментом. Заодно хочу им напомнить, что документировать свое творение стоит постоянно иначе получается «не только лишь все, сегодня могут в завтра».</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:1.4%;"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; font-weight:600; color:#000000;">Update</span><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;">: разбираясь глубже с тем как настраивать свои собственные платы или же добавлять новые платы к Arduino IDE, наткнулся на исчерпывающую </span><a href="https://github.com/arduino/Arduino/wiki/Arduino-IDE-1.5-3rd-party-Hardware-specification"><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; text-decoration: underline; color:#21759b;">документацию</span></a><span style=" font-family:'Open Sans,Helvetica,Arial,sans-serif'; font-size:9pt; color:#000000;"> по этому поводу.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Sans Serif'; font-size:9pt;"><br /></span></p></body></html>