<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" width="100%" cellspacing="0" cellpadding="0">
<tr>
<td width="686" background="/images/verh.jpg">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> </span></a></p></td>
<td background="/images/verh_b.jpg">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image1228964480.png" /><span style=" font-family:'Ubuntu';"> <br /></span></p></td></tr></table>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" width="100%" cellspacing="0" cellpadding="0">
<tr>
<td width="157" background="/images/lev_back.jpg" style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><img src="image184412146.png" style="vertical-align: top;" /><span style=" font-family:'Ubuntu';"><br /></span><img src="image1958046677.png" style="vertical-align: top;" /><span style=" font-family:'Ubuntu';"><br /></span><img src="image280713888.png" style="vertical-align: top;" /><span style=" font-family:'Ubuntu';"><br /></span><img src="image1040190886.png" style="vertical-align: top;" /><span style=" font-family:'Ubuntu';"><br /></span><img src="image1864525194.png" style="vertical-align: top;" /><span style=" font-family:'Ubuntu';"><br /></span><img src="image1393598950.png" style="vertical-align: top;" /><span style=" font-family:'Ubuntu';"><br /></span><img src="image2033445608.png" style="vertical-align: top;" /><span style=" font-family:'Ubuntu';"><br /></span><img src="image117825681.png" style="vertical-align: top;" /><span style=" font-family:'Ubuntu';"><br /><br /><br /><br /></span></p></td>
<td style=" vertical-align:top;">
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" align="center" width="96%" cellspacing="0" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" width="100%" cellspacing="2" cellpadding="0">
<tr>
<td colspan="3" style=" vertical-align:top;">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Глава 4. Администрирование баз данных</span></p></td></tr>
<tr>
<td width="20%" style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/tutorial.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Пред.</span></a><span style=" font-family:'Ubuntu';"> </span></p></td>
<td width="60%" style=" vertical-align:top;">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;"> </span></p></td>
<td width="20%" style=" vertical-align:top;">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">След.</span></a></p></td></tr></table>
<hr />
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mysql-database-administration"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">Г</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">лава 4. Администрирование баз данных</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Содержание</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#configuring-mysql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.1. Конфигурирование MySQL</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.1.1. Параметры командной строки </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.1.2. Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#installing-many-servers"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.1.3. Установка нескольких серверов на один компьютер</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#multiple-servers"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.1.4. Запуск нескольких серверов MySQL на одном компьютере</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privilege-system"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2. Общие проблемы безопасности и система привилегий доступа MySQL</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#general-security"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.1. Общие принципы обеспечения безопасности</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#security"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.2. Как обезопасить MySQL от хакеров</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.3. Опции запуска </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, относящиеся к безопасности</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#load-data-local"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.4. Вопросы безопасности, относящиеся к команде LOAD DATA LOCAL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#what-privileges"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.5. Функции, выполняемые системой привилегий</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.6. Как работает система привилегий</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges-provided"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.7. Привилегии, предоставляемые MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#connecting"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.8. Соединение с сервером MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#connection-access"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.9. Управление доступом, этап 1: верификация подсоединения</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#request-access"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.10. Управление доступом, этап 2: верификация запросов</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#access-denied"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.11. Причины появления ошибок </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#access-denied"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">Access denied</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#access-denied"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> ('в доступе отказано')</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#user-account-management"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3. Управление учетными записями пользователей MySQL</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.1. Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">GRANT</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> и </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REVOKE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#user-names"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.2. Имена пользователей MySQL и пароли</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privilege-changes"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.3. Когда изменения в привилегиях вступают в силу</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#default-privileges"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.4. Задание изначальных привилегий MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#adding-users"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.5. Добавление новых пользователей в MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#user-resources"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.6. Ограничение ресурсов пользователя</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#passwords"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.7. Задание паролей</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#password-security"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.8. Обеспечение безопасности своего пароля</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#secure-connections"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.9. Использование безопасных соединений</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#disaster-prevention"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4. Предотвращение катастроф и восстановление</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.1. Резервное копирование баз данных</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.2. Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">BACKUP TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#restore-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.3. Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#restore-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">RESTORE TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.4. Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">CHECK TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.5. Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REPAIR TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6. Использование </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> для профилактики таблиц и послеаварийного</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#maintenance-regimen"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.7. Настройка режима профилактики таблиц</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-info"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.8. Получение информации о таблице</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#database-administration"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5. Справочник по языку администрирования баз данных</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimize-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.1. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimize-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">OPTIMIZE TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#analyze-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.2. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#analyze-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">ANALYZE TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.3. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">FLUSH</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#reset"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.4. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#reset"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">RESET</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#kill"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.5. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#kill"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">KILL</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#localisation"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6. Локализация MySQL и использование национальных алфавитов</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#character-sets"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.1. Набор символов, применяющийся для записи данных и сортировки</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#languages"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.2. Сообщения об ошибках на языках, отличных от английского</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#adding-character-set"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.3. Добавление набора символов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#character-arrays"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.4. Массивы определения символов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#string-collating"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.5. Поддержка упорядочивания строк</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#multi-byte-characters"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.6. Поддержка многобайтовых символов</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#problems-with-character-sets"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.7. Проблемы с наборами символов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#server-side-scripts"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7. Серверные сценарии и утилиты MySQL</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#server-side-overview"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7.1. Обзор серверных сценариев и утилит</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7.2. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">safe_mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, оболочка </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-multi"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7.3. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-multi"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">Mysqld_multi</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-multi"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, программа для управления множеством серверов MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisampack"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7.4. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisampack"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisampack</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisampack"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, MySQL-генератор сжатых таблиц (только для чтения)</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-max"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7.5. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-max"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld-max</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-max"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, расширенный сервер </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-max"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#client-side-scripts"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8. Клиентские сценарии и утилиты MySQL</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#client-side-overview"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.1. Обзор клиентских сценариев и утилит</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.2. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysql</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Утилита командной строки</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqladmin"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.3. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqladmin"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqladmin</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqladmin"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Администрирование MySQL-сервера.</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#using-mysqlcheck"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.4. Использование </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#using-mysqlcheck"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlcheck</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#using-mysqlcheck"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> для сопровождения и аварийного восстановления таблиц.</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.5. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqldump</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Получение дампов данных и структуры таблицы</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.6. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlhotcopy</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Копирование баз данных и таблиц MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlimport"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.7. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlimport"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlimport</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlimport"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, импорт данных из текстовых файлов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlshow"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.8. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlshow"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlshow</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlshow"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, просмотр баз данных, таблиц и столбцов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql-config"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.9. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql-config"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysql_config</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql-config"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Получение опций компиляции для компиляции клиентских программ</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#perror"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.10. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#perror"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">perror</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#perror"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, разъяснение кодов ошибок</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#batch-commands"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.11. Как запускать SQL-команды из текстового файла</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#log-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9. Файлы журналов MySQL</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#error-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.1. Журнал ошибок</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#query-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.2. Общий журнал запросов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#update-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.3. Журнал обновлений (update)</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#binary-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.4. Бинарный журнал обновлений</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#slow-query-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.5. Журнал медленных запросов</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#log-file-maintenance"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.6. Обслуживание файлов журналов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10. Репликация в MySQL</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-intro"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.1. Введение</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-implementation"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.2. Как реализована репликация: обзор</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-howto"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.3. Как настроить репликацию</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-features"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.4. Возможности репликации и известные проблемы</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.5. Опции репликации в файле </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-sql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.6. SQL-команды, относящиеся к репликации</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-faq"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.7. Часто задаваемые вопросы по репликации</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:30px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-problems"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.8. Поиск неисправностей репликации</span></a></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="configuring-mysql"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">.1. Конфигурирование MySQL</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.1.1. Параметры командной строки </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.1.2. Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#installing-many-servers"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.1.3. Установка нескольких серверов на один компьютер</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#multiple-servers"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.1.4. Запуск нескольких серверов MySQL на одном компьютере</span></a></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="command-line-options"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.1.1. Параметры командной строки </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqld</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В большинстве случаев управление параметрами mysqld осуществляется при помощи файлов параметров (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">mysqld.server</span><span style=" font-family:'Ubuntu';"> считывают параметры из групп </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">server</span><span style=" font-family:'Ubuntu';">. </span><span style=" font-family:'Courier New,courier';">mysqld_safe</span><span style=" font-family:'Ubuntu';"> считывает параметры из групп </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">server</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqld_safe</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">. Встроенный сервер MySQL обычно считывает параметры из </span><span style=" font-family:'Courier New,courier';">server</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">embedded</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">xxxxx_SERVER</span><span style=" font-family:'Ubuntu';">, где </span><span style=" font-family:'Courier New,courier';">xxxxx</span><span style=" font-family:'Ubuntu';"> - имя приложения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysqld принимает следующие параметры командной строки (для получения полного списка выполните </span><span style=" font-family:'Courier New,courier';">mysqld --help</span><span style=" font-family:'Ubuntu';">): </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--ansi</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать синтаксис ANSI SQL вместо синтаксиса MySQL (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/introduction.html#ansi-mode"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 1.9.2, «Запуск MySQL в режиме ANSI»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-b, --basedir=path</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Путь к каталогу установки. Все остальные пути обычно определяются относительно этого пути. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--big-tables</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Позволяет использовать наборы результатов большого объема за счет сохранения всех временных файлов в одном. Данный параметр позволяет устранить большинство ошибок 'table full' (таблица переполнена), но замедляет обработку запросов, для которых было бы достаточно таблиц, расположенных в памяти. Начиная с версии 3.23.2 в MySQL эта проблема решается автоматически: память используется для небольших временных таблиц, а при необходимости происходит переключение на таблицы, расположенные на диске. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--bind-address=IP</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">IP-адрес, с которым необходимо установить связь. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--console</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Писать журнал сообщений/ошибок в stderr/stdout даже если </span><span style=" font-family:'Courier New,courier';">--log-error</span><span style=" font-family:'Ubuntu';"> указана. На Windows mysqld просто не будет закрывать консольное окно если указана эта опция. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--character-sets-dir=path</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Каталог, в котором расположены наборы символов (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#character-sets"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.6.1, «Набор символов, применяющийся для записи данных и сортировки»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--chroot=path</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Изменяет корневой каталог программы mysqld во время запуска. Рекомендуемая мера безопасности для MySQL 4.0 (MySQL 3.23 не вполне в состоянии предоставить 100% измененную среду запуска). Эта опция некоторым образом ограничивает использование функций </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">SELECT ... INTO OUTFILE</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--core-file</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Записывает файл ядра, если происходит аварийное прекращение работы </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. В некоторых системах также необходимо указать </span><span style=" font-family:'Courier New,courier';">--core-file-size</span><span style=" font-family:'Ubuntu';"> для safe_mysqld (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.7.2, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">safe_mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, оболочка </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). Обратите внимание на то, что в некоторых системах, таких как Solaris, не удастся записать файл ядра, если используется параметр </span><span style=" font-family:'Courier New,courier';">--user</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-h, --datadir=path</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Путь к корневому каталогу базы данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--debug[...]=</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если MySQL настроен при помощи </span><span style=" font-family:'Courier New,courier';">--with-debug</span><span style=" font-family:'Ubuntu';">, то этот параметр позволяет получить файл трассировки, в котором отражена работа </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/porting.html#making-trace-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел E.1.2, «Создание трассировочных файлов»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--default-character-set=charset</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Задает набор символов, принятый по умолчанию (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#character-sets"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.6.1, «Набор символов, применяющийся для записи данных и сортировки»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--default-table-type=type</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Задает тип таблиц, принятый по умолчанию (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Глава 7, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html"><span style=" font-family:'Ubuntu'; font-style:italic; text-decoration: underline; color:#0000ff;">Типы таблиц MySQL</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--delay-key-write[= OFF | ON | ALL]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указывает, как на MyISAM </span><span style=" font-family:'Courier New,courier';">DELAYED KEYS</span><span style=" font-family:'Ubuntu';"> должен обрабатываться. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#server-parameters"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.2, «Настройка параметров сервера»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--delay-key-write-for-all-tables; В MySQL 4.0.3 следует использовать --delay-key-write=ALL.</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отмена сброса на диск ключевых буферов для всех таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> между записями. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#server-parameters"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.2, «Настройка параметров сервера»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--des-key-file=filename</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Задает считывание из файла filename принятых по умолчанию ключей, которые используются для </span><span style=" font-family:'Courier New,courier';">DES_ENCRYPT()</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">DES_DECRYPT()</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--enable-external-locking (было --enable-locking)</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Включает блокировку доступа к системе. Обратите внимание на то, что если этот параметр используется в системе, где функция </span><span style=" font-family:'Courier New,courier';">lockd</span><span style=" font-family:'Ubuntu';"> полностью не работает (например, в Linux), это может привести к зависанию mysqld. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--enable-named-pipe</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Включает поддержку для именованных каналов (только в NT/Win2000/XP). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-T, --exit-info</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Побитовое маскирование различных флагов, которое применяется для отладки сервера mysqld; не следует использовать этот параметр, если вы хорошо не разбираетесь в том, что именно он делает! </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--flush</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Задает сброс на диск всех изменений после каждой команды SQL. Обычно MySQL только направляет все изменения на диск после каждой команды SQL, делегируя управление синхронизацией записи на диск операционной системе (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#crashing"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел A.4.1, «Что делать, если работа MySQL сопровождается постоянными сбоями»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-?, --help</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывод сокращенной справки и завершение выполнения. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--init-file=file</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Задает считывание команды SQL из файла file при запуске. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-L, --language=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывод сообщений об ошибках клиента на указанном языке. Может быть задан в виде полного пути (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#languages"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.6.2, «Сообщения об ошибках на языках, отличных от английского»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-l, --log[=file]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Задает занесение в файл журнала соединений и запросов (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#query-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.2, «Общий журнал запросов»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--log-bin=[file]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Двоичный журнал обновлений. Сохранение всех запросов, изменяющих данные, в файл. Используется для архивного копирования и репликации. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#binary-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.4, «Бинарный журнал обновлений»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--log-bin-index[=file]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя индексного файла для двоичного журнала обновлений. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#binary-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.4, «Бинарный журнал обновлений»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--log-error[=file]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Писать ошибки и сообщения в этот файл. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#error-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.1, «Журнал ошибок»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--log-isam[=file]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заносит в файл журнала все изменения </span><span style=" font-family:'Courier New,courier';">ISAM</span><span style=" font-family:'Ubuntu';">/</span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> (используется только при отладке </span><span style=" font-family:'Courier New,courier';">ISAM</span><span style=" font-family:'Ubuntu';">/</span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--log-slow-queries[=file]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заносит в файл журнала все запросы, выполнение которых заняло больше, чем </span><span style=" font-family:'Courier New,courier';">long_query_time</span><span style=" font-family:'Ubuntu';"> секунд (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#slow-query-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.5, «Журнал медленных запросов»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--log-update[=file]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заносит в файл журнала обновления </span><span style=" font-family:'Courier New,courier';">file.#</span><span style=" font-family:'Ubuntu';"> где </span><span style=" font-family:'Courier New,courier';">#</span><span style=" font-family:'Ubuntu';"> представляет собой уникальный номер, если он не был задан (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#update-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.3, «Журнал обновлений (update)»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--log-long-format</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заносит в файл журнала обновлений некоторую дополнительную информацию. Если задано </span><span style=" font-family:'Courier New,courier';">--log-slow-queries</span><span style=" font-family:'Ubuntu';">, то запросы, не использующие индексов, будут заноситься в журнал медленных запросов. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--low-priority-updates</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Операциям по изменению таблиц (</span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">/</span><span style=" font-family:'Courier New,courier';">DELETE</span><span style=" font-family:'Ubuntu';">/</span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';">) будет назначен более низкий приоритет, чем операциям выбора. Это также можно реализовать при помощи </span><span style=" font-family:'Courier New,courier';">{INSERT | REPLACE | UPDATE | DELETE} LOW_PRIORITY ...</span><span style=" font-family:'Ubuntu';">, чтобы понизить приоритет только одного запроса, или через </span><span style=" font-family:'Courier New,courier';">SET LOW_PRIORITY_UPDATES=1</span><span style=" font-family:'Ubuntu';">, чтобы изменить приоритет в одном потоке (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#table-locking"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.3.2, «Вопросы блокирования таблиц»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--memlock</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Фиксирует процесс </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> в памяти. Этот параметр работает только в том случае, если ваша система поддерживает системный вызов </span><span style=" font-family:'Courier New,courier';">mlockall()</span><span style=" font-family:'Ubuntu';">, например Solaris. Такая мера может быть полезной, если операционная система записывает </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> в файл подкачки на диск. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--myisam-recover [=параметр[,параметр...]]]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Параметр - это любое сочетание </span><span style=" font-family:'Courier New,courier';">DEFAULT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">BACKUP</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">FORCE</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">QUICK</span><span style=" font-family:'Ubuntu';">. Если необходимо отключить данную функцию, укажите вместо набора параметров явно </span><span style=" font-family:'Courier New,courier';">&quot;&quot;</span><span style=" font-family:'Ubuntu';">. Если эта функция используется, </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> проверит таблицу на предмет того, была ли она отмечена как сбойная или не была закрыта надлежащим образом (последний вариант действует только в том случае, если был включен параметр </span><span style=" font-family:'Courier New,courier';">--skip-external-locking</span><span style=" font-family:'Ubuntu';">). В любом из этих случаев </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> произведет полную проверку таблицы. Если таблица была повреждена, </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> попытается ее восстановить. Приведенные ниже параметры влияют на работу процесса восстановления. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:80px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Параметр</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">DEFAULT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Аналогично отсутствию каких-либо параметров для функции </span><span style=" font-family:'Courier New,courier';">--myisam-recover</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">BACKUP</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если во время восстановления таблица данных была изменена, сохраняется резервная копия файла данных </span><span style=" font-family:'Courier New,courier';">table_name.MYD</span><span style=" font-family:'Ubuntu';"> под именем </span><span style=" font-family:'Courier New,courier';">table_name-datetime.BAK</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">FORCE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Запуск восстановления, даже если будет утрачено более одной строки из файла </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">QUICK</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не проверять строки в таблице, в которых отсутствуют удаленные блоки.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Перед автоматическим восстановлением таблицы MySQL добавит запись об этом в журнал ошибок. Если необходимо, чтобы восстановление после большинства ошибок осуществлялось без вмешательства пользователя, следует установить параметры </span><span style=" font-family:'Courier New,courier';">BACKUP</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">FORCE</span><span style=" font-family:'Ubuntu';">. Тогда восстановление будет производиться даже в случае, если некоторые строки будут удалены, но файл данных будет сохраняться в виде резервной копии, поэтому впоследствии всегда можно будет определить, что произошло. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--pid-file=path</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Путь к pid-файлу используется функцией </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-P, --port=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Номер порта для прослушивания соединений TCP/IP. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-o, --old-protocol</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать протокол 3.20 для совместимости с некоторыми очень старыми клиентами (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/installing.html#upgrading-from-3-20"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 2.5.5, «Модернизация с версии 3.20 до версии 3.21»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--one-thread</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать только один поток (для отладки в системе Linux) (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/porting.html#debugging-server"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел E.1, «Отладка сервера MySQL»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-O, --set-variable var=option</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Задает значение для переменной. </span><span style=" font-family:'Courier New,courier';">--help</span><span style=" font-family:'Ubuntu';"> - выводит список переменных. Подробное описание всех переменных можно найти в разделе </span><span style=" font-family:'Courier New,courier';">SHOW VARIABLES</span><span style=" font-family:'Ubuntu';"> этого руководства (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-variables"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.6.4, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-variables"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW VARIABLES</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-variables"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание, </span><span style=" font-family:'Courier New,courier';">--set-variable</span><span style=" font-family:'Ubuntu';"> морально устарела с версии MySQL 4.0. Просто используйте </span><span style=" font-family:'Courier New,courier';">--var=option</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#server-parameters"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.2, «Настройка параметров сервера»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">В MySQL 4.0.2 вы можете устанавливать переменную непосредственно с помощью </span><span style=" font-family:'Courier New,courier';">--variable-name=option</span><span style=" font-family:'Ubuntu';">, и </span><span style=" font-family:'Courier New,courier';">set-variable</span><span style=" font-family:'Ubuntu';"> больше не нужна в файлах опций. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы хотите ограничить максимальное значение, в которое может быть установлена пемеременная при помощи </span><span style=" font-family:'Courier New,courier';">SET</span><span style=" font-family:'Ubuntu';">, определите это значение с помощью опции </span><span style=" font-family:'Courier New,courier';">--maximum-variable-name</span><span style=" font-family:'Ubuntu';"> See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.6, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SET</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Когда переменная будет устанавливаться в какое-либо значение, MySQL автоматически будет корректировать его, чтобы оно оставалось в указананных рамках; также MySQL может немного корректировать установленное значение с тем, чтобы эффективнее использовались внутренние алгоритмы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Раздел по настройке параметров сервера включает информацию по их оптимизации (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#server-parameters"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.2, «Настройка параметров сервера»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--safe-mode</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пропуск некоторых этапов оптимизации. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--safe-show-database</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">При использовании этого параметра команда </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';"> выдает только те базы данных, для которых у пользователя есть какие-либо привилегии. Начиная с версии 4.0.2 этот параметр является недействительным и больше ни на что не влияет (его значение установлено по умолчанию), так как в новой версии появилась привилегия </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.1, «Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">GRANT</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> и </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REVOKE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--safe-user-create</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Когда этот параметр включен, пользователь не может создавать новых пользователей при помощи команды </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">, если он не имеет привилегии </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> для таблицы </span><span style=" font-family:'Courier New,courier';">mysql.user</span><span style=" font-family:'Ubuntu';"> или для любого столбца этой таблицы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-bdb</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Запретить использование таблиц BDB. Это сэкономит память и может ускорить работу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-concurrent-insert</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отключает возможность одновременного выбора и вставки данных для таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> (используется только в том случае, если в этой функции найдена ошибка). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-delay-key-write; в MySQL 4.0.3 следует использовать --delay-key-write=OFF</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Игнорирует параметр </span><span style=" font-family:'Courier New,courier';">DELAY_KEY_WRITE</span><span style=" font-family:'Ubuntu';"> для всех таблиц (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#server-parameters"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.2, «Настройка параметров сервера»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-grant-tables</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Включение данного параметра приводит к тому, что сервер совсем не использует систему привилегий - таким образом полный доступ ко всем базам данных получают все! (Можно дать серверу команду снова использовать таблицы доступа, запустив </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-privileges</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">mysqladmin reload</span><span style=" font-family:'Ubuntu';">.) </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-host-cache</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Никогда не использовать кэш имени главного компьютера для быстрого разрешения соответствий имен и IP-адресов, а вместо этого всегда запрашивать DNS-сервер по каждому соединению (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#dns"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.5, «Как MySQL использует DNS»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-innodb</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Запретить использование таблиц InnoDB. Это сэкономит память и может ускорить работу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-external-locking (было --skip-locking)</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не использовать средства системных блокировок. Чтобы воспользоваться функциями </span><span style=" font-family:'Courier New,courier';">isamchk</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">, необходимо выключить сервер (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/introduction.html#stability"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 1.4.3, «Насколько стабильным является MySQL?»</span></a><span style=" font-family:'Ubuntu';">). Обратите внимание на то, что в MySQL версии 3.23 для восстановления или проверки таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> можно использовать </span><span style=" font-family:'Courier New,courier';">REPAIR</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">CHECK</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-name-resolve</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не производится разрешения имен хостов. Все значения в столбце Host в таблицах привилегий должны быть IP-адресами или значениями localhost (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#dns"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.5, «Как MySQL использует DNS»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-networking</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Прослушивание соединений TCP/IP не производится. Связь с </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> должна осуществляться через сокеты Unix. Этот параметр рекомендуется для систем, в которых разрешены только локальные запросы (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#dns"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.5, «Как MySQL использует DNS»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-new</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не использовать новые (возможно, неправильные) операции. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-symlink</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не удалять и не переименовывать файлы, на которые указывает файл </span><span style=" font-family:'Courier New,courier';">symlinked</span><span style=" font-family:'Ubuntu';"> в каталоге данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-safemalloc</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если MySQL настроен при помощи </span><span style=" font-family:'Courier New,courier';">--with-debug=full</span><span style=" font-family:'Ubuntu';">, все программы будут проверять память на наличие выхода за границы области памяти при каждом заполнении и освобождении памяти. Поскольку такая проверка осуществляется довольно медленно, от нее можно отказаться, воспользовавшись этим параметром. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-show-database</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не позволяет использовать команду </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';">, если пользователь не имеет привилегии </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';">. Начиная с версии 4.0.2 этот параметр больше не нужен, поскольку доступ теперь может быть разрешен при помощи привилегии </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-stack-trace</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не записывать трассировку стеков. Этот параметр может оказаться полезным, когда </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> запущен под отладчиком. В некоторых системах данный параметр также необходимо использовать для получения файла ядра (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/porting.html#debugging-server"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел E.1, «Отладка сервера MySQL»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-thread-priority</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отключает использование приоритетов потока, чтобы уменьшить время ожидания ответа. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--socket=path</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файл канала, который используется для локального соединения вместо файла, принятого по умолчанию, </span><span style=" font-family:'Courier New,courier';">/tmp/mysql.sock</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--sql-mode=параметр[,параметр[,параметр...]]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Параметр может представлять собой любое сочетание из: </span><span style=" font-family:'Courier New,courier';">REAL_AS_FLOAT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">PIPES_AS_CONCAT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">ANSI_QUOTES</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">IGNORE_SPACE</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">SERIALIZE</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">ONLY_FULL_GROUP_BY</span><span style=" font-family:'Ubuntu';">. Если нужно произвести сброс значения, параметр может быть пустым (</span><span style=" font-family:'Courier New,courier';">&quot;&quot;)</span><span style=" font-family:'Ubuntu';">. Указание всех приведенных выше параметров аналогично использованию </span><span style=" font-family:'Courier New,courier';">--ansi</span><span style=" font-family:'Ubuntu';">. При помощи этого параметра можно включать только необходимые режимы SQL (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/introduction.html#ansi-mode"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 1.9.2, «Запуск MySQL в режиме ANSI»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--temp-pool</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">При указании данного параметра для создаваемых временных файлов будет использоваться ограниченный набор имен вместо создания уникального имени для каждого нового файла. Данная функция предназначена для устранения проблемы ядра Linux, возникающей при создании большого количества новых файлов с разными именами. По старой схеме в Linux как бы происходит 'утечка' памяти, так как она распределяется для кэша каталогов вместо дискового кэша. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--transaction-isolation= { READ-UNCOMMITTED | READ-COMMITTED |</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">REPEATABLE-READ | SERIALIZABLE } Задает принятый по умолчанию уровень изоляции транзакции (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#set-transaction"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.7.3, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#set-transaction"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SET TRANSACTION</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#set-transaction"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-t, --tmpdir=path</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Путь для временных файлов. Может быть полезен, если принятый по умолчанию каталог </span><span style=" font-family:'Courier New,courier';">/tmp</span><span style=" font-family:'Ubuntu';"> расположен на слишком маленьком диске и не может вместить все временные таблицы. Начиная с MySQL 4.1, эта опция поддержает указание нескольких путей, разделенных двоеточием </span><span style=" font-family:'Courier New,courier';">:</span><span style=" font-family:'Ubuntu';"> (на Windows - точкой с запятой </span><span style=" font-family:'Courier New,courier';">;</span><span style=" font-family:'Ubuntu';">). Эти пути будут использованы в ротации. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-u, --user= [user_name | userid]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Запуск демона </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> от имени пользователя </span><span style=" font-family:'Courier New,courier';">user_name</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">userid</span><span style=" font-family:'Ubuntu';"> (число). Этот параметр является </span><span style=" font-family:'Ubuntu'; font-weight:600;">обязательным</span><span style=" font-family:'Ubuntu';"> при запуске </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> в качестве главной программы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с MySQL 3.23.56 и 4.0.12: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для того, чтобы избежать возможного пробоя в безопасности когда пользователь добавляет опцию </span><span style=" font-family:'Courier New,courier';">--user=root</span><span style=" font-family:'Ubuntu';"> в один из файлов </span><span style=" font-family:'Courier New,courier';">my.cnf</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> лишь только будет использовать первую указанную опцию </span><span style=" font-family:'Courier New,courier';">--user</span><span style=" font-family:'Ubuntu';"> и давать предупреждение если указано множество таких опций. Имейте в виду, что </span><span style=" font-family:'Courier New,courier';">/etc/my.cnf</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">datadir/my.cnf</span><span style=" font-family:'Ubuntu';"> могут перекрыть опцию командной строки - таким образом, рекомендовано указывать эту опцию именно в </span><span style=" font-family:'Courier New,courier';">/etc/my.cnf</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-V, --version</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывод информации по версии программы и завершение выполнения. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-W, --log-warnings (было --warnings)</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Задает запись таких предупреждений, как </span><span style=" font-family:'Courier New,courier';">Aborted connection...</span><span style=" font-family:'Ubuntu';"> в файл </span><span style=" font-family:'Courier New,courier';">.err</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#communication-errors"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел A.2.9, «Коммуникационные ошибки / Оборванные соединения»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Большая часть значений может быть изменена в процессе работы сервера с помощью команды </span><span style=" font-family:'Courier New,courier';">SET</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.6, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SET</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="option-files"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.1.2. Файлы параметров </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">my.cnf</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с версии 3.22 MySQL может считывать принятые по умолчанию параметры запуска для сервера и клиентов из файлов параметров. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В Unix считывание принятых по умолчанию параметров MySQL производится из следующих файлов: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Имя файла</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Назначение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/etc/my.cnf</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Общие параметры</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">DATADIR/my.cnf</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Параметры для сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">defaults-extra-file</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файл, указанный при помощи -defaults-extra-file=#</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">~/.my.cnf</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Параметры для пользователя</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">DATADIR</span><span style=" font-family:'Ubuntu';"> является каталогом данных MySQL (обычно </span><span style=" font-family:'Courier New,courier';">/usr/local/mysql/data</span><span style=" font-family:'Ubuntu';"> для бинарной установки или </span><span style=" font-family:'Courier New,courier';">/usr/local/var</span><span style=" font-family:'Ubuntu';"> для установки из исходных текстов). Обратите внимание, что это тот каталог, который был задан во время настройки, а не указанный при помощи </span><span style=" font-family:'Courier New,courier';">--datadir</span><span style=" font-family:'Ubuntu';"> при запуске </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">! (</span><span style=" font-family:'Courier New,courier';">--datadir</span><span style=" font-family:'Ubuntu';"> не оказывает влияния на просмотр файлов параметров сервером, так как их просмотр происходит до обработки аргументов командной строки). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В Windows считывание принятых по умолчанию параметров MySQL производится из следующих файлов: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Имя файла</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Назначение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">windows-system-directory\my.ini</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Общие параметры</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">C:\my.cnf</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Общие параметры</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание на то, что в Windows все пути необходимо указывать при помощи </span><span style=" font-family:'Courier New,courier';">/</span><span style=" font-family:'Ubuntu';"> вместо </span><span style=" font-family:'Courier New,courier';">\.</span><span style=" font-family:'Ubuntu';"> Если необходимо использовать </span><span style=" font-family:'Courier New,courier';">\,</span><span style=" font-family:'Ubuntu';"> то его нужно указать дважды, так как </span><span style=" font-family:'Courier New,courier';">\</span><span style=" font-family:'Ubuntu';"> является знаком перехода в MySQL. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">MySQL пытается прочитать файлы параметров в указанном выше порядке. Если существует несколько таких файлов, то параметр, указанный в файле, идущем позже, имеет преимущество над таким же параметром, указанным в файле, расположенном ранее. Параметры, указанные в командной строке, обладают более высоким приоритетом по отношению к параметрам, указанным в любом из файлов параметров. Некоторые параметры можно задавать при помощи переменных окружения. Параметры, указанные в командной строке или в файлах параметров, обладают преимуществом по отношению к переменным окружения (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Приложение F, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" font-family:'Ubuntu'; font-style:italic; text-decoration: underline; color:#0000ff;">Переменные окружения</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Приводим список программ, поддерживающих файлы параметров: </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqld_safe</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysql.server</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqlimport</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqlshow</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqlcheck</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Любой параметр, который может быть задан в командной строке при запуске программы MySQL, может быть также задан в файле параметров (без предваряющего двойного слэша). Чтобы получить список доступных параметров, следует запустить программу с параметром </span><span style=" font-family:'Courier New,courier';">--help</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файлы параметров могут содержать строки следующего вида: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#comment</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Строки комментариев начинаются с символа ‘</span><span style=" font-family:'Courier New,courier';">#</span><span style=" font-family:'Ubuntu';">’ или ‘</span><span style=" font-family:'Courier New,courier';">;</span><span style=" font-family:'Ubuntu';">’. Пустые строки игнорируются. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[group]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">группа представляет собой имя программы или группы, для которой необходимо задать параметры. Любые параметры или строки, задающие значения переменных, которые указаны после строки группы, будут относиться к названной группе, пока не закончится файл параметров или же не будет указана другая строка группы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">option</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эквивалент </span><span style=" font-family:'Courier New,courier';">--option</span><span style=" font-family:'Ubuntu';"> в командной строке. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">option=value</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эквивалент </span><span style=" font-family:'Courier New,courier';">--option=value</span><span style=" font-family:'Ubuntu';"> в командной строке. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">set-variable = variable=value</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эквивалент </span><span style=" font-family:'Courier New,courier';">--set-variable variable=value</span><span style=" font-family:'Ubuntu';"> в командной строке. Данный синтаксис необходимо использовать для задания переменных </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. Заметьте, </span><span style=" font-family:'Courier New,courier';">--set-variable</span><span style=" font-family:'Ubuntu';"> не используется с MySQL 4.0. Просто используйте </span><span style=" font-family:'Courier New,courier';">--variable=value</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Группа </span><span style=" font-family:'Courier New,courier';">client</span><span style=" font-family:'Ubuntu';"> обеспечивает возможность задавать параметры, относящиеся ко всем клиентам MySQL (кроме самого </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">). Эта группа великолепно подходит для указания пароля, используемого при подсоединении к серверу (но при этом следует убедиться, что разрешение на чтение и запись этого файла есть только у вас). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание на то, что для параметров и значений все введенные перед ними и после них пробелы автоматически удаляются. В строках значений можно использовать такие экранирующие секвенции: '</span><span style=" font-family:'Courier New,courier';">\b</span><span style=" font-family:'Ubuntu';">', '</span><span style=" font-family:'Courier New,courier';">\t</span><span style=" font-family:'Ubuntu';">', '</span><span style=" font-family:'Courier New,courier';">\n</span><span style=" font-family:'Ubuntu';">', '</span><span style=" font-family:'Courier New,courier';">\r</span><span style=" font-family:'Ubuntu';">', '</span><span style=" font-family:'Courier New,courier';">\\</span><span style=" font-family:'Ubuntu';">' и '</span><span style=" font-family:'Courier New,courier';">\s</span><span style=" font-family:'Ubuntu';">' ('</span><span style=" font-family:'Courier New,courier';">\s</span><span style=" font-family:'Ubuntu';">' - это пробел). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пример типичного глобального файла параметров: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[client]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">port=3306</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">socket=/tmp/mysql.sock</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysqld]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">port=3306</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">socket=/tmp/mysql.sock</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">set-variable = key_buffer_size=16M</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">set-variable = max_allowed_packet=1M</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysqldump]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">quick</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пример типичного файла параметров пользователя: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[client]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Указанный пароль будет направлен всем стандартным клиентам MySQL</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">password=my_password</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysql]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">no-auto-rehash</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">set-variable = connect_timeout=2</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysqlhotcopy]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">interactive-timeout</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если у вас дистрибутив исходного кода, то примеры конфигурационных файлов с именами </span><span style=" font-family:'Courier New,courier';">my-xxxx.cnf</span><span style=" font-family:'Ubuntu';"> можно найти в каталоге </span><span style=" font-family:'Courier New,courier';">support-files</span><span style=" font-family:'Ubuntu';">. В случае бинарного дистрибутива следует обратиться к каталогу </span><span style=" font-family:'Courier New,courier';">DIR/support-files</span><span style=" font-family:'Ubuntu';">, где </span><span style=" font-family:'Courier New,courier';">DIR</span><span style=" font-family:'Ubuntu';"> - имя каталога установки MySQL (обычно </span><span style=" font-family:'Courier New,courier';">/usr/local/mysql</span><span style=" font-family:'Ubuntu';">). На данный момент там приведены примеры файлов конфигурации для малых, средних, больших и очень больших систем. Чтобы поэкспериментировать с файлом, можно скопировать </span><span style=" font-family:'Courier New,courier';">my-xxxx.cnf</span><span style=" font-family:'Ubuntu';"> в свой домашний каталог (переименуйте копию в </span><span style=" font-family:'Courier New,courier';">.my.cnf</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все поддерживающие файлы параметров клиенты MySQL принимают следующие параметры: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Параметр</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">--no-defaults</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не читать информацию из файлов параметров.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">--print-defaults</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести имя программы и все параметры, которые ей передаются.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">--defaults-file=full-path-to-default-file</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать только указанный файл конфигурации.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">--defaults-extra-file=full-path-to-default-file</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Прочитать этот файл конфигурации после глобального файла конфигурации, но перед файлом конфигурации пользователя.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание на то, что указанные выше параметры должны идти первыми в командной строке! Однако параметр </span><span style=" font-family:'Courier New,courier';">--print-defaults</span><span style=" font-family:'Ubuntu';"> может использоваться сразу после команд </span><span style=" font-family:'Courier New,courier';">--defaults-xxx-file</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Примечание для разработчиков: обработка файла параметров происходит следующим образом: все совпадающие параметры (т.е. параметры в соответствующих группах) обрабатываются перед любыми аргументами командной строки. Этот алгоритм хорошо подходит для программ, которые в случае, если один и тот же параметр указывается несколько раз, используют последний экземпляр параметра. Если же вы работаете со старой программой, которая считывает заданные несколько раз параметры указанным образом, но не читает файлы параметров, необходимо добавить только две строки, чтобы у нее появилась эта возможность. Чтобы увидеть, как это делается, достаточно ознакомиться с исходным кодом любого стандартного клиента MySQL. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В скриптах оболочки для анализа файлов </span><span style=" font-family:'Courier New,courier';">config</span><span style=" font-family:'Ubuntu';"> можно использовать команду </span><span style=" font-family:'Courier New,courier';">my_print_defaults</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">my_print_defaults client mysql</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--port=3306</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--socket=/tmp/mysql.sock</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--no-auto-rehash</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Приведенные выше выходные данные содержат все параметры для групп </span><span style=" font-family:'Courier New,courier';">client</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="installing-many-servers"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.1.3. Установка нескольких серверов на один компьютер</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В некоторых случаях необходимо, чтобы на одном компьютере работало несколько различных серверов </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">: например, если нужно запустить для тестирования новую версию MySQL совместно со старой версией, которая находится в работе, или когда разным пользователям нужно предоставить доступ к различным серверам </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, с которыми они умеют обращаться самостоятельно. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Один из способов запустить новый сервер -- указать ему другой канал и порт, например, таким образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">MYSQL_UNIX_PORT=/tmp/mysqld-new.sock</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">MYSQL_TCP_PORT=3307</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">export MYSQL_UNIX_PORT MYSQL_TCP_PORT</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">scripts/mysql_install_db</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">bin/safe_mysqld &amp;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Приложение, в котором описаны переменные окружения, включает список других переменных окружения, которые можно использовать для управления </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Приложение F, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" font-family:'Ubuntu'; font-style:italic; text-decoration: underline; color:#0000ff;">Переменные окружения</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В приведенном выше примере представлен грубый быстрый метод, который обычно применяется для тестирования. Преимуществом данного метода является то, что все соединения, которые устанавливаются в указанной выше оболочке, автоматически направляются на новый запущенный сервер! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если работать с несколькими серверами необходимо постоянно, то нужно создать файл параметров для каждого сервера (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). В скрипте запуска, который выполняется при каждой загрузке, следует указать оба сервера: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">safe_mysqld --defaults-file=path-to-option-file</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для серверов должны быть различными по крайней мере следующие параметры: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">port=# </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">socket=path </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">pid-file=path </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Приведенные ниже параметры, если они используются, также должны различаться: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">log=path </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">log-bin=path </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">log-update=path </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">log-isam=path </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">bdb-logdir=path </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">shared-memory-base-name (Новое в MySQL 4.1) </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если требуется увеличить производительность, необходимо также задать разные значения для следующих параметров: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">tmpdir=path </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">bdb-tmpdir=path </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.1, «Параметры командной строки </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. Начиная с MySQL 4.1, в </span><span style=" font-family:'Courier New,courier';">tmpdir</span><span style=" font-family:'Ubuntu';"> могут быть указаны несколько путей, разделенных двоеточием </span><span style=" font-family:'Courier New,courier';">:</span><span style=" font-family:'Ubuntu';"> (точкой с запятой на Windows </span><span style=" font-family:'Courier New,courier';">;</span><span style=" font-family:'Ubuntu';">). Эти пути будут использованы в ротации. Эта функция может быть использована для того, чтобы распределить данные между разными физическими дисками. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если производится установка бинарной версии MySQL (файлы .tar), которая запускается из </span><span style=" font-family:'Courier New,courier';">./bin/safe_mysqld</span><span style=" font-family:'Ubuntu';">, то в большинстве случаев единственными параметрами, которые необходимо добавить/изменить, являются аргументы </span><span style=" font-family:'Courier New,courier';">socket</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">port</span><span style=" font-family:'Ubuntu';"> для </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#multiple-servers"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.4, «Запуск нескольких серверов MySQL на одном компьютере»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="multiple-servers"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.1.4. Запуск нескольких серверов MySQL на одном компьютере</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Иногда возникают обстоятельства, когда необходимо запустить несколько серверов на одном компьютере. Например, может понадобиться произвести тестирование новой версии MySQL, не изменяя текущей установки программы. Или еще вариант: вы являетесь поставщиком услуг Internet, который хочет предоставить независимые установки MySQL для различных клиентов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если необходимо запустить несколько серверов, то проще всего скомпилировать серверы с различными портами TCP/IP и файлами сокетов (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-multi"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.7.3, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-multi"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">Mysqld_multi</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-multi"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, программа для управления множеством серверов MySQL»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Предположим, что существующий сервер настроен на принятые по умолчанию номер порта и файл сокета. Настроим новый сервер при помощи команды </span><span style=" font-family:'Courier New,courier';">configure</span><span style=" font-family:'Ubuntu';"> следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">./configure --with-tcp-port=port_number \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">             </span><span style=" font-family:'Courier New,courier'; font-weight:600;">--with-unix-socket-path=file_name \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">             </span><span style=" font-family:'Courier New,courier'; font-weight:600;">--prefix=/usr/local/mysql-3.22.9</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Здесь </span><span style=" font-family:'Courier New,courier';">port_number</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">file_name</span><span style=" font-family:'Ubuntu';"> должны отличаться от принятого по умолчанию номера порта и пути файла сокета, а значение </span><span style=" font-family:'Courier New,courier';">--prefix</span><span style=" font-family:'Ubuntu';"> должно указывать каталог установки, который отличается от того, в котором установлен текущий MySQL. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверить сокет, используемый установленным на данный момент сервером MySQL, можно при помощи следующей команды: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqladmin -h hostname --port=port_number variables</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание: если указать ``</span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';">'' как имя удаленного компьютера, </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';"> по умолчанию будет использовать сокеты Unix вместо TCP/IP. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В MySQL 4.1 вы также можете указать протокол, который надлежит использовать с помощью опции </span><span style=" font-family:'Courier New,courier';">--protocol=(TCP | SOCKET | PIPE | MEMORY)</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если на используемом порту находится сервер MySQL, то будет выдан список самых важных настраиваемых переменных в MySQL, включая имя сокета. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Повторно компилировать новый сервер MySQL нет необходимости, его просто нужно запустить с другими параметрами для порта и сокета. Используемые порт и сокет можно изменить, указав их как параметры запуска для </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">/path/to/safe_mysqld --socket=file_name --port=port_number</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Модуль </span><span style=" font-family:'Courier New,courier';">mysqld_multi</span><span style=" font-family:'Ubuntu';"> может также в качестве аргумента принимать </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> (или </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">) и передавать параметры из файла конфигурации для </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> и дальше для </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если новый сервер запускается на том же каталоге базы данных, что и другой сервер с включенной записью в журналы, необходимо также указать имена файлов журналов для </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> при помощи параметров </span><span style=" font-family:'Courier New,courier';">--log</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">--log-update</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">--log-slow-queries</span><span style=" font-family:'Ubuntu';">. Иначе оба сервера могут попытаться осуществить запись в один и тот же файл журнала. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Предупреждение</span><span style=" font-family:'Ubuntu';">: обычно нельзя допускать, чтобы два сервера одновременно заносили данные в одну и ту же базу данных! Если ваша операционная система не поддерживает безотказную блокировку доступа, это может привести к возникновению неприятных сюрпризов! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если для второго сервера понадобится использовать другой каталог базы данных, можно воспользоваться параметром </span><span style=" font-family:'Courier New,courier';">--datadir=path</span><span style=" font-family:'Ubuntu';"> для </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Обратите внимание</span><span style=" font-family:'Ubuntu';">: запуск нескольких серверов MySQL (</span><span style=" font-family:'Courier New,courier';">mysqlds</span><span style=" font-family:'Ubuntu';">) на различных компьютерах с доступом к одному каталогу данных через сетевую файловую систему обычно не приводит ни к чему хорошему! Проблема состоит в том, что сетевая файловая система становится узким местом для передачи данных. Она не предназначена для такого использования. И даже в этом случае придется искать решение, которое позволит обеспечить отсутствие конфликтов между двумя или более модулями </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. На данный момент не существует платформы, которая обеспечивает на 100% надежную блокировку доступа к файлам (обычно демон </span><span style=" font-family:'Courier New,courier';">lockd</span><span style=" font-family:'Ubuntu';">) во всех возможных ситуациях. Кроме того, существует еще одна опасность при использовании сетевой файловой системы: эта система может еще больше усложнить работу программы </span><span style=" font-family:'Courier New,courier';">lockd</span><span style=" font-family:'Ubuntu';">. Поэтому лучше смотреть на вещи проще и забыть об этой идее. Оптимальным решением будет использование одного компьютера с несколькими центральными процессорами и с операционной системой, которая эффективно управляет потоками. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если нужно подсоединиться к серверу MySQL, который работает с портом, отличным от того, с которым откомпилирован ваш клиент, можно воспользоваться одним из следующих методов: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запустите клиент с параметрами <span style=" font-family:'Courier New,courier';">--host 'hostname' --port=port_number</span>, чтобы подсоединиться через TCP/IP, или <span style=" font-family:'Courier New,courier';">[--host localhost --socket=file_name]</span>, чтобы подсоединиться через сокет Unix. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запускайте ваш клиент с <span style=" font-family:'Courier New,courier';">--protocol=tcp</span> для подключения по TCP/IP и <span style=" font-family:'Courier New,courier';">--protocol=socket</span> для подключения через сокет Unix. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В своей программе на языке C или Perl можно задать аргументы порта или сокета при подсоединении к серверу MySQL. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При использовании модуля Perl <span style=" font-family:'Courier New,courier';">DBD::mysql</span> можно прочитать параметры из файлов параметров MySQL (see <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" text-decoration: underline; color:#0000ff;">»</span></a>). </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$dsn = &quot;DBI:mysql:test;mysql_read_default_group=client;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql_read_default_file=/usr/local/mysql/data/my.cnf&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$dbh = DBI-&gt;connect($dsn, $user, $password);</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Задайте переменные окружения <span style=" font-family:'Courier New,courier';">MYSQL_UNIX_PORT</span> и <span style=" font-family:'Courier New,courier';">MYSQL_TCP_PORT</span>, чтобы указать на сокет Unix и порт TCP/IP до запуска клиентов. Если обычно используются конкретные сокет или порт, команды для задания этих переменных окружения необходимо поместить в свой файл <span style=" font-family:'Courier New,courier';">.login</span> (see <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" text-decoration: underline; color:#0000ff;">Приложение F, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" font-style:italic; text-decoration: underline; color:#0000ff;">Переменные окружения</span></a>). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id343033"></a>Укажите принятые по умолчанию сокет и порт TCP/IP в файле <span style=" font-family:'Courier New,courier';">.my.cnf</span> в своем домашнем каталоге (see <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" text-decoration: underline; color:#0000ff;">»</span></a>). </li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="privilege-system"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">.2. Общие проблемы безопасности и система привилегий доступа MySQL</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#general-security"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.1. Общие принципы обеспечения безопасности</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#security"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.2. Как обезопасить MySQL от хакеров</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.3. Опции запуска </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, относящиеся к безопасности</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#load-data-local"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.4. Вопросы безопасности, относящиеся к команде LOAD DATA LOCAL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#what-privileges"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.5. Функции, выполняемые системой привилегий</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.6. Как работает система привилегий</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges-provided"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.7. Привилегии, предоставляемые MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#connecting"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.8. Соединение с сервером MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#connection-access"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.9. Управление доступом, этап 1: верификация подсоединения</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#request-access"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.10. Управление доступом, этап 2: верификация запросов</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#access-denied"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.2.11. Причины появления ошибок </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#access-denied"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">Access denied</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#access-denied"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> ('в доступе отказано')</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">MySQL имеет развитую, но нестандартную систему обеспечения безопасности и привилегий доступа. В этом разделе дается описание ее работы. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="general-security"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.1. Общие принципы обеспечения безопасности</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">С данным разделом должны ознакомиться все, кто использует MySQL на компьютерах, подключенных к Internet, - чтобы избежать наиболее распространенных ошибок, приводящих к нарушению безопасности системы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При обсуждении вопросов безопасности мы акцентируем внимание на необходимости защиты всего серверного хоста (а не одного лишь сервера MySQL) от всех возможных типов атак: перехвата, внесения изменений, считывания и отказа в обслуживании. Данный раздел не охватывает всех аспектов готовности к работе и отказоустойчивости. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Используемая в MySQL система безопасности для всех подключений, запросов и иных операций, которые может пытаться выполнить пользователь, базируется на списках контроля доступа ACLs (Access Control Lists). Обеспечивается также некоторая поддержка SSL-соединений между клиентами и серверами MySQL. Многие из рассматриваемых здесь концепций не относятся исключительно к MySQL; те же общие соображения применимы практически ко всем приложениям. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При работе в MySQL старайтесь следовать приведенным ниже инструкциям: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Не предоставляйте никому (за исключением пользователя </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql</span><span style=" font-weight:600;"> под именем </span><span style=" font-family:'Courier New,courier'; font-weight:600;">root</span><span style=" font-weight:600;">) доступа к таблице </span><span style=" font-family:'Courier New,courier'; font-weight:600;">user</span><span style=" font-weight:600;"> в базе данных </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql</span><span style=" font-weight:600;">! Это чрезвычайно важно</span>. <span style=" font-weight:600;">В MySQL зашифрованный пароль является реальным паролем</span>. Узнав пароль, занесенный в таблицу <span style=" font-family:'Courier New,courier';">user</span>, и имея доступ к удаленному компьютеру, занесенному в соответствующую учетную запись, <span style=" font-weight:600;">войти в систему под именем зарегистрированного владельца пароля легко может кто угодно</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Изучите систему прав доступа MySQL. Для управления доступом к MySQL служат команды <span style=" font-family:'Courier New,courier';">GRANT</span> и <span style=" font-family:'Courier New,courier';">REVOKE</span>. Предоставляйте ровно столько прав, сколько необходимо, и не больше. Никогда не предоставляйте права всем хостам. Полезно проводить следующие контрольные проверки: </li>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Выполните команду <span style=" font-family:'Courier New,courier';">mysql -u root</span>. Если удается успешно установить соединение с сервером без получения запроса пароля, значит, у вас имеются проблемы. Это означает, что кто угодно может подсоединиться к вашему серверу MySQL как клиент MySQL под именем <span style=" font-family:'Courier New,courier';">root</span>, получая таким образом право неограниченного доступа! Проанализируйте инструкцию по инсталляции MySQL, обращая особое внимание на ту часть, которая касается задания пароля пользователя <span style=" font-family:'Courier New,courier';">root</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">С помощью команды <span style=" font-family:'Courier New,courier';">SHOW GRANTS</span> проверьте, кто и к каким ресурсам имеет доступ. Воспользуйтесь командой <span style=" font-family:'Courier New,courier';">REVOKE</span>, отмените права доступа, которые не являются необходимыми. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не храните в базе данных незашифрованных паролей. Если злоумышленнику удастся получить доступ на ваш компьютер, то в его руках окажется полный список паролей, которыми он может воспользоваться. Применяйте для шифрования <span style=" font-family:'Courier New,courier';">MD5()</span>, <span style=" font-family:'Courier New,courier';">SHA1()</span> или другие односторонние хеш-функции. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не используйте в качестве пароля слова из словарей. Для взлома такого рода паролей имеются специальные программы. Даже слова типа ``xfish98'' - это очень плохие пароли. Куда лучше ``duag98'': здесь используется то же слово ``fish'', но при этом буквы в нем заменены ближайшими к ним слева буквами клавиатуры QWERTY. Еще один метод - составить парольное слово из первых букв слов какого либо словосочетания, например ``Mhall'' - по фразе ``Mary had a little lamb.'' Такой пароль легко запоминается и его легко вводить. А вот разгадать его тому, кто не знает ключевой фразы, будет непросто. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Приобретите брандмауэр. Эта мера обеспечит защиту как минимум от половины всех видов несанкционированного использования любого ПО, с которым вы работаете. Разместите MySQL за брандмауэром или в демилитаризованной зоне (demilitarised zone - DMZ). Полезно проводить следующие контрольные проверки: </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Попробуйте просканировать ваши порты из Internet с помощью утилиты типа <span style=" font-family:'Courier New,courier';">nmap</span>. MySQL использует по умолчанию порт 3306. Этот порт должен быть недоступен с неблагонадежных компьютеров. Еще один простой способ проверить, открыт или нет ваш MySQL-порт, - попытаться выполнить с какой либо удаленной машины следующую команду, где <span style=" font-family:'Courier New,courier';">server_host</span> - имя хоста, на котором установлен ваш сервер MySQL: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">telnet server_host 3306</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если соединение будет установлено, и вы получите какие-либо бессмысленные символы, это будет означать, что порт открыт, и его нужно закрыть на брандмауэре или маршрутизаторе (если, конечно, нет действительно веских причин держать его открытым). Если же </span><span style=" font-family:'Courier New,courier';">telnet</span><span style=" font-family:'Ubuntu';"> просто зависнет или в подсоединении будет отказано, тогда все в порядке: порт заблокирован. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не доверяйте никаким данным, которые вводят пользователи. Возможны попытки перехитрить вашу программу путем ввода последовательностей специальных или экранированных символов в веб-формы, URL-ы или любое приложение, созданное вами. Убедитесь, что защита вашего приложения не будет нарушена, если пользователь введет что-нибудь типа &quot;<span style=" font-family:'Courier New,courier';">'; DROP DATABASE mysql;</span>''. Это крайний случай, но действия хакеров, использующих подобную технологию, могут привести к потере информации и появлению брешей в системе безопасности, если вы не готовы к ним. Не следует также забывать о необходимости проверки цифровых данных (распространенной ошибкой является защита только строк). Некоторые полагают, что если в базе данных хранятся только открытые данные, то в ее защите нет необходимости. Это неверно. Такие базы могут стать объектом успешных атак типа отказа от обслуживания. Простейший способ защиты от взломов такого типа - заключать числовые константы в кавычки: <span style=" font-family:'Courier New,courier';">SELECT * FROM table WHERE ID='234'</span>, а не <span style=" font-family:'Courier New,courier';">SELECT * FROM table WHERE ID=23</span>4. MySQL автоматически преобразует эту строку в число и выбросит из нее все нецифровые символы. Полезно проводить следующие контрольные проверки: </li>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для всех веб-приложений: </li>
<ul type="square" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 3;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Попробуйте ввести во все ваши веб-формы одинарные и двойные кавычки - ‘<span style=" font-family:'Courier New,courier';">'</span>’ и ‘<span style=" font-family:'Courier New,courier';">&quot;</span>’. Если MySQL выдаст любое сообщение об ошибке, немедленно разберитесь, в чем дело. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Попробуйте видоизменять динамические URL, добавляя в них <span style=" font-family:'Courier New,courier';">%22</span> (‘<span style=" font-family:'Courier New,courier';">&quot;</span>’), <span style=" font-family:'Courier New,courier';">%23</span> (‘<span style=" font-family:'Courier New,courier';">#</span>’), и <span style=" font-family:'Courier New,courier';">%27</span> (‘<span style=" font-family:'Courier New,courier';">'</span>’). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Попробуйте модифицировать типы данных в динамических URL - замените числовые на символьные, используя символы из предыдущих примеров. Ваше приложение должно быть устойчиво к подобного рода атакам. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Попробуйте вводить в числовые поля вместо цифр буквы, пробелы и специальные символы. Ваше приложение должно либо удалять их до передачи в MySQL, либо выдавать сообщение об ошибке. Пропускать в MySQL значения без проверки очень опасно! </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверяйте размер данных перед тем, как они будут переданы в MySQL. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При подключении приложения к базе данных лучше использовать имя пользователя, отличное от того, которое вы используете для целей администрирования. Не предоставляйте своим приложениям больше прав доступа, чем это необходимо. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пользователям PHP: </li>
<ul type="square" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 3;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверьте функцию <span style=" font-family:'Courier New,courier';">addslashes()</span>. Что касается PHP 4.0.3, то в нем имеется функция <span style=" font-family:'Courier New,courier';">mysql_escape_string()</span>, базирующаяся на функции с тем же именем из MySQL C API. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пользователям MySQL C API: </li>
<ul type="square" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 3;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверьте API-вызов <span style=" font-family:'Courier New,courier';">mysql_real_escape_string()</span>. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пользователям MySQL++: </li>
<ul type="square" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 3;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверьте такие модификаторы, как <span style=" font-family:'Courier New,courier';">escape</span> и <span style=" font-family:'Courier New,courier';">quote</span>, - для потоков запросов. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пользователям Perl DBI: </li>
<ul type="square" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 3;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверьте метод <span style=" font-family:'Courier New,courier';">quote()</span> или используйте для проверки заполнители. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пользователям Java JDBC: </li></ul>
<ul type="square" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 3;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Используйте для проверки объект <span style=" font-family:'Courier New,courier';">PreparedStatement</span> и символы-заполнители. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не передавайте по Internet открытые (незашифрованные) данные. Они могут оказаться у кого угодно, имеющего достаточно времени и возможностей для того, чтобы перехватить их и использовать в своих целях. Используйте вместо этого протоколы с шифрованием данных, такие как SSL и SSH. MySQL, начиная с версии 4.0.0, поддерживает собственные SSL-соединения. Пересылка по SSH (SSH Port Forwarding) может быть использована для создания туннеля передачи данных с шифрованием и сжатием. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Научитесь пользоваться утилитами <span style=" font-family:'Courier New,courier';">tcpdump</span> и <span style=" font-family:'Courier New,courier';">strings</span>. В большинстве случаев проверить, являются ли потоки данных MySQL зашифрованными, можно с помощью команды, подобной той, которая приведена ниже: </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">tcpdump -l -i eth0 -w - src or dst port 3306 | strings</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">(Она работает под Linux, и будет, с незначительными изменениями, работать под другими системами.) Предупреждение: если вы не видите данных, это еще не гарантирует того, что они зашифрованы. Если требуется высокий уровень безопасности, обратитесь к экспертам в этой области. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="security"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.2. Как обезопасить MySQL от хакеров</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При подключении к серверу MySQL используется, как правило, пароль. По линии связи пароль не передается в виде открытого текста, но алгоритм шифрования не очень сложный. Толковый хакер, если ему удастся перехватить трафик между клиентом и сервером, при определенной настойчивости может взломать пароль. Поэтому если связь между клиентом и сервером осуществляется по ненадежной сети, для шифрования связи следует использовать SSH-туннель. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вся остальная информация передается в текстовом виде и может быть прочитана кем угодно, кто в состоянии отлеживать подключение. Если это вас беспокоит, можно воспользоваться протоколом со сжатием данных (в MySQL 3.22 и последующих версиях), что значительно затруднит подобные действия. Чтобы еще более повысить безопасность связи, следует использовать протокол </span><span style=" font-family:'Courier New,courier';">ssh</span><span style=" font-family:'Ubuntu';">. </span><span style=" font-family:'Courier New,courier';">Open source</span><span style=" font-family:'Ubuntu';">-клиент </span><span style=" font-family:'Courier New,courier';">ssh</span><span style=" font-family:'Ubuntu';"> доступен на веб-сайте </span><a href="http://www.openssh.org/"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">http://www.openssh.org/</span></a><span style=" font-family:'Ubuntu';">, а коммерческий </span><span style=" font-family:'Courier New,courier';">ssh</span><span style=" font-family:'Ubuntu';">-клиент можно получить на веб-сайте </span><a href="http://www.ssh.com/"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">http://www.ssh.com/</span></a><span style=" font-family:'Ubuntu';">. С помощью такого протокола можно обеспечить зашифрованную связь по протоколу TCP/IP между сервером MySQL и клиентом MySQL. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы используете MySQL 4.0, то можете также использовать предусмотренную в этой версии поддержку протокола OpenSSL. Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#secure-connections"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.9, «Использование безопасных соединений»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для обеспечения безопасности MySQL-системы необходимо строго придерживаться следующих рекомендаций: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">У всех пользователей MySQL должны быть пароли. Для приложений клиент/сервер является общепринятым, что клиент может указывать любое имя пользователя, но если для <span style=" font-family:'Courier New,courier';">other_user</span> не задан пароль, то кто угодно может зайти под любым именем, просто введя <span style=" font-family:'Courier New,courier';">mysql -u other_user db_name</span>. Чтобы этого избежать, можно изменить пароль для всех пользователей, отредактировав скрипт <span style=" font-family:'Courier New,courier';">mysql_install_db</span> перед запуском приложения, или только пароль для <span style=" font-family:'Courier New,courier';">root</span>-пользователя MySQL, как это показано ниже: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -u root mysql</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">UPDATE user SET Password=PASSWORD('new_password')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">       WHERE user='root';</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FLUSH PRIVILEGES;</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не запускайте демон MySQL от имени пользователя Unix <span style=" font-family:'Courier New,courier';">root</span>. Это очень опасно, потому что любой пользователь, имеющий привилегию <span style=" font-family:'Courier New,courier';">FILE</span>, будет в состоянии создавать файлы как пользователь <span style=" font-family:'Courier New,courier';">root</span> (например <span style=" font-family:'Courier New,courier';">~root/.bashrc</span>). Чтобы предотвратить это, <span style=" font-family:'Courier New,courier';">mysqld</span> откажется запускаться от имени пользователя <span style=" font-family:'Courier New,courier';">root</span>, если это не будет задано напрямую с помощью опции <span style=" font-family:'Courier New,courier';">--user=root</span>. В то же время <span style=" font-family:'Courier New,courier';">mysqld</span> может быть запущена от имени обычного непривилегированного пользователя. Можно также, в целях еще большего укрепления безопасности, создать новый аккаунт Unix-пользователя <span style=" font-family:'Courier New,courier';">mysql</span>. При запуске <span style=" font-family:'Courier New,courier';">mysqld</span> от имени другого пользователя Unix у вас отпадает необходимость заменять имя пользователя <span style=" font-family:'Courier New,courier';">root</span> в таблице <span style=" font-family:'Courier New,courier';">user</span>, так как имена пользователя в MySQL не имеют ничего общего с аккаунтами пользователей Unix. Для запуска <span style=" font-family:'Courier New,courier';">mysqld</span> от имени другого пользователя Unix добавьте в группу <span style=" font-family:'Courier New,courier';">[mysqld]</span> файла опций <span style=" font-family:'Courier New,courier';">/etc/my.cnf</span> или файла опций <span style=" font-family:'Courier New,courier';">my.cnf</span>, находящегося в каталоге данных сервера, строку <span style=" font-family:'Courier New,courier';">user</span>, задающую имя пользователя. Например: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysqld]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user=mysql</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">В результате сервер будет запущен от имени назначенного пользователя, независимо от того, производится запуск вручную или посредством </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">mysql.server</span><span style=" font-family:'Ubuntu';">. Для получения дополнительной информации обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#changing-mysql-user"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел A.3.2, «Запуск MySQL от обычного пользователя»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Откажитесь от поддержки символических ссылок на таблицы (ее можно запретить с помощью опции <span style=" font-family:'Courier New,courier';">--skip-symlink</span>). Это особенно важно в том случае, если вы запускаете <span style=" font-family:'Courier New,courier';">mysqld</span> от имени пользователя <span style=" font-family:'Courier New,courier';">root</span>, поскольку у того, кто имеет право доступа для записи в каталоги данных <span style=" font-family:'Courier New,courier';">mysqld</span>, появляется возможность стереть любой файл в системе! Обратитесь к разделу See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#symbolic-links-to-tables"><span style=" text-decoration: underline; color:#0000ff;">Раздел 5.6.1.2, «Использование символических ссылок для таблиц»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Удостоверьтесь, что пользователь Unix, от имени которого запускается mysqld, является единственным пользователем, имеющим привилегии чтения/записи в директории базы данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не предоставляйте привилегии <span style=" font-family:'Courier New,courier';">PROCESS</span> всем пользователям. Команда <span style=" font-family:'Courier New,courier';">mysqladmin processlist</span> выводит текст запросов, обрабатываемых в данный момент. Следовательно, любой пользователь, имеющий право на выполнение этой команды, получает возможность прочитать, например, такой запрос другого пользователя, как <span style=" font-family:'Courier New,courier';">UPDATE</span> user <span style=" font-family:'Courier New,courier';">SET password=PASSWORD('not_secure')</span>. <span style=" font-family:'Courier New,courier';">mysqld</span> резервирует добавочное подключение для пользователей, имеющих привилегию <span style=" font-family:'Courier New,courier';">PROCESS</span>, так что пользователь MySQL под именем <span style=" font-family:'Courier New,courier';">root</span> может подключиться и осуществлять контроль даже в том случае, когда все обычные подключения заняты. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не предоставляйте привилегии <span style=" font-family:'Courier New,courier';">FILE</span> всем пользователям. Любой пользователь, имеющий такую привилегию, может записать в любом месте файловой системы файл с привилегиями демона <span style=" font-family:'Courier New,courier';">mysqld</span>! Чтобы обеспечить здесь хоть минимальную защиту, все файлы создаваемые с помощью команды <span style=" font-family:'Courier New,courier';">SELECT ... INTO OUTFILE</span>, сделаны общедоступными для записи, но перезаписать существующие файлы нельзя. </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегия </span><span style=" font-family:'Courier New,courier';">FILE</span><span style=" font-family:'Ubuntu';"> может быть также использована для чтения любого файла, доступного пользователю Unix, от имени которого запускается сервер. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно также прочитать любой файл в текущую базу данных. Это может быть использовано в корыстных целях. Возможно, например, с помощью команды </span><span style=" font-family:'Courier New,courier';">LOAD DATA</span><span style=" font-family:'Ubuntu';"> загрузить </span><span style=" font-family:'Courier New,courier';">/etc/passwd</span><span style=" font-family:'Ubuntu';"> в таблицу и прочесть ее позже с помощью </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если вы не доверяете своему DNS-серверу, используйте в таблицах привилегий вместо имен хостов IP-адреса. В любом случае следует очень осторожно относиться к внесению в таблицы привилегий записей, в которых значения имени хоста содержат шаблонные символы! </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Чтобы ограничить число подключений, доступных для отдельного пользователя, можно в <span style=" font-family:'Courier New,courier';">mysqld</span> задать значение переменной <span style=" font-family:'Courier New,courier';">max_user_connections</span>. </li></ul>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="privileges-options"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.3. Опции запуска </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqld</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, относящиеся к безопасности</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">К безопасности имеют отношение следующие опции </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--local-infile[=(0|1)]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">При установке опции </span><span style=" font-family:'Courier New,courier';">--local-infile=0</span><span style=" font-family:'Ubuntu';"> теряется возможность выполнять команду </span><span style=" font-family:'Courier New,courier';">LOAD DATA LOCAL INFILE</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--safe-show-database</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если установлена эта опция, команда </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';"> возвращает только те базы данных, для которых пользователь имеет какую-либо привилегию. Начиная с версии 4.0.2 эта опция отменена и не служит ни для чего (она включена по умолчанию), т.к. сейчас у нас имеется привилегия </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';">. Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.1, «Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">GRANT</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> и </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REVOKE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--safe-user-create</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">При установке этой опции пользователь не может создавать новых пользователей с помощью команды </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">, если у него отсутствует привилегия </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> для таблицы </span><span style=" font-family:'Courier New,courier';">mysql.user</span><span style=" font-family:'Ubuntu';">. Чтобы предоставить пользователю доступ именно для создания новых пользователей с теми привилегиями, которые он имеет право предоставлять, для этого пользователя следует установить следующую привилегию: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT INSERT(user) ON mysql.user TO 'user'@'hostname';</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Задание такой привилегии гарантирует, что этот пользователь не сможет непосредственно вносить изменения ни в одном из столбцов привилегий, а для предоставления привилегий другим пользователям должен будет использовать команду </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-grant-tables</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Установка этой опции запрещает серверу вообще использовать систему привилегий. Это открывает кому бы то ни было полный доступ ко всем базам данных! (После запуска сервера можно заставить его снова использовать таблицы привилегий с помощью команды mysqladmin </span><span style=" font-family:'Courier New,courier';">flush-privileges</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">mysqladmin reload</span><span style=" font-family:'Ubuntu';">.) </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-name-resolve</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">При установке данной опции имена хостов не разрешены. Все значения в столбцах </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> таблиц привилегий должны быть либо IP-адресами, либо </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-networking</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не разрешает осуществлять подсоединений по протоколу TCP/IP через сеть (данная опция запрещает такие подсоединения). Все подсоединения к </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> должны осуществляться посредством сокетов Unix. Для MySQL старше 3.23.27 эта опция непригодна для систем, в которых используются MIT-потоки, так как MIT-потоки на тот момент не поддерживали сокеты Unix. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--skip-show-database</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает выполнение команды </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';"> только в том случае, если пользователь имеет привилегию </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';">. Начиная с версии 4.0.2 в этой опции больше нет необходимости, т.к. теперь доступ может предоставляться избирательно с помощью привилегии </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="load-data-local"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.4. Вопросы безопасности, относящиеся к команде LOAD DATA LOCAL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы решить проблемы безопасности, которые могут возникнуть при использовании команды </span><span style=" font-family:'Courier New,courier';">LOAD DATA LOCAL</span><span style=" font-family:'Ubuntu';">,в MySQL 3.23.49 и MySQL 4.0.2 были добавлены новые опции. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При поддержке этой команды могут возникнуть две проблемы: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Первая: поскольку чтение файла инициируется сервером, теоретически имеется возможность создать ``доработанный'' при помощи патча сервер MySQL, способный читать любые файлы на клиентской машине, к которой текущий пользователь имеет доступ для чтения, в то время, когда клиент направляет запрос к таблице. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вторая: в веб-среде, в которой подсоединение клиентов осуществляется с веб-сервера, пользователь может использовать команду </span><span style=" font-family:'Courier New,courier';">LOAD DATA LOCAL</span><span style=" font-family:'Ubuntu';"> для чтения любых файлов, к которым процесс веб-сервера имеет доступ для чтения (если предположить, что пользователь может выполнять на сервере SQL любые команды). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эти проблемы решаются с помощью двух следующих исправлений: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы конфигурируете MySQL без опции </span><span style=" font-family:'Courier New,courier';">--enable-local-infile</span><span style=" font-family:'Ubuntu';">, то команда </span><span style=" font-family:'Courier New,courier';">LOAD DATA LOCAL</span><span style=" font-family:'Ubuntu';"> будет запрещена для всех клиентов, если, конечно, они не будут вызывать </span><span style=" font-family:'Courier New,courier';">mysql_options (... MYSQL_OPT_LOCAL_INFILE, 0)</span><span style=" font-family:'Ubuntu';">. Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/clients.html#mysql-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 8.4.3.39, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/clients.html#mysql-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysql_options()</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/clients.html#mysql-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В случае клиента mysql, </span><span style=" font-family:'Courier New,courier';">LOAD DATA LOCAL</span><span style=" font-family:'Ubuntu';"> может быть разблокирована заданием опции </span><span style=" font-family:'Courier New,courier';">--local-infile[=1]</span><span style=" font-family:'Ubuntu';"> или заблокирована с помощью опции </span><span style=" font-family:'Courier New,courier';">--local-infile=0</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">По умолчанию все MySQL-клиенты и библиотеки компилируются с опцией </span><span style=" font-family:'Courier New,courier';">--enable-local-infile</span><span style=" font-family:'Ubuntu';"> для обеспечения совместимости с MySQL 3.23.48 и более старыми версиями. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Блокировку всех команд </span><span style=" font-family:'Courier New,courier';">LOAD DATA LOCAL</span><span style=" font-family:'Ubuntu';"> на MySQL-сервере можно осуществить путем запуска </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> с опцией </span><span style=" font-family:'Courier New,courier';">--local-infile=0</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В случае, если команда </span><span style=" font-family:'Courier New,courier';">LOAD DATA LOCAL INFILE</span><span style=" font-family:'Ubuntu';"> заблокирована на сервере или клиенте, вы получите следующее сообщение об ошибке (1148): </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">The used command is not allowed with this MySQL version</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="what-privileges"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.5. Функции, выполняемые системой привилегий</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Основной функцией системы привилегий MySQL является аутентификация пользователя, подключающегося с указанного хоста, и ассоциирование его с привилегиями базы данных, такими как </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">DELETE</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">К дополнительным функциональным возможностям системы привилегий относятся следующие: возможность обслуживания анонимного пользователя и предоставление привилегий для таких специфических для MySQL функций, как </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span><span style=" font-family:'Ubuntu';"> и функции администрирования. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="privileges"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.6. Как работает система привилегий</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Система привилегий MySQL обеспечивает пользователям возможность выполнять только те действия, которые им разрешены в соответствии с их обязанностями. Когда вы подсоединяетесь к серверу MySQL, ваша личность устанавливается по имени </span><span style=" font-family:'Ubuntu'; font-weight:600;">хоста, с которого вы подсоединяетесь</span><span style=" font-family:'Ubuntu';">, и </span><span style=" font-family:'Ubuntu'; font-weight:600;">имени пользователя, которое вы указываете</span><span style=" font-family:'Ubuntu';">. Система предоставляет привилегии в соответствии с вашей личностью и </span><span style=" font-family:'Ubuntu'; font-weight:600;">тем, что вы хотите делать</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">MySQL идентифицирует пользователя как по имени хоста, так и по имени пользователя, т.к. нет оснований полагать что данное имя пользователя принадлежит во всей Сети единственному человеку. Например, пользователь </span><span style=" font-family:'Courier New,courier';">joe</span><span style=" font-family:'Ubuntu';">, устанавливающий соединение с </span><span style=" font-family:'Courier New,courier';">office.com</span><span style=" font-family:'Ubuntu';">, вовсе не обязательно один и тот же человек, что и пользователь </span><span style=" font-family:'Courier New,courier';">joe</span><span style=" font-family:'Ubuntu';">, подсоединяющийся с </span><span style=" font-family:'Courier New,courier';">elsewhere.com</span><span style=" font-family:'Ubuntu';">. MySQL решает эту проблему, обеспечивая возможность различать пользователей, подсоединяющихся с различных хостов под одним и тем же именем пользователя: вы можете предоставлять </span><span style=" font-family:'Courier New,courier';">joe</span><span style=" font-family:'Ubuntu';"> один набор привилегий, если он подсоединяется с </span><span style=" font-family:'Courier New,courier';">office.com</span><span style=" font-family:'Ubuntu';">, и другой набор привилегий, если </span><span style=" font-family:'Courier New,courier';">joe</span><span style=" font-family:'Ubuntu';"> подсоединяется с </span><span style=" font-family:'Courier New,courier';">elsewhere.com</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Управление доступом в MySQL осуществляется в два этапа: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Этап 1: сервер проверяет, имеется ли у вас вообще разрешение на подсоединение. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">2item Этап 2: если таковое имеется, сервер проверяет каждый из ваших запросов, чтобы убедиться в том, что у вас имеется достаточно привилегий для его выполнения. Например, если вы пытаетесь выбрать строки в таблице базы данных или удалить таблицу из базы данных, сервер в первом случае проверяет, имеется ли у вас для этой таблицы привилегия </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">, а во втором - имеется ли у вас для этой базы данных привилегия </span><span style=" font-family:'Courier New,courier';">DROP</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На обеих стадиях управления доступом сервер использует таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> из базы данных </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">. Ниже перечислены поля этих таблиц привилегий: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Имя таблицы</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">db</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">host</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Поля контекста</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Host</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Host</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Host</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">User</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Db</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Db</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Password</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">User</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Поля привилегий</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Select_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Select_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Select_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Insert_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Insert_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Insert_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Update_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Update_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Update_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Delete_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Delete_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Delete_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Index_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Index_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Index_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Alter_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Alter_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Alter_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Create_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Create_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Create_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Drop_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Drop_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Drop_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Grant_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Grant_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Grant_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">References_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Reload_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Shutdown_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Process_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">File_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На втором этапе управления доступом (верификация запросов) сервер может (в случае, если запрос относится к таблицам базы данных) дополнительно обратиться к таблицам </span><span style=" font-family:'Courier New,courier';">tables_priv</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">columns_priv</span><span style=" font-family:'Ubuntu';">. Поля этих таблиц привилегий перечислены ниже: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Имя таблицы</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tables_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">columns_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Поля контекста</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Host</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Host</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Db</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Db</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">User</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">User</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Table_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Table_name</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Column_name</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Поля привилегий</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Table_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Column_priv</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Column_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Иные поля</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Timestamp</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Timestamp</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Grantor</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Каждая таблица привилегий включает в себя поля контекста и поля привилегий. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Поля контекста определяют область действия каждой из записей в таблицах, т.е. контекст, к которому имеет отношение та или иная запись. Например, запись в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, в полях </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';"> которой указаны значения </span><span style=" font-family:'Courier New,courier';">'thomas.loc.gov'</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">'bob'</span><span style=" font-family:'Ubuntu';">, предназначена для аутентификации подсоединений к серверу с хоста </span><span style=" font-family:'Courier New,courier';">thomas.loc.gov</span><span style=" font-family:'Ubuntu';"> под именем пользователя </span><span style=" font-family:'Courier New,courier';">bob</span><span style=" font-family:'Ubuntu';">. Аналогично запись в таблице </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';">, в полях </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">Db</span><span style=" font-family:'Ubuntu';"> которой указаны значения </span><span style=" font-family:'Courier New,courier';">'thomas.loc.gov'</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">'bob'</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">'reports'</span><span style=" font-family:'Ubuntu';">, будет использоваться при попытке пользователя по именем </span><span style=" font-family:'Courier New,courier';">bob</span><span style=" font-family:'Ubuntu';"> подсоединиться с хоста </span><span style=" font-family:'Courier New,courier';">thomas.loc.gov</span><span style=" font-family:'Ubuntu';"> и получить доступ к базе данных </span><span style=" font-family:'Courier New,courier';">reports</span><span style=" font-family:'Ubuntu';">. В полях контекста в таблицах </span><span style=" font-family:'Courier New,courier';">tables_priv</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">columns_priv</span><span style=" font-family:'Ubuntu';"> указаны таблицы или комбинации таблиц/столбцов, к которым применяется каждая запись. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При контроле доступа сравнение значений в полях </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> осуществляется без учета регистра. Значения в полях </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">Password</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">Db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">Table_name</span><span style=" font-family:'Ubuntu';"> также являются независимыми от регистра символов. Значения в поле </span><span style=" font-family:'Courier New,courier';">Column_name</span><span style=" font-family:'Ubuntu';"> являются независимыми от регистра символов, начиная с MySQL 3.22.12. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В полях привилегий указываются привилегии, предоставляемые записью в таблице, т.е. то, какие операции разрешено выполнять. Сервер формирует полное описание привилегий пользователя, комбинируя информацию, хранящуюся в разных таблицах привилегий. Это осуществляется по правилам, которые описаны в разделе See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#request-access"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.2.10, «Управление доступом, этап 2: верификация запросов»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Поля контекста - это строковые значения, объявленные, как показано ниже; устанавливаемым по умолчанию значением для каждого из них является пустая строка: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Имя поля</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Тип</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Примечания</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Host</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHAR(60)</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">User</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHAR(16)</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Password</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHAR(16)</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Db</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHAR(64)</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">(</span><span style=" font-family:'Courier New,courier';">CHAR(60)</span><span style=" font-family:'Ubuntu';"> для таблиц </span><span style=" font-family:'Courier New,courier';">tables_priv</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">columns_priv</span><span style=" font-family:'Ubuntu';"> tables)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Table_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHAR(60)</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Column_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHAR(60)</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В таблицах </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> все поля привилегий имеют объявленный тип </span><span style=" font-family:'Courier New,courier';">ENUM('N','Y')</span><span style=" font-family:'Ubuntu';">, т.е. возможно одно из двух значений - </span><span style=" font-family:'Courier New,courier';">'N'</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">'Y'</span><span style=" font-family:'Ubuntu';">, а устанавливаемым по умолчанию является </span><span style=" font-family:'Courier New,courier';">'N'</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В таблицах </span><span style=" font-family:'Courier New,courier';">tables_priv</span><span style=" font-family:'Ubuntu';"> and </span><span style=" font-family:'Courier New,courier';">columns_priv</span><span style=" font-family:'Ubuntu';"> поля привилегий объявляются как </span><span style=" font-family:'Courier New,courier';">SET</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Имя таблицы</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Имя поля</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Допустимые элементы набора</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tables_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Table_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'Select', 'Insert', 'Update', 'Delete', 'Create', 'Drop', 'Grant', 'References', 'Index', 'Alter'</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tables_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Column_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'Select', 'Insert', 'Update', 'References'</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">columns_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Column_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'Select', 'Insert', 'Update', 'References'</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если кратко, то сервер использует таблицы привилегий следующим образом: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поля контекста таблицы <span style=" font-family:'Courier New,courier';">user</span> определяют, разрешить входящее подсоединение или отказать в нем. Для разрешенных подсоединений любые привилегии, предоставленные в таблице <span style=" font-family:'Courier New,courier';">user</span>, означают глобальные привилегии пользователя (привилегии суперпользователя). Эти привилегии распространяются на все базы данных, размещенные на сервере. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Таблицы <span style=" font-family:'Courier New,courier';">db</span> и <span style=" font-family:'Courier New,courier';">host</span> используются совместно: </li>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поля контекста таблицы <span style=" font-family:'Courier New,courier';">db</span> определяют, каким пользователям, при подсоединении с каких хостов разрешен доступ к каким базам данных. Поля привилегий определяют разрешенные операции. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Таблица <span style=" font-family:'Courier New,courier';">host</span> используется в качестве расширения таблицы <span style=" font-family:'Courier New,courier';">db</span> в случае, если необходимо применить некоторую запись из таблицы db к разным хостам. Например, если вы хотите предоставить пользователю возможность обращаться к базе данных с различных хостов сети, оставьте пустым поле в записи этого пользователя в таблице <span style=" font-family:'Courier New,courier';">db</span>, а затем внесите в таблицу <span style=" font-family:'Courier New,courier';">host</span> запись для каждого из этих хостов. Более подробно данный механизм описан в разделе See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#request-access"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.2.10, «Управление доступом, этап 2: верификация запросов»</span></a>. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Таблицы <span style=" font-family:'Courier New,courier';">tables_priv</span> и <span style=" font-family:'Courier New,courier';">columns_priv</span> подобны таблице <span style=" font-family:'Courier New,courier';">db</span>, но областью их действия является уже уровень таблиц и столбцов, а не баз данных. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заметим, что привилегии администрирования (</span><span style=" font-family:'Courier New,courier';">RELOAD</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">SHUTDOWN</span><span style=" font-family:'Ubuntu';"> и т.д..) задаются только в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">. Это связано с тем, что операции администрирования являются операциями над самим сервером, а не над базами данных, поэтому не смысла перечислять такие привилегии в других таблицах привилегий. Фактически для того, чтобы выяснить, имеете ли вы привилегии выполнять операции администрирования, достаточно обратиться только к таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегия </span><span style=" font-family:'Courier New,courier';">FILE</span><span style=" font-family:'Ubuntu';"> также задается только в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">. Она не является привилегией администрирования как таковой, но возможность производить чтение или запись файлов на серверном хосте не связана с базой данных, к которой вы получаете доступ. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сервер </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> считывает содержимое таблиц привилегий единожды, при его запуске. О том, каким образом изменения, вносимые в таблицы привилегий, вступают в силу, рассказывается в разделе See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privilege-changes"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.3, «Когда изменения в привилегиях вступают в силу»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При внесении изменений в таблицы привилегий стоит убедиться в том, что ваши изменения задают привилегии именно так, как задумано вами. Помощь по диагностике проблем вы найдете в разделе See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#access-denied"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.2.11, «Причины появления ошибок </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#access-denied"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">Access denied</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#access-denied"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> ('в доступе отказано')»</span></a><span style=" font-family:'Ubuntu';">. По вопросам, связанным с безопасностью, следует обращаться к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#security"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.2.2, «Как обезопасить MySQL от хакеров»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Полезным диагностическим инструментом является скрипт </span><span style=" font-family:'Courier New,courier';">mysqlaccess</span><span style=" font-family:'Ubuntu';">, которым Ив Карлье (Yves Carlier) укомплектовал дистрибутив MySQL. Запустите </span><span style=" font-family:'Courier New,courier';">mysqlaccess</span><span style=" font-family:'Ubuntu';"> с опцией </span><span style=" font-family:'Courier New,courier';">--help</span><span style=" font-family:'Ubuntu';"> чтобы посмотреть, как он работает. Заметим, что </span><span style=" font-family:'Courier New,courier';">mysqlaccess</span><span style=" font-family:'Ubuntu';"> контролирует доступ, используя только таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';">. Он не проверяет привилегии на уровне таблиц или столбцов. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="privileges-provided"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.7. Привилегии, предоставляемые MySQL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Информация о привилегиях пользователя хранится в таблицах </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">tables_priv</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">columns_priv</span><span style=" font-family:'Ubuntu';"> базы данных </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> (т.е. в базе данных с именем mysql). Сервер MySQL считывает содержимое этих таблиц во время запуска, и в случаях, указанных в разделе See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privilege-changes"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.3, «Когда изменения в привилегиях вступают в силу»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ниже приведены имена, используемые в данном руководстве для ссылок на привилегии, предоставляемые в MySQL 4.0.2. Здесь же указаны имена табличных столбцов, ассоциированных с каждой из привилегий в таблицах привилегий, наряду с контекстом, в котором эти привилегии имеют силу: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Привилегия</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Столбец</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Контекст</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ALTER</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Alter_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">DELETE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Delete_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">INDEX</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Index_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">INSERT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Insert_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SELECT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Select_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">UPDATE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Update_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CREATE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Create_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">базы данных, таблицы или индексы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">DROP</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Drop_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">базы данных или таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">GRANT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Grant_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">базы данных или таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REFERENCES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">References_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">базы данных или таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CREATE TEMPORARY TABLES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Create_tmp_table_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">администрирование сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">EXECUTE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Execute_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">администрирование сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">FILE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">File_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">доступ к файлам на сервере</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">LOCK TABLES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Lock_tables_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">администрирование сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PROCESS</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Process_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">администрирование сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">RELOAD</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Reload_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">администрирование сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REPLICATION CLIENT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Repl_client_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">администрирование сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REPLICATION SLAVE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Repl_slave_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">администрирование сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Show_db_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">администрирование сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHUTDOWN</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Shutdown_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">администрирование сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SUPER</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Super_priv</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">администрирование сервера</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегии </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">DELETE</span><span style=" font-family:'Ubuntu';"> позволяют выполнять операции над строками таблиц баз данных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для операторов </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';"> привилегия </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';"> требуется только в том случае, если они действительно извлекают строки из таблицы.. В ряде случае можно выполнять операторы </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">, даже не имея разрешения на доступ ни к одной базе данных на сервере. Например: клиент </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> вы можете использовать в качестве обычного калькулятора: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SELECT 1+1;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SELECT PI()*2;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегия </span><span style=" font-family:'Courier New,courier';">INDEX</span><span style=" font-family:'Ubuntu';"> позволяет создавать или уничтожать (удалять) индексы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегия </span><span style=" font-family:'Courier New,courier';">ALTER</span><span style=" font-family:'Ubuntu';"> позволяет использовать команду </span><span style=" font-family:'Courier New,courier';">ALTER TABLE</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегии </span><span style=" font-family:'Courier New,courier';">CREATE</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">DROP</span><span style=" font-family:'Ubuntu';"> позволяют создавать новые базы данных и таблицы или уничтожать (удалять) существующие базы данных и таблицы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заметим, что в случае, если пользователю предоставляется привилегия </span><span style=" font-family:'Courier New,courier';">DROP</span><span style=" font-family:'Ubuntu';"> по отношению к базе данных </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">, он может уничтожить базу данных, в которой хранятся привилегии доступа в MySQL! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегия </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> позволяет вам предоставлять другим пользователям привилегии, которыми обладаете вы сами. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегия </span><span style=" font-family:'Courier New,courier';">FILE</span><span style=" font-family:'Ubuntu';"> дает вам право читать и записывать файлы на сервере с помощью операторов </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">SELECT ... INTO OUTFILE</span><span style=" font-family:'Ubuntu';">. Любой пользователь, которому предоставлена такая привилегия, имеет право прочитать или записать любой файл, который может прочитать или записать сервер MySQL. Пользователь также может прочитать любой файл в каталоге текущей базы данных. Однако существующие файлы перезаписывать нельзя. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Остальные привилегии используются для операций администрирования, выполняемых с помощью программы </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';">. В таблице, приведенной ниже, для каждой из привилегий администрирования показано, какие команды </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';"> она позволяет выполнять. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Привилегия</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Команды, разрешенные обладателю привилегии</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">RELOAD</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">reload</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">refresh</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">flush-privileges</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">flush-hosts</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">flush-logs</span><span style=" font-family:'Ubuntu';">, and </span><span style=" font-family:'Courier New,courier';">flush-tables</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHUTDOWN</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shutdown</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PROCESS</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">processlist</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SUPER</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">kill</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">reload</span><span style=" font-family:'Ubuntu';"> заставляет сервер перечитать таблицы привилегий. Команда </span><span style=" font-family:'Courier New,courier';">refresh</span><span style=" font-family:'Ubuntu';"> очищает все таблицы, а также открывает и закрывает файлы журналов. </span><span style=" font-family:'Courier New,courier';">flush-privileges</span><span style=" font-family:'Ubuntu';"> является синонимом </span><span style=" font-family:'Courier New,courier';">reload</span><span style=" font-family:'Ubuntu';">. Остальные команды </span><span style=" font-family:'Courier New,courier';">flush-*</span><span style=" font-family:'Ubuntu';"> выполняют функции, аналогичные функциям команды </span><span style=" font-family:'Courier New,courier';">refresh</span><span style=" font-family:'Ubuntu';">, но с более узкой областью действия. В некоторых случаях такие команды могут оказаться более предпочтительными. Например, если вы хотите очистить только системные журналы, команда </span><span style=" font-family:'Courier New,courier';">flush-logs</span><span style=" font-family:'Ubuntu';"> лучше, чем </span><span style=" font-family:'Courier New,courier';">refresh</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">shutdown</span><span style=" font-family:'Ubuntu';"> завершает работу сервера. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">processlist</span><span style=" font-family:'Ubuntu';"> выводит информацию о задачах, выполняющихся на сервере. Команда </span><span style=" font-family:'Courier New,courier';">kill</span><span style=" font-family:'Ubuntu';"> уничтожает серверные потоки. Собственные потоки всегда можно просмотреть или уничтожить, но для отображения потоков, запущенных другими пользователями, нужна привилегия </span><span style=" font-family:'Courier New,courier';">PROCESS</span><span style=" font-family:'Ubuntu';">,а для уничтожения потоков, запущенных другими пользователями, потребуется привилегия </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';">. Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#kill"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.5, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#kill"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">KILL</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#kill"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В общем случае идея предоставлять привилегии только тем пользователям, которым они необходимы, хорошая, но к предоставлению некоторых из них следует относиться особенно внимательно: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Привилегия <span style=" font-family:'Courier New,courier';">GRANT</span> позволяет пользователям передавать свои привилегии другим пользователям. Два пользователя с неодинаковыми привилегиями, имея привилегию <span style=" font-family:'Courier New,courier';">GRANT</span>, способны объединить свои привилегии. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Привилегия <span style=" font-family:'Courier New,courier';">ALTER</span> может быть использована для переименования таблиц и разрушения таким образом всей системы привилегий. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Привилегия <span style=" font-family:'Courier New,courier';">FILE</span> может использоваться злонамеренно для считывания любого доступного файла, хранящегося на сервере, или любого файла в каталоге текущей базы данных в таблицу, к содержимому которой можно затем получить доступ с помощью команды <span style=" font-family:'Courier New,courier';">SELECT</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Привилегия <span style=" font-family:'Courier New,courier';">SHUTDOWN</span> может использоваться злонамеренно для полного прекращения работы сервера и, таким образом, полного запрещения обслуживания других пользователей. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Привилегия <span style=" font-family:'Courier New,courier';">PROCESS</span> может быть использована для просмотра открытого текста запросов выполняющихся в данный момент, включая запросы на установку или изменение паролей. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Привилегии доступа к базе данных <span style=" font-family:'Courier New,courier';">mysql</span> могут быть использованы для изменения паролей и другой информации, относящейся к привилегиям доступа. (Пароли хранятся в зашифрованном виде, поэтому злоумышленник не сможет просто прочесть их, чтобы получить пароли в виде обычного текста). Получив доступ к столбцу паролей <span style=" font-family:'Courier New,courier';">mysql.user</span>, любой пользователь может войти на сервер MySQL под именем другого пользователя (имея достаточные привилегии, тот же самый пользователь может заменить пароль на другой). </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Есть вещи, которые система привилегий MySQL делать не может: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Нельзя явно указать, что данному пользователю должен быть закрыт доступ. Т.е. вы не можете явно выбрать пользователя и затем отказать ему в подключении. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Нельзя указать, что некий пользователь имеет привилегии создавать или удалять таблицы в базе данных, но не имеет привилегий создавать или удалять саму базу данных. </li></ul>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="connecting"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.8. Соединение с сервером MySQL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обычно для получения доступа к серверу MySQL необходимо сообщить клиентской программе параметры подсоединения: указать хост, с которым вы хотите соединиться, ваши имя пользователя и пароль. Например, клиент </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> можно запустить следующим образом (необязательные аргументы заключены в квадратные скобки ‘</span><span style=" font-family:'Courier New,courier';">[</span><span style=" font-family:'Ubuntu';">’ и ‘</span><span style=" font-family:'Courier New,courier';">]</span><span style=" font-family:'Ubuntu';">’): </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql [-h host_name] [-u user_name] [-pyour_pass]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Альтернативной формой опций </span><span style=" font-family:'Courier New,courier';">-h</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">-u</span><span style=" font-family:'Ubuntu';">, и </span><span style=" font-family:'Courier New,courier';">-p</span><span style=" font-family:'Ubuntu';"> являются </span><span style=" font-family:'Courier New,courier';">--host=host_name</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">--user=user_name</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">--password=your_pass</span><span style=" font-family:'Ubuntu';">. Заметим, что между </span><span style=" font-family:'Courier New,courier';">-p</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">--password=</span><span style=" font-family:'Ubuntu';"> и следующим за ними паролем </span><span style=" font-family:'Ubuntu'; font-style:italic;">пробела нет</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Внимание</span><span style=" font-family:'Ubuntu';">: Указывать пароль в командной строке небезопасно! Любой пользователь в вашей системе может впоследствии отыскать ваш пароль, введя команду типа </span><span style=" font-family:'Courier New,courier';">ps auxww</span><span style=" font-family:'Ubuntu';">. Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> используются следующие значения по умолчанию для параметров подсоединения, пропущенных в командной строке: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Значением по умолчанию для имени хоста является <span style=" font-family:'Courier New,courier';">localhost</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Значением по умолчанию для имени пользователя является ваш Unix-аккаунт. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При отсутствии префикса <span style=" font-family:'Courier New,courier';">-p</span> никакого пароля не указывается. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таким образом, для Unix-пользователя </span><span style=" font-family:'Courier New,courier';">joe</span><span style=" font-family:'Ubuntu';"> следующие команды являются эквивалентными: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -h localhost -u joe</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -h localhost</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -u joe</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Другие клиенты MySQL ведут себя подобным же образом. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В Unix-системах можно задавать различные значения по умолчанию, которые будут использоваться при соединении с сервером, чтобы избавиться от необходимости каждый раз при вызове клиентской программы вводить их в командной строке. Это можно сделать двумя способами: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Параметры подсоединения можно задать в разделе <span style=" font-family:'Courier New,courier';">[client]</span> файла конфигурации <span style=" font-family:'Courier New,courier';">my.cnf</span>, который находится в вашей домашней директории. Соответствующий раздел этого файла может иметь следующий вид: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[client]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">host=host_name</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user=user_name</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">password=your_pass</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id349984"></a>Параметры соединения можно задавать через переменные окружения. Для <span style=" font-family:'Courier New,courier';">mysql</span> можно задать хост при помощи <span style=" font-family:'Courier New,courier';">MYSQL_HOST</span>. Для задания имени пользователя для MySQL можно использовать <span style=" font-family:'Courier New,courier';">USER</span> (это относится только к ОС Windows). Пароль может быть задан с помощью <span style=" font-family:'Courier New,courier';">MYSQL_PWD</span> (но это небезопасно, см. следующий раздел). Обратитесь к разделу See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" text-decoration: underline; color:#0000ff;">Приложение F, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" font-style:italic; text-decoration: underline; color:#0000ff;">Переменные окружения</span></a>. </li></ul>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="connection-access"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.9. Управление доступом, этап 1: верификация подсоединения</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При попытке соединения с сервером MySQL он либо устанавливает соединение, либо отказывает в нем - на основе данных о вашей личности и того, можете ли вы подтвердить их соответствующим паролем. Если нет, сервер полностью отказывает вам в доступе. В противном случае сервер устанавливает соединение, затем переходит ко второму этапу и ожидает запросов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Личность задается двумя порциями информации: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">хостом, с которого вы подсоединяетесь </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">вашим именем пользователя MySQL </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверка личности осуществляется с помощью трех полей контекста таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> (</span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">Password</span><span style=" font-family:'Ubuntu';">). Сервер устанавливает соединение только в том случае, если находит в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> запись, в которой имя хоста и имя пользователя совпадают с введенными вами, и вы указываете правильный пароль. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Значения в полях контекста таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> могут задаваться следующим образом: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В поле <span style=" font-family:'Courier New,courier';">Host</span> может указываться имя хоста, либо его IP-адрес, либо <span style=" font-family:'Courier New,courier';">'localhost'</span> для обозначения локального хоста. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В поле Host разрешается использовать шаблонные символы ‘<span style=" font-family:'Courier New,courier';">%</span>’ и ‘<span style=" font-family:'Courier New,courier';">_</span>’. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Значение <span style=" font-family:'Courier New,courier';">'%'</span> в поле <span style=" font-family:'Courier New,courier';">Host</span> означает любое имя хоста. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пустое значение в поле <span style=" font-family:'Courier New,courier';">Host</span> означает, что к этой привилегии должна быть добавлена запись в таблице <span style=" font-family:'Courier New,courier';">host</span>, совпадающая с заданным именем хоста. Дополнительную информацию по данной теме вы найдете в следующем разделе. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Начиная с версии MySQL 3.23 для значений в поле в поле <span style=" font-family:'Courier New,courier';">Host</span>, определенных в виде IP-адресов, можно задавать сетевую маску, указывающую, сколько разрядов адреса будет использоваться для указания номера сети. Например: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT ALL PRIVILEGES ON db.*</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">TO david@'192.58.197.0/255.255.255.0';</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">В этом случае все IP-адреса, для которых выполняется следующее условие: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user_ip &amp; netmask = host_ip.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">являются разрешенными для подсоединения. В предыдущем примере все IP-адреса в диапазоне от 192.58.197.0 до 192.58.197.255 являются разрешенными для подсоединения к серверу MySQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id350561"></a>В поле <span style=" font-family:'Courier New,courier';">User</span> запрещено использовать шаблонные символы, но пустое значение разрешено, и оно соответствует любому имени. Если запись в таблице <span style=" font-family:'Courier New,courier';">user</span>, соответствующая входящему подсоединению, содержит пустое имя пользователя, данный пользователь считается анонимным пользователем (пользователем без имени), а заданное клиентом имя пользователя игнорируется. Это означает, что при всех последующих проверках доступа, осуществляемых на протяжении данного соединения (т.е. на этапе 2), будет использоваться пустое имя пользователя. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поле <span style=" font-family:'Courier New,courier';">Password</span> может быть пустым. Это не означает, что в данном случае подходит любой пароль. Если поле пароля пусто, пользователь должен быть подсоединен без указания какого либо пароля. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Непустые значения в поле </span><span style=" font-family:'Courier New,courier';">Password</span><span style=" font-family:'Ubuntu';"> представляют собой зашифрованные пароли. В MySQL пароли не хранятся в виде открытого текста, который может прочитать кто угодно. Напротив, пароль, который вводится пользователем при попытке подсоединения, шифруется (с помощью функции </span><span style=" font-family:'Courier New,courier';">PASSWORD()</span><span style=" font-family:'Ubuntu';">). В дальнейшем зашифрованный пароль используется клиентом/сервером в процессе проверки его правильности (это делается вообще без пересылки пароля во время подсоединения). Заметим, что с MySQL считает зашифрованный пароль РЕАЛЬНЫМ паролем, поэтому не следует допускать к нему кого бы то ни было! В частности, не разрешайте обычным пользователям доступ для чтения к таблицам в базе </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Примеры, приведенные ниже, показывают, каким входящим подсоединениям соответствуют различные комбинации значений, указанных в полях </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';"> таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение в поле</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">Host</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение в поле</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">User</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Подсоединения, которым соответствует запись</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'thomas.loc.gov'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'fred'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">fred</span><span style=" font-family:'Ubuntu';">, подключающийся с </span><span style=" font-family:'Courier New,courier';">thomas.loc.gov</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'thomas.loc.gov'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">''</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Любой пользователь, подключающийся с </span><span style=" font-family:'Courier New,courier';">thomas.loc.gov</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'%'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'fred'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">fred</span><span style=" font-family:'Ubuntu';">, подключающийся с любого хоста</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'%'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">''</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Любой пользователь, подключающийся с любого хоста</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'%.loc.gov'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'fred'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">fred</span><span style=" font-family:'Ubuntu';">, подключающийся с любого хоста, принадлежащего домену </span><span style=" font-family:'Courier New,courier';">loc.gov</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'x.y.%'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'fred'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">fred</span><span style=" font-family:'Ubuntu';">, подключающийся с </span><span style=" font-family:'Courier New,courier';">x.y.net</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">x.y.com</span><span style=" font-family:'Ubuntu';">,</span><span style=" font-family:'Courier New,courier';">x.y.edu</span><span style=" font-family:'Ubuntu';">, и т.д. (это, по-видимому, бесполезный вариант)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'144.155.166.177'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'fred'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">fred</span><span style=" font-family:'Ubuntu';">, подключающийся с хоста, имеющего IP-адрес </span><span style=" font-family:'Courier New,courier';">144.155.166.177</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'144.155.166.%'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'fred'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">fred</span><span style=" font-family:'Ubuntu';">, подключающийся с любого хоста в подсети </span><span style=" font-family:'Courier New,courier';">144.155.166</span><span style=" font-family:'Ubuntu';"> класса C</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'144.155.166.0/255.255.255.0'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">'fred'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">То же самое, что и в предыдущем примере</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Поскольку в IP-адресе, указываемом в поле </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';">, могут использоваться шаблонные символы (например </span><span style=" font-family:'Courier New,courier';">'144.155.166.%'</span><span style=" font-family:'Ubuntu';"> - данное значение соответствует всем без исключения хостам указанной подсети), возникает опасность, что кто-нибудь может попытаться воспользоваться этой возможностью, указав имя хоста, например, как </span><span style=" font-family:'Courier New,courier';">144.155.166.somewhere.com</span><span style=" font-family:'Ubuntu';">. Чтобы ``поставить заслон'' таким попыткам, в MySQL не разрешены имена хостов, начинающиеся с цифр и точки. Другими словами, имени хоста типа </span><span style=" font-family:'Courier New,courier';">1.2.foo.com</span><span style=" font-family:'Ubuntu';">, никогда не найдется соответствия в столбцах </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> таблиц привилегий. IP-адресу с шаблонными символами может соответствовать только IP-адрес. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Входящее подсоединение может совпадать с несколькими записями в таблице user. Например, как было показано выше, подсоединению с </span><span style=" font-family:'Courier New,courier';">thomas.loc.gov by</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">fred</span><span style=" font-family:'Ubuntu';"> могут подходить разные записи. Каким образом сервер определяет, какую из записей использовать, при совпадении с более чем одной из них? Для этого после считывания таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> во время запуска сервер производит ее сортировку, а затем, когда пользователь пытается установить соединение, записи таблицы просматриваются в порядке их упорядочения,. Используется первая подошедшая запись. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сортировка таблицы user осуществляется следующим образом. Предположим, таблица </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> имеет следующий вид: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+-----------+----------+-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Host      | User     | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+-----------+----------+-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| %         | root     | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| %         | jeffrey  | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| localhost | root     | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| localhost |          | ...</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+-----------+----------+-</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При считывании этой таблицы сервер упорядочивает записи, начиная с наиболее конкретных значений в столбце </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> (</span><span style=" font-family:'Courier New,courier';">'%'</span><span style=" font-family:'Ubuntu';"> в столбце </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> означает ``любой хост'' и является наименее конкретным). Записи с одинаковым значением в столбце </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> упорядочиваются между собой начиная с наиболее конкретных значений в столбце </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';"> (пустое значение в столбце </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';"> означает ``любой пользователь'' и является наименее конкретным). Окончательно отсортированная таблица </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> имеет следующий вид: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+-----------+----------+-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Host      | User     | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+-----------+----------+-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| localhost | root     | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| localhost |          | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| %         | jeffrey  | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| %         | root     | ...</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+-----------+----------+-</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При попытке подсоединения сервер просматривает отсортированные записи и использует первую подходящую запись. Для подсоединения с </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';"> пользователя </span><span style=" font-family:'Courier New,courier';">jeffrey</span><span style=" font-family:'Ubuntu';"> первыми подходящими записями являются записи со значением </span><span style=" font-family:'Courier New,courier';">'localhost'</span><span style=" font-family:'Ubuntu';"> в столбце </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';">. Из них запись с пустым значением имени пользователя соответствует и имени подсоединяющегося хоста и имени пользователя. (запись </span><span style=" font-family:'Courier New,courier';">'%'/'jeffrey'</span><span style=" font-family:'Ubuntu';"> тоже подошла бы, но она -- не первая подходящая в этой таблице). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Рассмотрим другой пример. Пусть таблица </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> имеет вид: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+----------------+----------+-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Host           | User     | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+----------------+----------+-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| %              | jeffrey  | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| thomas.loc.gov |          | ...</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+----------------+----------+-</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отсортированная таблица выглядит следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+----------------+----------+-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Host           | User     | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+----------------+----------+-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| thomas.loc.gov |          | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| %              | jeffrey  | ...</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+----------------+----------+-</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для подсоединения пользователя </span><span style=" font-family:'Courier New,courier';">jeffrey</span><span style=" font-family:'Ubuntu';"> с </span><span style=" font-family:'Courier New,courier';">thomas.loc.gov</span><span style=" font-family:'Ubuntu';"> подходит первая запись, в то время как для подсоединения </span><span style=" font-family:'Courier New,courier';">jeffrey</span><span style=" font-family:'Ubuntu';"> с </span><span style=" font-family:'Courier New,courier';">whitehouse.gov</span><span style=" font-family:'Ubuntu';"> - вторая. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Существует распространенное заблуждение: иногда думают, что при поиске записей для данного имени пользователя, соответствующих определенному подсоединению, сервер первыми будет использовать записи, в которых этот пользователь указан явно. Это абсолютно неверно, как и продемонстрировано в предыдущем примере: для подсоединения пользователя </span><span style=" font-family:'Courier New,courier';">jeffrey</span><span style=" font-family:'Ubuntu';"> с </span><span style=" font-family:'Courier New,courier';">thomas.loc.gov</span><span style=" font-family:'Ubuntu';"> первой подходящей записью является не запись, содержащая значение </span><span style=" font-family:'Courier New,courier';">'jeffrey'</span><span style=" font-family:'Ubuntu';"> в поле </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';">, а запись, не содержащая имени пользователя вовсе! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если у вас возникают проблемы с подсоединением к серверу, выведите таблицу </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> и отсортируйте ее вручную, чтобы увидеть, где происходит первое совпадение. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если соединение было успешно, но ваши привилегии - не те, что вы ожидали увижеть, вы можете использовать функцию </span><span style=" font-family:'Courier New,courier';">CURRENT_USER()</span><span style=" font-family:'Ubuntu';"> (новшество с MySQL 4.0.6) чтобы узнать, какой комбинации пользователь/компьютер ваше соединение соответствует. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#miscellaneous-functions"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.3.6.2, «Разные функции»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="request-access"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.10. Управление доступом, этап 2: верификация запросов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После установления соединения сервер приступает к выполнению второго этапа. Для каждого поступающего запроса сервер проверяет, имеется ли у вас достаточно привилегий для его выполнения, основываясь при этом на типе операции, которую вы хотите выполнить. Теперь в действие вступают поля привилегий в таблицах привилегий. Информация о привилегиях может находиться в любой из таблиц привилегий - </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">tables_priv</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">columns_priv</span><span style=" font-family:'Ubuntu';">. Обработка таблиц привилегий осуществляется с помощью команд </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">REVOKE</span><span style=" font-family:'Ubuntu';">. Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.1, «Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">GRANT</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> и </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REVOKE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. Интерес может представлять раздел See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.2.6, «Как работает система привилегий»</span></a><span style=" font-family:'Ubuntu';">, в котором перечислены поля, имеющиеся в каждой из таблиц привилегий. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таблица </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> предоставляет привилегии глобального характера, и их применение не зависит от того, в какой базе вы работаете в данный момент. Например, если таблица </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> предоставляет пользователю привилегию </span><span style=" font-family:'Courier New,courier';">DELETE</span><span style=" font-family:'Ubuntu';">, он может удалять строки из любой базы данных на серверном хосте! Иными словами, привилегии в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> - это привилегии суперпользователя. Поэтому целесообразно предоставлять привилегии в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> только суперпользователям, таким как администраторы сервера или администраторы баз данных. Что касается других пользователей, для их привилегий в таблице user следует установить значение </span><span style=" font-family:'Courier New,courier';">'N'</span><span style=" font-family:'Ubuntu';"> и предоставлять им привилегии только на уровне баз данных, используя для этого таблицы </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таблицы </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> предоставляют привилегии на уровне базы данных. Значения в полях контекста могут задаваться следующим образом: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Шаблонные символы ‘<span style=" font-family:'Courier New,courier';">%</span>’ и ‘<span style=" font-family:'Courier New,courier';">_</span>’ могут использоваться в полях <span style=" font-family:'Courier New,courier';">Host</span> и <span style=" font-family:'Courier New,courier';">Db</span> любой таблицы. Если вы хотите использовать символ ‘<span style=" font-family:'Courier New,courier';">_</span>’ как часть имени базы данных, укажите его как '<span style=" font-family:'Courier New,courier';">\_</span>' в операторе <span style=" font-family:'Courier New,courier';">GRANT</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Значение <span style=" font-family:'Courier New,courier';">'%'</span> в колонке <span style=" font-family:'Courier New,courier';">Host</span> таблицы <span style=" font-family:'Courier New,courier';">db</span> означает ``любой хост''. Пустое значение в поле <span style=" font-family:'Courier New,courier';">Host</span> таблицы <span style=" font-family:'Courier New,courier';">db</span> означает ``за дополнительной информацией следует обратиться к таблице <span style=" font-family:'Courier New,courier';">host</span>''. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Значение <span style=" font-family:'Courier New,courier';">'%'</span> или пустое значение в поле <span style=" font-family:'Courier New,courier';">Host</span> таблицы <span style=" font-family:'Courier New,courier';">host</span> означает ``любой хост''. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Значение <span style=" font-family:'Courier New,courier';">'%'</span> или пустое значение в поле <span style=" font-family:'Courier New,courier';">Db</span> любой из таблиц означает ``любая база данных''. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пустое значение в поле <span style=" font-family:'Courier New,courier';">User</span> любой из таблиц соответствует анонимному пользователю. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таблицы </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> считываются и сортируются при запуске сервера (тогда же, когда он считывает таблицу </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">). Таблица </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> сортируется по полям контекста </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">Db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';">, а таблица </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> - по полям контекста </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">Db</span><span style=" font-family:'Ubuntu';">. Как и в случае таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, при сортировке первыми отбираются наиболее конкретные значения, а последними - наименее конкретные, а когда сервер производит поиск совпадающих записей, используется первая совпадающая запись, которую он находит. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таблицы </span><span style=" font-family:'Courier New,courier';">tables_priv</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">columns_priv</span><span style=" font-family:'Ubuntu';"> предоставляют привилегии соответственно на уровне таблиц и столбцов. Значения в полях контекста задаются следующим образом: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В обеих таблицах в поле <span style=" font-family:'Courier New,courier';">Host</span> можно использовать шаблонные символы ‘<span style=" font-family:'Courier New,courier';">%</span>’ и ‘<span style=" font-family:'Courier New,courier';">_</span>’. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В обеих таблицах <span style=" font-family:'Courier New,courier';">'%'</span> или пустое значение в поле <span style=" font-family:'Courier New,courier';">Host</span> означает ``любой хост''. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">В обеих таблицах в полях </span><span style=" font-family:'Courier New,courier';">Db</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">Table_name</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">Column_name</span><span style=" font-family:'Ubuntu';"> запрещено использовать шаблонные символы или пустое значение. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Таблицы_priv</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">columns_priv</span><span style=" font-family:'Ubuntu';"> сортируются по полям </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">Db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';">. Эта сортировка проводится так же, как и в таблице </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';">, хотя в данном случае задача несколько упрощается, т.к. шаблонные символы могут встретиться только в поле </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ниже описывается процесс верификации запроса. (Если вы хорошо знакомы с исходным кодом проверки доступа, то заметите некоторые отличия: приведенное здесь описание несколько упрощено, чтобы сделать его более понятным, однако оно соответствует тому, что в действительности делает код). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для запросов на администрирование (</span><span style=" font-family:'Courier New,courier';">SHUTDOWN</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">RELOAD</span><span style=" font-family:'Ubuntu';">, etc.) сервер проверяет запись только в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, т.к. это единственная таблица, которая определяет привилегии администрирования. Доступ предоставляется при условии, что выбранная запись разрешает затребованные операции, и запрещается в противном случае. Например, вы хотите завершить работу </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> с помощью </span><span style=" font-family:'Courier New,courier';">mysqladmin shutdown</span><span style=" font-family:'Ubuntu';">, но ваша запись в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> не предоставляет вам привилегию </span><span style=" font-family:'Courier New,courier';">SHUTDOWN</span><span style=" font-family:'Ubuntu';">. В этом случае в доступе будет отказано без дальнейшей проверки таблицы </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> (поскольку в них отсутствует столбец </span><span style=" font-family:'Courier New,courier';">Shutdown_priv</span><span style=" font-family:'Ubuntu';">, в такой проверке нет необходимости). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В случае запросов, относящихся к базам данных (</span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';"> и т.д.), сервер сначала проверяет глобальные привилегии пользователя (привилегии суперпользователя), просматривая запись в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">. Если эта запись разрешает затребованную операцию, доступ предоставляется. Если глобальные привилегии, указанные в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, недостаточны, сервер проверяет таблицы </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> и определяет привилегии пользователя на уровне баз данных: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сервер просматривает таблицу <span style=" font-family:'Courier New,courier';">db</span> в поисках записи с подходящими значениями в полях <span style=" font-family:'Courier New,courier';">Host</span>, <span style=" font-family:'Courier New,courier';">Db</span> и <span style=" font-family:'Courier New,courier';">User</span>. Поля <span style=" font-family:'Courier New,courier';">Host</span> и <span style=" font-family:'Courier New,courier';">User</span> сравниваются с именем подключающегося хоста и именем пользователя MySQL. Поле <span style=" font-family:'Courier New,courier';">Db</span> сравнивается с именем базы данных, к которой пользователь хочет получить доступ. Если запись с подходящими значениями в полях <span style=" font-family:'Courier New,courier';">Host</span> и <span style=" font-family:'Courier New,courier';">User</span> отсутствует, в доступе будет отказано. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если же в таблице <span style=" font-family:'Courier New,courier';">db</span> имеется подходящая запись и значение в поле <span style=" font-family:'Courier New,courier';">Host</span> - не пустое, эта запись определяет привилегии пользователя, касающиеся базы данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если же в подходящей записи, выбранной в таблице <span style=" font-family:'Courier New,courier';">db</span>, значение в поле Host пустое, это означает, что перечень хостов, которым разрешен доступ к требуемой базе данных, приведен в таблице <span style=" font-family:'Courier New,courier';">host</span>. В этом случае дальнейший поиск производится в таблице <span style=" font-family:'Courier New,courier';">host</span>, где ищется запись с подходящими значениями в полях <span style=" font-family:'Courier New,courier';">Host</span> и <span style=" font-family:'Courier New,courier';">Db</span>. Если ни одной подходящей записи в таблице <span style=" font-family:'Courier New,courier';">host</span> нет, в доступе будет отказано. Если такая запись имеется, привилегии пользователя на уровне базы данных вычисляются путем логического умножения (не логического сложения!) привилегий, найденных в записях, которые выбраны в таблицах <span style=" font-family:'Courier New,courier';">db</span> и <span style=" font-family:'Courier New,courier';">host</span>. Другими словами, пользователю назначаются те привилегии, для которых в обеих записях установлено значение <span style=" font-family:'Courier New,courier';">'Y'</span>. (Этот способ можно использовать следующим образом: предоставить всеобщие привилегии в записи, хранящейся в таблице <span style=" font-family:'Courier New,courier';">db</span>, а затем выборочно ограничить их отдельно по каждому хосту, используя для этого записи в таблице <span style=" font-family:'Courier New,courier';">host</span>.) </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Определив привилегии на уровне базы данных, предоставляемые записями в таблицах </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';">, сервер добавляет их к глобальным привилегиям, заданным в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">. Если в результате привилегий оказывается достаточно для выполнения затребованной операции, доступ предоставляется. В противном случае сервер проверяет по таблицам </span><span style=" font-family:'Courier New,courier';">tables_priv</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">columns_priv</span><span style=" font-family:'Ubuntu';"> привилегии пользователя на уровне таблиц и столбцов и добавляет их к уже имеющимся привилегиям. В зависимости от полученного результата доступ либо предоставляется, либо нет. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если приведенное выше описание вычислений привилегий пользователя перевести на язык алгебры логики, используя логические операторы, то в результате получится примерно следующее: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">global privileges</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">OR (database privileges AND host privileges)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">OR table privileges</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">OR column privileges</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сам по себе алгоритм определения привилегий на первый взгляд может показаться неочевидным. И в самом деле, если первоначально глобальных привилегий, определяемых таблицей </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, оказывается недостаточно для выполнения затребованной операции, то зачем впоследствии эти вроде бы бесполезные привилегии добавляются к привилегиям на уровне баз данных, таблиц и столбцов? Смысл такого добавления заключается в том, что для выполнения запроса может потребоваться не один, а несколько типов привилегий. Например, для выполнения оператора </span><span style=" font-family:'Courier New,courier';">INSERT ... SELECT</span><span style=" font-family:'Ubuntu';"> вам потребуется как привилегия </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">, так и привилегия </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">. Ваши привилегии могут быть таковы, что запись в таблице user предоставляет вам одну привилегию, а запись в таблице </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> - другую. Другими словами, привилегии, необходимые для выполнения запроса, у вас есть, но сервер не может выяснить при просмотре каждой таблицы в отдельности, и поэтому привилегии, предоставляемые записями из обеих таблиц, должны быть объединены. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таблицу </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> можно использовать еще для одной цели - для поддержки списка надежных серверов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В таблицах на TcX </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> содержит список всех машин локальной сети. Им предоставляются все привилегии. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таблицу </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> можно также использовать для регистрации хостов, которые являются </span><span style=" font-family:'Ubuntu'; font-weight:600;">ненадежными</span><span style=" font-family:'Ubuntu';">. Предположим, одна из ваших машин - </span><span style=" font-family:'Courier New,courier';">public.your.domain</span><span style=" font-family:'Ubuntu';"> находится в общедоступной области, которую вы считаете незащищенной. В таком случае можно разрешить доступ всем хостам вашей сети, за исключением одной ``неблагонадежной'' машины, используя записи в таблице </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';">, подобные приведенным ниже: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+--------------------+----+-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Host               | Db | ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+--------------------+----+-</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| public.your.domain | %  | ... (для всех привилегий установлено значение 'N')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| %.your.domain      | %  | ... (для всех привилегий установлено значение 'Y')</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+--------------------+----+-</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Естественно, всегда нужно протестировать записи в таблицах привилегий (например, с помощью </span><span style=" font-family:'Courier New,courier';">mysqlaccess</span><span style=" font-family:'Ubuntu';">), чтобы убедиться в том, что привилегии доступа установлены вами действительно так, как задумано. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="access-denied"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.2.11. Причины появления ошибок </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">Access denied</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;"> ('в доступе отказано')</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если при попытке подсоединения к серверу MySQL вы сталкиваетесь с ошибкой </span><span style=" font-family:'Courier New,courier';">Access denied</span><span style=" font-family:'Ubuntu';">, то воспользуйтесь приведенным ниже списком. В нем перечислены меры, которые можно принять для решения этой проблемы: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запускали ли вы после инсталляции MySQL скрипт <span style=" font-family:'Courier New,courier';">mysql_install_db</span> для установки начального содержимого таблиц привилегий? Если нет, сделайте это. Обратитесь к разделу See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#default-privileges"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.3.4, «Задание изначальных привилегий MySQL»</span></a>. Проверьте первоначальные привилегии с помощью следующей команды: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -u root test</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Подсоединение должно произойти без сбоя. Следует также убедиться, что в каталоге базы данных MySQL имеется файл </span><span style=" font-family:'Courier New,courier';">user.MYD</span><span style=" font-family:'Ubuntu';">. Обычно он находится в директории </span><span style=" font-family:'Courier New,courier';">PATH/var/mysql/user.MYD</span><span style=" font-family:'Ubuntu';">, где </span><span style=" font-family:'Courier New,courier';">PATH</span><span style=" font-family:'Ubuntu';"> - путь к корневому каталогу инсталляции MySQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После новой инсталляции следует подсоединиться к серверу и создать пользователей, а также установить для них права доступа: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -u root mysql</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сервер разрешит подсоединение, т.к. пользователь MySQL с именем пользователя </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';"> исходно не имеет пароля. Но в этом заключается также и риск нарушения безопасности системы, поэтому при создании остальных пользователей MySQL, вам, помимо прочего, следует задать пароль для пользователя </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';">. Если при попытке подсоединения от имени пользователя root вы получите следующую ошибку: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Access denied for user: '@unknown' to database mysql</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">это означает, что в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> отсутствует запись со значением </span><span style=" font-family:'Courier New,courier';">'root'</span><span style=" font-family:'Ubuntu';"> в столбце </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> не может определить имя хоста для вашего клиента. В этом случае необходимо перезапустить сервер с опцией </span><span style=" font-family:'Courier New,courier';">--skip-grant-tables</span><span style=" font-family:'Ubuntu';"> и отредактировать файл </span><span style=" font-family:'Courier New,courier';">/etc/hosts</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">\windows\hosts</span><span style=" font-family:'Ubuntu';">, добавив в него запись для вашего хоста. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если вы столкнетесь с такой ошибкой, как: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqladmin -u root -pxxxx ver</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Access denied for user: 'root@localhost' (Using password: YES)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">это означает, что используется неверный пароль. Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#passwords"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.7, «Задание паролей»</span></a><span style=" font-family:'Ubuntu';">. Если вы забыли пароль для пользователя </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';">, то перезапустите </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> с опцией </span><span style=" font-family:'Courier New,courier';">--skip-grant-tables</span><span style=" font-family:'Ubuntu';"> и измените пароль. Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#resetting-permissions"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел A.4.2, «Как переустановить забытый пароль пользователя </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#resetting-permissions"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">root</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#resetting-permissions"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. Такая ошибка может появляться даже в том случае, если вы не задавали пароля вообще - это значит, что в каком-то файле </span><span style=" font-family:'Courier New,courier';">my.ini</span><span style=" font-family:'Ubuntu';"> имеется неверный пароль. Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. Отменить использование файлов опций можно с помощью опции the </span><span style=" font-family:'Courier New,courier';">--no-defaults</span><span style=" font-family:'Ubuntu';">, как показано ниже: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqladmin --no-defaults -u root ver</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id353808"></a>Запускали ли вы скрипт <span style=" font-family:'Courier New,courier';">mysql_fix_privilege_tables</span> при обновлении имеющейся инсталляции MySQL, если установленная версия - более ранняя, чем 3.22.11, а обновляется она до 3.22.11 или более поздней? Если нет, сделайте это. Начиная с MySQL 3.22.11, когда оператор <span style=" font-family:'Courier New,courier';">GRANT</span> стал функциональным, структура таблиц привилегий изменилась. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если во время сеанса ваши привилегии изменились, то, возможно, их изменил суперпользователь. Перезагрузка таблиц привилегий отражается не только на новых подсоединениях клиентов, но также на уже имеющихся, как это показано в разделе See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privilege-changes"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.3.3, «Когда изменения в привилегиях вступают в силу»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если не удается добиться, чтобы пароль работал, помните, что функция <span style=" font-family:'Courier New,courier';">PASSWORD()</span> должна использоваться, если вы задаете пароль с помощью операторов <span style=" font-family:'Courier New,courier';">INSERT</span>, <span style=" font-family:'Courier New,courier';">UPDATE</span> или <span style=" font-family:'Courier New,courier';">SET PASSWORD</span>. Если же вы задаете пароль с помощью оператора <span style=" font-family:'Courier New,courier';">GRANT ... INDENTIFIED BY</span> или команды <span style=" font-family:'Courier New,courier';">mysqladmin password</span>, функция <span style=" font-family:'Courier New,courier';">PASSWORD()</span> не нужна. Обратитесь к разделу See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#passwords"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.3.7, «Задание паролей»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">localhost</span> - это синоним имени вашего локального хоста, и, если хост явно не задан, также устанавливаемое по умолчанию имя хоста, к которому клиенты пытаются подключиться. Однако подсоединения к <span style=" font-family:'Courier New,courier';">localhost</span> не действуют, если в вашей рабочей системе используются MIT-потоки и MySQL старше версии 3.23.27 (подсоединения к <span style=" font-family:'Courier New,courier';">localhost</span> осуществляются с использованием сокетов Unix, а они не поддерживались тогда технологией MIT-потоков). Чтобы в таких системах эта проблема не возникала, следует явным образом задать имя серверного хоста с помощью опции <span style=" font-family:'Courier New,courier';">--host</span>. Таким образом будет установлено подсоединение к серверу <span style=" font-family:'Courier New,courier';">mysqld</span> по протоколу TCP/IP. В этом случае в записях таблицы <span style=" font-family:'Courier New,courier';">user</span>, хранящейся на серверном хосте, должно быть указано реальное имя хоста. (Это справедливо даже для тех случаев, когда клиентская программа и сервер запускаются на одном хосте). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если при попытке подсоединения к базе данных с помощью команды <span style=" font-family:'Courier New,courier';">mysql -u user_name db_name</span> возникает ошибка <span style=" font-family:'Courier New,courier';">Access denied</span>, причина этого, возможно, кроется в таблице <span style=" font-family:'Courier New,courier';">user</span>. Чтобы проверить это, выполните команду <span style=" font-family:'Courier New,courier';">mysql -u root mysql</span> и введите следующий SQL-оператор: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SELECT * FROM user;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">В результате будет выведена запись со столбцами </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">User</span><span style=" font-family:'Ubuntu';">, соответствующими имени вашего компьютера и вашему имени пользователя MySQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сообщение об ошибке <span style=" font-family:'Courier New,courier';">Access denied</span> информирует вас о том, под каким именем вы пытаетесь войти в систему, об имени хоста, с которого вы пытаетесь установить соединение, и о том, использовали ли вы при этом пароль или нет. Как правило, в таблице <span style=" font-family:'Courier New,courier';">user</span> будет одна запись, точно соответствующая имени хоста и имени пользователя, указанным в сообщении об ошибке. Например, если вы получите сообщение об ошибке, в котором сказано <span style=" font-family:'Courier New,courier';">Using password: NO</span>, это означает, что вы пытались войти в систему, не указав пароль. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если при попытке подсоединения не с того компьютера, на котором работает сервер MySQL, а с другого, вы получите сообщение об ошибке, приведенное ниже, то в таблице <span style=" font-family:'Courier New,courier';">user</span> отсутствует строка с таким именем хоста: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Host ... is not allowed to connect to this MySQL server</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы исправить эту ошибку, с помощью утилиты командной строки </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> (на серверном хосте!) добавьте строку в таблицу </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> с комбинацией имени пользователя/хоста, соответствующей той, которую вы используете при попытке подсоединения. Затем выполните команду </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-privileges</span><span style=" font-family:'Ubuntu';">. Если вы используете MySQL версии, отличной от Version 3.22, и вам неизвестно имя хоста или IP-адрес компьютера, с которого вы подсоединяетесь, введите в таблицу user запись со значением </span><span style=" font-family:'Courier New,courier';">'%'</span><span style=" font-family:'Ubuntu';"> в поле </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> и перезапустите </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> на серверной машине с опцией </span><span style=" font-family:'Courier New,courier';">--log</span><span style=" font-family:'Ubuntu';">. Когда соединение с клиентской машины будет установлено, вы найдете в журнале регистрации MySQL информацию об имени хоста, с которого вы подсоединились. (После этого следует заменить в записи таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> значение </span><span style=" font-family:'Courier New,courier';">'%'</span><span style=" font-family:'Ubuntu';"> настоящим именем хоста, из журнала регистрации. Иначе ваша система останется незащищенной.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">В Linux причиной такой ошибки может быть то, что бинарная версия MySQL скомпилирована с версией glibc, отличной от используемой вами. В этом случае нужно будет либо обновить ОС/glibc, используемые вами, либо загрузить исходный код MySQL и скомпилировать сервер самостоятельно. Как правило, исходный RPM компилируется и инсталлируется элементарно, так что это не составит серьезной проблемы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если будет выдано сообщение об ошибке, в котором имя хоста не указано вообще или указан IP-адрес, хотя вы при попытке подсоединения указывали имя хоста: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqladmin -u root -pxxxx -h some-hostname ver</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Access denied for user: 'root@' (Using password: YES)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">то это означает, что ошибка возникает при попытке MySQL сопоставить IP-адрес с именем хоста. В этом случае вы можете выполнить команду </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-hosts</span><span style=" font-family:'Ubuntu';">, чтобы сбросить внутреннюю кэш-память DNS. Обратитесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#dns"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.5, «Как MySQL использует DNS»</span></a><span style=" font-family:'Ubuntu';">. Вот некоторые способы решения этой проблемы: </span></p>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Попробуйте выяснить, что не так с вашим сервером DNS, и устраните неисправность. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Задайте IP-адреса вместо имен хостов таблицах привилегий MySQL. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запустите <span style=" font-family:'Courier New,courier';">mysqld</span> с опцией <span style=" font-family:'Courier New,courier';">--skip-name-resolve</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запустите <span style=" font-family:'Courier New,courier';">mysqld</span> с опцией <span style=" font-family:'Courier New,courier';">--skip-host-cache</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Подключитесь к <span style=" font-family:'Courier New,courier';">localhost</span> если ваш сервер и клиент работают на одном и том же компьютере. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поместите имена клиентских машин в каталог <span style=" font-family:'Courier New,courier';">/etc/hosts</span>. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если команда <span style=" font-family:'Courier New,courier';">mysql -u root test</span> работает успешно, а команда <span style=" font-family:'Courier New,courier';">mysql -h your_hostname -u root tes</span>t приводит к ошибке <span style=" font-family:'Courier New,courier';">Access denied</span>, то, возможно, в таблице <span style=" font-family:'Courier New,courier';">user</span> имя вашего хоста указано неверно. Одна из распространенных проблем здесь заключается в том, что в поле <span style=" font-family:'Courier New,courier';">Host</span> записи, хранящейся в таблице <span style=" font-family:'Courier New,courier';">user</span>, задается только имя хоста, в то время как процедуры разрешения имен, используемые вашей системой, возвращают полностью определенное доменное имя (или наоборот). Например, если в таблице user имеется запись со значением <span style=" font-family:'Courier New,courier';">'tcx'</span> в поле <span style=" font-family:'Courier New,courier';">host</span>, а DNS при этом сообщает MySQL, что имя хоста - <span style=" font-family:'Courier New,courier';">'tcx.subnet.se'</span>, эта запись действовать не будет. Попробуйте добавить в таблицу <span style=" font-family:'Courier New,courier';">user</span> запись, указав в колонке <span style=" font-family:'Courier New,courier';">Host</span> IP-адрес хоста. (В качестве альтернативы можно добавить в таблицу <span style=" font-family:'Courier New,courier';">user</span> запись со значением в поле <span style=" font-family:'Courier New,courier';">Host</span>, содержащим шаблонный символ, например <span style=" font-family:'Courier New,courier';">'tcx.%'</span>. Но использовать имена хостов, оканчивающиеся на <span style=" font-family:'Courier New,courier';">'%'</span> - небезопасно и делать это не рекомендуется!) </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если команда <span style=" font-family:'Courier New,courier';">mysql -u user_name test</span> работает успешно, а команда <span style=" font-family:'Courier New,courier';">mysql -u user_name other_db_nam</span>e - нет, то в таблице <span style=" font-family:'Courier New,courier';">db</span> нет записи, соответствующей <span style=" font-family:'Courier New,courier';">other_db_name</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если команда <span style=" font-family:'Courier New,courier';">mysql -u user_name db_name</span> выполняется успешно на том компьютере, где установлен сервер, а <span style=" font-family:'Courier New,courier';">mysql -u host_name -u user_name db_name</span> не работает при выполнении ее на другой клиентской машине, то в таблицах <span style=" font-family:'Courier New,courier';">user</span> или <span style=" font-family:'Courier New,courier';">db</span> эта клиентская машина не зарегистрирована. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если не удается выяснить причину ошибки <span style=" font-family:'Courier New,courier';">Access denied</span>, удалите из таблицы <span style=" font-family:'Courier New,courier';">user</span> все записи, в которых значение в поле <span style=" font-family:'Courier New,courier';">Host</span> включает шаблонные символы (записи, содержащие символы '<span style=" font-family:'Courier New,courier';">'%'</span>' или '<span style=" font-family:'Courier New,courier';">'_'</span>'). Очень распространенной ошибкой является следующая: пользователь вставляет новую запись со значением <span style=" font-family:'Courier New,courier';">'%'</span> в поле <span style=" font-family:'Courier New,courier';">Host</span> и со значением <span style=" font-family:'Courier New,courier';">'some user'</span> - в поле <span style=" font-family:'Courier New,courier';">User</span>, полагая, что после этого для подсоединения с той же самой машины он сможет использовать <span style=" font-family:'Courier New,courier';">localhost</span>. Такой расчет неверен, и причина здесь в том, что устанавливаемые по умолчанию привилегии включают запись со значением <span style=" font-family:'Courier New,courier';">'localhost'</span> в поле <span style=" font-family:'Courier New,courier';">Host</span> и пустым полем <span style=" font-family:'Courier New,courier';">User</span>. И поскольку в этой записи значение <span style=" font-family:'Courier New,courier';">'localhost'</span> более конкретно, чем <span style=" font-family:'Courier New,courier';">'%',</span> то именно она при подсоединении с <span style=" font-family:'Courier New,courier';">localhost</span> предшествует новой записи и, соответственно, будет выбрана и сработает! Правильным в этом случае будет вставить вторую запись со значением <span style=" font-family:'Courier New,courier';">'localhost'</span> в поле <span style=" font-family:'Courier New,courier';">Host</span> и значением <span style=" font-family:'Courier New,courier';">'some_user'</span> - в поле <span style=" font-family:'Courier New,courier';">User</span> или удалить запись со значением <span style=" font-family:'Courier New,courier';">'localhost'</span> в поле <span style=" font-family:'Courier New,courier';">Host</span> и пустым полем <span style=" font-family:'Courier New,courier';">User</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если вы получите следующую ошибку, то эта проблема, возможно, связана с таблицей <span style=" font-family:'Courier New,courier';">db</span> или таблицей <span style=" font-family:'Courier New,courier';">host</span>: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Access to database denied</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если в записи, выбранной из таблицы </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';">, столбец </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';"> - пустой, удостоверьтесь, что в таблице </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';"> имеется по крайней мере одна соответствующая запись, указывающая, к каким хостам относится запись из таблицы </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';">. Если ошибка возникает при выполнении SQL-команды </span><span style=" font-family:'Courier New,courier';">SELECT ... INTO OUTFILE</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span><span style=" font-family:'Ubuntu';">, то в вашей записи из таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, вероятно, отсутствует разрешение на предоставление привилегии </span><span style=" font-family:'Courier New,courier';">FILE</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Помните, что клиентские программы будут использовать параметры подсоединения, указанные файлах конфигурации или переменных окружения. Обратитесь к разделу See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" text-decoration: underline; color:#0000ff;">Приложение F, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" font-style:italic; text-decoration: underline; color:#0000ff;">Переменные окружения</span></a>. Если есть подозрение, что клиент отсылает неверные устанавливаемые по умолчанию параметры подсоединения, в случае, когда вы не задаете их в командной строке, проверьте ваше окружение и файл <span style=" font-family:'Courier New,courier';">my.cnf</span> в своей домашней директории. Можете также проверить конфигурационные файлы MySQL относящиеся ко все системе, хотя параметры клиентского подсоединения вряд ли указаны именно здесь. Обратитесь к разделу See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" text-decoration: underline; color:#0000ff;">»</span></a>. Если ошибка <span style=" font-family:'Courier New,courier';">Access denied</span> возникает при выполнении вашей клиентской программы без каких-либо опций, убедитесь, что ни в одном из ваших файлов опций не указан старый пароль! Обратитесь к разделу See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" text-decoration: underline; color:#0000ff;">»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если вы вносите изменения в таблицы привилегий непосредственно (с помощью операторов <span style=" font-family:'Courier New,courier';">INSERT</span> или <span style=" font-family:'Courier New,courier';">UPDATE</span>), а ваши изменения, похоже, игнорируются, то следует выдать оператор <span style=" font-family:'Courier New,courier';">FLUSH PRIVILEGES</span> или выполнить команду <span style=" font-family:'Courier New,courier';">mysqladmin flush-privileges</span> - для того, чтобы заставить сервер перечитать таблицы привилегий. В противном случае ваши изменения вступят в силу лишь при последующем перезапуске сервера. Помните, что после того, как вы зададите пароль от имени пользователя, вам нужно будет указывать его только после сброса привилегий, т.к. серверу еще не будет известно о том, что вы изменили пароль! </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При возникновении проблемы с доступом при использовании Perl-, PHP-, Python- или ODBC-программ, попробуйте установить соединение с сервером при помощи команды <span style=" font-family:'Courier New,courier';">mysql -u user_name db_name</span> или команды <span style=" font-family:'Courier New,courier';">mysql -u user_name -pyour_pass db_name</span>. Если ваш клиент <span style=" font-family:'Courier New,courier';">mysql</span> обеспечивает подсоединение, то проблема связана не с привилегиями доступа, а с вашей программой. (Заметим, что между <span style=" font-family:'Courier New,courier';">-p</span> и паролем пробела нет; для задания пароля можно также использовать синтаксическую структуру <span style=" font-family:'Courier New,courier';">--password=your_pass</span>. Если вы используете только саму опцию <span style=" font-family:'Courier New,courier';">-p</span>, MySQL запросит у вас пароль) </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При тестировании запускайте демон <span style=" font-family:'Courier New,courier';">mysqld</span> с опцией <span style=" font-family:'Courier New,courier';">--skip-grant-tables</span>. Тогда вы сможете изменять таблицы привилегий MySQL и с помощью скрипта <span style=" font-family:'Courier New,courier';">mysqlaccess</span> проверять, произвели ли сделанные вами изменения желаемый эффект. Если результаты вас устраивают, выполните команду <span style=" font-family:'Courier New,courier';">mysqladmin flush-privileges</span>, чтобы приказать серверу <span style=" font-family:'Courier New,courier';">mysqld</span> приступить к использованию новых таблиц привилегий. <span style=" font-weight:600;">Внимание</span>: перезагрузка таблиц привилегий отменяет опцию <span style=" font-family:'Courier New,courier';">--skip-grant-tables</span>. Это позволяет заставить сервер приступить к использованию новых таблиц привилегий без завершения его работы и перезагрузки. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если ничего не помогает, запустите демон <span style=" font-family:'Courier New,courier';">mysqld</span> daemon с опцией отладки (например <span style=" font-family:'Courier New,courier';">--debug=d,general,query</span>). В результате будет выведена информация о неудачных подсоединениях, с указанием хоста и пользователя, а также обо всех обработанных командах. Обратитесь к разделу See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/porting.html#making-trace-files"><span style=" text-decoration: underline; color:#0000ff;">Раздел E.1.2, «Создание трассировочных файлов»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если у вас имеется какая-либо проблема с таблицами привилегий MySQL и вы полагаете, что необходимо сообщить о ней в список рассылки, нужно обязательно приложить к своему отчету распечатку таблиц привилегий MySQL. Это можно сделать с помощью команды <span style=" font-family:'Courier New,courier';">mysqldump mysql</span>. Отчет о проблеме, как и в других случаях, отправляется с помощью скрипта <span style=" font-family:'Courier New,courier';">mysqlbug</span>. Обратитесь к разделу See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/introduction.html#bug-reports"><span style=" text-decoration: underline; color:#0000ff;">Раздел 1.8.1.3, «Как отправлять отчеты об ошибках или проблемах»</span></a>. В некоторых случаях для выполнения скрипта <span style=" font-family:'Courier New,courier';">mysqldump</span> возможно, потребуется перезапустить <span style=" font-family:'Courier New,courier';">mysqld</span> с опцией <span style=" font-family:'Courier New,courier';">--skip-grant-tables</span>. </li></ul>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-account-management"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">.3. Управление учетными записями пользователей MySQL</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.1. Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">GRANT</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> и </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REVOKE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#user-names"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.2. Имена пользователей MySQL и пароли</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privilege-changes"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.3. Когда изменения в привилегиях вступают в силу</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#default-privileges"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.4. Задание изначальных привилегий MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#adding-users"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.5. Добавление новых пользователей в MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#user-resources"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.6. Ограничение ресурсов пользователя</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#passwords"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.7. Задание паролей</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#password-security"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.8. Обеспечение безопасности своего пароля</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#secure-connections"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.9. Использование безопасных соединений</span></a></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="grant"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.3.1. Синтаксис команд </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">GRANT</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;"> и </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">REVOKE</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">GRANT priv_type [(column_list)] [, priv_type [(column_list)] ...]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    ON {tbl_name | * | *.* | db_name.*}</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    TO user_name [IDENTIFIED BY [PASSWORD] 'password']</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        [, user_name [IDENTIFIED BY 'password'] ...]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    [REQUIRE</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">  NONE |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        [{SSL| X509}]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        [CIPHER cipher [AND]]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        [ISSUER issuer [AND]]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        [SUBJECT subject]]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    [WITH [GRANT OPTION | MAX_QUERIES_PER_HOUR # |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">                          MAX_UPDATES_PER_HOUR # |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">                          MAX_CONNECTIONS_PER_HOUR #]]</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REVOKE priv_type [(column_list)] [, priv_type [(column_list)] ...]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    ON {tbl_name | * | *.* | db_name.*}</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    FROM user_name [, user_name ...]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> включен в MySQL начиная с версии 3.22.11 и выше. В более ранних версиях MySQL оператор </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> ничего не выполняет. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команды </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">REVOKE</span><span style=" font-family:'Ubuntu';"> позволяют системным администраторам создавать пользователей MySQL, а также предоставлять права пользователям или лишать их прав на четырех уровнях привилегий: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Глобальный уровень</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Глобальные привилегии применяются ко всем базам данных на указанном сервере. Эти привилегии хранятся в таблице </span><span style=" font-family:'Courier New,courier';">mysql.user</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Уровень базы данных</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегии базы данных применяются ко всем таблицам указанной базы данных. Эти привилегии хранятся в таблицах </span><span style=" font-family:'Courier New,courier';">mysql.db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">mysql.host</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Уровень таблицы</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегии таблицы применяются ко всем столбцам указанной таблицы. Эти привилегии хранятся в таблице </span><span style=" font-family:'Courier New,courier';">mysql.tables_priv</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Уровень столбца</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегии столбца применяются к отдельным столбцам указанной таблицы. Эти привилегии хранятся в таблице </span><span style=" font-family:'Courier New,courier';">mysql.columns_priv</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если привилегии предоставляются пользователю, которого не существует, то этот пользователь создается. Чтобы просмотреть примеры работы команды </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">, см. раздел </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#adding-users"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.5, «Добавление новых пользователей в MySQL»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В таблице приведен список возможных значений параметра </span><span style=" font-family:'Courier New,courier';">priv_type</span><span style=" font-family:'Ubuntu';"> для операторов </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">REVOKE</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ALL [PRIVILEGES]</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Задает все простые привилегии, кроме </span><span style=" font-family:'Courier New,courier';">WITH GRANT OPTION</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ALTER</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">ALTER TABLE</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CREATE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">CREATE TABLE</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CREATE TEMPORARY TABLES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">CREATE TEMPORARY TABLE</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">DELETE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">DELETE</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">DROP</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">DROP TABLE</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">EXECUTE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает пользователю запускать хранимые процедуры (для MySQL 5.0)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">FILE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">SELECT ... INTO OUTFILE</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">INDEX</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">CREATE INDEX</span><span style=" font-family:'Ubuntu';"> and </span><span style=" font-family:'Courier New,courier';">DROP INDEX</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">INSERT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">INSERT</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">LOCK TABLES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">LOCK TABLES</span><span style=" font-family:'Ubuntu';"> на таблицах, для которых есть привилегия </span><span style=" font-family:'Courier New,courier';">SELECT</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PROCESS</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">SHOW FULL PROCESSLIST</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REFERENCES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Зарезервировано для использования в будущем</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">RELOAD</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">FLUSH</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REPLICATION CLIENT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Предоставляет пользователю право запрашивать местонахождение головного и подчиненных серверов</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REPLICATION SLAVE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Необходимо для подчиненных серверов при репликации (для чтения информации из бинарных журналов головного сервера)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SELECT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">SELECT</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';"> выводит все базы данных</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHUTDOWN</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">mysqladmin shutdown</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SUPER</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Позволяет установить одно соединение (один раз), даже если достигнуто значение max_connections, и запускать команды </span><span style=" font-family:'Courier New,courier';">CHANGE MASTER</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">KILL thread</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqladmin debug</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">PURGE MASTER LOGS</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">SET GLOBAL</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">UPDATE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает использование </span><span style=" font-family:'Courier New,courier';">UPDATE</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">USAGE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Синоним для ``без привилегий''</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">GRANT OPTION</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Синоним для </span><span style=" font-family:'Courier New,courier';">WITH GRANT OPTION</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Значение </span><span style=" font-family:'Courier New,courier';">USAGE</span><span style=" font-family:'Ubuntu';"> можно задавать, если необходимо создать пользователя без привилегий. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегии </span><span style=" font-family:'Courier New,courier';">CREATE TEMPORARY TABLES</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">EXECUTE</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">LOCK TABLES</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">REPLICATION ...</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';"> являются новыми для версии 4.0.2. Чтобы воспользоваться этими новыми привилегиями после обновления до версии 4.0.2, необходимо запустить скрипт </span><span style=" font-family:'Courier New,courier';">mysql_fix_privilege_tables</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В боле старых версиях MySQL привилегия </span><span style=" font-family:'Courier New,courier';">PROCESS</span><span style=" font-family:'Ubuntu';"> предоставляет такие же права, как и новая привилегия </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы лишить пользователя привилегий, предоставленных командой </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">, воспользуйтесь значением </span><span style=" font-family:'Courier New,courier';">priv_type</span><span style=" font-family:'Ubuntu';"> в </span><span style=" font-family:'Courier New,courier';">GRANT OPTION</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">REVOKE GRANT OPTION ON ... FROM ...;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для таблицы можно указать только следующие значения </span><span style=" font-family:'Courier New,courier';">priv_type</span><span style=" font-family:'Ubuntu';">: </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">DELETE</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">CREATE</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">DROP</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">GRANT OPTION</span><span style=" font-family:'Ubuntu';">, I</span><span style=" font-family:'Courier New,courier';">NDEX</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">ALTER</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для столбца можно указать только следующие значения </span><span style=" font-family:'Courier New,courier';">priv_type</span><span style=" font-family:'Ubuntu';"> (при использовании оператора </span><span style=" font-family:'Courier New,courier';">column_list</span><span style=" font-family:'Ubuntu';">): </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Глобальные привилегии можно задать, воспользовавшись синтаксисом </span><span style=" font-family:'Courier New,courier';">ON *.*</span><span style=" font-family:'Ubuntu';">, а привилегии базы данных - при помощи синтаксиса </span><span style=" font-family:'Courier New,courier';">ON db_name.*</span><span style=" font-family:'Ubuntu';">. Если указать </span><span style=" font-family:'Courier New,courier';">ON *</span><span style=" font-family:'Ubuntu';"> при открытой текущей базе данных, то привилегии будут заданы для этой базы данных. (</span><span style=" font-family:'Ubuntu'; font-weight:600;">Предупреждение</span><span style=" font-family:'Ubuntu';">: если указать </span><span style=" font-family:'Courier New,courier';">ON *</span><span style=" font-family:'Ubuntu';"> при </span><span style=" font-family:'Ubuntu'; font-weight:600;">отсутствии</span><span style=" font-family:'Ubuntu';"> открытой текущей базы данных, это повлияет на глобальные привилегии!) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Заметьте:</span><span style=" font-family:'Ubuntu';"> шаблонные символы ‘</span><span style=" font-family:'Courier New,courier';">_</span><span style=" font-family:'Ubuntu';">’ и ‘</span><span style=" font-family:'Courier New,courier';">%</span><span style=" font-family:'Ubuntu';">’ не допускаются в определении имени баз данных в операторе GRANT. Это означает, что если вы хотите использовать, скажем, символ ‘</span><span style=" font-family:'Courier New,courier';">_</span><span style=" font-family:'Ubuntu';">’ в имени базы данных, то вы должны указать его как '</span><span style=" font-family:'Courier New,courier';">\_</span><span style=" font-family:'Ubuntu';">' в </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">, чтобы пользователь не имел возможности получить доступ к другим базам данных, соответствующих шаблону: </span><span style=" font-family:'Courier New,courier';">GRANT ... ON `foo\_bar`.* TO ...</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">С тем, чтобы можно было определять права пользователям с конкретных компьютеров, в MySQL обеспечивается возможность указывать имя пользователя (</span><span style=" font-family:'Courier New,courier';">user_name</span><span style=" font-family:'Ubuntu';">) в форме </span><span style=" font-family:'Courier New,courier';">user@host</span><span style=" font-family:'Ubuntu';">. Если необходимо указать строку </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">, в которой содержатся специальные символы (такие как ‘</span><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Ubuntu';">’) или строку </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';">, в которой содержатся специальные или групповые символы (такие как ‘</span><span style=" font-family:'Courier New,courier';">%</span><span style=" font-family:'Ubuntu';">’), можно заключить имя удаленного компьютера или пользователя в кавычки (например, </span><span style=" font-family:'Courier New,courier';">'test-user'@'test-hostname'</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В имени удаленного компьютера также можно указывать групповые символы. Например, </span><span style=" font-family:'Courier New,courier';">user@'%.loc.gov'</span><span style=" font-family:'Ubuntu';"> относится к </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> всех удаленных компьютеров домена </span><span style=" font-family:'Courier New,courier';">loc.gov</span><span style=" font-family:'Ubuntu';">, а </span><span style=" font-family:'Courier New,courier';">user@'144.155.166.%'</span><span style=" font-family:'Ubuntu';"> относится к </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> всех удаленных компьютеров подсети </span><span style=" font-family:'Courier New,courier';">144.155.166</span><span style=" font-family:'Ubuntu';"> класс C. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Простая форма user является синонимом для </span><span style=" font-family:'Courier New,courier';">user@&quot;%&quot;</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В MySQL не поддерживаются групповые символы в именах пользователей. Анонимные пользователи определяются вставкой записей </span><span style=" font-family:'Courier New,courier';">User=''</span><span style=" font-family:'Ubuntu';"> в таблицу </span><span style=" font-family:'Courier New,courier';">mysql.user</span><span style=" font-family:'Ubuntu';"> или созданием пользователя с пустым именем при помощи команды </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Примечание</span><span style=" font-family:'Ubuntu';">: если анонимным пользователям разрешается подсоединяться к серверу MySQL, необходимо также предоставить привилегии всем локальным пользователям как </span><span style=" font-family:'Courier New,courier';">user@localhost</span><span style=" font-family:'Ubuntu';">, поскольку в противном случае при попытке пользователя зайти в MySQL с локального компьютера в таблице </span><span style=" font-family:'Courier New,courier';">mysql.user</span><span style=" font-family:'Ubuntu';"> будет использоваться вход для анонимного пользователя! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы проверить, происходит ли подобное на вашем компьютере, выполните следующий запрос: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SELECT Host,User FROM mysql.user WHERE User='';</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На данный момент команда </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> поддерживает имена удаленных компьютеров, таблиц, баз данных и столбцов длиной не более 60 символов. Имя пользователя должно содержать не более 16 символов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегии для таблицы или столбца формируются при помощи логического оператора OR из привилегий каждого из четырех уровней. Например, если в таблице </span><span style=" font-family:'Courier New,courier';">mysql.user</span><span style=" font-family:'Ubuntu';"> указано, что у пользователя есть глобальная привилегия </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">, эта привилегия не отменяется на уровне базы данных, таблицы или столбца. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегии для столбца могут быть вычислены следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">глобальные привилегии</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">OR (привилегии базы данных AND привилегии удаленного компьютера)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">OR привилегии таблицы</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">OR привилегии столбца</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В большинстве случаев права пользователя определяются только на одном уровне привилегий, поэтому обычно эта процедура не настолько сложна, как описано выше. Подробная информация о последовательности действий проверки привилегий представлена в разделе </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privilege-system"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.2, «Общие проблемы безопасности и система привилегий доступа MySQL»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если привилегии предоставляются сочетанию пользователь/удаленный компьютер, которое отсутствует в таблице </span><span style=" font-family:'Courier New,courier';">mysql.user</span><span style=" font-family:'Ubuntu';">, то в последнюю добавляется запись, которая остается в таблице до тех пор, пока не будет удалена при помощи команды </span><span style=" font-family:'Courier New,courier';">DELETE</span><span style=" font-family:'Ubuntu';">. Иначе говоря, команда </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> может создавать записи </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> в таблице, но команда </span><span style=" font-family:'Courier New,courier';">REVOKE</span><span style=" font-family:'Ubuntu';"> не может их удалить. Это необходимо делать при помощи команды </span><span style=" font-family:'Courier New,courier';">DELETE</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если в MySQL версий 3.22.12 и выше создан новый пользователь или предоставлены глобальные привилегии, пароль пользователя будет назначаться оператором </span><span style=" font-family:'Courier New,courier';">IDENTIFIED BY</span><span style=" font-family:'Ubuntu';">, если он указан. Если у пользователя уже есть пароль, то этот пароль будет заменен новым. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы не хотите отправлять пароль открытым текстом, можно воспользоваться параметром </span><span style=" font-family:'Courier New,courier';">PASSWORD</span><span style=" font-family:'Ubuntu';"> с зашифрованным паролем, полученным при помощи функции SQL </span><span style=" font-family:'Courier New,courier';">PASSWORD()</span><span style=" font-family:'Ubuntu';"> или функции C API </span><span style=" font-family:'Courier New,courier';">make_scrambled_password(char *to, const char *password)</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Предупреждение</span><span style=" font-family:'Ubuntu';">: если при создании нового пользователя не указать оператор </span><span style=" font-family:'Courier New,courier';">IDENTIFIED BY</span><span style=" font-family:'Ubuntu';">, будет создан пользователь без пароля. Это ненадежно с точки зрения безопасности. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пароли также можно задавать при помощи команды </span><span style=" font-family:'Courier New,courier';">SET PASSWORD</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#set"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.2.3.4, «Тип множества </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#set"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SET</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#set"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если у вас привилегии для базы данных, то при необходимости в таблице </span><span style=" font-family:'Courier New,courier';">mysql.db</span><span style=" font-family:'Ubuntu';"> создается запись. Данная запись удаляется после удаления всех привилегий для этой базы данных командой </span><span style=" font-family:'Courier New,courier';">REVOKE</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если у пользователя нет никаких привилегий для таблицы, то таблица не отображается, когда пользователь запрашивает список таблиц (например, при помощи оператора </span><span style=" font-family:'Courier New,courier';">SHOW TABLES</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Оператор </span><span style=" font-family:'Courier New,courier';">WITH GRANT OPTION</span><span style=" font-family:'Ubuntu';"> предоставляет пользователю возможность наделять других пользователей любыми привилегиями, которые он сам имеет на указанном уровне привилегий. При предоставлении привилегии </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> необходимо проявлять осмотрительность, так как два пользователя с разными привилегиями могут объединить свои привилегии! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Параметры </span><span style=" font-family:'Courier New,courier';">MAX_QUERIES_PER_HOUR #</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">MAX_UPDATES_PER_HOUR #</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">MAX_CONNECTIONS_PER_HOUR #</span><span style=" font-family:'Ubuntu';"> являются новыми в MySQL версии 4.0.2. Эти параметры ограничивают количество запросов, обновлений и входов, которые пользователь может осуществить в течение одного часа. Если установлено значение 0 (принято по умолчанию), то это означает, что для данного пользователя нет ограничений. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#user-resources"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.6, «Ограничение ресурсов пользователя»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Внимание: чтобы указать любую из этих опция для существующего пользователя, но не давать никаких дополнительных привилегий, используйте </span><span style=" font-family:'Courier New,courier';">GRANT USAGE ... WITH MAX_...</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Нельзя предоставить другому пользователю привилегию, которой нет у вас самого. Привилегия </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> позволяет предоставлять только те привилегии, которыми вы обладаете. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Учтите, что если пользователю назначена привилегия </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> на определенном уровне привилегий, то все привилегии, которыми этот пользователь уже обладает (или которые будут ему назначены в будущем!) на этом уровне, также могут назначаться этим пользователем. Предположим, пользователю назначена привилегия </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> в базе данных. Если потом в базе данных назначить привилегию </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';"> и указать </span><span style=" font-family:'Courier New,courier';">WITH GRANT OPTION</span><span style=" font-family:'Ubuntu';">, пользователь сможет назначать не только привилегию </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">, но также и </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">. Если затем в базе данных предоставить пользователю привилегию </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';">, пользователь сможет после этого назначать </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не следует назначать привилегии </span><span style=" font-family:'Courier New,courier';">ALTER</span><span style=" font-family:'Ubuntu';"> обычным пользователям. Это дает пользователю возможность разрушить систему привилегий путем переименования таблиц! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание на то, что если используются привилегии для таблицы или столбца даже для одного пользователя, сервер проверяет привилегии таблиц и столбцов для всех пользователей, и это несколько замедляет работу MySQL. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При запуске </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> все привилегии считываются в память. Привилегии базы данных, таблицы и столбца вступают в силу немедленно, а привилегии уровня пользователя - при следующем подсоединении пользователя. Изменения в таблицах назначения привилегий, которые осуществляются при помощи команд </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">REVOKE</span><span style=" font-family:'Ubuntu';">, обрабатываются сервером немедленно. Если изменять таблицы назначения привилегий вручную (используя команды </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';"> и т.д.), необходимо запустить оператор </span><span style=" font-family:'Courier New,courier';">FLUSH PRIVILEGES</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-privileges</span><span style=" font-family:'Ubuntu';">, чтобы указать серверу на необходимость перезагрузки таблиц назначения привилегий. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privilege-changes"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.3, «Когда изменения в привилегиях вступают в силу»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Наиболее значительные отличия команды </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> версий ANSI SQL и MySQL следующие: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В MySQL привилегии назначаются для сочетания имя пользователя + удаленный компьютер, а не только для имени пользователя. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В ANSI SQL отсутствуют глобальные привилегии и привилегии уровня базы данных, и ANSI SQL поддерживает не все типы привилегий MySQL. В свою очередь, в MySQL отсутствует поддержка привилегий ANSI SQL <span style=" font-family:'Courier New,courier';">TRIGGER</span>, <span style=" font-family:'Courier New,courier';">UNDER</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Структура привилегий ANSI SQL является иерархической. Если удалить пользователя, то все назначенные этому пользователелю привилегии будут отменены. В MySQL назначенные привилегии не отменяются автоматически, их при необходимости требуется удалять самостоятельно. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В MySQL пользователь может применять к таблице оператор <span style=" font-family:'Courier New,courier';">INSERT</span> при наличии у него привилегии <span style=" font-family:'Courier New,courier';">INSERT</span> только для нескольких столбцов в этой таблице. Столбцы, для которых отсутствует привилегия <span style=" font-family:'Courier New,courier';">INSERT</span>, будут установлены в свои значения, принятые по умолчанию. В ANSI SQL требуется наличие привилегии <span style=" font-family:'Courier New,courier';">INSERT</span> для всех столбцов. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При удалении таблицы в ANSI SQL все привилегии для этой таблицы будут отменены. Если отменить привилегию в ANSI SQL, то все привилегии, которые были назначены на основе этой привилегии, также будут отменены. В MySQL привилегии могут удаляться только при помощи команды <span style=" font-family:'Courier New,courier';">REVOKE</span> или путем изменения таблиц назначения привилегий MySQL. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы ознакомиться с описанием использования </span><span style=" font-family:'Courier New,courier';">REQUIRE</span><span style=" font-family:'Ubuntu';">, см. раздел See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#secure-connections"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.9, «Использование безопасных соединений»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-names"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.3.2. Имена пользователей MySQL и пароли</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Между MySQL и Unix или Windows существует несколько различий в использовании имен пользователей и паролей: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Имена пользователей, которые применяются в MySQL для авторизации, не имеют ничего общего с именами пользователей Unix (аккаунты Unix) или именами пользователей Windows. Большинство клиентов MySQL по умолчанию пытаются войти в систему, используя текущее имя пользователя Unix в качестве имени пользователя MySQL, но это сделано только для удобства. Программы клиентов позволяют указывать различные имена при помощи параметров <span style=" font-family:'Courier New,courier';">-u</span> или <span style=" font-family:'Courier New,courier';">--user</span>. Это означает, что невозможно обеспечить безопасность базы данных, если не все имена пользователей MySQL снабжены паролями: ведь можно попытаться подсоединиться к серверу, используя любое имя, а если воспользоваться именем, которому не назначен пароль, то удастся войти в систему. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Имена пользователей MySQL могут содержать до 16 символов. Имена пользователей Unix обычно ограничены 8 символами. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Пароли MySQL не имеют никакого отношения к паролям Unix. Не существует связи между паролем, который используется для входа в Unix, и паролем, необходимым для доступа к базе данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">MySQL шифрует пароли при помощи своего алгоритма, который отличается от алгоритма Unix, используемого во время входа в систему. Описание функций <span style=" font-family:'Courier New,courier';">PASSWORD()</span> и <span style=" font-family:'Courier New,courier';">ENCRYPT()</span> можно найти в разделе See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#miscellaneous-functions"><span style=" text-decoration: underline; color:#0000ff;">Раздел 6.3.6.2, «Разные функции»</span></a>. Обратите внимание: даже если ваш пароль хранится в 'зашифрованном виде', то знания этого 'зашифрованного' пароля будет достаточно, чтобы подсоединиться к серверу MySQL! </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пользователи MySQL и их привилегии обычно создаются при помощи команды </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.1, «Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">GRANT</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> и </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REVOKE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если подсоединение к серверу MySQL осуществляется с клиента командной строки, необходимо указать пароль при помощи параметра </span><span style=" font-family:'Courier New,courier';">--password=your-password</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#connecting"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.2.8, «Соединение с сервером MySQL»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql --user=monty --password=guess database_name</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если необходимо, чтобы клиент запрашивал пароль, то следует указать </span><span style=" font-family:'Courier New,courier';">--password</span><span style=" font-family:'Ubuntu';"> без каких-либо аргументов </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql --user=monty --password database_name</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">или сокращенный вариант этого параметра: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql -u monty -p database_name</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание на то, что в последнем примере </span><span style=" font-family:'Courier New,courier';">database_name</span><span style=" font-family:'Ubuntu';"> не является паролем. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если необходимо указать пароль при помощи параметра </span><span style=" font-family:'Courier New,courier';">-p</span><span style=" font-family:'Ubuntu';">, то следует поступить следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql -u monty -pguess database_name</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В некоторых системах вызов библиотеки, который MySQL использует для запроса пароля, автоматически обрезает пароль до 8 символов. В самом MySQL не существует никаких ограничений на длину пароля. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="privilege-changes"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.3.3. Когда изменения в привилегиях вступают в силу</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При запуске </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> все таблицы назначения привилегий загружаются в память и с этого момента привилегии вступают в силу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Изменения, которые вносятся в таблицы назначения привилегий при помощи команд </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">REVOKE</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">SET PASSWORD</span><span style=" font-family:'Ubuntu';">, учитываются сервером немедленно. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вносить изменения в таблицы назначения привилегий вручную (при помощи команд </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';"> и т.д.), необходимо запускать оператор </span><span style=" font-family:'Courier New,courier';">FLUSH PRIVILEGES</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-privileges</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">mysqladmin reload</span><span style=" font-family:'Ubuntu';">, чтобы указать серверу на необходимость перезагрузить эти таблицы. В противном случае изменения не вступят в силу, пока сервер не будет перезагружен. Если внести изменения вручную, но не перезагрузить таблицы назначения привилегий, то останется только удивляться, почему внесенные изменения не действуют! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Когда сервер замечает, что были внесены изменения в таблицы назначения привилегий, он обрабатывает установленные соединения клиентов следующим образом: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Изменения привилегий таблиц и столбцов вступают в силу при следующем запросе клиента </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Изменения привилегий баз данных вступают в силу при следующем использовании команды <span style=" font-family:'Courier New,courier';">USE db_name</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Изменения глобальных привилегий и изменения пароля вступают в силу при следующем подсоединении пользователя. </li></ul>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="default-privileges"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.3.4. Задание изначальных привилегий MySQL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После установки MySQL изначальные привилегии доступа задаются при помощи </span><span style=" font-family:'Courier New,courier';">scripts/mysql_install_db</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/installing.html#quick-install"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 2.3.1, «Обзор быстрой установки»</span></a><span style=" font-family:'Ubuntu';">. Скрипт </span><span style=" font-family:'Courier New,courier';">mysql_install_db</span><span style=" font-family:'Ubuntu';"> запускает сервер </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, а затем инициализирует таблицы предоставления привилегий со следующим набором привилегий: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В качестве суперпользователя создается MySQL <span style=" font-family:'Courier New,courier';">root</span> который может делать все, что угодно. Соединения должны устанавливаться с локального компьютера. </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Примечание</span><span style=" font-family:'Ubuntu';">: Изначально пароль </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';"> пуст, поэтому кто угодно может подсоединиться в качестве </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Ubuntu'; font-style:italic;">без пароля</span><span style=" font-family:'Ubuntu';"> и получить все привилегии. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Создается анонимный пользователь, который может выполнять любые операции над базами данных с именами <span style=" font-family:'Courier New,courier';">test</span> или начинающимися с <span style=" font-family:'Courier New,courier';">test_</span>. Соединения должны устанавливаться с локального компьютера. Это означает, что любой локальный пользователь может подключиться без пароля и будет воспринят сервером как анонимный пользователь. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Остальные привилегии запрещены. Например, обычный пользователь не может использовать команды <span style=" font-family:'Courier New,courier';">mysqladmin shutdown</span> или <span style=" font-family:'Courier New,courier';">mysqladmin processlist</span>. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Примечание</span><span style=" font-family:'Ubuntu';">: В Windows принятые по умолчанию привилегии отличаются от указанных. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/installing.html#windows-running"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 2.6.2.3, «Работа MySQL в среде Windows»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Поскольку сразу после установки программа совершенно не защищена, первым делом необходимо задать пароль для пользователя MySQL </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';">. Это можно сделать следующим образом (обратите внимание, что пароль указывается при помощи функции </span><span style=" font-family:'Courier New,courier';">PASSWORD()</span><span style=" font-family:'Ubuntu';">): </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -u root mysql</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SET PASSWORD FOR root@localhost=PASSWORD('new_password');</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Опытные пользователи могут работать непосредственно с таблицами назначения привилегий: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -u root mysql</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">UPDATE user SET Password=PASSWORD('new_password')</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">WHERE user='root';</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FLUSH PRIVILEGES;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Еще один способ задать пароль - воспользоваться командой </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqladmin -u root password new_password</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Изменять пароли других пользователей могут только пользователи с правом записи/обновления базы данных </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">. Все обычные пользователи (не анонимные) могут модифицировать только свой собственный пароль при помощи указанных выше команд или команды </span><span style=" font-family:'Courier New,courier';">SET PASSWORD=PASSWORD('new_password')</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание на то, что если пароль в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> обновляется напрямую при помощи первого метода, требуется указать серверу на необходимость перезагрузки таблиц привилегий (при помощи команды </span><span style=" font-family:'Courier New,courier';">FLUSH PRIVILEGES</span><span style=" font-family:'Ubuntu';">), иначе изменения не будут учтены. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После того, как был задан пароль </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';">, этот пароль необходимо будет вводить, подсоединяясь к серверу как </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно оставить пароль </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';"> пустым, тогда не придется его указывать во время проведения дополнительных установок и тестирования. Тем не менее, обязательно укажите его, прежде чем использовать сервер для любой реальной работы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ознакомьтесь со скриптом </span><span style=" font-family:'Courier New,courier';">scripts/mysql_install_db</span><span style=" font-family:'Ubuntu';">, чтобы увидеть, как задавать привилегии по умолчанию. Данный скрипт можно использовать как основу для добавления других пользователей. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если необходимо, чтобы изначальные привилегии отличались от указанных выше, можно изменить базу </span><span style=" font-family:'Courier New,courier';">mysql_install_db</span><span style=" font-family:'Ubuntu';"> еще до ее запуска. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы полностью заново создать таблицы предоставления привилегий, удалите все файлы с расширениями </span><span style=" font-family:'Courier New,courier';">.frm</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">.MYI</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';"> в каталоге, где находится база данных </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> (это каталог с именем </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> в каталоге базы данных, который выводится на экран при запуске команды </span><span style=" font-family:'Courier New,courier';">mysqld --help</span><span style=" font-family:'Ubuntu';">). Затем запустите скрипт </span><span style=" font-family:'Courier New,courier';">mysql_install_db</span><span style=" font-family:'Ubuntu';"> (возможно, после добавления в него необходимых привилегий). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Примечание</span><span style=" font-family:'Ubuntu';">: в более старых, чем 3.22.10, версиях MySQL файлы с расширением </span><span style=" font-family:'Courier New,courier';">.frm</span><span style=" font-family:'Ubuntu';"> удалять не следует. Если же случайно они были удалены, их следует восстановить, скопировав из дистрибутива MySQL до запуска </span><span style=" font-family:'Courier New,courier';">mysql_install_db</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="adding-users"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.3.5. Добавление новых пользователей в MySQL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пользователей можно добавлять двумя различными способами - при помощи команды </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> или напрямую в таблицы назначения привилегий MySQL. Предпочтительнее использовать команду </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> - этот способ проще и дает меньше ошибок. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.1, «Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">GRANT</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> и </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REVOKE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Существует также большое количество программ (таких как </span><span style=" font-family:'Courier New,courier';">phpmyadmin</span><span style=" font-family:'Ubuntu';">), которые служат для создания и администрирования пользователей. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В приведенных ниже примерах демонстрируется, как использовать клиент </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> для задания новых пользователей. В примерах предполагается, что привилегии установлены в соответствии с принятыми по умолчанию значениями, описанными в предыдущем разделе. Это означает, что для внесения изменений на том же компьютере, где запущен </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, необходимо подсоединиться к серверу как пользователь MySQL </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';">, и у пользователя </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';"> должна быть привилегия </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> для базы данных </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">, а также административная привилегия </span><span style=" font-family:'Courier New,courier';">RELOAD</span><span style=" font-family:'Ubuntu';">. Кроме того, если был изменен пароль пользователя </span><span style=" font-family:'Courier New,courier';">root</span><span style=" font-family:'Ubuntu';">, его необходимо указать здесь для команды </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Новых пользователей можно добавлять, используя команду </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql --user=root mysql</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT ALL PRIVILEGES ON *.* TO monty@localhost</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY 'some_pass' WITH GRANT OPTION;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT ALL PRIVILEGES ON *.* TO monty&quot;%&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        -&gt; IDENTIFIED BY 'some_pass' WITH GRANT OPTION;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT RELOAD,PROCESS ON *.* TO admin@localhost;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT USAGE ON *.* TO dummy@localhost;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эти команды </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> создают трех новых пользователей: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">monty</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Полноценный суперпользователь - он может подсоединяться к серверу откуда угодно, но должен использовать для этого пароль </span><span style=" font-family:'Courier New,courier';">some_pass</span><span style=" font-family:'Ubuntu';">. Обратите внимание на то, что мы должны применить операторы </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> как для </span><span style=" font-family:'Courier New,courier';">monty@localhost</span><span style=" font-family:'Ubuntu';">, так и для </span><span style=" font-family:'Courier New,courier';">monty@&quot;%&quot;</span><span style=" font-family:'Ubuntu';">. Если не добавить запись с </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';">, запись анонимного пользователя для </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';">, которая создается при помощи </span><span style=" font-family:'Courier New,courier';">mysql_install_db</span><span style=" font-family:'Ubuntu';">, будет иметь преимущество при подсоединении с локального компьютера, так как в ней указано более определенное значение для поля </span><span style=" font-family:'Courier New,courier';">Host</span><span style=" font-family:'Ubuntu';">, и она расположена раньше в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">admin</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пользователь, который может подсоединяться с </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';"> без пароля; ему назначены административные привилегии </span><span style=" font-family:'Courier New,courier';">RELOAD</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">PROCESS</span><span style=" font-family:'Ubuntu';">. Эти привилегии позволяют пользователю запускать команды </span><span style=" font-family:'Courier New,courier';">mysqladmin reload</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqladmin refresh</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-*</span><span style=" font-family:'Ubuntu';">, а также </span><span style=" font-family:'Courier New,courier';">mysqladmin processlist</span><span style=" font-family:'Ubuntu';">. Ему не назначено никаких привилегий, относящихся к базам данных (их можно назначить позже, дополнительно применив оператор </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">dummy</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пользователь, который может подсоединяться к серверу без пароля, но только с локального компьютера. Все глобальные привилегии установлены в значение </span><span style=" font-family:'Courier New,courier';">'N'</span><span style=" font-family:'Ubuntu';">-тип привилегии </span><span style=" font-family:'Courier New,courier';">USAGE</span><span style=" font-family:'Ubuntu';">, который позволяет создавать пользователей без привилегий. Предполагается, что относящиеся к базам данных привилегии будут назначены позже. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно напрямую добавить точно такую же информацию о пользователе при помощи оператора </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">, а затем дать серверу команду перезагрузить таблицы назначения привилегий: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql --user=root mysql</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO user VALUES('localhost','monty',PASSWORD('some_pass'),</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;    </span><span style=" font-family:'Courier New,courier'; font-weight:600;">'Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO user VALUES('%','monty',PASSWORD('some_pass'),</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;    </span><span style=" font-family:'Courier New,courier'; font-weight:600;">'Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y','Y');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO user SET Host='localhost',User='admin',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">Reload_priv='Y', Process_priv='Y';</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO user (Host,User,Password)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">VALUES('localhost','dummy','');</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FLUSH PRIVILEGES;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В зависимости от версии MySQL в примере, приведенном выше, может указываться различное количество значений </span><span style=" font-family:'Courier New,courier';">'Y'</span><span style=" font-family:'Ubuntu';"> (в версиях до Version 3.22.11 было меньше столбцов привилегий). Для пользователя </span><span style=" font-family:'Courier New,courier';">admin</span><span style=" font-family:'Ubuntu';"> используется более удобочитаемый расширенный синтаксис команды </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">, который доступен начиная с версии 3.22.11. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание: чтобы создать суперпользователя, необходимо создать запись таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> с полями привилегий, установленными в значение </span><span style=" font-family:'Courier New,courier';">'Y'</span><span style=" font-family:'Ubuntu';">. Нет необходимости задавать значения в записях таблиц </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Столбцы привилегий в таблице user в последнем операторе </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> (для пользователя </span><span style=" font-family:'Courier New,courier';">dummy</span><span style=" font-family:'Ubuntu';">) не были заданы явно, поэтому данным столбцам был присвоено принятое по умолчанию значение </span><span style=" font-family:'Courier New,courier';">'N'</span><span style=" font-family:'Ubuntu';">. Точно так же действует команда </span><span style=" font-family:'Courier New,courier';">GRANT USAGE</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В приведенном ниже примере добавляется пользователь </span><span style=" font-family:'Courier New,courier';">custom</span><span style=" font-family:'Ubuntu';">, который может подсоединяться с компьютеров </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">server.domain</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">whitehouse.gov</span><span style=" font-family:'Ubuntu';">. Он хочет получать доступ к базе данных </span><span style=" font-family:'Courier New,courier';">bankaccount</span><span style=" font-family:'Ubuntu';"> только с компьютера </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';">, к базе данных </span><span style=" font-family:'Courier New,courier';">expenses</span><span style=" font-family:'Ubuntu';"> - только с </span><span style=" font-family:'Courier New,courier';">whitehouse.gov</span><span style=" font-family:'Ubuntu';">, и к базе данных </span><span style=" font-family:'Courier New,courier';">customer</span><span style=" font-family:'Ubuntu';"> - со всех трех компьютеров, а также использовать пароль </span><span style=" font-family:'Courier New,courier';">stupid</span><span style=" font-family:'Ubuntu';"> при подсоединении со всех трех компьютеров. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы задать эти привилегии пользователя при помощи оператора </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">, выполните следующие команды: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql --user=root mysql</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">ON bankaccount.*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">TO custom@localhost</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY 'stupid';</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">ON expenses.*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">TO custom@whitehouse.gov</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY 'stupid';</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT SELECT,INSERT,UPDATE,DELETE,CREATE,DROP</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">ON customer.*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">TO custom@'%'</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY 'stupid';</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Привилегии для пользователя custom мы назначаем потому, что этот пользователь хочет получать доступ к MySQL как с локального компьютера через сокеты Unix, так и с удаленного компьютера </span><span style=" font-family:'Courier New,courier';">whitehouse.gov</span><span style=" font-family:'Ubuntu';"> через протокол TCP/IP. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы задать привилегии пользователя путем непосредственного внесения изменений в таблицы назначения привилегий, выполните следующие команды (обратите внимание на команду </span><span style=" font-family:'Courier New,courier';">FLUSH PRIVILEGES</span><span style=" font-family:'Ubuntu';"> в конце примера): </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql --user=root mysql</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO user (Host,User,Password)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">VALUES('localhost','custom',PASSWORD('stupid'));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO user (Host,User,Password)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">VALUES('server.domain','custom',PASSWORD('stupid'));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO user (Host,User,Password)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">VALUES('whitehouse.gov','custom',PASSWORD('stupid'));</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO db</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">(Host,Db,User,Select_priv,Insert_priv,Update_priv,Delete_priv,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">Create_priv,Drop_priv)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">VALUES</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">('localhost','bankaccount','custom','Y','Y','Y','Y','Y','Y');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO db</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">(Host,Db,User,Select_priv,Insert_priv,Update_priv,Delete_priv,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">Create_priv,Drop_priv)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">VALUES</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">('whitehouse.gov','expenses','custom','Y','Y','Y','Y','Y','Y');</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO db</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">(Host,Db,User,Select_priv,Insert_priv,Update_priv,Delete_priv,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">Create_priv,Drop_priv)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">VALUES('%','customer','custom','Y','Y','Y','Y','Y','Y');</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FLUSH PRIVILEGES;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Первые три оператора </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> добавляют в таблицу user записи, которые позволят пользователю </span><span style=" font-family:'Courier New,courier';">custom</span><span style=" font-family:'Ubuntu';"> подключаться с различных компьютеров с указанным паролем, но не дают ему никаких привилегий (все привилегии установлены в принятое по умолчанию значение </span><span style=" font-family:'Courier New,courier';">'N'</span><span style=" font-family:'Ubuntu';">). Следующие три оператора </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> добавляют записи в таблицу </span><span style=" font-family:'Courier New,courier';">db</span><span style=" font-family:'Ubuntu';">, в которой назначаются привилегии для пользователя </span><span style=" font-family:'Courier New,courier';">custom</span><span style=" font-family:'Ubuntu';"> по отношению к базам данных </span><span style=" font-family:'Courier New,courier';">bankaccount</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">expenses</span><span style=" font-family:'Ubuntu';"> и customer, но только если доступ осуществляется с определенных компьютеров. Как обычно, после внесения изменений непосредственно в таблицы назначения привилегий серверу необходимо дать команду на перезагрузку этих таблиц (при помощи </span><span style=" font-family:'Courier New,courier';">FLUSH PRIVILEGES</span><span style=" font-family:'Ubuntu';">), чтобы внесенные изменения вступили в силу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если необходимо предоставить определенному пользователю доступ с любого компьютера к определенному домену, можно воспользоваться оператором </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT ...</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">ON *.*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">TO myusername&quot;%.mydomainname.com&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;     </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY 'mypassword';</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы сделать то же самое путем непосредственного внесения изменений в таблицы назначения привилегий, выполните следующие действия: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO user VALUES ('%.mydomainname.com', 'myusername',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt;       </span><span style=" font-family:'Courier New,courier'; font-weight:600;">PASSWORD('mypassword'),...);</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FLUSH PRIVILEGES;</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="user-resources"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.3.6. Ограничение ресурсов пользователя</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с MySQL версии 4.0.2 можно ограничивать определенные ресурсы, выделяемые пользователям. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">До этой версии единственным возможным методом ограничения использования ресурсов сервера MySQL была установка переменной запуска </span><span style=" font-family:'Courier New,courier';">max_user_connections</span><span style=" font-family:'Ubuntu';"> в значение, отличное от нуля. Но этот метод действует только на глобальном уровне и не позволяет управлять отдельными пользователями. Он может представлять определенный интерес только для провайдеров услуг Internet. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На уровне отдельного пользователя теперь введено управление следующими тремя ресурсами: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Количество всех запросов в час: все команды, которые может запускать пользователь. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Количество всех обновлений в час: любая команда, которая изменяет таблицу или базу данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Количество соединений, сделанных за час: новые соединения, открытые за час. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пользователь в упомянутом выше контексте представляет собой отдельную запись в таблице user, которая уникальным образом идентифицируется своими столбцами </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">host</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">По умолчанию все пользователи не ограничены в использовании указанных выше ресурсов только в случае, только если эти ограничения не наложены на них. Данные ограничения могут быть наложены </span><span style=" font-family:'Ubuntu'; font-weight:600;">только</span><span style=" font-family:'Ubuntu';"> при помощи глобальной команды </span><span style=" font-family:'Courier New,courier';">GRANT (*.*)</span><span style=" font-family:'Ubuntu';"> с использованием следующего синтаксиса: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">GRANT ... WITH MAX_QUERIES_PER_HOUR N1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">         MAX_UPDATES_PER_HOUR N2</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">         MAX_CONNECTIONS_PER_HOUR N3;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно указать любое сочетание приведенных выше ресурсов. N1, N2 и N3 являются целыми числами, представляющими собой значения количеств запросов/обновлений/соединений в час. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если пользователь в течение часа достигает предела любого из вышеуказанных значений, его соединение будет прервано с выдачей соответствующего сообщения об ошибке. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Текущие значения для определенного пользователя могут быть сброшены (установлены в нуль), если воспользоваться оператором </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> с любым из приведенных выше пунктов, включая оператор </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';"> с текущими значениями. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Кроме того, текущие значения для всех пользователей сбрасываются, если производится перезагрузка привилегий (на сервере или при использовании команды </span><span style=" font-family:'Courier New,courier';">mysqladmin reload</span><span style=" font-family:'Ubuntu';">) или если выполняется команда </span><span style=" font-family:'Courier New,courier';">FLUSH USER_RESOURCES</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта функция включается сразу после того, как на пользователя будут наложены ограничения при помощи команды </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Необходимым условием для включения данной функции является наличие в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> базы данных </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> дополнительного столбца, как это определено в скриптах создания таблиц </span><span style=" font-family:'Courier New,courier';">mysql_install_db</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">mysql_install_db.sh</span><span style=" font-family:'Ubuntu';"> в подкаталоге </span><span style=" font-family:'Courier New,courier';">scripts</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="passwords"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.3.7. Задание паролей</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В большинстве случаев для задания пользователей и их паролей следует пользоваться командой </span><span style=" font-family:'Courier New,courier';">GRANT</span><span style=" font-family:'Ubuntu';">, поэтому приведенная ниже информация предназначена для опытных пользователей. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.1, «Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">GRANT</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> и </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REVOKE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В примерах, приведенных в предыдущих разделах, демонстрируется важный принцип, который заключается в следующем: при сохранении непустых паролей с использованием операторов </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';"> для их шифрования должна применяться функция </span><span style=" font-family:'Courier New,courier';">PASSWORD()</span><span style=" font-family:'Ubuntu';">. Это делается потому, что в таблице </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> пароли хранятся в зашифрованном виде, а не как простой текст. Предположим, что мы упустили это из виду и задали пароли следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -u root mysql</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO user (Host,User,Password)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">VALUES('%','jeffrey','biscuit');</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FLUSH PRIVILEGES;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В результате выполнения этих команд в таблице user будет сохранено значение пароля </span><span style=" font-family:'Courier New,courier';">biscuit</span><span style=" font-family:'Ubuntu';"> в виде простого текста. Когда пользователь </span><span style=" font-family:'Courier New,courier';">jeffrey</span><span style=" font-family:'Ubuntu';"> попытается подсоединиться к серверу, используя этот пароль, клиент </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> зашифрует его при помощи функции </span><span style=" font-family:'Courier New,courier';">PASSWORD()</span><span style=" font-family:'Ubuntu';">, сгенерирует вектор аутентификации, основанный на зашифрованном пароле и случайно выбранном числе, полученном от сервера, и направит результат на сервер. Сервер использует значение </span><span style=" font-family:'Courier New,courier';">password</span><span style=" font-family:'Ubuntu';"> из таблицы </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> (в данном случае, это незашифрованное значение </span><span style=" font-family:'Courier New,courier';">biscuit</span><span style=" font-family:'Ubuntu';">), чтобы осуществить точно такие же вычисления, и сравнит результаты. Результаты не совпадут, и сервер не позволит установить соединение: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -u jeffrey -pbiscuit test</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Access denied</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Перед занесением в таблицу </span><span style=" font-family:'Courier New,courier';">user</span><span style=" font-family:'Ubuntu';"> пароли необходимо зашифровывать, поэтому оператор </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> должен использоваться следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">INSERT INTO user (Host,User,Password)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">VALUES('%','jeffrey',PASSWORD('biscuit'));</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При использовании оператора </span><span style=" font-family:'Courier New,courier';">SET PASSWORD</span><span style=" font-family:'Ubuntu';"> также необходимо применять функцию </span><span style=" font-family:'Courier New,courier';">PASSWORD()</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SET PASSWORD FOR jeffrey&quot;%&quot; = PASSWORD('biscuit');</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если пароль задается при помощи оператора </span><span style=" font-family:'Courier New,courier';">GRANT ... IDENTIFIED BY</span><span style=" font-family:'Ubuntu';"> или команды </span><span style=" font-family:'Courier New,courier';">mysqladmin password</span><span style=" font-family:'Ubuntu';">, нет необходимости использовать функцию </span><span style=" font-family:'Courier New,courier';">PASSWORD()</span><span style=" font-family:'Ubuntu';">. Обе эти команды самостоятельно производят шифровку пароля, поэтому пароль следует указывать как </span><span style=" font-family:'Courier New,courier';">biscuit</span><span style=" font-family:'Ubuntu';">, например, таким образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT USAGE ON *.* TO jeffrey&quot;%&quot; IDENTIFIED BY 'biscuit';</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">или </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqladmin -u jeffrey password biscuit</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Примечание: Функция </span><span style=" font-family:'Courier New,courier';">PASSWORD()</span><span style=" font-family:'Ubuntu';"> шифрует пароли отличным от Unix образом. Не следует полагать, что если ваши пароли для Unix и для MySQL совпадают, то функция </span><span style=" font-family:'Courier New,courier';">PASSWORD()</span><span style=" font-family:'Ubuntu';"> выдаст точно такой же результат шифрования, как и файл паролей Unix. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#user-names"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.2, «Имена пользователей MySQL и пароли»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="password-security"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.3.8. Обеспечение безопасности своего пароля</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не рекомендуется указывать пароль таким образом, чтобы его могли подобрать другие пользователи. Ниже приведены методы, которыми можно пользоваться при задании своего пароля при запуске указанных клиентских программ, а также степенью риска для каждого из методов: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Никогда не заносите пароль обычного доступа в таблицу <span style=" font-family:'Courier New,courier';">mysql.user</span>. Зная даже зашифрованный пароль пользователя, можно войти в систему под именем этого пользователя. Пароли шифруются только для того, чтобы нельзя было увидеть, какой именно пароль используется (если вы используете один и тот же пароль для разных приложений). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Использование параметров <span style=" font-family:'Courier New,courier';">-pyour_pass</span> или <span style=" font-family:'Courier New,courier';">--password=your_pass</span> в командной строке удобно, но не очень безопасно, так как ваш пароль становится видимым для системных статусных утилит (таких как <span style=" font-family:'Courier New,courier';">ps</span>), и другие пользователи могут просмотреть командные строки (во время запуска клиенты MySQL обычно перезаписывают аргументы командной строки нулями, но существует небольшой промежуток времени, на протяжении которого значение остается видимым). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Используйте параметр <span style=" font-family:'Courier New,courier';">-p</span> или <span style=" font-family:'Courier New,courier';">--password</span> (без указания значения <span style=" font-family:'Courier New,courier';">your_pass</span>). В этом случае программа клиента запрашивает пароль с терминала: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -u user_name -p</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Enter password: ********</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ваш пароль будет представлен символами ‘</span><span style=" font-family:'Courier New,courier';">*</span><span style=" font-family:'Ubuntu';">’. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вводить пароль таким образом намного безопаснее, чем из командной строки, поскольку он невидим для остальных пользователей. Тем не менее, этот метод подходит только для тех программ, которые вы запускаете самостоятельно. Если клиент требуется запустить из скрипта, то возможности ввести пароль с терминала не будет. В некоторых системах первая строка скрипта считывается и неправильно распознается как ваш пароль! </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id361890"></a>Храните свой файл в файле конфигурации. Например, можно записать свои пароли в разделе <span style=" font-family:'Courier New,courier';">[client]</span> файла <span style=" font-family:'Courier New,courier';">.my.cnf</span> в своем каталоге: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[client]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">password=your_pass</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если пароль хранится в </span><span style=" font-family:'Courier New,courier';">.my.cnf</span><span style=" font-family:'Ubuntu';">, файл не должен быть доступен для чтения или записи для всех или для отдельных групп пользователей. Убедитесь, что права доступа к файлу установлены в 400 или 600. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Можно хранить свой пароль в переменной окружения <span style=" font-family:'Courier New,courier';">MYSQL_PWD</span>, но этот метод считается очень небезопасным и не должен использоваться. В некоторые версии ps включена возможность отображать переменные окружения работающего процесса. Поэтому если задать свой пароль при помощи <span style=" font-family:'Courier New,courier';">MYSQL_PWD</span>, он будет виден для всех,. Даже в системах без такой версии <span style=" font-family:'Courier New,courier';">ps</span>, неразумно предполагать, что не существует другого метода получить информацию по переменным окружения. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" text-decoration: underline; color:#0000ff;">Приложение F, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" font-style:italic; text-decoration: underline; color:#0000ff;">Переменные окружения</span></a>. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Исходя из всего сказанного выше, самыми безопасными методами указания пароля являются запрос программы клиента на ввод пароля с терминала или указание пароля в защищенном надлежащим образом файле </span><span style=" font-family:'Courier New,courier';">.my.cnf</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="secure-connections"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.3.9. Использование безопасных соединений</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#secure-basics"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.9.1. Основные сведения</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#secure-requirements"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.9.2. Требования</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#secure-create-certs"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.9.3. Создание SSL-сертификатов</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#secure-grant"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.3.9.4. Параметры команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#secure-grant"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">GRANT</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="secure-basics"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.3.9.1. Основные сведения</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">MySQL поддерживает шифрованные SSL-соединения. Для лучшего понимания того, как в MySQL используется SSL, мы приводим здесь основные сведения по SSL и X509. Пользователи, которые уже знакомы с данным протоколом и стандартом, эту часть могут пропустить. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">По умолчанию в MySQL используются незашифрованные соединения между клиентом и сервером. Это означает, что просматривать все данные, передаваемые между клиентом и сервером, может кто угодно. На практике можно даже изменять данные во время передачи их от клиента к серверу и наоборот. Помимо того, иногда возникает необходимость передать действительно секретные данные через общедоступную сеть - в таких случаях использование незашифрованных соединений просто неприемлемо. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В протоколе SSL используются различные алгоритмы шифрования, обеспечивающие безопасность для данных, передаваемых через общедоступные сети. Этот протокол содержит средства, позволяющие обнаруживать любые изменения, потери и повторы данных. В протоколе SSL также применяются алгоритмы для проведения идентификации при помощи стандарта X509. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Шифровка - это метод, позволяющий сделать прочтение любых данных невозможным. Фактически при современном положении дел для алгоритмов шифрования требуется использование дополнительных элементов безопасности. Они должны обеспечивать противодействие многим видам известных на настоящий момент атак, таких как изменение порядка зашифрованных сообщений или повторение данных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Стандарт X509 позволяет производить идентификацию в Internet. Чаще всего он используется в приложениях электронной коммерции. Упрощенно схема его применения выглядит следующим образом: существует некая организация под названием &quot;Certificate Authority&quot; (можно перевести как ``Сертификационное Бюро''. - Прим. пер.), которая назначает электронные сертификаты всем, кому они нужны. Сертификаты основываются на асимметричных алгоритмах шифрования, содержащих два ключа - публичный и секретный. Владелец сертификата может подтвердить свою личность, предъявив свой сертификат другой стороне. Сертификат состоит из публичного ключа владельца. Любые данные, зашифрованные при помощи этого публичного ключа могут быть расшифрованы только при помощи соответствующего секретного ключа, который находится у владельца сертификата. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В MySQL по умолчанию не используется шифрование при соединениях, так как это значительно замедляет обмен данными между клиентом и сервером. Любые дополнительные функции приводят к дополнительной нагрузке для компьютера, а шифрование данных требует интенсивной работы процессора, что может вызвать задержку выполнения основных задач MySQL. По умолчанию MySQL настроен на максимально быструю работу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы хотите получить дополнительную информацию о SSL/X509/шифровании, необходимо воспользоваться своим любимым поисковым сервером Internet и произвести поиск по словам, которые вас интересуют. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="secure-requirements"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.3.9.2. Требования</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для того чтобы SSL-соединения могли работать с MySQL, необходимо выполнить следующие действия: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Установите библиотеку OpenSSL. Тестирование MySQL производилось с библиотекой OpenSSL 0.9.6. <a href="http://www.openssl.org/"><span style=" text-decoration: underline; color:#0000ff;">http://www.openssl.org/</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Выполните настройку компиляции MySQL (<span style=" font-family:'Courier New,courier';">configure</span>) при помощи параметров <span style=" font-family:'Courier New,courier';">--with-vio --with-openssl</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если используется старая версия MySQL, то необходимо обновить таблицу <span style=" font-family:'Courier New,courier';">mysql.user</span> путем добавления в нее определенных новых столбцов. Это можно сделать, запустив скрипт <span style=" font-family:'Courier New,courier';">mysql_fix_privilege_tables.sh</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Проверить, скомпилирована ли в запущенном сервере <span style=" font-family:'Courier New,courier';">mysqld</span> библиотека OpenSSL можно, убедившись, что <span style=" font-family:'Courier New,courier';">SHOW VARIABLES LIKE 'have_openssl'</span> показывает <span style=" font-family:'Courier New,courier';">YES</span>. </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="secure-create-certs"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.3.9.3. Создание SSL-сертификатов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вот пример, как создаются SSL-сертификаты для MySQL: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">DIR=`pwd`/openssl</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PRIV=$DIR/private</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mkdir $DIR $PRIV $DIR/newcerts</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cp /usr/share/ssl/openssl.cnf $DIR</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">replace ./demoCA $DIR -- $DIR/openssl.cnf</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># создаем необходимые файлы: $database, $serial и каталог $new_certs_dir </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># (опционально)</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">touch $DIR/index.txt</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">echo &quot;01&quot; &gt; $DIR/serial</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Создаем Certificate Authority(CA)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">openssl req -new -x509 -keyout $PRIV/cakey.pem -out $DIR/cacert.pem \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -config $DIR/openssl.cnf</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Пример вывода:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Using configuration from /home/monty/openssl/openssl.cnf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Generating a 1024 bit RSA private key</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># ................++++++</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># .........++++++</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># writing new private key to '/home/monty/openssl/private/cakey.pem'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Enter PEM pass phrase:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Verifying password - Enter PEM pass phrase:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># -----</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># You are about to be asked to enter information that will be incorporated</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># into your certificate request.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># What you are about to enter is what is called a Distinguished Name or a DN.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># There are quite a few fields but you can leave some blank</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># For some fields there will be a default value,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># If you enter '.', the field will be left blank.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># -----</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Country Name (2 letter code) [AU]:FI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># State or Province Name (full name) [Some-State]:.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Locality Name (eg, city) []:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Organizational Unit Name (eg, section) []:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Common Name (eg, YOUR name) []:MySQL admin</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Email Address []:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Создаем server-request и ключ</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">openssl req -new -keyout $DIR/server-key.pem -out \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    $DIR/server-req.pem -days 3600 -config $DIR/openssl.cnf</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Пример вывода:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Using configuration from /home/monty/openssl/openssl.cnf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Generating a 1024 bit RSA private key</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># ..++++++</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># ..........++++++</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># writing new private key to '/home/monty/openssl/server-key.pem'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Enter PEM pass phrase:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Verifying password - Enter PEM pass phrase:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># -----</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># You are about to be asked to enter information that will be incorporated</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># into your certificate request.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># What you are about to enter is what is called a Distinguished Name or a DN.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># There are quite a few fields but you can leave some blank</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># For some fields there will be a default value,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># If you enter '.', the field will be left blank.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># -----</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Country Name (2 letter code) [AU]:FI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># State or Province Name (full name) [Some-State]:.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Locality Name (eg, city) []:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Organizational Unit Name (eg, section) []:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Common Name (eg, YOUR name) []:MySQL server</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Email Address []:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Please enter the following 'extra' attributes</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># to be sent with your certificate request</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># A challenge password []:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># An optional company name []:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Удаляем парольную фразу из ключа (опционально)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">openssl rsa -in $DIR/server-key.pem -out $DIR/server-key.pem</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Подписываем сертификат сервера</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">openssl ca  -policy policy_anything -out $DIR/server-cert.pem \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -config $DIR/openssl.cnf -infiles $DIR/server-req.pem</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Пример вывода:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Using configuration from /home/monty/openssl/openssl.cnf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Enter PEM pass phrase:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Check that the request matches the signature</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Signature ok</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># The Subjects Distinguished Name is as follows</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># countryName           :PRINTABLE:'FI'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># organizationName      :PRINTABLE:'MySQL AB'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># commonName            :PRINTABLE:'MySQL admin'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Certificate is to be certified until Sep 13 14:22:46 2003 GMT (365 days)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Sign the certificate? [y/n]:y</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># 1 out of 1 certificate requests certified, commit? [y/n]y</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Write out database with 1 new entries</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Data Base Updated</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Создаем client request и ключ</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">openssl req -new -keyout $DIR/client-key.pem -out \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    $DIR/client-req.pem -days 3600 -config $DIR/openssl.cnf</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Пример вывода:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Using configuration from /home/monty/openssl/openssl.cnf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Generating a 1024 bit RSA private key</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># .....................................++++++</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># .............................................++++++</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># writing new private key to '/home/monty/openssl/client-key.pem'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Enter PEM pass phrase:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Verifying password - Enter PEM pass phrase:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># -----</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># You are about to be asked to enter information that will be incorporated</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># into your certificate request.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># What you are about to enter is what is called a Distinguished Name or a DN.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># There are quite a few fields but you can leave some blank</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># For some fields there will be a default value,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># If you enter '.', the field will be left blank.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># -----</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Country Name (2 letter code) [AU]:FI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># State or Province Name (full name) [Some-State]:.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Locality Name (eg, city) []:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Organization Name (eg, company) [Internet Widgits Pty Ltd]:MySQL AB</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Organizational Unit Name (eg, section) []:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Common Name (eg, YOUR name) []:MySQL user</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Email Address []:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Please enter the following 'extra' attributes</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># to be sent with your certificate request</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># A challenge password []:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># An optional company name []:</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Удаляем парольную фразу из ключа (опционально)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">openssl rsa -in $DIR/client-key.pem -out $DIR/client-key.pem</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Подписываем клиентский сертификат</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">openssl ca  -policy policy_anything -out $DIR/client-cert.pem \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -config $DIR/openssl.cnf -infiles $DIR/client-req.pem</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Пример вывода:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Using configuration from /home/monty/openssl/openssl.cnf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Enter PEM pass phrase:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Check that the request matches the signature</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Signature ok</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># The Subjects Distinguished Name is as follows</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># countryName           :PRINTABLE:'FI'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># organizationName      :PRINTABLE:'MySQL AB'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># commonName            :PRINTABLE:'MySQL user'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Certificate is to be certified until Sep 13 16:45:17 2003 GMT (365 days)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Sign the certificate? [y/n]:y</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># 1 out of 1 certificate requests certified, commit? [y/n]y</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Write out database with 1 new entries</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Data Base Updated</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Создаем такой my.cnf, который позволит нам протестировать сертификаты</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cnf=&quot;&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cnf=&quot;$cnf [client]&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cnf=&quot;$cnf ssl-ca=$DIR/cacert.pem&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cnf=&quot;$cnf ssl-cert=$DIR/client-cert.pem&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cnf=&quot;$cnf ssl-key=$DIR/client-key.pem&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cnf=&quot;$cnf [mysqld]&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cnf=&quot;$cnf ssl-ca=$DIR/cacert.pem&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cnf=&quot;$cnf ssl-cert=$DIR/server-cert.pem&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cnf=&quot;$cnf ssl-key=$DIR/server-key.pem&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">echo $cnf | replace &quot; &quot; '</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">' &gt; $DIR/my.cnf</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Тестируем MySQL</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqld --defaults-file=$DIR/my.cnf &amp;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql --defaults-file=$DIR/my.cnf</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы также можете тестировать сертификаты путем модификации </span><span style=" font-family:'Courier New,courier';">my.cnf</span><span style=" font-family:'Ubuntu';"> таким образом, чтобы использовать демонстрационные сертификаты в каталоге </span><span style=" font-family:'Courier New,courier';">mysql-source-dist/SSL</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="secure-grant"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.3.9.4. Параметры команды </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">GRANT</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В дополнение к обычной схеме имя пользователя/пароль MySQL может производить проверку атрибутов сертификата X509. Для этого необходимы также все обычные параметры (имя пользователя, пароль, маска IP-адреса, имя базы данных/таблицы). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Существует несколько возможностей ограничить соединения: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если не указано никаких параметров SSL/X509, а имя пользователя и пароль указаны правильно, то разрешены все виды шифрованных и нешифрованных соединений. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Параметр <span style=" font-family:'Courier New,courier';">REQUIRE SSL</span> позволяет серверу устанавливать только зашифрованные при помощи протокола SSL соединения. Обратите внимание, что этот параметр может быть неприемлемым, если существуют записи ACL, разрешающие не-SSL соединения. </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT ALL PRIVILEGES ON test.* TO root@localhost</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY &quot;goodsecret&quot; REQUIRE SSL;</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REQUIRE X509</span> означает, что у клиента должен быть действительный сертификат, но мы не требуем наличия определенного сертификата, сертификата определенной фирмы или темы. Единственное ограничение - подпись должна поддаваться проверке при помощи одного из сертификатов бюро сертификации. </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT ALL PRIVILEGES ON test.* TO root@localhost</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY &quot;goodsecret&quot; REQUIRE X509;</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REQUIRE ISSUER &quot;issuer&quot;</span> делает требования по соединению более определенными: теперь клиент должен предоставить действительный сертификат X509, выданный бюро сертификации (CA) <span style=" font-family:'Courier New,courier';">&quot;issuer&quot;</span>. Использование сертификатов X509 всегда означает применение шифрования, поэтому параметр <span style=" font-family:'Courier New,courier';">SSL</span> больше не нужен. </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT ALL PRIVILEGES ON test.* TO root@localhost</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY &quot;goodsecret&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">REQUIRE ISSUER &quot;C=FI, ST=Some-State, L=Helsinki,</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    &quot;&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">O=MySQL Finland AB, CN=Tonu Samuel/Email=tonu@mysql.com&quot;;</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REQUIRE SUBJECT &quot;subject&quot;</span> требует наличия у клиента действительного сертификата X509 с содержащейся в нем темой &quot;subject&quot;. Если у клиента есть действительный сертификат, но другой &quot;subject&quot;, то соединение не будет установлено. </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT ALL PRIVILEGES ON test.* TO root@localhost</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY &quot;goodsecret&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">REQUIRE SUBJECT &quot;C=EE, ST=Some-State, L=Tallinn,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    &quot;&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">O=MySQL demo client certificate,</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    &quot;&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">CN=Tonu Samuel/Email=tonu@mysql.com&quot;;</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REQUIRE CIPHER &quot;cipher&quot;</span> требуется для обеспечения достаточно сложных шифра и длины ключа. Протокол SSL сам по себе может быть ненадежным из-за использования старых алгоритмов с короткими ключами шифрования. Воспользовавшись этим параметром, мы можем указать определенный метод шифрования, разрешающий соединение. </li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT ALL PRIVILEGES ON test.* TO root@localhost</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY &quot;goodsecret&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">REQUIRE CIPHER &quot;EDH-RSA-DES-CBC3-SHA&quot;;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешается также сочетать </span><span style=" font-family:'Courier New,courier';">SUBJECT</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">ISSUER</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">CIPHER</span><span style=" font-family:'Ubuntu';"> в </span><span style=" font-family:'Courier New,courier';">REQUIRE</span><span style=" font-family:'Ubuntu';">, например, так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT ALL PRIVILEGES ON test.* TO root@localhost</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">IDENTIFIED BY &quot;goodsecret&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">REQUIRE SUBJECT &quot;C=EE, ST=Some-State, L=Tallinn,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    &quot;&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">O=MySQL demo client certificate,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    &quot;&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">CN=Tonu Samuel/Email=tonu@mysql.com&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">AND ISSUER &quot;C=FI, ST=Some-State, L=Helsinki,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    &quot;&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">O=MySQL Finland AB, CN=Tonu Samuel/Email=tonu@mysql.com&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">AND CIPHER &quot;EDH-RSA-DES-CBC3-SHA&quot;;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с MySQL 4.0.4, слово </span><span style=" font-family:'Courier New,courier';">AND</span><span style=" font-family:'Ubuntu';"> необязательно в опциях </span><span style=" font-family:'Courier New,courier';">REQUIRE</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Порядок опций не имеет значения, но ни одна опция не может быть указана дважды. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="disaster-prevention"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">.4. Предотвращение катастроф и восстановление</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.1. Резервное копирование баз данных</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.2. Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">BACKUP TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#restore-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.3. Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#restore-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">RESTORE TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.4. Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">CHECK TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.5. Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REPAIR TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6. Использование </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> для профилактики таблиц и послеаварийного</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#maintenance-regimen"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.7. Настройка режима профилактики таблиц</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-info"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.8. Получение информации о таблице</span></a></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="backup"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.4.1. Резервное копирование баз данных</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Поскольку таблицы MySQL хранятся в виде файлов, то резервное копирование выполняется легко. Чтобы резервная копия была согласованной, выполните на выбранных таблицах </span><span style=" font-family:'Courier New,courier';">LOCK TABLES</span><span style=" font-family:'Ubuntu';">, а затем </span><span style=" font-family:'Courier New,courier';">FLUSH TABLES</span><span style=" font-family:'Ubuntu';"> для этих таблиц (см. разделы </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#lock-tables"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.7.2, «Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#lock-tables"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">LOCK TABLES/UNLOCK TABLES</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#lock-tables"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';"> и see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.3, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">FLUSH</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). При этом требуется блокировка только на чтение; поэтому другие потоки смогут продолжать запросы на таблицах в то время, пока будут создаваться копии файлов из каталога базы данных. Команда </span><span style=" font-family:'Courier New,courier';">FLUSH TABLE</span><span style=" font-family:'Ubuntu';"> обеспечивает гарантию того, что все активные индексные страницы будут записаны на диск прежде, чем начнется резервное копирование. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с 3.23.56 и 4.0.12 </span><span style=" font-family:'Courier New,courier';">BACKUP TABLE</span><span style=" font-family:'Ubuntu';"> не позволит вам перезаписать существующие файлы, так как это создает потенциальные проблемы в безопасности. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если есть необходимость провести резервное копирование на уровне SQL, то можно воспользоваться </span><span style=" font-family:'Courier New,courier';">SELECT INTO OUTFILE</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">BACKUP TABLE</span><span style=" font-family:'Ubuntu';"> (см. разделы </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#select"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.4.1, «Синтаксис оператора </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#select"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SELECT</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#select"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';"> и see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.2, «Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">BACKUP TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Существует еще один способ создать резервную копию базы данных - использовать программу </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';"> или сценарий </span><span style=" font-family:'Courier New,courier';">mysqlhotcopy</span><span style=" font-family:'Ubuntu';"> (см. разделы </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.8.5, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqldump</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Получение дампов данных и структуры таблицы»</span></a><span style=" font-family:'Ubuntu';"> и see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.8.6, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlhotcopy</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Копирование баз данных и таблиц MySQL»</span></a><span style=" font-family:'Ubuntu';">). Для этого нужно выполнить следующие действия: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сделать полное резервное копирование баз данных: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqldump --tab=/path/to/some/dir --opt --all</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'Courier New,courier'; font-weight:600;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqlhotcopy database /path/to/some/dir</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно также просто скопировать табличные файлы (файлы </span><span style=" font-family:'Courier New,courier';">*.frm</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">*.MYD</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">*.MYI</span><span style=" font-family:'Ubuntu';">) в тот момент, когда сервер не проводит никаких обновлений. Этот метод используется в сценарии </span><span style=" font-family:'Courier New,courier';">mysqlhotcopy</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id363506"></a>Если <span style=" font-family:'Courier New,courier';">mysqld</span> выполняется, остановить его, и затем запустить с опцией <span style=" font-family:'Courier New,courier';">--log-update[=file_name]</span> (see <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#update-log"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.9.3, «Журнал обновлений (update)»</span></a>). В файлах журнала обновлений находится информация, необходимая для того, чтобы повторить в базе данных последовательность изменений, внесенных с момента выполнения <span style=" font-family:'Courier New,courier';">mysqldump</span>. </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если дело дошло до восстановления, сначала надо попробовать восстановить таблицы с помощью </span><span style=" font-family:'Courier New,courier';">REPAIR TABLE</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">myisamchk -r</span><span style=" font-family:'Ubuntu';"> - это должно сработать в 99,9% случаев. Если </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> не даст результата, попробуйте применить следующую процедуру (эти действия применимы только в случае, если MySQL запускался с </span><span style=" font-family:'Courier New,courier';">--log-update</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#update-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.3, «Журнал обновлений (update)»</span></a><span style=" font-family:'Ubuntu';">)): </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Восстановите исходный вариант по копии, сделанной в <span style=" font-family:'Courier New,courier';">mysqldump</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Выполните следующую команду, чтобы повторить обновления из бинарного журнала: </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqlbinlog hostname-bin.[0-9]* | mysql</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если используется журнал обновлений, то можно применить: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">ls -1 -t -r hostname.[0-9]* | xargs cat | mysql</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ls</span><span style=" font-family:'Ubuntu';"> используется для того, чтобы расположить все файлы журнала обновлений в правильном порядке. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно проводить избирательное резервное копирование посредством </span><span style=" font-family:'Courier New,courier';">SELECT * INTO OUTFILE 'file_name' FROM tbl_name</span><span style=" font-family:'Ubuntu';">, а восстановление - при помощи </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE 'file_name' REPLACE ...</span><span style=" font-family:'Ubuntu';"> Чтобы избежать повторения записей, в таблице должен быть </span><span style=" font-family:'Courier New,courier';">первичный</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">уникальный ключ</span><span style=" font-family:'Ubuntu';">. Ключевое слово </span><span style=" font-family:'Courier New,courier';">REPLACE</span><span style=" font-family:'Ubuntu';"> задает замену старых записей новыми в случае, когда новая запись в значении уникального ключа повторяет старую. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если в системе, где выполняется резервное копирование, возникают проблемы с производительностью, то решить их можно, установив репликацию и выполняя резервное копирование на подчиненном сервере вместо головного (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-intro"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.10.1, «Введение»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пользователи файловой системы Veritas могут поступить следующим образом: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Из клиента (или Perl) выполнить: <span style=" font-family:'Courier New,courier';">FLUSH TABLES WITH READ LOCK</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Из другого shell выполнить: <span style=" font-family:'Courier New,courier';">mount vxfs snapshot</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Из первого клиента выполнить: <span style=" font-family:'Courier New,courier';">UNLOCK TABLES</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Скопировать файлы из образа. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Демонтировать образ. </li></ol>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="backup-table"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.4.2. Синтаксис </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">BACKUP TABLE</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">BACKUP TABLE tbl_name[,tbl_name...] TO '/path/to/backup/directory'</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Копирует в каталог резервного копирования тот минимум табличных файлов, который достаточен для восстановления таблицы, после сброса на диск всех изменений. На данный момент работает только для таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">. Для таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> копирует файлы </span><span style=" font-family:'Courier New,courier';">.frm</span><span style=" font-family:'Ubuntu';"> (определений) и </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';"> (данных). Индексные файлы могут быть реконструированы по этим двум. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Перед использованием этой команды, пожалуйста, ознакомьтесь с разделом See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.1, «Резервное копирование баз данных»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В процессе резервного копирования будет установлена блокировка чтения отдельно для каждой таблицы на время ее копирования. Если необходимо сделать резервное копирование в виде мгновенного образа нескольких таблиц, необходимо сначала запросить </span><span style=" font-family:'Courier New,courier';">LOCK TABLES</span><span style=" font-family:'Ubuntu';"> установки блокировки чтения для каждой таблицы в группе. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда возвращает таблицу со следующими столбцами: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Столбец</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Table</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Op</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Всегда ``backup''</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Msg_type</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Одно из значений </span><span style=" font-family:'Courier New,courier';">status</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">error</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">info</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">warning</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Msg_text</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Само сообщение.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заметим, что </span><span style=" font-family:'Courier New,courier';">BACKUP TABLE</span><span style=" font-family:'Ubuntu';"> доступна только в версии MySQL 3.23.25 и выше. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="restore-table"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.4.3. Синтаксис </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">RESTORE TABLE</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">RESTORE TABLE tbl_name[,tbl_name...] FROM '/path/to/backup/directory'</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Восстанавливает таблицу(ы) из резервной копии, созданной с помощью </span><span style=" font-family:'Courier New,courier';">BACKUP TABLE</span><span style=" font-family:'Ubuntu';">. Существующие таблицы не перезаписываются: при попытке восстановления поверх существующей таблицы будет выдана ошибка. Восстановление занимает больше времени, нежели </span><span style=" font-family:'Courier New,courier';">BACKUP</span><span style=" font-family:'Ubuntu';"> - из-за необходимости повторного построения индекса. Чем больше в таблице будет ключей, тем больше времени заберет реконструкция. Эта команда, так же как и </span><span style=" font-family:'Courier New,courier';">BACKUP TABLE</span><span style=" font-family:'Ubuntu';">, в настоящее время работает только для таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда возвращает таблицу со следующими столбцами: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Столбец</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Table</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Op</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Всегда ``restore''</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Msg_type</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Одно из значений </span><span style=" font-family:'Courier New,courier';">status</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">error</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">info</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">warning</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Msg_text</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Само сообщение.</span></p></td></tr></table>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="check-table"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.4.4. Синтаксис </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">CHECK TABLE</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHECK TABLE tbl_name[,tbl_name...] [option [option...]]</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">option = QUICK | FAST | MEDIUM | EXTENDED | CHANGED</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHECK TABLE</span><span style=" font-family:'Ubuntu';"> работает только на таблицах </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">InnoDB</span><span style=" font-family:'Ubuntu';">. На таблицах типа </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> команда эквивалентна запуску на таблице </span><span style=" font-family:'Courier New,courier';">myisamchk -m table_name</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если опция не указана, используется </span><span style=" font-family:'Courier New,courier';">MEDIUM</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверяет таблицу(ы) на наличие ошибок. Для таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> обновляется статистика ключей. Команда возвращает таблицу со следующими столбцами: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Столбец</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Table</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя таблицы.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Op</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Всегда ``check''.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Msg_type</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Одно из значений </span><span style=" font-family:'Courier New,courier';">status</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">error</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">info</span><span style=" font-family:'Ubuntu';">, или </span><span style=" font-family:'Courier New,courier';">warning</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Msg_text</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Само сообщение.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заметим, что по каждой проверяемой таблице может быть выдано много строк информации. Последняя строка будет представлять </span><span style=" font-family:'Courier New,courier';">Msg_type status</span><span style=" font-family:'Ubuntu';"> и, как правило, должна содержать </span><span style=" font-family:'Courier New,courier';">OK</span><span style=" font-family:'Ubuntu';">. Если выдается что-либо отличное от </span><span style=" font-family:'Courier New,courier';">OK</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">Not checked</span><span style=" font-family:'Ubuntu';">, то обычно следует провести ремонт таблицы (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.6, «Использование </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> для профилактики таблиц и послеаварийного»</span></a><span style=" font-family:'Ubuntu';">). </span><span style=" font-family:'Courier New,courier';">Table already up to date</span><span style=" font-family:'Ubuntu';"> свидетельствует о том, что указанный для таблицы тип (</span><span style=" font-family:'Courier New,courier';">TYPE</span><span style=" font-family:'Ubuntu';">) вернул информацию о том, что таблица не нуждается в проверке. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Различные типы проверки означают следующее: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Тип</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Действия</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">QUICK</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не сканировать строки для проверки на неправильные связи.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">FAST</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверять только таблицы, которые не были корректно закрыты.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHANGED</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверять только таблицы, которые изменились со времени последней проверки или не были закрыты корректно.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MEDIUM</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сканировать строки для проверки того, что уничтоженные связи в порядке. При этом также подсчитывается ключевая контрольная сумма для строки и сравнивается с подсчитанной контрольной суммой для ключей.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">EXTENDED</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выполнить полный просмотр ключа для всех ключей для каждой строки. Успех такой проверки гарантирует 100%-ное отсутствие противоречий в таблице, но на проверку уйдет немало времени!</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> с динамическими размерами при запуске проверки всегда выполняется проверка </span><span style=" font-family:'Courier New,courier';">MEDIUM</span><span style=" font-family:'Ubuntu';">. Для строк со статическими размерами мы пропускаем сканирование строк для </span><span style=" font-family:'Courier New,courier';">QUICK</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">FAST</span><span style=" font-family:'Ubuntu';">, поскольку повреждение строк происходит крайне редко. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверочные опции можно сочетать: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHECK TABLE test_table FAST QUICK;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда просто вызовет быструю проверку таблицы для выявления того, была ли она закрыта корректно. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Примечание</span><span style=" font-family:'Ubuntu';">: в некоторых случаях </span><span style=" font-family:'Courier New,courier';">CHECK TABLE</span><span style=" font-family:'Ubuntu';"> изменяет таблицу! Это происходит, если таблица помечена как 'поврежденная/corrupted' или 'не закрытая корректно/not closed properly', а </span><span style=" font-family:'Courier New,courier';">CHECK TABLE</span><span style=" font-family:'Ubuntu';"> не находит никаких проблем в таблице. В этом случае </span><span style=" font-family:'Courier New,courier';">CHECK TABLE</span><span style=" font-family:'Ubuntu';"> отметит в таблице, что с ней все нормально. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если таблица повреждена, то, скорее всего, проблема в индексах, а не в данных. Проверки всех типов обеспечивают всестороннюю проверку индексов и тем самым должны обнаруживать большинство ошибок. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если проверяется таблица, с которой предположительно все нормально, то можно опустить проверочные опции или указать опцию </span><span style=" font-family:'Courier New,courier';">QUICK</span><span style=" font-family:'Ubuntu';">. Последнюю возможность следует использовать в случае ограничений по времени и тогда, когда можно пойти на риск (очень незначительный), что </span><span style=" font-family:'Courier New,courier';">QUICK</span><span style=" font-family:'Ubuntu';"> пропустит ошибку в файле данных. (В большинстве случаев MySQL должен найти - при нормальной работе - любые ошибки в файле с данными. Если ошибки найдены, то таблица будет отмечена как 'поврежденная/corrupted', и в таком случае ее нельзя будет использовать, пока она не будет исправлена.) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">FAST</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">CHANGED</span><span style=" font-family:'Ubuntu';"> главным образом предназначены для использования в сценариях (например, для запуска из </span><span style=" font-family:'Courier New,courier';">cron</span><span style=" font-family:'Ubuntu';">), если необходимо время от времени проверять таблицы. В большинстве случаев следует отдавать предпочтение </span><span style=" font-family:'Courier New,courier';">FAST</span><span style=" font-family:'Ubuntu';"> перед </span><span style=" font-family:'Courier New,courier';">CHANGED</span><span style=" font-family:'Ubuntu';"> (иначе надо поступать только в случае, когда возникает подозрение, что найдена ошибка в самом коде </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Прибегать к </span><span style=" font-family:'Courier New,courier';">EXTENDED</span><span style=" font-family:'Ubuntu';"> следует только тогда, когда после выполнения нормальной проверки для таблицы по-прежнему выдаются странные ошибки при попытке MySQL обновить строку или найти строку по ключу (что очень маловероятно в случае успеха нормальной проверки!). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Некоторые проблемы, о которых сообщается при проверке таблицы, нельзя исправить автоматически: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Found row where the auto_increment column has the value 0</span>. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Это означает, что в таблице есть строка, где индексированный столбец </span><span style=" font-family:'Courier New,courier';">AUTO_INCREMENT</span><span style=" font-family:'Ubuntu';"> содержит значение 0 (строку, в которой столбец </span><span style=" font-family:'Courier New,courier';">AUTO_INCREMENT</span><span style=" font-family:'Ubuntu';"> имеет значение 0, можно создать, явно установив столбец в 0 командой </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Это само по себе не является ошибкой, но может вызвать неприятности, если понадобится сделать дамп таблицы или восстановить ее или выполнить над ней </span><span style=" font-family:'Courier New,courier';">ALTER</span><span style=" font-family:'Ubuntu';"> TABLE. В этом случае столбец с атрибутом </span><span style=" font-family:'Courier New,courier';">AUTO_INCREMENT</span><span style=" font-family:'Ubuntu';"> изменит значение в соответствии с правилами для столбцов </span><span style=" font-family:'Courier New,courier';">AUTO_INCREMENT</span><span style=" font-family:'Ubuntu';">, что может вызвать проблемы, подобные ошибке дублирования ключа. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы избавиться от предупреждения, просто выполните команду </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';"> для установки в столбце значения, отличного от 0. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="repair-table"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.4.5. Синтаксис </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">REPAIR TABLE</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REPAIR TABLE tbl_name[,tbl_name...] [QUICK] [EXTENDED] [USE_FRM]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REPAIR TABLE</span><span style=" font-family:'Ubuntu';"> работает только на таблицах типа </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> и эквивалентна выполнению на таблице </span><span style=" font-family:'Courier New,courier';">myisamchk -r table_name</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При обыкновенной работе запускать эту команду не приходится, но если случится катастрофа, то с помощью </span><span style=" font-family:'Courier New,courier';">REPAIR TABLE</span><span style=" font-family:'Ubuntu';"> практически наверняка удастся вернуть все данные из таблицы </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">. Если таблицы сильно повреждены, то следует постараться выяснить, что послужило этому причиной! Обращайтесь к разделам </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#crashing"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел A.4.1, «Что делать, если работа MySQL сопровождается постоянными сбоями»</span></a><span style=" font-family:'Ubuntu';"> и See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html#myisam-table-problems"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 7.1.3, «Проблемы с таблицами </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html#myisam-table-problems"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">MyISAM</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html#myisam-table-problems"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">.»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">REPAIR TABLE</span><span style=" font-family:'Ubuntu';"> ремонтирует таблицу, которая, возможно, повреждена. Команда возвращает таблицу со следующими столбцами: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Столбец</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Table</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Op</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Всегда ``repair''</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Msg_type</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Одно из значений </span><span style=" font-family:'Courier New,courier';">status</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">error</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">info</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">warning</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Msg_text</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Само сообщение.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заметим, что по каждой ремонтируемой таблице может быть выдано много строк информации. Последняя строка будет представлять </span><span style=" font-family:'Courier New,courier';">Msg_type status</span><span style=" font-family:'Ubuntu';"> и, как правило, должна содержать </span><span style=" font-family:'Courier New,courier';">OK</span><span style=" font-family:'Ubuntu';">. Если выдается что-либо отличное от </span><span style=" font-family:'Courier New,courier';">OK</span><span style=" font-family:'Ubuntu';">, то следует попробовать исправить таблицу с помощью </span><span style=" font-family:'Courier New,courier';">myisamchk -o</span><span style=" font-family:'Ubuntu';">, поскольку в </span><span style=" font-family:'Courier New,courier';">REPAIR TABLE</span><span style=" font-family:'Ubuntu';"> пока реализованы не все опции </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. В скором будущем мы сделаем команду более гибкой. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если указан </span><span style=" font-family:'Courier New,courier';">QUICK</span><span style=" font-family:'Ubuntu';">, то MySQL будет пытаться сделать </span><span style=" font-family:'Courier New,courier';">REPAIR</span><span style=" font-family:'Ubuntu';"> только индексного дерева. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если используется </span><span style=" font-family:'Courier New,courier';">EXTENDED</span><span style=" font-family:'Ubuntu';">, то MySQL будет создавать индекс строка за строкой вместо создания по одному индексу единоразово с помощью сортировки; такая техника может работать лучше сортировки для ключей фиксированной длины, если речь идет о хорошо сжимаемых ключах типа </span><span style=" font-family:'Courier New,courier';">CHAR</span><span style=" font-family:'Ubuntu';"> большой длины. Это такой же ремонт, как делается с помощью </span><span style=" font-family:'Courier New,courier';">myisamchk --safe-recover</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Что касается MySQL 4.0.2, то тут для </span><span style=" font-family:'Courier New,courier';">REPAIR</span><span style=" font-family:'Ubuntu';"> существует режим </span><span style=" font-family:'Courier New,courier';">USE_FRM</span><span style=" font-family:'Ubuntu';">. Используйте его, если отсутствует файл </span><span style=" font-family:'Courier New,courier';">.MYI</span><span style=" font-family:'Ubuntu';"> или поврежден его заголовок. В этом режиме MySQL воссоздаст таблицу, используя информацию из файла </span><span style=" font-family:'Courier New,courier';">.frm</span><span style=" font-family:'Ubuntu';">. Этот вид исправления в </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> недоступен. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="table-maintenance"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.4.6. Использование </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">myisamchk</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;"> для профилактики таблиц и послеаварийного</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-syntax"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6.1. Синтаксис запуска </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-syntax"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-general-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6.2. Общие опции для </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-general-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-check-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6.3. Проверочные опции для </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-check-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-repair-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6.4. Опции исправления для </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-repair-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-other-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6.5. Другие опции для </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-other-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-memory"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6.6. Использование памяти утилитой </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-memory"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#crash-recovery"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6.7. Использование myisamchk для послеаварийного восстановления</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6.8. Как проверять таблицы на ошибки</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6.9. Как ремонтировать таблицы</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimisation"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.4.6.10. Оптимизация таблиц</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">восстановления </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с версии MySQL 3.23.13 таблицы </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> можно проверять с помощью команды </span><span style=" font-family:'Courier New,courier';">CHECK TABLE</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.4, «Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">CHECK TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). Для исправления таблиц используется команда </span><span style=" font-family:'Courier New,courier';">REPAIR TABLE</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.5, «Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REPAIR TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для проверки/ремонта таблиц типа </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> (</span><span style=" font-family:'Courier New,courier';">.MYI</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';">) следует использовать утилиту </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">, а для </span><span style=" font-family:'Courier New,courier';">ISAM</span><span style=" font-family:'Ubuntu';"> (</span><span style=" font-family:'Courier New,courier';">.ISM</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">.ISD</span><span style=" font-family:'Ubuntu';">') - утилиту </span><span style=" font-family:'Courier New,courier';">isamchk</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Глава 7, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html"><span style=" font-family:'Ubuntu'; font-style:italic; text-decoration: underline; color:#0000ff;">Типы таблиц MySQL</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ниже мы будем говорить о </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">, но все сказанное справедливо также и для более старой </span><span style=" font-family:'Courier New,courier';">isamchk</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилиту </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> можно использовать для получения информации о таблицах рабочей базы данных, для их проверки и исправления или же оптимизации. В следующих разделах описывается, как запускать </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> (включая описание ее опций), как настроить график профилактики таблицы и как использовать myisamchk для выполнения различных функций. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В большинстве случаев для оптимизации и исправления таблиц можно также использовать команду </span><span style=" font-family:'Courier New,courier';">OPTIMIZE</span><span style=" font-family:'Ubuntu';"> TABLES, но этот вариант не такой быстрый и не такой надежный (в случае действительно фатальных ошибок), как </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. С другой стороны, </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> проще в использовании и освобождает от забот со сбросом таблиц на диск (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimize-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.1, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimize-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">OPTIMIZE TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimize-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Хотя исправление при помощи </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> и достаточно безопасно, никогда не будет лишним сделать резервную копию прежде, чем выполнять ремонт (или любые другие действия, которые могут привнести в таблицу значительные изменения) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="myisamchk-syntax"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.4.6.1. Синтаксис запуска </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">myisamchk</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> запускается следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">myisamchk [options] tbl_name</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Опции options определяют, что должна сделать </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. В данном разделе дается описание этих опций (список опций можно также получить, запустив </span><span style=" font-family:'Courier New,courier';">myisamchk --help</span><span style=" font-family:'Ubuntu';">). Если опции не указаны, </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> просто проверяет таблицу. Чтобы получить дополнительную информацию или указать </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> выполнить корректирующие действия, надо задать опции, как это описано в этом и в следующих разделах. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tbl_name</span><span style=" font-family:'Ubuntu';"> - это таблица базы данных, которую нужно проверить/исправить. Если </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> запускается не из каталога базы данных, то следует задать путь к файлу, поскольку </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> не имеет представления о том, где искать базу данных. В действительности для </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> не важно, где находятся рабочие файлы - в каталоге базы данных или нет; можно скопировать файлы, относящиеся к базе данных, в другое место и выполнить операции восстановления над ними там. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При желании в командной строке </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> можно перечислить имена нескольких таблиц. В качестве имени можно также указать имя индексного файла (с суффиксом </span><span style=" font-family:'Courier New,courier';">.MYI</span><span style=" font-family:'Ubuntu';">), что позволит задавать все таблицы в каталоге при помощи шаблона </span><span style=" font-family:'Courier New,courier';">*.MYI</span><span style=" font-family:'Ubuntu';">. Например, находясь в каталоге базы данных, можно проверить все таблицы этого каталога следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">myisamchk *.MYI</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если каталог базы данных не является текущим, то все таблицы каталога можно проверить, указав к нему путь: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">myisamchk /path/to/database_dir/*.MYI</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно даже проверить все таблицы во всех базах данных, если задать шаблон вместе с путем к каталогу данных MySQL: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">myisamchk /path/to/datadir/*/*.MYI</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Быстро проверять все таблицы рекомендуется следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk --silent --fast /path/to/datadir/*/*.MYI</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">isamchk --silent /path/to/datadir/*/*.ISM</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если необходимо проверить все таблицы и исправить все поврежденные из них, можно использовать следующую строку: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk --silent --force --fast --update-state -O key_buffer=64M \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    -O sort_buffer=64M -O read_buffer=1M -O write_buffer=1M \</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    /path/to/datadir/*/*.MYI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">isamchk --silent --force -O key_buffer=64M -O sort_buffer=64M \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">  -O read_buffer=1M -O write_buffer=1M /path/to/datadir/*/*.ISM</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эти команды предполагают, что имеется более чем 64 Mб свободного пространства. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Следует отметить, что если выдается ошибка, подобная следующей: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk: warning: 1 clients is using or hasn't closed the table properly</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">то это означает, что делается попытка проверить таблицу, обновленную другой программой (такой как </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">), которая еще не закрыла файл или чье выполнение было прервано без возможности корректно закрыть файл. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> запущен, то необходимо принудительно вызвать синхронизацию/закрытие всех таблиц с помощью </span><span style=" font-family:'Courier New,courier';">FLUSH TABLES</span><span style=" font-family:'Ubuntu';"> и обеспечить, чтобы никто не использовал таблиц, пока выполняется </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. В версии MySQL 3.23 самый простой способ избежать этой проблемы заключается в применении для проверки таблиц команды </span><span style=" font-family:'Courier New,courier';">CHECK TABLE</span><span style=" font-family:'Ubuntu';"> вместо </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="myisamchk-general-options"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.4.6.2. Общие опции для </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">myisamchk</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> поддерживает следующие опции. </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-# или --debug=debug_options</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывод отладочной информации. Часто строка </span><span style=" font-family:'Courier New,courier';">debug_options</span><span style=" font-family:'Ubuntu';"> имеет следующий вид </span><span style=" font-family:'Courier New,courier';">d:t:o,filename</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-? или --help</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отображение справочного сообщения с завершением работы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-O var=option, --set-variable var=option</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Устанавливает значение переменной. Внимание: </span><span style=" font-family:'Courier New,courier';">--set-variable</span><span style=" font-family:'Ubuntu';"> морально устарела в MySQL 4.0, просто используйте </span><span style=" font-family:'Courier New,courier';">--var=option</span><span style=" font-family:'Ubuntu';">. Вывести список допустимых переменных и их значений по умолчанию для </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> можно с помощью </span><span style=" font-family:'Courier New,courier';">myisamchk --help</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:80px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Переменная</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">key_buffer_size</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">523264</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">read_buffer_size</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">262136</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">write_buffer_size</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">262136</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">sort_buffer_size</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">2097144</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">sort_key_blocks</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">16</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">decode_bits</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">9</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">sort_buffer_size</span><span style=" font-family:'Ubuntu';"> применяется, когда ключи исправляются посредством сортировки ключей (обычный случай при указании </span><span style=" font-family:'Courier New,courier';">--recover</span><span style=" font-family:'Ubuntu';">), а </span><span style=" font-family:'Courier New,courier';">key_buffer_size</span><span style=" font-family:'Ubuntu';"> - если таблица проверяется с </span><span style=" font-family:'Courier New,courier';">--extended-check</span><span style=" font-family:'Ubuntu';"> или если ключи исправляются посредством вставки ключей в таблицу построчно (как при выполнении обычных вставок). Исправление через ключевой буфер применяется в следующих случаях: </span></p>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если используется <span style=" font-family:'Courier New,courier';">--safe-recover</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если размер требуемых для сортировки временных файлов будет более чем вдвое превышать объем, требующийся при создании ключевого файла непосредственно. Так часто обстоит дело, когда присутствуют большие ключи типов <span style=" font-family:'Courier New,courier';">CHAR</span>, <span style=" font-family:'Courier New,courier';">VARCHAR</span> или <span style=" font-family:'Courier New,courier';">TEXT</span>, поскольку при сортировке необходимо сохранять ключи целиком. Имея временное пространство на диске в избытке, можно заставить <span style=" font-family:'Courier New,courier';">myisamchk</span> делать исправления посредством сортировки, задав опцию <span style=" font-family:'Courier New,courier';">--sort-recover</span>. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ремонт посредством ключевого буфера требует значительно меньше пространства, чем при использовании сортировки, однако выполняется значительно медленнее. Когда желательно ускорить выполнение ремонта/исправления, переменные нужно установить равными приблизительно 1/4 доступной памяти. Можно для обеих переменных задавать большие значения, поскольку всякий раз будет использоваться только один из рассматриваемых буферов. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-s или --silent</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Молчаливый режим. Выдавать сообщения только при возникновении ошибок. Можно использовать </span><span style=" font-family:'Courier New,courier';">-s</span><span style=" font-family:'Ubuntu';"> дважды (</span><span style=" font-family:'Courier New,courier';">-ss</span><span style=" font-family:'Ubuntu';">), чтобы предельно ограничить выдачу сообщений утилитой </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-v или --verbose</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Расширенный режим вывода. Выдается больше информации. Можно использовать с </span><span style=" font-family:'Courier New,courier';">-d</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">-e</span><span style=" font-family:'Ubuntu';">. Можно использовать </span><span style=" font-family:'Courier New,courier';">-v</span><span style=" font-family:'Ubuntu';"> многократно (</span><span style=" font-family:'Courier New,courier';">-vv</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">-vvv</span><span style=" font-family:'Ubuntu';">) - чтобы еще более расширить сводку! </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-V или --version</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отображение версии </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> и завершение работы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-w или, --wait</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если таблица заблокирована, то не выдавать ошибки, а, дождавшись снятия блокировки с таблицы, продолжить выполнение. Заметим, что если </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> выполняется на таблице с </span><span style=" font-family:'Courier New,courier';">--skip-external-locking</span><span style=" font-family:'Ubuntu';">, то таблица может быть заблокирована только другой командой </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="myisamchk-check-options"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.4.6.3. Проверочные опции для </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">myisamchk</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-c или --check</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверить таблицы на ошибки. Является операцией по умолчанию, если </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> не передаются другие опции, меняющие это поведение. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-e или --extend-check</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверить таблицу очень тщательно (выполняется достаточно медленно в случае большого количества индексов). Эту опцию следует использовать в экстремальных ситуациях. В большинстве случаев </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">--medium-check</span><span style=" font-family:'Ubuntu';"> вполне достаточно для выявления ошибок в таблице. Если используется </span><span style=" font-family:'Courier New,courier';">--extended-check</span><span style=" font-family:'Ubuntu';"> и система располагает приличным объемом памяти, то следует значительно увеличить значение </span><span style=" font-family:'Courier New,courier';">key_buffer_size</span><span style=" font-family:'Ubuntu';">! </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-F или --fast</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверять только таблицы, которые не были корректно закрыты. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-C или --check-only-changed</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверять только таблицы, изменившиеся с момента последней проверки. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-f или --force</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выполнять перезапуск </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> с </span><span style=" font-family:'Courier New,courier';">-r</span><span style=" font-family:'Ubuntu';"> (исправить) на таблице, если </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> найдет в ней хоть одну ошибку. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-i или --information</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выдавать статистическую информацию о проверяемой таблице. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-m или --medium-check</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Быстрее, чем расширенная проверка (</span><span style=" font-family:'Courier New,courier';">extended-check</span><span style=" font-family:'Ubuntu';">), но при этом обнаруживается только 99,99% из общего числа ошибок (чего, однако, в большинстве случаев вполне достаточно). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-U или --update-state</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отмечать в файле </span><span style=" font-family:'Courier New,courier';">.MYI</span><span style=" font-family:'Ubuntu';"> факт проверки таблицы и наличие повреждений. Опцию следует использовать для получения максимального эффекта от опции </span><span style=" font-family:'Courier New,courier';">--check-only-changed</span><span style=" font-family:'Ubuntu';">, однако ее применение недопустимо, если </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> работает с таблицей и был запущен с опцией </span><span style=" font-family:'Courier New,courier';">--skip-external-locking</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-T или --read-only</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не отмечать таблицу как проверенную. Это может пригодиться, когда myisamchk используется для проверки таблиц, используемых каким-то другим приложением, и это приложение не выполняет блокировку (как </span><span style=" font-family:'Courier New,courier';">mysqld --skip-external-locking</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="myisamchk-repair-options"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.4.6.4. Опции исправления для </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">myisamchk</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Следующие опции используются, если </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> запускается с </span><span style=" font-family:'Courier New,courier';">-r</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">-o</span><span style=" font-family:'Ubuntu';">: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">-D # или --data-file-length=# Максимальная длина файла данных (когда файл данных пересоздается при его ``переполнении''). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">-e или --extend-check Пробовать исправлять каждую возможную строку из файла данных. Обычно при этом обнаруживается масса замусоренных строк. Использовать эту опцию следует только в самом крайнем случае, когда больше ничего не остается. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">-f или --force Писать поверх старых временных файлов (<span style=" font-family:'Courier New,courier';">table_name.TMD</span>) вместо аварийного прекращения. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">-k # или keys-used=# Если используется <span style=" font-family:'Courier New,courier';">ISAM</span>, то данный параметр предписывает обработчику таблиц <span style=" font-family:'Courier New,courier';">ISAM</span> на необходимость обновить только первые <span style=" font-family:'Courier New,courier';">#</span> индексов. Если используется <span style=" font-family:'Courier New,courier';">MyISAM</span>, то определяет, какие ключи использовать, при этом каждый двоичный бит соответствует одному ключу (первый ключ - это бит 0). Может использоваться для ускорения вставок! Отключенные индексы можно снова активизировать с помощью <span style=" font-family:'Courier New,courier';">myisamchk -r. keys</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">-l или --no-symlinks Не рассматривать символические ссылки. Обычно <span style=" font-family:'Courier New,courier';">myisamchk</span> исправляет таблицы, на которые указывают символические ссылки. Данная опция отсутствует в MySQL 4.0, в связи с тем, что MySQL 4.0 не удаляет символические ссылки во время восстановления. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">-r или --recover При указании этой опции можно исправить практически все, кроме уникальных ключей, в которых есть повторения (ошибка, вероятность которой мизерна для таблиц <span style=" font-family:'Courier New,courier';">ISAM</span>/<span style=" font-family:'Courier New,courier';">MyISAM</span>). Если необходимо восстановить таблицу, то начинать надо с этой опции. Только если <span style=" font-family:'Courier New,courier';">myisamchk</span> сообщит, что таблица не может быть восстановлена с помощью <span style=" font-family:'Courier New,courier';">-r</span>, тогда следует пытаться применять <span style=" font-family:'Courier New,courier';">-o</span> (отметим, что в тех маловероятных случаях, когда <span style=" font-family:'Courier New,courier';">-r</span> не срабатывает, файл данных остается неизменным), В случае большого объема памяти следует увеличить размер <span style=" font-family:'Courier New,courier';">sort_buffer_size</span>! </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-o или --safe-recover</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Используется старый метод восстановления (читаются подряд все строки и обновляются все деревья индексов на основе найденных строк); такой алгоритм работает на порядок медленнее </span><span style=" font-family:'Courier New,courier';">-r</span><span style=" font-family:'Ubuntu';">, но метод справляется с несколькими редкими случаями, непосильными для </span><span style=" font-family:'Courier New,courier';">-r</span><span style=" font-family:'Ubuntu';">. При этом методе восстановления также используется значительно меньше дискового пространства, нежели в случае </span><span style=" font-family:'Courier New,courier';">-r</span><span style=" font-family:'Ubuntu';">. Обычно всегда следует начинать с исправления посредством </span><span style=" font-family:'Courier New,courier';">-r</span><span style=" font-family:'Ubuntu';">, и только если результат не будет достигнут, использовать </span><span style=" font-family:'Courier New,courier';">-o</span><span style=" font-family:'Ubuntu';">. Для систем с большим объемом памяти следует увеличить размер </span><span style=" font-family:'Courier New,courier';">key_buffer_size</span><span style=" font-family:'Ubuntu';">! </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-n или --sort-recover</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заставляет </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> использовать сортировку при разрешении ключей, даже если это потребует временных файлов очень большого размера. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--character-sets-dir=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Каталог, где хранятся кодировки. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--set-character-set=name</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Изменить используемую для индекса кодировку </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-t или --tmpdir=path</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Путь для хранения временных файлов. Если не задан, </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> использует для пути переменную окружения </span><span style=" font-family:'Courier New,courier';">TMPDIR</span><span style=" font-family:'Ubuntu';">. Начиная с MySQL 4.1, в </span><span style=" font-family:'Courier New,courier';">TMPDIR</span><span style=" font-family:'Ubuntu';"> могут быть указаны несколько путей, разделенных двоеточием </span><span style=" font-family:'Courier New,courier';">:</span><span style=" font-family:'Ubuntu';"> (точкой с запятой на Windows </span><span style=" font-family:'Courier New,courier';">;</span><span style=" font-family:'Ubuntu';">). Эти пути будут использованы в ротации. Это используется для того, чтобы распределить данные между разными физическими дисками. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-q или --quick</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Быстрый ремонт без изменения файла данных. Можно добавить вторую </span><span style=" font-family:'Courier New,courier';">-q</span><span style=" font-family:'Ubuntu';">, чтобы дать </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> санкцию на изменение исходного файла данных в случае дублирования ключей </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-u или --unpack</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Распаковать файл, упакованный в </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="myisamchk-other-options"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.4.6.5. Другие опции для </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">myisamchk</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Кроме ремонта и проверки таблиц, </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> может выполнять другие операции: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-a или --analyze</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Анализировать распределение ключей. Улучшает эффективность операции связывания за счет включения оптимизатора связей. Он обеспечивает лучший порядок связывания таблиц и определяет, какие ключи при этом следует использовать: </span><span style=" font-family:'Courier New,courier';">myisamchk --describe --verbose table_name</span><span style=" font-family:'Ubuntu';"> или посредством </span><span style=" font-family:'Courier New,courier';">SHOW KEYS</span><span style=" font-family:'Ubuntu';"> в MySQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-d или --description</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отображает некоторую информацию о таблице. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-A или --set-auto-increment[=value]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Предписывает, чтобы отсчет значений </span><span style=" font-family:'Courier New,courier';">AUTO_INCREMENT</span><span style=" font-family:'Ubuntu';"> начинался с </span><span style=" font-family:'Courier New,courier';">value</span><span style=" font-family:'Ubuntu';"> или большего значения. Если значение не указано, то в качестве следующего значения </span><span style=" font-family:'Courier New,courier';">AUTO_INCREMENT</span><span style=" font-family:'Ubuntu';"> берется наибольшее использованное значение для автоинкрементного ключа + 1. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-S или --sort-index</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сортировать блоки индексного дерева в порядке от больших к меньшим (high-low). Этим оптимизируются операции поиска и повышается скорость сканирования по ключу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-R или --sort-records=#</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сортирует записи в соответствии с индексом. Это значительно повышает локализацию данных и может ускорить операции </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">ORDER BY</span><span style=" font-family:'Ubuntu';">, которые выполняются по индексу и выбирают данные по какому-либо интервалу. (Возможно, что первая сортировка будет выполняться очень медленно!) Чтобы узнать номера индексов таблицы, нужно использовать команду </span><span style=" font-family:'Courier New,courier';">SHOW INDEX</span><span style=" font-family:'Ubuntu';">, показывающую индексы таблицы в том же порядке, в каком их видит </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. Индексы нумеруются начиная с 1. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="myisamchk-memory"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.4.6.6. Использование памяти утилитой </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">myisamchk</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При работе </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> очень важно распределение памяти. Объем используемой </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> памяти не превышает количества, указанного с помощью опций </span><span style=" font-family:'Courier New,courier';">-O</span><span style=" font-family:'Ubuntu';">. Когда речь идет о применении </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> на очень больших файлах, следует сначала принять решение о том, какое количество памяти будет при этом использоваться. По умолчанию для целей исправления ошибок отводится только около 3Mб. Применяя большие величины, можно достичь большей скорости работы </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. К примеру, если имеется более 32Mб оперативной памяти, то можно задать следующие опции (в дополнение к любым другим указанным опциям): </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">myisamchk -O sort=16M -O key=16M -O read=1M -O write=1M ...</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В большинстве случаев достаточно использовать </span><span style=" font-family:'Courier New,courier';">-O sort=16M</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Важно понимать, что </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> использует временные файлы, для указания на которые служит </span><span style=" font-family:'Courier New,courier';">TMPDIR</span><span style=" font-family:'Ubuntu';">. Если </span><span style=" font-family:'Courier New,courier';">TMPDIR</span><span style=" font-family:'Ubuntu';"> указывает на файловую систему с размещением в памяти, то велика вероятность ошибок нехватки памяти (out of memory). Если такое произойдет, то в </span><span style=" font-family:'Courier New,courier';">TMPDIR</span><span style=" font-family:'Ubuntu';"> следует поместить имя некоторого другого каталога с большим пространством и перезапустить </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При выполнении ремонта </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> также понадобится большое количество дискового пространства; : </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Потребуется пространство порядка удвоенного размера файла - для оригинала и копии файла данных. В этом пространстве нет необходимости, когда исправление выполняется с <span style=" font-family:'Courier New,courier';">--quick</span>, поскольку в этом случае повторно создается только индексный файл. Дополнительное место необходимо на том же диске, где находится оригинальный файл записи! </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Необходимо место для нового индексного файла, заменяющего старый. В начальной фазе выполнения старый индексный файл усекается, поэтому обычно данный объем можно не учитывать. Место должно обеспечиваться на диске, содержащем оригинальный индексный файл! </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При указании <span style=" font-family:'Courier New,courier';">--recover</span> или <span style=" font-family:'Courier New,courier';">--sort-recover</span> (но не в случае использования <span style=" font-family:'Courier New,courier';">--safe-recover</span>) потребуется место для буфера сортировки: (<span style=" font-family:'Courier New,courier';">largest_key + row_pointer_length)*number_of_rows * 2</span>. Можно узнать длину ключей и <span style=" font-family:'Courier New,courier';">row_pointer_length</span> с помощью <span style=" font-family:'Courier New,courier';">myisamchk -dv table</span>. Это пространство выделяется на временном диске (который определяется при помощи <span style=" font-family:'Courier New,courier';">TMPDIR</span> либо <span style=" font-family:'Courier New,courier';">--tmpdir=#</span>). </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если возникнут проблемы в связи с нехваткой дискового пространства во время исправления, можно попробовать использовать </span><span style=" font-family:'Courier New,courier';">--safe-recover</span><span style=" font-family:'Ubuntu';"> вместо </span><span style=" font-family:'Courier New,courier';">--recover</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="crash-recovery"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.4.6.7. Использование myisamchk для послеаварийного восстановления</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При выполнении </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> со </span><span style=" font-family:'Courier New,courier';">--skip-external-locking</span><span style=" font-family:'Ubuntu';"> (установка по умолчанию в некоторых системах, подобных Linux) применение </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> для проверки таблицы, когда она используется </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, не совсем безопасно. Если есть уверенность, что никто не обратится к таблицам через </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> во время выполнения </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">, то достаточно до начала проверки таблиц выполнить </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-tables</span><span style=" font-family:'Ubuntu';">, если нет - то на время проверки таблиц необходимо приостановить </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. При запуске </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> в то время, когда </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> обновляет таблицы, может быть выдано предупреждение о повреждении таблицы - даже в случае, если этого не произошло. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если </span><span style=" font-family:'Courier New,courier';">--skip-external-locking</span><span style=" font-family:'Ubuntu';"> не используется, то проверять таблицы с помощью </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> можно в любое время. Во время проверки все пытающиеся обновить таблицу клиенты получат возможность сделать это, только дождавшись готовности </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> применяется для ремонта или оптимизации таблиц, то всегда необходимо обеспечить отсутствие обращений сервера </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> к таблице (это также относится к случаю использования </span><span style=" font-family:'Courier New,courier';">--skip-external-locking</span><span style=" font-family:'Ubuntu';">). Если </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> не может быть приостановлен, то до </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">, как минимум, надо выполнить </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-tables</span><span style=" font-family:'Ubuntu';">. Таблицы могут быть повреждены, если сервер и </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> обратятся к таблицам одновременно. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В данном разделе описывается, как выявлять повреждения данных в базах данных MySQL и что делать с повреждениями дальше. Если таблица повреждается часто, то надо постараться отыскать причину этих повреждений! Обращайтесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#crashing"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел A.4.1, «Что делать, если работа MySQL сопровождается постоянными сбоями»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Причины повреждения таблиц рассматриваются также в разделе по таблицам </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">. Обращайтесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html#myisam-table-problems"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 7.1.3, «Проблемы с таблицами </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html#myisam-table-problems"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">MyISAM</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html#myisam-table-problems"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">.»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При выполнении послеаварийного восстановления важно понимать, что каждой таблице </span><span style=" font-family:'Courier New,courier';">tbl_name</span><span style=" font-family:'Ubuntu';"> в базе данных соответствуют три файла в каталоге базы данных: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Файл</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Назначение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tbl_name.frm</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файл определения таблицы (формы)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tbl_name.MYD</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файл данных</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tbl_name.MYI</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Индексный файл</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Каждый из этих трех типов файлов ``имеет'' свои виды повреждений, но наиболее часто проблемы возникают с файлами данных и индексными файлами. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Во время своей работы </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> построчно создает копию файла (данных) </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';">. Стадия исправления завершается тем, что программа удаляет старый файл </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';"> и переименовывает новый путем присвоения ему имени исходного. Если используется </span><span style=" font-family:'Courier New,courier';">--quick</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> не создает временного файла </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';">, а, исходя из предположения, что файл </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';"> правилен, только формирует новый индексный файл, никак не меняя файл </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';">. Это безопасно, поскольку </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> автоматически распознает, что файл </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';"> запорчен, и в этом случае прерывает исправление. Можно также задавать для </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> две опции </span><span style=" font-family:'Courier New,courier';">--quick</span><span style=" font-family:'Ubuntu';">. В этом случае </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> не прерывается аварийно по некоторым ошибкам (таким как дублирование ключа), а пытается исправить их путем модификации файла </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';">. Обычно использование двух опций </span><span style=" font-family:'Courier New,courier';">--quick</span><span style=" font-family:'Ubuntu';"> имеет смысл только в случае, если свободного места на диске недостаточно для выполнения нормального исправления. Тогда перед запуском </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> следует по крайней мере выполнить резервное копирование. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="check"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.4.6.8. Как проверять таблицы на ошибки</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для проверки таблицы </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> используются следующие команды: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk tbl_name</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Находит 99,99% всех ошибок. Не в состоянии отыскать повреждений, затрагивающих только файл данных (которые весьма необычны). Если необходимо только проверить таблицу, то обычно следует выполнить myisamchk без опций либо с одной из опций -s или --silent. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk -m tbl_name</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Находит 99,999% всех ошибок. Сначала на ошибки проверяются все индексные элементы, а затем читаются все строки подряд. Программа вычисляет контрольную сумму для всех ключей в строке и проверяет, совпадает ли она с контрольной суммой в индексном дереве. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk -e tbl_name</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">В этом случае выполняется полная и тщательная проверка всех данных (</span><span style=" font-family:'Courier New,courier';">-e</span><span style=" font-family:'Ubuntu';"> означает ``расширенная проверка''). Происходит тестовое чтение каждого ключа для каждой строки с целью контроля того, что ключи указывают на нужные строки. Для большой таблицы с множеством ключей на это может потребоваться много времени. </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> обычно останавливается после обнаружения первой ошибки, но если желательно получить более подробную информацию, можно добавить опцию </span><span style=" font-family:'Courier New,courier';">--verbose</span><span style=" font-family:'Ubuntu';"> (</span><span style=" font-family:'Courier New,courier';">-v</span><span style=" font-family:'Ubuntu';">) - таким образом выполнение </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> будет продолжаться вплоть до максимума в 20 ошибок. При нормальной работе достаточно просто запустить </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> (без аргументов за исключением имени таблицы). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk -e -i tbl_name</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Аналогична предыдущей команде, но опция </span><span style=" font-family:'Courier New,courier';">-i</span><span style=" font-family:'Ubuntu';"> указывает </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> дополнительно отображать некоторую статистическую информацию. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="repair"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.4.6.9. Как ремонтировать таблицы</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В данном разделе рассматривается только использование </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> на таблицах </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> (расширения </span><span style=" font-family:'Courier New,courier';">.MYI</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">.MYD</span><span style=" font-family:'Ubuntu';">). Если же в системе применяются таблицы </span><span style=" font-family:'Courier New,courier';">ISAM</span><span style=" font-family:'Ubuntu';"> (расширения </span><span style=" font-family:'Courier New,courier';">.ISM</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">.ISD</span><span style=" font-family:'Ubuntu';">), то следует пользоваться </span><span style=" font-family:'Courier New,courier';">isamchk</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с версии MySQL 3.23.14 можно ремонтировать таблицы </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> при помощи команды </span><span style=" font-family:'Courier New,courier';">REPAIR TABLE</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.5, «Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REPAIR TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">К симптомам повреждения таблицы относятся неожиданные прерывания выполнения запросов и появление следующих ошибок: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tbl_name.frm</span> is locked against change (Файл заблокирован для изменений) </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Can't find file <span style=" font-family:'Courier New,courier';">tbl_name.MYI</span> (Errcode: ###) (Не могу найти файл <span style=" font-family:'Courier New,courier';">tbl_name.MYI</span> (Ошибка: ###)) </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Unexpected end of file (Неожиданно наступил конец) </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Record file is crashed (Файл записей испорчен) </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Got error ### from table handler (Получена ошибка ### от дескриптора таблицы). Для получения более подробной информации об ошибке можно выполнить <span style=" font-family:'Courier New,courier';">perror</span> ###. Чаще всего о проблемах с таблицей свидетельствуют следующие ошибки: </li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">perror 126 127 132 134 135 136 141 144 145</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">126 = Index file is crashed / Wrong file format</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">127 = Record-file is crashed</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">132 = Old database file</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">134 = Record was already deleted (or record file crashed)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">135 = No more room in record file</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">136 = No more room in index file</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">141 = Duplicate unique key or constraint on write or update</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">144 = Table is crashed and last repair failed</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">145 = Table was marked as crashed and should be repaired</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заметим, что ошибка 135 - 'no more room in record file' ('не осталось места в файле записей'), не может быть исправлена просто выполнением ремонта. В этом случае необходимо использовать следующую команду: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ALTER TABLE table MAX_ROWS=xxx AVG_ROW_LENGTH=yyy;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В других случаях следует выполнять ремонт таблиц. </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> обычно может обнаружить и исправить большинство неполадок. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Процесс ремонтирования включает до четырех описанных здесь стадий. Перед тем как приступить к ремонту, необходимо выполнить </span><span style=" font-family:'Courier New,courier';">cd</span><span style=" font-family:'Ubuntu';"> в каталог базы данных и проверить права доступа к табличным файлам. Файлы должны быть доступны для чтения Unix-пользователю, от имени которого выполняется </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, (а также выполняющему ремонт, поскольку ему приходится обращаться к проверяемым файлам). Если появится необходимость изменять файлы, то проверяющий также должен иметь доступ для записи. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если используется версия MySQL 3.23.16 и выше, то для проверки и ремонта таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> можно (и нужно) использовать команды </span><span style=" font-family:'Courier New,courier';">CHECK</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">REPAIR</span><span style=" font-family:'Ubuntu';"> (</span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.4, «Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">CHECK TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';"> и see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.5, «Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REPAIR TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Раздел руководства, посвященный сопровождению таблиц, содержит опции к </span><span style=" font-family:'Courier New,courier';">isamchk</span><span style=" font-family:'Ubuntu';">/</span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.6, «Использование </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#table-maintenance"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> для профилактики таблиц и послеаварийного»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Случаи, когда упомянутые команды не дают результата или желательно использовать расширенные возможности, представленные в </span><span style=" font-family:'Courier New,courier';">isamchk</span><span style=" font-family:'Ubuntu';">/</span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">, рассматриваются в следующем разделе. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если ремонт таблицы планируется выполнять из командной строки то сначала требуется остановить сервер. Следует отметить, что при выполнении </span><span style=" font-family:'Courier New,courier';">mysqladmin shutdown</span><span style=" font-family:'Ubuntu';"> с удаленного сервера </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> все еще будет некоторое время работать после завершения </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';">, пока не будут остановлены все запросы и сброшены на диск все ключи. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Стадия 1: проверка таблиц</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выполните </span><span style=" font-family:'Courier New,courier';">myisamchk *.MYI</span><span style=" font-family:'Ubuntu';"> или, если вы располагаете временем, </span><span style=" font-family:'Courier New,courier';">myisamchk -e *.MYI</span><span style=" font-family:'Ubuntu';">. Используйте опцию </span><span style=" font-family:'Courier New,courier';">-s</span><span style=" font-family:'Ubuntu';"> (молчаливый режим) для подавления ненужной информации. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> остановлен, то следует использовать опцию </span><span style=" font-family:'Courier New,courier';">--update-state</span><span style=" font-family:'Ubuntu';"> для указания </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> отмечать таблицы как 'проверенные'(checked). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ремонтировать следует только те таблицы, для которых </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> выдала ошибки. Для таких таблиц следует перейти к стадии 2. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если во время проверки будут получены странные ошибки (подобные out of memory), или </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> завершится аварийно, то перейдите к стадии 3. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Стадия 2: легкий безопасный ремонт</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Примечание: если есть желание ускорить ремонт, рекомендуется добавить: </span><span style=" font-family:'Courier New,courier';">-O sort_buffer=# -O key_buffer=#</span><span style=" font-family:'Ubuntu';"> (где # примерно 1/4 от имеющейся памяти) во всех командах </span><span style=" font-family:'Courier New,courier';">isamchk</span><span style=" font-family:'Ubuntu';">/</span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сначала надо попробовать запустить </span><span style=" font-family:'Courier New,courier';">myisamchk -r -q tbl_name</span><span style=" font-family:'Ubuntu';"> (</span><span style=" font-family:'Courier New,courier';">-r -q</span><span style=" font-family:'Ubuntu';"> означает &quot;режим быстрого восстановления&quot;). При этом будет сделана попытка исправить индексный файл без изменения файла данных. Если в файле данных содержится все необходимое, а удаленные связи указывают на правильные позиции в файле данных, то команда должна дать результат и таблица будет исправлена. Перейдите к ремонту следующей таблицы. В противном случае следует выполнить следующие действия: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сделать резервную копию файла данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Использовать <span style=" font-family:'Courier New,courier';">myisamchk -r tbl_name</span> (<span style=" font-family:'Courier New,courier';">-r</span> означает &quot;режим восстановления&quot;). При этом из файла данных будут удалены некорректные и уничтоженные записи, и будет заново создан индексный файл. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если на предыдущем шаге проблему решить не удастся, то используйте <span style=" font-family:'Courier New,courier';">myisamchk --safe-recover tbl_name</span>. В режиме безопасного восстановления используется старый метод восстановления, справляющийся с некоторыми случаями, которые оказываются не под силу для режима обычного исправления (но работает этот метод медленнее). </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если во время проверки будут получены странные ошибки (подобные out of memory) или </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> аварийно завершается, то перейдите к стадии 3. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Стадия 3: сложный ремонт</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">До этой стадии дело доходит, только если первый 16-килобайтный блок в индексном файле разрушен или содержит неверную информацию, либо когда индексный файл отсутствует. В этом случае необходимо создать новый индексный файл. Необходимо выполнить следующие действия: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Переместить файл данных в какое-нибудь безопасное место. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Использовать файл описания таблицы для создания новых (пустых) файлов - данных и индексного: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql db_name</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SET AUTOCOMMIT=1;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">TRUNCATE TABLE table_name;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">quit</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если используемая версия SQL не располагает </span><span style=" font-family:'Courier New,courier';">TRUNCATE TABLE</span><span style=" font-family:'Ubuntu';">, то взамен используется </span><span style=" font-family:'Courier New,courier';">DELETE FROM table_name</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Скопируйте старый файл данных на место недавно созданного (делать перемещение старого файла обратно на место нового нецелесообразно, поскольку в старом файле может снова возникнуть потребность, если что-то пойдет не так). </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вернитесь к стадии 2. </span><span style=" font-family:'Courier New,courier';">myisamchk -r -q</span><span style=" font-family:'Ubuntu';"> теперь должна сработать (но бесконечно повторять стадии не следует). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Что касается MySQL 4.0.2, то тут можно воспользоваться </span><span style=" font-family:'Courier New,courier';">REPAIR ... USE_FRM</span><span style=" font-family:'Ubuntu';">, выполняющей всю эту процедуру автоматически. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Стадия 4: очень сложный ремонт</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">До этой стадии вы дойдете только в случае, если ко всему прочему запорчен и файл описания. Такого происходить не должно, поскольку файл описания после создания таблицы не изменяется. Выполните следующие действия: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Восстановите файл описания из резервной копии и перейдите к стадии 3. Можно также восстановить индексный файл и вернуться к стадии 2. Во втором случае начинать надо с <span style=" font-family:'Courier New,courier';">myisamchk -r</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если резервной копии нет, но точно известно, как таблица создавалась, то создается копия таблицы в другой базе данных. Новый файл данных удаляется, затем файл описания с индексным файлом перемещаются из другой базы данных в поврежденную. Таким образом вы получаете новый файл описания и индексный файл, не затрагивая при этом файла данных. Делается возврат к стадии 2 с попыткой воссоздать индексный файл. </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="optimisation"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.4.6.10. Оптимизация таблиц</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы объединить фрагментированные записи и избавиться от потерь пространства, происходящих из-за удаления и обновления записей, нужно запустить </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> в режиме восстановления: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">myisamchk -r tbl_name</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Такую же оптимизацию таблицы можно произвести, используя команду SQL </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';">. </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> выполняет ремонт таблицы и анализ ключей, а также сортирует дерево индексов для ускорения поиска ключей. Вдобавок сводится на нет нежелательное взаимодействие между утилитой и сервером, поскольку при использовании </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> работу выполняет сам сервер. Обращайтесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimize-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.1, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimize-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">OPTIMIZE TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimize-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> также располагает рядом других опций, которые можно использовать для повышения производительности таблицы: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-S</span>, <span style=" font-family:'Courier New,courier';">--sort-index</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-R index_num</span>, <span style=" font-family:'Courier New,courier';">--sort-records=index_num</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-a</span>, <span style=" font-family:'Courier New,courier';">--analyze</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Полное описание опций можно найти в разделе See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-syntax"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.6.1, «Синтаксис запуска </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-syntax"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisamchk</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisamchk-syntax"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="maintenance-regimen"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.4.7. Настройка режима профилактики таблиц</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с версии MySQL 3.23.13 можно проверять таблицы типа </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> с помощью команды </span><span style=" font-family:'Courier New,courier';">CHECK TABLE</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.4, «Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">CHECK TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#check-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). Для ремонта таблиц можно использовать команду </span><span style=" font-family:'Courier New,courier';">REPAIR TABLE</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.5, «Синтаксис </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">REPAIR TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#repair-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Целесообразно выполнять регулярные проверки таблиц, не дожидаясь появления проблем. В целях профилактики для проверки таблиц можно использовать </span><span style=" font-family:'Courier New,courier';">myisamchk -s</span><span style=" font-family:'Ubuntu';">. Опция </span><span style=" font-family:'Courier New,courier';">-s</span><span style=" font-family:'Ubuntu';"> (сокращение для </span><span style=" font-family:'Courier New,courier';">--silent</span><span style=" font-family:'Ubuntu';">) задает выполнение </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> в молчаливом режиме с выдачей сообщений только при возникновении ошибок. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не стоит сбрасывать со счетов и выполнение проверки таблиц при запуске сервера. Например, всякий раз, когда во время обновления происходит перезагрузка, необходима проверка всех таблиц, которые могли при этом пострадать (назовем их &quot;потенциально поврежденными таблицами&quot;). В </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> можно добавить тест, запускающий </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> для проверки всех таблиц, измененных за последние 24 часа, в случае, если после перезагрузки остался старый файл </span><span style=" font-family:'Courier New,courier';">.pid</span><span style=" font-family:'Ubuntu';"> (ID процесса) (</span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> создает </span><span style=" font-family:'Courier New,courier';">.pid</span><span style=" font-family:'Ubuntu';">-файл во время запуска и удаляет его при нормальном завершении; наличие </span><span style=" font-family:'Courier New,courier';">.pid</span><span style=" font-family:'Ubuntu';">-файла во время запуска системы свидетельствует о том, что mysqld не завершился нормально). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно сделать даже более надежный тест - выполнить проверку таблиц с более поздней, чем у </span><span style=" font-family:'Courier New,courier';">.pid</span><span style=" font-family:'Ubuntu';">-файла, датой последней модификации. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таблицы также следует регулярно проверять в ходе нормального функционирования системы. У себя в </span><span style=" font-family:'Courier New,courier';">MySQL AB</span><span style=" font-family:'Ubuntu';"> мы запускаем задачи по </span><span style=" font-family:'Courier New,courier';">cron</span><span style=" font-family:'Ubuntu';"> для проверки всех наших важных таблиц раз в неделю, используя следующую строку в файле </span><span style=" font-family:'Courier New,courier';">crontab</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">35 0 * * 0 /path/to/myisamchk --fast --silent /path/to/datadir/*/*.MYI</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Такая команда отображает информацию о поврежденных таблицах, и мы при надобности можем их исследовать и исправить. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Поскольку за последние пару лет у нас (на самом деле) не было неожиданно поврежденных таблиц (таблиц, получивших повреждение по причинам, отличным от неисправностей оборудования), то для нас проверки один раз в неделю более чем достаточно. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Мы рекомендуем для начала выполнять </span><span style=" font-family:'Courier New,courier';">myisamchk -s</span><span style=" font-family:'Ubuntu';"> еженощно на всех таблицах, обновленных на протяжении последних 24 часов, пока вы не станете доверять MySQL настолько, насколько доверяем мы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обычно в таком контроле над таблицами MySQL необходимости нет. При изменении таблиц с динамическим размером строк (таблиц со столбцами типов </span><span style=" font-family:'Courier New,courier';">VARCHAR</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">BLOB</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">TEXT</span><span style=" font-family:'Ubuntu';">) или при наличии таблиц с большим числом удаленных строк может потребоваться время от времени (где-то раз в месяц) дефрагментировать таблицы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Это можно сделать, используя </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> на аналогичных таблицах, или, если есть возможность приостановить </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, выполняя: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">isamchk -r --silent --sort-index -O sort_buffer_size=16M */*.ISM</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk -r --silent --sort-index -O sort_buffer_size=16M */*.MYI</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="table-info"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.4.8. Получение информации о таблице</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команды, представленные в этом разделе, используются для получения описания таблицы или статистики по таблице. Более подробное выборочное разъяснение вывода этих команд будет приведено ниже: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">myisamchk -d tbl_name Выполняет myisamchk в &quot;описательном режиме&quot; для вывода описания таблицы. Если MySQL использует опцию <span style=" font-family:'Courier New,courier';">--skip-external-locking</span>, то <span style=" font-family:'Courier New,courier';">myisamchk</span> может сообщить об ошибке для таблицы, обновляемой во время исполнения утилиты. Однако поскольку <span style=" font-family:'Courier New,courier';">myisamchk</span> не меняет таблицы в описательном режиме, то никакого риска разрушения данных нет. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">myisamchk -d -v tbl_name Для выдачи дополнительной информации по действиям, выполняемым утилитой <span style=" font-family:'Courier New,courier';">myisamchk</span>, добавляется -v для указания расширенного режима вывода сообщений. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">myisamchk -eis tbl_name Отображается только наиболее важная информация из таблицы. Работает медленно вследствие того, что приходится считывать всю таблицу. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">myisamchk -eiv tbl_name То же, что и <span style=" font-family:'Courier New,courier';">-eis</span>, но с сообщением о выполняемых действиях. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пример вывода </span><span style=" font-family:'Courier New,courier';">myisamchk -d</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MyISAM file:     company.MYI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Record format:   Fixed length</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Data records:    1403698  Deleted blocks:         0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recordlength:    226</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">table description:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key Start Len Index   Type</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">1   2     8   unique  double</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">2   15    10  multip. text packed stripped</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">3   219   8   multip. double</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">4   63    10  multip. text packed stripped</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">5   167   2   multip. unsigned short</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">6   177   4   multip. unsigned long</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">7   155   4   multip. text</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">8   138   4   multip. unsigned long</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">9   177   4   multip. unsigned long</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    193   1           text</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пример вывода </span><span style=" font-family:'Courier New,courier';">myisamchk -d -v</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MyISAM file:         company</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Record format:       Fixed length</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">File-version:        1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Creation time:       1999-10-30 12:12:51</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recover time:        1999-10-31 19:13:01</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Status:              checked</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Data records:           1403698  Deleted blocks:              0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Datafile parts:         1403698  Deleted data:                0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Datafilepointer (bytes):      3  Keyfile pointer (bytes):     3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Max datafile length: 3791650815  Max keyfile length: 4294967294</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recordlength:               226</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">table description:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key Start Len Index   Type                  Rec/key     Root Blocksize</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">1   2     8   unique  double                      1 15845376      1024</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">2   15    10  multip. text packed stripped        2 25062400      1024</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">3   219   8   multip. double                     73 40907776      1024</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">4   63    10  multip. text packed stripped        5 48097280      1024</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">5   167   2   multip. unsigned short           4840 55200768      1024</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">6   177   4   multip. unsigned long            1346 65145856      1024</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">7   155   4   multip. text                     4995 75090944      1024</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">8   138   4   multip. unsigned long              87 85036032      1024</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">9   177   4   multip. unsigned long             178 96481280      1024</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    193   1           text</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пример вывода </span><span style=" font-family:'Courier New,courier';">myisamchk -eis</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Checking MyISAM file: company</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  1:  Keyblocks used:  97%  Packed:    0%  Max levels:  4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  2:  Keyblocks used:  98%  Packed:   50%  Max levels:  4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  3:  Keyblocks used:  97%  Packed:    0%  Max levels:  4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  4:  Keyblocks used:  99%  Packed:   60%  Max levels:  3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  5:  Keyblocks used:  99%  Packed:    0%  Max levels:  3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  6:  Keyblocks used:  99%  Packed:    0%  Max levels:  3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  7:  Keyblocks used:  99%  Packed:    0%  Max levels:  3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  8:  Keyblocks used:  99%  Packed:    0%  Max levels:  3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  9:  Keyblocks used:  98%  Packed:    0%  Max levels:  4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Total:    Keyblocks used:  98%  Packed:   17%</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Records:          1403698    M.recordlength:     226</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Packed:             0%</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recordspace used:     100%   Empty space:          0%</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Blocks/Record:   1.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Record blocks:    1403698    Delete blocks:        0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recorddata:     317235748    Deleted data:         0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Lost space:             0    Linkdata:             0</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">User time 1626.51, System time 232.36</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Maximum resident set size 0, Integral resident set size 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Non physical pagefaults 0, Physical pagefaults 627, Swaps 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Blocks in 0 out 0, Messages in 0 out 0, Signals 0</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Voluntary context switches 639, Involuntary context switches 28966</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пример вывода </span><span style=" font-family:'Courier New,courier';">myisamchk -eiv</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Checking MyISAM file: company</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Data records: 1403698   Deleted blocks:       0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check file-size</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check delete-chain</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">block_size 1024:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">index  1:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">index  2:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">index  3:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">index  4:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">index  5:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">index  6:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">index  7:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">index  8:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">index  9:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">No recordlinks</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check index reference</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check data record references index: 1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  1:  Keyblocks used:  97%  Packed:    0%  Max levels:  4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check data record references index: 2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  2:  Keyblocks used:  98%  Packed:   50%  Max levels:  4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check data record references index: 3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  3:  Keyblocks used:  97%  Packed:    0%  Max levels:  4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check data record references index: 4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  4:  Keyblocks used:  99%  Packed:   60%  Max levels:  3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check data record references index: 5</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  5:  Keyblocks used:  99%  Packed:    0%  Max levels:  3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check data record references index: 6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  6:  Keyblocks used:  99%  Packed:    0%  Max levels:  3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check data record references index: 7</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  7:  Keyblocks used:  99%  Packed:    0%  Max levels:  3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check data record references index: 8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  8:  Keyblocks used:  99%  Packed:    0%  Max levels:  3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check data record references index: 9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key:  9:  Keyblocks used:  98%  Packed:    0%  Max levels:  4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Total:    Keyblocks used:   9%  Packed:   17%</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- check records and index references</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[кое-что опущено для краткости]</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Records:          1403698    M.recordlength:     226   Packed:             0%</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recordspace used:     100%   Empty space:          0%  Blocks/Record:   1.00</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Record blocks:    1403698    Delete blocks:        0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recorddata:     317235748    Deleted data:         0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Lost space:             0    Linkdata:             0</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">User time 1639.63, System time 251.61</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Maximum resident set size 0, Integral resident set size 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Non physical pagefaults 0, Physical pagefaults 10580, Swaps 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Blocks in 4 out 0, Messages in 0 out 0, Signals 0</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Voluntary context switches 10604, Involuntary context switches 122798</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для использованной в предыдущих примерах таблицы размеры файла данных и индексного файла были следующими: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-rw-rw-r-- 1 monty tcx 317235748 Jan 12 17:30 company.MYD</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-rw-rw-r-- 1 davida tcx 96482304 Jan 12 18:35 company.MYM</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ниже приводятся пояснения по различным типам выдаваемой </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> информации. ``keyfile'' означает индексный файл. ``Record'' (запись) и ``row'' (строка) являются синонимами: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">ISAM file - Имя (индексного) файла ISAM. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Isam-version - Версия формата ISAM. На данный момент всегда 2. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Creation time - Время создания файла данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Recover time - Дата последнего восстановления индексного файла/файла данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Data records - Количество записей в таблице. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Deleted blocks - Количество удаленных блоков, пространство для которых все еще зарезервировано. Таблицу можно оптимизировать для сведения к минимуму этого пространства (see <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimisation"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.4.6.10, «Оптимизация таблиц»</span></a>). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Datafile parts - Для динамического формата записей показывает количество блоков данных. Для оптимизированной таблицы без фрагментированных записей совпадает с <span style=" font-family:'Courier New,courier';">Data records</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Deleted data - Количество байтов удаленных данных, которые не были затребованы. Можно оптимизировать таблицу, чтобы сделать этот объем минимальным (see <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimisation"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.4.6.10, «Оптимизация таблиц»</span></a>). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Data file pointer - Размер указателя в файле данных (в байтах). Обычно это 2, 3, 4 или 5 байтов. Для большинства таблиц достаточно 2 байтов, но назначение размера пока невозможно контролировать из MySQL. Для фиксированных таблиц указатель - это адрес записи, а для динамических - адрес байта. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Keyfile pointer - Размер указателя индексного файла в байтах. Обычно составляет 1, 2 или 3 байта. Для большинства таблиц хватает 2 байтов, но размер автоматически вычисляется MySQL. Указатель всегда является адресом блока. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Max datafile length - Максимальный размер файла данных таблицы (<span style=" font-family:'Courier New,courier';">.MYD</span>-файл) в байтах. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Max keyfile length - Максимальный размер индексного файла таблицы (<span style=" font-family:'Courier New,courier';">.MYI-файла</span>) в байтах. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Recordlength - Размер отдельной записи в байтах. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Record format - Формат, используемый для хранения строк таблицы. В примерах, приведенных выше, использовался формат <span style=" font-family:'Courier New,courier';">Fixed length</span>. Другие возможные значения: <span style=" font-family:'Courier New,courier';">Compressed</span> и <span style=" font-family:'Courier New,courier';">Packed</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">table description - Список всех ключей в таблице. Для каждого ключа представляется некоторая низкоуровневая информация: </li>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Key Номер данного ключа. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Start Место в записи, где начинается данная часть индекса. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Len Длина данной части индекса. Для упакованных чисел длина всегда должна равняться полной длине для столбца. Для строк длина может быть меньше полной длины индексированной колонки, поскольку допускается индексирование префикса столбца со значениями строками. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Индекс <span style=" font-family:'Courier New,courier';">unique</span> или <span style=" font-family:'Courier New,courier';">multip</span>. (multiple - повторяющийся/многократный) Показывает, может ли одно значение встречаться в индексе многократно. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Type Тип данных данной части индекса. Это тип данных <span style=" font-family:'Courier New,courier';">ISAM</span> с возможными вариантами - <span style=" font-family:'Courier New,courier';">packed</span>, <span style=" font-family:'Courier New,courier';">stripped</span> и <span style=" font-family:'Courier New,courier';">empty</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Root Адрес корневого индексного блока. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Blocksize Размер каждого индексного блока. По умолчанию равен 1024, но значение можно изменить во время компиляции. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Rec/key Статистическое значение, используемое оптимизатором. Оно показывает, сколько записей приходится на одно значение для данного ключа. Для уникального ключа это соотношение всегда 1. Значение может быть обновлено после загрузки таблицы (или значительного ее изменения) посредством <span style=" font-family:'Courier New,courier';">myisamchk -a</span>. Если соотношение совсем не обновляется, то по умолчанию принимается значение 30. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В первом из приведенных примеров 9-й ключ является составным с двумя частями. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Keyblocks used - Процент использованных блоков ключей. Поскольку для примера была взята таблица, совсем недавно реорганизованная при помощи <span style=" font-family:'Courier New,courier';">myisamchk</span>, то значения очень высоки (очень близки к теоретическому максимуму). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Packed - MySQL пытается упаковывать ключи с общим суффиксом. Это может быть использовано только для ключей типа <span style=" font-family:'Courier New,courier';">CHAR</span>/<span style=" font-family:'Courier New,courier';">VARCHAR</span>/<span style=" font-family:'Courier New,courier';">DECIMAL</span>. Для длинных строк, таких как имена, при помощи упаковки можно значительно уменьшить занимаемое ими место. В третьем из приведенных примеров 4-й ключ состоит из 10 символов и для него достигнуто 60%-е уменьшение в объеме. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Max levels - Глубина B-дерева для данного ключа. В больших таблицах с длинными ключами значение является большим. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Records Количество строк в таблице. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">M.recordlength - Средняя длина записи. Для таблиц с фиксированной длиной записи равняется точной длине записи. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Packed - MySQL отбрасывает пробелы в конце строк. Значение <span style=" font-family:'Courier New,courier';">Packed</span> указывает на процент достигнутой этим экономии. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Recordspace used - Процент использования файла данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Empty space - На сколько процентов файл данных не использован. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Blocks/Record - Среднее число блоков на запись (т.е. из какого числа связей состоит фрагментированная запись). Отношение всегда 1,0 для таблиц фиксированного формата. Важно, чтобы это значение было как можно ближе к 1,0. Если значение становится слишком большим, можно реорганизовать таблицу с помощью <span style=" font-family:'Courier New,courier';">myisamchk</span>. Обращайтесь к разделу See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimisation"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.4.6.10, «Оптимизация таблиц»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Recordblocks - Количество использованных блоков (связей). Для фиксированного формата совпадает с количеством записей. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Deleteblocks - Количество удаленных блоков (связей). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Recorddata - Количество использованных байтов в файле данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Deleted data - Количество удаленных (неиспользуемых) байтов в файле данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Lost space - Если запись при обновлении уменьшается, то теряется некоторое пространство. Данное значение является суммой всех таких потерь в байтах. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Linkdata - При использовании динамического формата таблиц фрагменты записи связываются с помощью указателей (каждый от 4 до 7 байтов). <span style=" font-family:'Courier New,courier';">Linkdata</span> - общий объем памяти, занимаемый всеми такими указателями. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если таблица была сжата при помощи </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';">, то </span><span style=" font-family:'Courier New,courier';">myisamchk -d</span><span style=" font-family:'Ubuntu';"> выдает дополнительную информацию о каждом столбце в таблице. Обращайтесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisampack"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.7.4, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisampack"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisampack</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisampack"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, MySQL-генератор сжатых таблиц (только для чтения)»</span></a><span style=" font-family:'Ubuntu';">, где приведен пример такой информации и пояснение к ней. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="database-administration"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">.5. Справочник по языку администрирования баз данных</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimize-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.1. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#optimize-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">OPTIMIZE TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#analyze-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.2. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#analyze-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">ANALYZE TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.3. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">FLUSH</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#reset"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.4. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#reset"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">RESET</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#kill"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.5. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#kill"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">KILL</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6. Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW</span></a></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="optimize-table"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.5.1. Синтаксис команды </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">OPTIMIZE TABLE</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE tbl_name[,tbl_name]...</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> должна использоваться после удаления большей части таблицы или если в таблице было внесено много изменений в строки переменной длины (таблицы, в которых есть столбцы </span><span style=" font-family:'Courier New,courier';">VARCHAR</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">BLOB</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">TEXT</span><span style=" font-family:'Ubuntu';">). Удаленные записи поддерживаются при помощи связного списка, и последующие операции </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> повторно используют позиции старых записей. Чтобы перераспределить неиспользуемое пространство и дефрагментировать файл данных, можно воспользоваться командой </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На данный момент команда </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> работает только с таблицами </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">BDB</span><span style=" font-family:'Ubuntu';">. Для таблиц </span><span style=" font-family:'Courier New,courier';">BDB</span><span style=" font-family:'Ubuntu';"> команда </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> выполняет </span><span style=" font-family:'Courier New,courier';">ANALYZE TABLE</span><span style=" font-family:'Ubuntu';">. См. раздел See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#analyze-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.2, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#analyze-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">ANALYZE TABLE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#analyze-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно применить </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> к таблицам других типов, запустив </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> с параметром </span><span style=" font-family:'Courier New,courier';">--skip-new</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">--safe-mode</span><span style=" font-family:'Ubuntu';">, но в этом случае </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> лишь только выполняет </span><span style=" font-family:'Courier New,courier';">ALTER TABLE</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> работает следующим образом: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если в таблице есть удаленные или разделенные строки, восстанавливает таблицу. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если индексные страницы не отсортированы - сортирует их. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если статистические данные не обновлены (и восстановление нельзя осуществить путем сортировки индексов), обновляет их. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> для </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> представляет собой эквивалент выполнения </span><span style=" font-family:'Courier New,courier';">myisamchk --quick --check-only-changed --sort-index --analyze</span><span style=" font-family:'Ubuntu';"> над таблицей. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание: во время работы </span><span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span><span style=" font-family:'Ubuntu';"> таблица заблокирована! </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="analyze-table"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.5.2. Синтаксис команды </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">ANALYZE TABLE</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ANALYZE TABLE tbl_name[,tbl_name...]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Анализирует и сохраняет распределение ключей для таблицы. Во время проведения анализа таблица заблокирована для чтения. Эта функция работает для таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">BDB</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Данная команда является эквивалентом выполнения </span><span style=" font-family:'Courier New,courier';">myisamchk -a</span><span style=" font-family:'Ubuntu';"> для таблицы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сохраненное распределение ключей в MySQL используется для принятия решения о том, в каком порядке следует связывать таблицы, когда для связывания используются не константы, а другая база. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда выдает таблицу со следующими столбцами: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Столбец</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Table</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя таблицы</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Op</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Всегда ``analyze''</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Msg_type</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Одно из значений </span><span style=" font-family:'Courier New,courier';">status</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">error</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">info</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">warning</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Msg_text</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сообщение.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Просмотреть сохраненное распределение ключей можно при помощи команды </span><span style=" font-family:'Courier New,courier';">SHOW INDEX</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-database-info"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.6.1, «Получение информации по базам данных, таблицам, столбцам и индексам»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если таблица не изменялась с момента предыдущего запуска команды </span><span style=" font-family:'Courier New,courier';">ANALYZE TABLE</span><span style=" font-family:'Ubuntu';">, повторный анализ таблицы проводиться не будет. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="flush"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.5.3. Синтаксис команды </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">FLUSH</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">FLUSH flush_option [,flush_option] ...</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">FLUSH</span><span style=" font-family:'Ubuntu';"> применяется для очистки части кэша, используемого MySQL. Для запуска </span><span style=" font-family:'Courier New,courier';">FLUSH</span><span style=" font-family:'Ubuntu';"> необходимо обладать привилегиями </span><span style=" font-family:'Courier New,courier';">RELOAD</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Параметр </span><span style=" font-family:'Courier New,courier';">flush_option</span><span style=" font-family:'Ubuntu';"> может быть одним из следующих: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Параметр</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">HOSTS</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Производится очистка таблиц кэша удаленных компьютеров. Сброс таблиц удаленного компьютера следует производить, если один из удаленных компьютеров изменил IP-адрес или если было получено сообщение об ошибке </span><span style=" font-family:'Courier New,courier';">Host ... is blocked</span><span style=" font-family:'Ubuntu';">. Если во время соединения с сервером MySQL происходит больше ошибок подряд, чем указано в </span><span style=" font-family:'Courier New,courier';">max_connect_errors</span><span style=" font-family:'Ubuntu';"> для определенного удаленного компьютера, то MySQL предполагает, что что-то не в порядке, и блокирует последующие попытки установления соединения со стороны этого удаленного компьютера. Сброс таблиц удаленного компьютера позволяет снова попытаться установить соединение. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#blocked-host"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел A.2.4, «Ошибка </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#blocked-host"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">Host '...' is blocked</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#blocked-host"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. Чтобы это сообщение об ошибке не появлялось, запустите </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> с параметром </span><span style=" font-family:'Courier New,courier';">-O max_connect_errors=999999999</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">DES_KEY_FILE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Производится перезагрузка ключей </span><span style=" font-family:'Courier New,courier';">DES</span><span style=" font-family:'Ubuntu';"> из файла, указанного параметром </span><span style=" font-family:'Courier New,courier';">--des-key-file</span><span style=" font-family:'Ubuntu';">, при запуске сервера.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">LOGS</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Закрываются и повторно открывается все файлы журналов. Если файл журнала обновлений или файл бинарного журнала был указан без расширения, номер расширения файла журнала будет увеличен на единицу относительно предыдущего файла. Если в имени файла было указано расширение, MySQL закроет и повторно откроет файл журнала обновлений. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#update-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.3, «Журнал обновлений (update)»</span></a><span style=" font-family:'Ubuntu';">. Эти действия аналогичны отправке сигнала </span><span style=" font-family:'Courier New,courier';">SIGHUP</span><span style=" font-family:'Ubuntu';"> на сервер </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PRIVILEGES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Производится перезагрузка привилегий из таблиц привилегий в базе данных </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">QUERY CACHE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Производится дефрагментация кэша запросов, чтобы эффективнее использовать его память. Эта команда не удаляет запросы из кэша, как команда </span><span style=" font-family:'Courier New,courier';">RESET QUERY CACHE</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">TABLES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Закрываются все открытые таблицы и принудительно закрываются все используемые таблицы. Также сбрасывается кэш запросов.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[TABLE | TABLES] tbl_name [,tbl_name...]</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Производится сброс только указанных таблиц.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">TABLES WITH READ LOCK</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Закрываются все открытые таблицы и блокируется доступ для чтения всех таблиц для всех баз данных, пока не будет запущена команда </span><span style=" font-family:'Courier New,courier';">UNLOCK TABLES</span><span style=" font-family:'Ubuntu';">. Это очень удобный способ создавать резервные копии, если у вас файловая система наподобие Veritas, которая может обеспечить моментальные снимки данных в режиме реального времени.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">STATUS</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Большинство переменных состояния сбрасываются в нуль. Эту команду необходимо использовать при отладке запроса.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">USER_RESOURCES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все ресурсы пользователя сбрасываются в нулевое значение. Это позволяет заблокированному пользователю подсоединиться еще раз. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#user-resources"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.3.6, «Ограничение ресурсов пользователя»</span></a><span style=" font-family:'Ubuntu';">.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ко всем приведенным выше командам можно получить доступ при помощи утилиты </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';">, используя команды </span><span style=" font-family:'Courier New,courier';">flush-hosts</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">flush-logs</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">reload</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">flush-tables</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Рекомендуется также ознакомиться с командой </span><span style=" font-family:'Courier New,courier';">RESET</span><span style=" font-family:'Ubuntu';">, которая применяется с репликацией. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#reset"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.4, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#reset"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">RESET</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#reset"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="reset"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.5.4. Синтаксис команды </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">RESET</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">RESET reset_option [,reset_option] ...</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">RESET</span><span style=" font-family:'Ubuntu';"> используется для очистки. Кроме того, она также действует как более сильная версия команды </span><span style=" font-family:'Courier New,courier';">FLUSH</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.3, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">FLUSH</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы запустить команду </span><span style=" font-family:'Courier New,courier';">RESET</span><span style=" font-family:'Ubuntu';">, необходимо обладать привилегиями </span><span style=" font-family:'Courier New,courier';">RELOAD</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Параметр</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MASTER</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Удаляет все бинарные журналы, перечисленные в индексном файле, обнуляет значения индексного файла </span><span style=" font-family:'Courier New,courier';">binlog</span><span style=" font-family:'Ubuntu';">. В версиях до 3.23.26 - </span><span style=" font-family:'Courier New,courier';">FLUSH MASTER</span><span style=" font-family:'Ubuntu';"> (Master)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SLAVE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сбрасывает положение репликации подчиненного компьютера в журналах головного компьютера. В версиях до 3.23.26 эта команда называлась </span><span style=" font-family:'Courier New,courier';">FLUSH SLAVE</span><span style=" font-family:'Ubuntu';"> (Slave)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">QUERY CACHE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Удаляет все результаты запросов из кэша запросов.</span></p></td></tr></table>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="kill"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.5.5. Синтаксис команды </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">KILL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">KILL thread_id</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Каждое соединение с </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> запускается в отдельном потоке. При помощи команды </span><span style=" font-family:'Courier New,courier';">SHOW PROCESSLIST</span><span style=" font-family:'Ubuntu';"> можно просмотреть список запущенных потоков, а при помощи команды </span><span style=" font-family:'Courier New,courier';">KILL thread_id</span><span style=" font-family:'Ubuntu';"> - удалить поток. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если у вас есть привилегия </span><span style=" font-family:'Courier New,courier';">PROCESS</span><span style=" font-family:'Ubuntu';">, можно просмотреть все потоки. Обладая привилегией </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';">, можно удалять любые потоки. В противном случае можно просматривать и удалять только свои собственные потоки. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для просмотра и удаления потоков можно также применять команды </span><span style=" font-family:'Courier New,courier';">mysqladmin processlist</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">mysqladmin kill</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При использовании команды </span><span style=" font-family:'Courier New,courier';">KILL</span><span style=" font-family:'Ubuntu';"> для потока устанавливается специальный флаг </span><span style=" font-family:'Courier New,courier';">kill flag</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В большинстве случаев удаление потока занимает некоторое время, поскольку этот флаг проверяется с определенным интервалом. </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В циклах <span style=" font-family:'Courier New,courier';">SELECT</span>, <span style=" font-family:'Courier New,courier';">ORDER BY</span> и <span style=" font-family:'Courier New,courier';">GROUP BY</span> флаг проверяется только после считывания блока строк. Если установлен флаг удаления, то выполнение оператора будет отменено. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При выполнении команды <span style=" font-family:'Courier New,courier';">ALTER TABLE</span> флаг удаления проверяется перед считыванием каждого блока строк из исходной таблицы. Если флаг установлен, то выполнение команды отменяется и временная таблица удаляется. При выполнении команд <span style=" font-family:'Courier New,courier';">UPDATE</span> и <span style=" font-family:'Courier New,courier';">DELETE</span> флаг удаления проверяется после каждого считывания блока, а также после каждого обновления или удаления строки. Если флаг удаления установлен, то выполнение оператора отменяется. Обратите внимание: если не используются транзакции, то отменить изменения будет невозможно! </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">GET_LOCK()</span> будет отменен при помощи <span style=" font-family:'Courier New,courier';">NULL</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Поток <span style=" font-family:'Courier New,courier';">INSERT DELAYED</span> быстро сбросит все строки, которые он содержит в памяти и будет удален. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если поток находится в заблокированной таблице (состояние: <span style=" font-family:'Courier New,courier';">Locked</span>), то блокировка таблицы будет быстро отменена. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если поток ожидает освобождения дискового пространства в запросе write, запись будет отменена с выдачей сообщения о переполнении диска. </li></ul>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.5.6. Синтаксис команды </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">SHOW</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-database-info"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.1. Получение информации по базам данных, таблицам, столбцам и индексам</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-table-status"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.2. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-table-status"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW TABLE STATUS</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-status"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.3. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-status"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW STATUS</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-variables"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.4. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-variables"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW VARIABLES</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-logs"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.5. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-logs"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW LOGS</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-processlist"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.6. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-processlist"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW PROCESSLIST</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-grants"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.7. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-grants"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW GRANTS</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-create-table"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.8. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-create-table"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW CREATE TABLE</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-warnings"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.9. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-warnings"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW WARNINGS | ERRORS</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-table-types"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.10. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-table-types"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW TABLE TYPES</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-privileges"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.5.6.11. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show-privileges"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW PRIVILEGES</span></a></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW DATABASES [LIKE wild]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW [OPEN] TABLES [FROM db_name] [LIKE wild]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW [FULL] COLUMNS FROM tbl_name [FROM db_name] [LIKE wild]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW INDEX FROM tbl_name [FROM db_name]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW TABLE STATUS [FROM db_name] [LIKE wild]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW STATUS [LIKE wild]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW VARIABLES [LIKE wild]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW LOGS</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW [FULL] PROCESSLIST</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW GRANTS FOR user</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW CREATE TABLE table_name</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW MASTER STATUS</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW MASTER LOGS</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW SLAVE STATUS</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW WARNINGS [LIMIT #]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW ERRORS [LIMIT #]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или SHOW TABLE TYPES</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW</span><span style=" font-family:'Ubuntu';"> предоставляет информацию по базам данных, таблицам, столбцам или о состоянии сервера. Если используется </span><span style=" font-family:'Courier New,courier';">LIKE wild</span><span style=" font-family:'Ubuntu';">, то строка </span><span style=" font-family:'Courier New,courier';">wild</span><span style=" font-family:'Ubuntu';"> может содержать в себе шаблонные символы SQL ‘</span><span style=" font-family:'Courier New,courier';">%</span><span style=" font-family:'Ubuntu';">’ и ‘</span><span style=" font-family:'Courier New,courier';">_</span><span style=" font-family:'Ubuntu';">’. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-database-info"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.1. Получение информации по базам данных, таблицам, столбцам и индексам</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно использовать два альтернативных синтаксиса - </span><span style=" font-family:'Courier New,courier';">tbl_name FROM db_name</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">db_name.tbl_name</span><span style=" font-family:'Ubuntu';">. Приведенные ниже два оператора эквивалентны: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SHOW INDEX FROM mytable FROM mydb;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SHOW INDEX FROM mydb.mytable;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';"> выдает список баз данных на компьютере, где установлен сервер MySQL. Этот список можно также получить, воспользовавшись инструментом командной строки </span><span style=" font-family:'Courier New,courier';">mysqlshow</span><span style=" font-family:'Ubuntu';">. В версии 4.0.2 можно увидеть только те базы данных, для которых у вас есть какие-либо привилегии, если вы не имеете глобальной привилегии </span><span style=" font-family:'Courier New,courier';">SHOW DATABASES</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW TABLES</span><span style=" font-family:'Ubuntu';"> выводит список таблиц в указанной базе данных. Этот список также можно получить, используя команду </span><span style=" font-family:'Courier New,courier';">mysqlshow db_name</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Примечание</span><span style=" font-family:'Ubuntu';">: если у пользователя нет никаких привилегий для таблицы, таблица не будет показана в результатах команды </span><span style=" font-family:'Courier New,courier';">SHOW TABLES</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">mysqlshow db_name</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW OPEN TABLES</span><span style=" font-family:'Ubuntu';"> выводит список таблиц, которые в настоящий момент открыты в кэше таблицы. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#table-cache"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.4.7, «Открытие и закрытие таблиц в MySQL»</span></a><span style=" font-family:'Ubuntu';">. В поле </span><span style=" font-family:'Courier New,courier';">Comment</span><span style=" font-family:'Ubuntu';"> указывается, сколько раз таблица кэшировалась (</span><span style=" font-family:'Courier New,courier';">cached</span><span style=" font-family:'Ubuntu';">) и сколько раз использовалась (</span><span style=" font-family:'Courier New,courier';">in_use</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW COLUMNS</span><span style=" font-family:'Ubuntu';"> выводит список столбцов в заданной таблице. Если указать параметр </span><span style=" font-family:'Courier New,courier';">FULL</span><span style=" font-family:'Ubuntu';">, то будут показаны также ваши привилегии для каждого столбца. Если типы столбцов отличаются от заданных в параметрах оператора </span><span style=" font-family:'Courier New,courier';">CREATE TABLE</span><span style=" font-family:'Ubuntu';">, учтите, что MySQL иногда изменяет типы столбцов. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#silent-column-changes"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.5.3.1, «Молчаливые изменения определений столбцов»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Оператор </span><span style=" font-family:'Courier New,courier';">DESCRIBE</span><span style=" font-family:'Ubuntu';"> предоставляет почти такую же информацию, что и </span><span style=" font-family:'Courier New,courier';">SHOW COLUMNS</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#describe"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.6.2, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#describe"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">DESCRIBE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#describe"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> (Получение информации о столбцах)»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW FIELDS</span><span style=" font-family:'Ubuntu';"> является синонимом команды </span><span style=" font-family:'Courier New,courier';">SHOW COLUMNS</span><span style=" font-family:'Ubuntu';">, а команда </span><span style=" font-family:'Courier New,courier';">SHOW KEYS</span><span style=" font-family:'Ubuntu';"> - синонимом </span><span style=" font-family:'Courier New,courier';">SHOW INDEX</span><span style=" font-family:'Ubuntu';">. Список столбцов или индексов таблицы можно также вывести при помощи команды </span><span style=" font-family:'Courier New,courier';">mysqlshow db_name tbl_name</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">mysqlshow -k db_name tbl_name</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW INDEX</span><span style=" font-family:'Ubuntu';"> выводит информацию по индексу в формате, подобном формату вывода запроса </span><span style=" font-family:'Courier New,courier';">SQLStatistics в ODBC</span><span style=" font-family:'Ubuntu';">. Выводятся следующие столбцы: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Столбец</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Table</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя таблицы.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Non_unique</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">0 если индекс не может содержать дублирующихся значений.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя индекса.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Seq_in_index</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Порядковый номер столбца в индексе, начиная с 1.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Column_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя столбца.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Collation</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Как столбцы отсортированы в индексе. В MySQL в данном столбце могут присутствовать значения </span><span style=" font-family:'Courier New,courier';">'A'</span><span style=" font-family:'Ubuntu';"> (в порядке возрастания) или </span><span style=" font-family:'Courier New,courier';">NULL</span><span style=" font-family:'Ubuntu';"> (не отсортирован).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Cardinality</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество уникальных значений в индексе. Обновляется путем запуска </span><span style=" font-family:'Courier New,courier';">isamchk -a</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Sub_part</span><span style=" font-family:'Ubuntu';"> Количество индексированных символов, если столбец индексируется частично. Если проиндексирован весь ключ, то будет содержаться значение </span><span style=" font-family:'Courier New,courier';">NULL</span><span style=" font-family:'Ubuntu';">.</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Null</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Содержит значение </span><span style=" font-family:'Courier New,courier';">'YES'</span><span style=" font-family:'Ubuntu';">, если столбец может содержать </span><span style=" font-family:'Courier New,courier';">NULL</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Index_type</span><span style=" font-family:'Ubuntu';"> Используемый метод индексирования.</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Comment</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Различные примечания. На данный момент в версиях MySQL &lt; 4.0.2 выдается, является индекс </span><span style=" font-family:'Courier New,courier';">FULLTEXT</span><span style=" font-family:'Ubuntu';"> или нет.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание на то, что значение </span><span style=" font-family:'Courier New,courier';">Cardinality</span><span style=" font-family:'Ubuntu';"> подсчитывается по результатам статистики, сохраняющейся в виде целых чисел, которые недостаточно точны для небольших таблиц. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Столбцы </span><span style=" font-family:'Courier New,courier';">Null</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">Index_type</span><span style=" font-family:'Ubuntu';"> были добавлены начиная с версии MySQL 4.0.2. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-table-status"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.2. </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">SHOW TABLE STATUS</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW TABLE STATUS [FROM db_name] [LIKE wild]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW TABLE STATUS</span><span style=" font-family:'Ubuntu';"> (новшество версии 3.23) работает как </span><span style=" font-family:'Courier New,courier';">SHOW STATUS</span><span style=" font-family:'Ubuntu';">, но предоставляет большое количество информации по каждой таблице. Приведенный ниже список также можно получить, используя команду </span><span style=" font-family:'Courier New,courier';">mysqlshow --status db_name</span><span style=" font-family:'Ubuntu';">. Выводятся следующие столбцы: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Столбец</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя таблицы.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Type</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Тип таблицы. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Глава 7, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html"><span style=" font-family:'Ubuntu'; font-style:italic; text-decoration: underline; color:#0000ff;">Типы таблиц MySQL</span></a><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Row_format</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Формат хранения строк (Fixed, Dynamic, или Compressed).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Rows</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество строк.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Avg_row_length</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Средняя длина строки.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Data_length</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Размер файла данных.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Max_data_length</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Максимальная длина файла данных.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Index_length</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Длина индексного файла.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Data_free</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество распределенных, но не используемых байтов.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Auto_increment</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Следующее значение автоинкремента.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Create_time</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Время создания таблицы.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Update_time</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Время последнего обновления файла данных.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Check_time</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Время последней проверки таблицы.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Create_options</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Дополнительные параметры, использовавшиеся для команды </span><span style=" font-family:'Courier New,courier';">CREATE TABLE</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Comment</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Примечания, внесенные при создании таблицы (или информация о причинах, почему MySQL не может получить доступ к данным в таблицах).</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В таблицах </span><span style=" font-family:'Courier New,courier';">InnoDB</span><span style=" font-family:'Ubuntu';"> информация о свободном дисковом пространстве в таблице заносится в ячейки примечаний к таблице. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-status"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.3. </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">SHOW STATUS</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW STATUS</span><span style=" font-family:'Ubuntu';"> предоставляет информацию по состоянию сервера (как </span><span style=" font-family:'Courier New,courier';">mysqladmin extended-status</span><span style=" font-family:'Ubuntu';">). Пример выходных данных приведен ниже (формат и числа могут иметь некоторые отличия): </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+--------------------------+------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Variable_name            | Value      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+--------------------------+------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Aborted_clients          | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Aborted_connects         | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Bytes_received           | 155372598  |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Bytes_sent               | 1176560426 |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Connections              | 30023      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Created_tmp_disk_tables  | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Created_tmp_tables       | 8340       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Created_tmp_files        | 60         |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Delayed_insert_threads   | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Delayed_writes           | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Delayed_errors           | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Flush_commands           | 1          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Handler_delete           | 462604     |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Handler_read_first       | 105881     |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Handler_read_key         | 27820558   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Handler_read_next        | 390681754  |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Handler_read_prev        | 6022500    |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Handler_read_rnd         | 30546748   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Handler_read_rnd_next    | 246216530  |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Handler_update           | 16945404   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Handler_write            | 60356676   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Key_blocks_used          | 14955      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Key_read_requests        | 96854827   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Key_reads                | 162040     |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Key_write_requests       | 7589728    |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Key_writes               | 3813196    |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Max_used_connections     | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Not_flushed_key_blocks   | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Not_flushed_delayed_rows | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Open_tables              | 1          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Open_files               | 2          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Open_streams             | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Opened_tables            | 44600      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Questions                | 2026873    |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Select_full_join         | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Select_full_range_join   | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Select_range             | 99646      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Select_range_check       | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Select_scan              | 30802      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Slave_running            | OFF        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Slave_open_temp_tables   | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Slow_launch_threads      | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Slow_queries             | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Sort_merge_passes        | 30         |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Sort_range               | 500        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Sort_rows                | 30296250   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Sort_scan                | 4650       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Table_locks_immediate    | 1920382    |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Table_locks_waited       | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Threads_cached           | 0          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Threads_created          | 30022      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Threads_connected        | 1          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Threads_running          | 1          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Uptime                   | 80380      |</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+--------------------------+------------+</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Приведенные выше переменные состояния имеют следующие значения: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Переменная</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Aborted_clients</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество соединений, отмененных по причине отключения клиента без надлежащего закрытия соединения. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#communication-errors"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел A.2.9, «Коммуникационные ошибки / Оборванные соединения»</span></a><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Aborted_connects</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество неудачных попыток подсоединения к серверу MySQL. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#communication-errors"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел A.2.9, «Коммуникационные ошибки / Оборванные соединения»</span></a><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Bytes_received</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество байтов, полученных от всех клиентов.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Bytes_sent</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество байтов, отправленных всем клиентам.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Com_xxx</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запусков каждой команды xxx.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Connections</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество попыток подсоединения к серверу MySQL.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Created_tmp_tables</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество неявных временных таблиц на диске, созданных во время выполнения операторов.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Created_tmp_tables</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество неявных временных таблиц в памяти, созданных во время выполнения операторов.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Created_tmp_files</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество созданных временных файлов </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Delayed_insert_threads</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество используемых потоков вставки данных в режиме </span><span style=" font-family:'Courier New,courier';">insert delayed</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Delayed_writes</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество строк, вставленных при помощи команды </span><span style=" font-family:'Courier New,courier';">INSERT DELAYED</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Delayed_errors</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество записанных при помощи команды </span><span style=" font-family:'Courier New,courier';">INSERT DELAYED</span><span style=" font-family:'Ubuntu';"> строк, в которых произошли какие-либо ошибки (возможно, </span><span style=" font-family:'Courier New,courier';">duplicate key</span><span style=" font-family:'Ubuntu';">).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Flush_commands</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запущенных команд </span><span style=" font-family:'Courier New,courier';">FLUSH</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_commit</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество внутренних команд </span><span style=" font-family:'Courier New,courier';">COMMIT</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_delete</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество удалений строки из таблицы.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_read_first</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество считываний из индекса первой записи. Если это значение высокое, то, по всей вероятности, сервер осуществляет много полных индексных сканирований, например, </span><span style=" font-family:'Courier New,courier';">SELECT col1 FROM foo</span><span style=" font-family:'Ubuntu';">, предполагая, что </span><span style=" font-family:'Courier New,courier';">col1</span><span style=" font-family:'Ubuntu';"> проиндексирован.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_read_key</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов на чтение строки, основанных на ключе. Высокое значение переменной говорит о том, что ваши запросы и таблицы проиндексированы надлежащим образом.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_read_next</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов на чтение следующей строки в порядке расположения ключей. Это значение будет увеличиваться, если производится запрос индексного столбца с ограничением по размеру. Значение также увеличивается во время проведения индексного сканирования.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_read_prev</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов на чтение предыдущей строки в порядке расположения ключей. В большинстве случаев используется для оптимизации </span><span style=" font-family:'Courier New,courier';">ORDER BY ... DESC</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_read_rnd</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов на чтение строки, основанных на фиксированной позиции. Значение будет высоким, если выполняется много запросов, требующих сортировки результатов.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_read_rnd_next</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов на чтение следующей строки из файла данных. Данное значение будет высоким, если производится много сканирований таблиц. Обычно это означает, что ваши таблицы не проиндексированы надлежащим образом или ваши запросы не используют преимущества индексов.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_rollback</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество внутренних команд </span><span style=" font-family:'Courier New,courier';">ROLLBACK</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_update</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов на обновление строки в таблице.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Handler_write</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов на вставку строки в таблицу.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key_blocks_used</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество используемых блоков в кэше ключей.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key_read_requests</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов на чтение блока ключей из кэша.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key_reads</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество физических считываний блока ключей с диска.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key_write_requests</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов на запись блока ключей в кэш.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key_writes</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество физических записей блоков ключей на диск.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Max_used_connections</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Максимальное количество одновременно используемых соединений.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Not_flushed_key_blocks</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Блоки ключей в кэше ключей, которые были изменены, но еще не записаны на диск.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Not_flushed_delayed_rows</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество строк, стоящих в очереди на запись в запросах </span><span style=" font-family:'Courier New,courier';">INSERT DELAY</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Open_tables</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество открытых таблиц.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Open_files</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество открытых файлов.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Open_streams</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество открытых потоков (в основном используется для журналирования).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Opened_tables</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество открывавшихся таблиц.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Rpl_status</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Статус отказобезопасной репликации (еще не используется).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Select_full_join</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество соединений без ключей (если это значение равно 0, необходимо внимательно проверить индексы своих таблиц).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Select_full_range_join</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество соединений, где был использован поиск по диапазону в справочной таблице.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Select_range</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество соединений, в которых использовались диапазоны в первой таблице. (Обычно это значение не критично, даже если оно велико)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Select_scan</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество соединений, в которых проводилось первое сканирование первой таблицы.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Select_range_check</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество соединений без ключей, в которых проверка использования ключей производится после каждой строки (если это значение равно 0, необходимо внимательно проверить индексы своих таблиц).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Questions</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов, направленных на сервер.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Slave_open_temp_tables</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество временных таблиц, открытых в настоящий момент потоком подчиненного компьютера.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Slave_running</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Содержит значение </span><span style=" font-family:'Courier New,courier';">ON</span><span style=" font-family:'Ubuntu';">, если это подчиненный компьютер, подключенный к головному компьютеру.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Slow_launch_threads</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество потоков, создание которых заняло больше, чем указано в </span><span style=" font-family:'Courier New,courier';">slow_launch_time</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Slow_queries</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов, обработка которых заняла больше времени, чем </span><span style=" font-family:'Courier New,courier';">long_query_time</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#slow-query-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.5, «Журнал медленных запросов»</span></a><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Sort_merge_passes</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество объединений, осуществленных алгоритмом сортировки. Если это значение велико, следует увеличить </span><span style=" font-family:'Courier New,courier';">sort_buffer_size</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Sort_range</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество сортировок, которые осуществлялись в диапазонах.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Sort_rows</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество отсортированных строк.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Sort_scan</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество сортировок, осуществленных путем сканирования таблицы.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ssl_xxx</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Переменные, используемые SSL; еще не реализовано.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Table_locks_immediate</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов на немедленную блокировку таблицы. Доступно начиная с версии 3.23.33.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Table_locks_waited</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов, когда немедленная блокировка не могла быть осуществлена и требовалось время на ожидание. Если это значение велико, и у вас есть проблемы с производительностью, сначала необходимо оптимизировать свои запросы, а затем либо разделить таблицы, либо использовать репликацию. Доступно начиная с версии 3.23.33.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Threads_cached</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество потоков в кэше потоков.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Threads_connected</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество открытых в настоящий момент соединений.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Threads_created</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество потоков, созданных для управления соединениями.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Threads_running</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество не простаивающих потоков.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Uptime</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Время в секундах, в течение которого сервер находится в работе.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Некоторые примечания к приведенной выше информации: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если значение <span style=" font-family:'Courier New,courier';">Opened_tables</span> велико, возможно, что значение переменной <span style=" font-family:'Courier New,courier';">table_cache</span> слишком мало. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если значение <span style=" font-family:'Courier New,courier';">Key_reads</span> велико, возможно, что значение переменной <span style=" font-family:'Courier New,courier';">key_buffer_size</span> слишком мало. Частоту <span style=" font-weight:600;">неуспешных обращений</span> к кэшу можно вычислить так: <span style=" font-family:'Courier New,courier';">Key_reads</span>/<span style=" font-family:'Courier New,courier';">Key_read_requests</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если значение <span style=" font-family:'Courier New,courier';">Handler_read_rnd</span> велико, возможно, поступает слишком много запросов, требующих от MySQL полного сканирования таблиц или у вас есть соединения, которые не используют ключи надлежащим образом. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если значение <span style=" font-family:'Courier New,courier';">Threads_created</span> велико, возможно, необходимо увеличить значение переменной <span style=" font-family:'Courier New,courier';">thread_cache_size</span>. Частоту успешных обращений к кэшу можно вычислить при помощи <span style=" font-family:'Courier New,courier';">Threads_created</span>/<span style=" font-family:'Courier New,courier';">Connections</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если значение <span style=" font-family:'Courier New,courier';">Created_tmp_disk_tables</span> велико, возможно, необходимо увеличить значение переменной <span style=" font-family:'Courier New,courier';">tmp_table_size</span>, чтобы временные таблицы располагались в памяти, а не на жестком диске. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-variables"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.4. </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">SHOW VARIABLES</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW [GLOBAL | SESSION] VARIABLES [LIKE wild]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW VARIABLES</span><span style=" font-family:'Ubuntu';"> отображает значения некоторых системных переменных MySQL. Такую же информацию можно получить и при помощи команды </span><span style=" font-family:'Courier New,courier';">mysqladmin variables</span><span style=" font-family:'Ubuntu';">. Если установленные по умолчанию значения вам не подходят, большинство из этих переменных можно задать, используя параметры командной строки при запуске </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.1, «Параметры командной строки </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Опции </span><span style=" font-family:'Courier New,courier';">GLOBAL</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">SESSION</span><span style=" font-family:'Ubuntu';"> новы с версии MySQL 4.0.3. С помощью </span><span style=" font-family:'Courier New,courier';">GLOBAL</span><span style=" font-family:'Ubuntu';"> вы получите значения, использующиеся для новых подключений к MySQL. С помощью </span><span style=" font-family:'Courier New,courier';">SESSION</span><span style=" font-family:'Ubuntu';"> вы получите значения, которые действуют прямо сейчас в текущем соединении. Если вы не указываете эти опции, подразумевается </span><span style=" font-family:'Courier New,courier';">SESSION</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы можете изменить большинство параметров с помощью команды </span><span style=" font-family:'Courier New,courier';">SET</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.6, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SET</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ниже приведен пример выходных данных; формат и числа могут иметь некоторые отличия: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------------------------+------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Variable_name                   | Value                        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------------------------+------------------------------|</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| back_log                        | 50                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| basedir                         | /usr/local/mysql             |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| bdb_cache_size                  | 8388572                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| bdb_log_buffer_size             | 32768                        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| bdb_home                        | /usr/local/mysql             |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| bdb_max_lock                    | 10000                        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| bdb_logdir                      |                              |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| bdb_shared_data                 | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| bdb_tmpdir                      | /tmp/                        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| bdb_version                     | Sleepycat Software: ...  |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| binlog_cache_size               | 32768                        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| bulk_insert_buffer_size         | 8388608                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| character_set                   | latin1                       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| character_sets                  | latin1 big5 czech euc_kr   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| concurrent_insert               | ON                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| connect_timeout                 | 5                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| convert_character_set           |                              |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| datadir                         | /usr/local/mysql/data/       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| delay_key_write                 | ON                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| delayed_insert_limit            | 100                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| delayed_insert_timeout          | 300                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| delayed_queue_size              | 1000                         |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| flush                           | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| flush_time                      | 0                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| ft_boolean_syntax               | + -&gt;&lt;()~*:&quot;&quot;&amp;|               |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| ft_min_word_len                 | 4                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| ft_max_word_len                 | 254                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| ft_max_word_len_for_sort        | 20                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| ft_stopword_file                | (built-in)                   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_bdb                        | YES                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_innodb                     | YES                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_isam                       | YES                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_raid                       | NO                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_symlink                    | DISABLED                     |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_openssl                    | YES                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_query_cache                | YES                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| init_file                       |                              |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_additional_mem_pool_size | 1048576                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_buffer_pool_size         | 8388608                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_data_file_path           | ibdata1:10M:autoextend       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_data_home_dir            |                              |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_file_io_threads          | 4                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_force_recovery           | 0                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_thread_concurrency       | 8                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_flush_log_at_trx_commit  | 0                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_fast_shutdown            | ON                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_flush_method             |                              |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_lock_wait_timeout        | 50                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_log_arch_dir             |                              |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_log_archive              | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_log_buffer_size          | 1048576                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_log_file_size            | 5242880                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_log_files_in_group       | 2                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_log_group_home_dir       | ./                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| innodb_mirrored_log_groups      | 1                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| interactive_timeout             | 28800                        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| join_buffer_size                | 131072                       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| key_buffer_size                 | 16773120                     |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| language                        | /usr/local/mysql/share/...   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| large_files_support             | ON                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| local_infile                    | ON                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| locked_in_memory                | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| log                             | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| log_update                      | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| log_bin                         | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| log_slave_updates               | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| log_slow_queries                | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| log_warnings                    | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| long_query_time                 | 10                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| low_priority_updates            | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| lower_case_table_names          | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_allowed_packet              | 1047552                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_binlog_cache_size           | 4294967295                   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_binlog_size                 | 1073741824                   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_connections                 | 100                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_connect_errors              | 10                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_delayed_threads             | 20                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_heap_table_size             | 16777216                     |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_join_size                   | 4294967295                   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_sort_length                 | 1024                         |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_user_connections            | 0                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_tmp_tables                  | 32                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| max_write_lock_count            | 4294967295                   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| myisam_max_extra_sort_file_size | 268435456                    |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| myisam_max_sort_file_size       | 2147483647                   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| myisam_recover_options          | force                        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| myisam_sort_buffer_size         | 8388608                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| net_buffer_length               | 16384                        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| net_read_timeout                | 30                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| net_retry_count                 | 10                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| net_write_timeout               | 60                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| open_files_limit                | 0                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| pid_file                        | /usr/local/mysql/name.pid    |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| port                            | 3306                         |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| protocol_version                | 10                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| read_buffer_size                | 131072                       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| read_rnd_buffer_size            | 262144                       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| rpl_recovery_rank               | 0                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| query_cache_limit               | 1048576                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| query_cache_size                | 0                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| query_cache_type                | ON                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| safe_show_database              | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| server_id                       | 0                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| slave_net_timeout               | 3600                         |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| skip_external_locking           | ON                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| skip_networking                 | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| skip_show_database              | OFF                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| slow_launch_time                | 2                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| socket                          | /tmp/mysql.sock              |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| sort_buffer_size                | 2097116                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| sql_mode                        | 0                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| table_cache                     | 64                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| table_type                      | MYISAM                       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| thread_cache_size               | 3                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| thread_stack                    | 131072                       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| tx_isolation                    | READ-COMMITTED               |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| timezone                        | EEST                         |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| tmp_table_size                  | 33554432                     |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| tmpdir                          | /tmp/:/mnt/hd2/tmp/          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| version                         | 4.0.4-beta                   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| wait_timeout                    | 28800                        |</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------------------------+------------------------------+</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ниже описаны все параметры. Значения размеров буферов, длины и размеры стеков приведены в байтах. Значения можно указать с суффиксом </span><span style=" font-family:'Courier New,courier';">'K'</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">'M'</span><span style=" font-family:'Ubuntu';">, чтобы обозначить килобайты или мегабайты. Например, </span><span style=" font-family:'Courier New,courier';">16M</span><span style=" font-family:'Ubuntu';"> означает </span><span style=" font-family:'Courier New,courier';">16</span><span style=" font-family:'Ubuntu';"> мегабайт. Регистр буквы суффикса не имеет значения, </span><span style=" font-family:'Courier New,courier';">16M</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">16m</span><span style=" font-family:'Ubuntu';"> обозначают одно и то же: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ansi_mode</span>. Имеет значение <span style=" font-family:'Courier New,courier';">ON</span>, если <span style=" font-family:'Courier New,courier';">mysqld</span> был запущен с параметром <span style=" font-family:'Courier New,courier';">--ansi</span>. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/introduction.html#ansi-mode"><span style=" text-decoration: underline; color:#0000ff;">Раздел 1.9.2, «Запуск MySQL в режиме ANSI»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">back_log</span> Количество поддерживаемых MySQL запросов на соединение, находящихся в очереди. Этот параметр начинает играть роль, когда главный поток MySQL получает очень много запросов на соединение за короткий промежуток времени. У главного потока уходит некоторое время (хотя очень небольшое) на проверку соединения и запуск нового потока. Значение <span style=" font-family:'Courier New,courier';">back_log</span> показывает, сколько запросов может находиться в очереди на этом коротком промежутке времени, прежде чем MySQL прекратит отвечать на новые запросы. Данное значение необходимо увеличить только в том случае, если ожидается большое количество соединений на протяжении короткого промежутка времени. Иначе говоря, это значение является размером очереди ожидания входящих соединений TCP/IP. У вашей операционной системы есть свое собственное ограничение на размер этой очереди. За более подробной информацией обращайтесь на страницу руководства ОС Unix по системному вызову <span style=" font-family:'Courier New,courier';">listen(2)</span>. Чтобы узнать максимальное значение для этой переменной, обратитесь к документации по своей операционной системе. Попытка установить значение <span style=" font-family:'Courier New,courier';">back_log</span> выше, чем допускается в вашей операционной системе, не принесет положительного результата. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">basedir</span> Значение параметра <span style=" font-family:'Courier New,courier';">--basedir</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">bdb_cache_size</span> Буфер, выделенный для индекса кэша и строк таблиц <span style=" font-family:'Courier New,courier';">BDB</span>. Если таблицы <span style=" font-family:'Courier New,courier';">BDB</span> не используются, необходимо запустить <span style=" font-family:'Courier New,courier';">mysqld</span> с параметром <span style=" font-family:'Courier New,courier';">--skip-bdb</span>, чтобы не расходовать память на этот кэш. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">bdb_log_buffer_size</span> Буфер, выделенный для индекса кэша и строк таблиц <span style=" font-family:'Courier New,courier';">BDB</span>. Если таблицы <span style=" font-family:'Courier New,courier';">BDB</span> не используются, его значение необходимо установить в 0 или запустить <span style=" font-family:'Courier New,courier';">mysqld</span> с параметром <span style=" font-family:'Courier New,courier';">--skip-bdb</span>, чтобы не расходовать память на этот кэш. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">bdb_home</span> Значение параметра <span style=" font-family:'Courier New,courier';">--bdb-home</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">bdb_max_lock</span> Максимальное количество блокировок (по умолчанию 10000), которые можно установить на таблицу <span style=" font-family:'Courier New,courier';">BDB</span>. Этот параметр необходимо увеличить, если возникают ошибки типа <span style=" font-family:'Courier New,courier';">bdb: Lock table is out of available locks</span> или <span style=" font-family:'Courier New,courier';">Got error 12 from ...</span> при выполнении длинных транзакций или когда <span style=" font-family:'Courier New,courier';">mysqld</span> должен просмотреть много строк для вычисления запроса. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">bdb_logdir</span> Значение параметра <span style=" font-family:'Courier New,courier';">--bdb-logdir</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">bdb_shared_data</span> Содержит значение <span style=" font-family:'Courier New,courier';">ON</span>, если используется параметр <span style=" font-family:'Courier New,courier';">--bdb-shared-data</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">bdb_tmpdir</span> Значение параметра <span style=" font-family:'Courier New,courier';">--bdb-tmpdir</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">binlog_cache_size</span>. Размер кэша для хранения операторов бинарного журнала SQL во время транзакции. Если часто используются большие транзакции со значительным количеством операторов, то в целях повышения производительности значение этого параметра можно увеличить. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#commit"><span style=" text-decoration: underline; color:#0000ff;">Раздел 6.7.1, «Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#commit"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">BEGIN/COMMIT/ROLLBACK</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#commit"><span style=" text-decoration: underline; color:#0000ff;">»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">bulk_insert_buffer_size</span> (был <span style=" font-family:'Courier New,courier';">myisam_bulk_insert_tree_size</span>) MyISAM использует специальный древо-подобный кэш чтобы ускорить многострочные вставки (которые <span style=" font-family:'Courier New,courier';">INSERT ... SELECT</span>, <span style=" font-family:'Courier New,courier';">INSERT ... VALUES (...), (...), ...</span>, и <span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span>). Эта переменная ограничивает размер такого кэша в каждом потоке (указывается в байтах). Установка в 0 запретит такую оптимизацию. </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Внимание:</span><span style=" font-family:'Ubuntu';"> этот кэш работает только тогда, когда делается вставка в непустую таблицу. Значение по умолчанию: 8 Мб. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">character_set</span> Принятый по умолчанию набор символов. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">character_sets</span> Поддерживаемые наборы символов. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">concurrent_inserts</span> Если установлено значение <span style=" font-family:'Courier New,courier';">ON</span> (принятое по умолчанию), MySQL обеспечивает возможность использовать команду <span style=" font-family:'Courier New,courier';">INSERT</span> на таблицах <span style=" font-family:'Courier New,courier';">MyISAM</span> одновременно с выполнением над этими же таблицами запросов <span style=" font-family:'Courier New,courier';">SELECT</span>. Этот параметр можно отключить, запустив <span style=" font-family:'Courier New,courier';">mysqld</span> с параметром <span style=" font-family:'Courier New,courier';">--safe</span> или <span style=" font-family:'Courier New,courier';">--skip-new</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">connect_timeout</span> Количество времени в секундах, на протяжении которого сервер <span style=" font-family:'Courier New,courier';">mysqld</span> ожидает поступления пакета соединения, после чего генерирует <span style=" font-family:'Courier New,courier';">Bad handshake</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">datadir</span> Значение параметра <span style=" font-family:'Courier New,courier';">--datadir</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">delay_key_write</span> Опция для таблиц MyISAM. Может принимать одно из следующих значений: </li>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:80px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">OFF</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все CREATE TABLE ... DELAYED_KEY_WRITES игнорируются.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">ON</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">(по умолчанию) MySQL будет учитывать опцию </span><span style=" font-family:'Courier New,courier';">DELAY_KEY_WRITE</span><span style=" font-family:'Ubuntu';"> в </span><span style=" font-family:'Courier New,courier';">CREATE TABLE</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">ALL</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все вновь открытые таблицы обслуживаются так, будто бы они были созданы с опцией </span><span style=" font-family:'Courier New,courier';">DELAY_KEY_WRITE</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если </span><span style=" font-family:'Courier New,courier';">DELAY_KEY_WRITE</span><span style=" font-family:'Ubuntu';"> включен, это означает что ключевой буфер для таблиц с этой опцией не будет сбрасываться на диск при каждом обновлении индексов, но только тогда, когда таблица закрывается. Это весьма ускорит записи ключей, но вы должны обязательно реализовать автоматическую проверку всех таких таблиц с помощью </span><span style=" font-family:'Courier New,courier';">myisamchk --fast --force</span><span style=" font-family:'Ubuntu';"> если вы хотите использовать эту опцию. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">delay_key_write</span> Если включен (по умолчанию - включен), MySQL будет учитывать параметр <span style=" font-family:'Courier New,courier';">DELAY_KEY_WRITE</span> для команды <span style=" font-family:'Courier New,courier';">CREATE</span> TABLE. Это означает, что ключевой буфер таблиц с данным параметром будет сбрасываться на диск не при каждом обновлении индексов, а только при закрытии таблицы. Такой режим работы значительно ускоряет запись ключей, однако в случае использования данного параметра необходимо будет также добавить автоматическую проверку всех таблиц при помощи <span style=" font-family:'Courier New,courier';">myisamchk --fast --force</span>. Обратите внимание: если запустить <span style=" font-family:'Courier New,courier';">mysqld</span> с параметром <span style=" font-family:'Courier New,courier';">--delay-key-write-for-all-tables</span>, то все таблицы будут обрабатываться таким образом, как будто они были созданы с применением параметра <span style=" font-family:'Courier New,courier';">delay_key_write</span>. Этот флаг можно снять, запустив <span style=" font-family:'Courier New,courier';">mysqld</span> с параметром <span style=" font-family:'Courier New,courier';">--skip-new</span> или <span style=" font-family:'Courier New,courier';">--safe-mode</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">delayed_insert_limit</span> После вставки строк <span style=" font-family:'Courier New,courier';">delayed_insert_limit</span> обработчик <span style=" font-family:'Courier New,courier';">INSERT DELAYED</span> проверит, остались ли незавершенные операторы <span style=" font-family:'Courier New,courier';">SELECT</span>. Если да, то перед тем, как приступить к выполнению следующих действий, они будут выполнены. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">delayed_insert_timeout</span> Временной промежуток, в течение которого процесс <span style=" font-family:'Courier New,courier';">INSERT DELAYED</span> должен ожидать операторов <span style=" font-family:'Courier New,courier';">INSERT</span> до прекращения выполнения задачи. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">delayed_queue_size</span> Размер очереди (в строках), который должен быть назначен для обработки команды <span style=" font-family:'Courier New,courier';">INSERT DELAYED</span>. При переполнении очереди все клиенты, выполняющие команду <span style=" font-family:'Courier New,courier';">INSERT DELAYED</span>, будут ожидать, пока в очереди снова появится свободное место. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">flush</span> Значение этой переменной будет <span style=" font-family:'Courier New,courier';">ON</span>, если вы запустили MySQL с параметром <span style=" font-family:'Courier New,courier';">--flush</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">flush_time</span> Если значение этой переменной отличается от нуля, то каждые <span style=" font-family:'Courier New,courier';">flush_time</span> секунд все таблицы будут закрываться (чтобы освободить ресурсы и записать информацию на диск). Мы рекомендуем использовать этот параметр только для Windows 9x/Me или на системах с ограниченным количеством ресурсов. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ft_boolean_syntax</span> Список операторов, поддерживаемых <span style=" font-family:'Courier New,courier';">MATCH ... AGAINST(... IN BOOLEAN MODE)</span>. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#fulltext-search"><span style=" text-decoration: underline; color:#0000ff;">Раздел 6.8, «Полнотекстовый поиск в MySQL»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ft_min_word_len</span> Минимальная длина слова, включаемого в индекс <span style=" font-family:'Courier New,courier';">FULLTEXT</span>. <span style=" font-weight:600;">Примечание: индексы </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FULLTEXT</span><span style=" font-weight:600;"> после изменения этой переменной должны быть скомпонованы заново (это новый параметр в MySQL 4.0)</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ft_max_word_len</span> Максимальная длина слова, включаемого в индекс <span style=" font-family:'Courier New,courier';">FULLTEXT</span>. <span style=" font-weight:600;">Примечание: индексы </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FULLTEXT</span><span style=" font-weight:600;"> после изменения этой переменной должны быть скомпонованы заново (это новый параметр в MySQL 4.0)</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ft_max_word_len_for_sort</span> Максимальная длина слова в индексе <span style=" font-family:'Courier New,courier';">FULLTEXT</span>; эта длина будет использоваться для метода быстрого восстановления индекса в командах <span style=" font-family:'Courier New,courier';">REPAIR</span>, <span style=" font-family:'Courier New,courier';">CREATE INDEX</span> или <span style=" font-family:'Courier New,courier';">ALTER</span> TABLE. Более длинные слова вставляются дольше. При увеличении значения <span style=" font-family:'Courier New,courier';">ft_max_word_len_for_sort</span> MySQL будет создавать временные файлы большего размера (таким образом будет замедляться работа из-за возрастания нагрузки на порт ввода/вывода диска), а также будет помещать меньше ключей в один блок сортировки (что, опять же, способствует снижению производительности). Если значение переменной <span style=" font-family:'Courier New,courier';">ft_max_word_len_for_sort</span> слишком мало, MySQL будет вставлять большое количество слов достаточно медленно, но короткие слова будут вставляться очень быстро. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ft_stopword_file</span> Из этого файла читается список стоп-слов для полнотекстового поиска. Все слова из этого файла будут использованы, комментарии в этом файле <span style=" font-weight:600;">недопустимы</span>. По умолчанию используется встроенный список стоп-слов (определен в файле <span style=" font-family:'Courier New,courier';">myisam/ft_static.c</span>). Установка этого параметра в пустое значение (<span style=" font-family:'Courier New,courier';">&quot;&quot;</span>) выключает фильтрацию по стоп-словам. </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Внимание: </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FULLTEXT</span><span style=" font-family:'Ubuntu'; font-weight:600;"> индексы должны быть перестроены после того, как эта переменная изменена.</span><span style=" font-family:'Ubuntu';"> (Эта опция нова в MySQL 4.0.10) </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">have_innodb</span> Значение <span style=" font-family:'Courier New,courier';">YES</span>, если <span style=" font-family:'Courier New,courier';">mysqld</span> поддерживает таблицы <span style=" font-family:'Courier New,courier';">InnoDB</span>. Значение <span style=" font-family:'Courier New,courier';">DISABLED</span>, если используется параметр <span style=" font-family:'Courier New,courier';">--skip-innodb</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">have_bdb</span> Значение <span style=" font-family:'Courier New,courier';">YES</span>, если <span style=" font-family:'Courier New,courier';">mysqld</span> поддерживает таблицы <span style=" font-family:'Courier New,courier';">Berkeley DB</span>. Значение <span style=" font-family:'Courier New,courier';">DISABLED</span>, если используется параметр <span style=" font-family:'Courier New,courier';">--skip-bdb</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">have_raid</span> Значение <span style=" font-family:'Courier New,courier';">YES</span>, если <span style=" font-family:'Courier New,courier';">mysqld</span> поддерживает параметр <span style=" font-family:'Courier New,courier';">RAID</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">have_openssl</span> Значение <span style=" font-family:'Courier New,courier';">YES</span>, если <span style=" font-family:'Courier New,courier';">mysqld</span> поддерживает SSL (шифрование) в протоколе клиент/сервер. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">init_file</span> Имя файла, указанного при помощи параметра <span style=" font-family:'Courier New,courier';">--init-file</span> при запуске сервера. Это файл операторов SQL, которые сервер должен выполнить при запуске. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">interactive_timeout</span> Количество времени в секундах, на протяжении которого сервер ожидает активности со стороны интерактивного соединения, прежде чем закрыть его. Интерактивный клиент - это клиент, который использует параметр <span style=" font-family:'Courier New,courier';">CLIENT_INTERACTIVE</span> для <span style=" font-family:'Courier New,courier';">mysql_real_connect</span>(). См. также информацию по <span style=" font-family:'Courier New,courier';">wait_timeout</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">join_buffer_size</span> Размер буфера, используемого для полных объединений (объединения, в которых не применяются индексы). Буфер выделяется один раз для каждого полного объединения двух таблиц. Если нужно ускорить полное объединение и невозможно добавить индексы, следует увеличить это значение (обычно добавление индексов является лучшим способом добиться быстрых объединений). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">key_buffer_size</span> Блоки индексов буферизированы и доступ к ним разрешен всем потокам. <span style=" font-family:'Courier New,courier';">key_buffer_size</span> - размер буфера, используемого для блоков индексов. Чтобы улучшить обработку индексов (для всех операций чтения и записи нескольких элементов), необходимо увеличить это значение настолько, насколько возможно. Размер 64 Мб для компьютера с 256 Мб (именно такой компьютер в основном используется для работы с MySQL) - довольно распространенная конфигурация. Тем не менее, если задать слишком большое значение (например, больше 50% от общего количества памяти), система может начать сохранять временные файлы на диске, что значительно снизит производительность. Помните, что, поскольку MySQL не производит кэширования считываемых данных, нужно оставлять определенное пространство для кэша файловой системы операционной системы. Производительность буфера ключей можно проверить, выполнив команду <span style=" font-family:'Courier New,courier';">SHOW STATUS</span> и проверив значения переменных <span style=" font-family:'Courier New,courier';">Key_read_requests</span>, <span style=" font-family:'Courier New,courier';">Key_reads</span>, <span style=" font-family:'Courier New,courier';">Key_write_requests</span> и <span style=" font-family:'Courier New,courier';">Key_writes</span>. Отношение значений <span style=" font-family:'Courier New,courier';">Key_reads</span>/<span style=" font-family:'Courier New,courier';">Key_read_request</span> обычно должно быть &lt; 0,01. Отношение <span style=" font-family:'Courier New,courier';">Key_write</span>/<span style=" font-family:'Courier New,courier';">Key_write_requests</span> примерно равно 1, если в основном используются обновления/удаления, но может быть и меньше, если чаще используются обновления сразу многих элементов или если <span style=" font-family:'Courier New,courier';">DELAY_KEY_WRITE</span>. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.5.6, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show"><span style=" text-decoration: underline; color:#0000ff;">»</span></a>. Чтобы еще больше увеличить скорость при одновременной записи большого количества строк, используйте команду <span style=" font-family:'Courier New,courier';">LOCK TABLES</span>. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#lock-tables"><span style=" text-decoration: underline; color:#0000ff;">Раздел 6.7.2, «Синтаксис команд </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#lock-tables"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">LOCK TABLES/UNLOCK TABLES</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#lock-tables"><span style=" text-decoration: underline; color:#0000ff;">»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">language</span> Язык, используемый для вывода сообщений об ошибках. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">large_file_support</span> Если <span style=" font-family:'Courier New,courier';">mysqld</span> был откомпилирован с параметрами для поддержки больших файлов. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">locked_in_memory</span> Если <span style=" font-family:'Courier New,courier';">mysqld</span> был заблокирован в памяти при помощи <span style=" font-family:'Courier New,courier';">--memlock</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">log</span> Если включено занесение в журнал всех запросов. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">log_update</span> Если включен журнал обновлений. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">log_bin</span> Если включен бинарный журнал. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">log_slave_updates</span> Если обновления от подчиненного компьютера должны заноситься в журнал. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">long_query_time</span> Если обработка запроса отнимает больше указанного промежутка времени (в секундах), значение счетчика <span style=" font-family:'Courier New,courier';">Slow_queries</span> будет увеличено. Если используется параметр <span style=" font-family:'Courier New,courier';">--log-slow-queries</span>, запрос будет записан в журнал медленных запросов. Это значение указывается в единицах реального времени, а не времени занятости процессора (CPU time). Таким образом, некий запрос, который выполняется быстрее указываемого времени на слегка загруженном сервере может выполняться больше указанного времени на более загруженном компьютере. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#slow-query-log"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.9.5, «Журнал медленных запросов»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">lower_case_table_names</span> Если установлено значение 1, имена таблиц будут сохранятся на диск с использованием строчных букв, а имена таблиц не будут чувствительны к регистру. С версии MySQL 4.0.2 это также касается и имен баз данных. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#name-case-sensitivity"><span style=" text-decoration: underline; color:#0000ff;">Раздел 6.1.3, «Чувствительность имен к регистру»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_allowed_packet</span> Максимальный размер одного пакета. Изначально размер буфера сообщений устанавливается в <span style=" font-family:'Courier New,courier';">net_buffer_length</span> байтов, но при необходимости может возрасти до <span style=" font-family:'Courier New,courier';">max_allowed_packet</span> байтов. Это значение по умолчанию не настолько велико, чтобы отсеивать большие (возможно ошибочные) пакеты. Если используются большие столбцы <span style=" font-family:'Courier New,courier';">BLOB</span>, его необходимо увеличить. Значение должно быть не меньше самого большого <span style=" font-family:'Courier New,courier';">BLOB</span>, который будет использоваться. Ограничение протокола для <span style=" font-family:'Courier New,courier';">max_allowed_packet</span> составляет 16 Мб в MySQL 3.23 и 1Гб в MySQL 4.0. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_binlog_cache_size</span> Если для транзакции с большим количеством операторов потребуется большее количество памяти, чем указано этим параметром, будет выдано сообщение об ошибке &quot;Multi-statement transaction required more than 'max_binlog_cache_size' bytes of storage&quot; (для транзакции с большим количеством операторов требуется больше, чем 'max_binlog_cache_size' байтов для хранения). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_binlog_size</span> Доступно после версии 3.23.33. Если запись в бинарный журнал (репликация) превысит данное значение, производится ротация журнала. Нельзя установить значение, меньшее, чем 1024 байта или большее, чем 1 Гб. По умолчанию установлено значение 1 Гб. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_connections</span> Разрешенное количество одновременно подсоединенных клиентов. Увеличение этого значения увеличивает количество дескрипторов файлов, необходимых для <span style=" font-family:'Courier New,courier';">mysqld</span>. Ниже приведены примечания по ограничениям для дескрипторов. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#too-many-connections"><span style=" text-decoration: underline; color:#0000ff;">Раздел A.2.5, «Ошибка </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#too-many-connections"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">Too many connections</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#too-many-connections"><span style=" text-decoration: underline; color:#0000ff;">»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_connect_errors</span> Если количество прерванных соединений с удаленным компьютером превышает это число, дальнейшие попытки удаленного компьютера установить соединение будут заблокированы. Блокировку с удаленного компьютера можно снять при помощи команды <span style=" font-family:'Courier New,courier';">FLUSH HOSTS</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_delayed_threads</span> Не запускайте больше потоков, чем указано здесь, для обработки операторов <span style=" font-family:'Courier New,courier';">INSERT DELAYED</span>. Если попытаться вставить данные в новую таблицу, когда все потоки <span style=" font-family:'Courier New,courier';">INSERT DELAYED</span> заняты, строка будет вставлена таким образом, как будто атрибут <span style=" font-family:'Courier New,courier';">DELAYED</span> не был указан. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_heap_table_size</span> Не позволяет создавать динамические таблицы, размер которых превышает указанное значение. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_join_size</span> Объединения, которые потенциально могут считывать более <span style=" font-family:'Courier New,courier';">max_join_size</span> записей, будут возвращать ошибку. Это значение нужно задавать, если ваши пользователи осуществляют объединения, которым недостает оператора <span style=" font-family:'Courier New,courier';">WHERE</span>, - такие объединения занимают много времени, а затем возвращают миллионы строк. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_sort_length</span> Параметр определяет, сколько байтов следует использовать при сортировке значений <span style=" font-family:'Courier New,courier';">BLOB</span> или <span style=" font-family:'Courier New,courier';">TEXT</span> (обрабатываются только первые <span style=" font-family:'Courier New,courier';">max_sort_length</span> байтов каждого значения, остальные игнорируются). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_user_connections</span> Максимальное количество активных соединений для одного пользователя (0 = без ограничений). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_tmp_tables</span> (Этот параметр пока ни на что не влияет.) Максимальное количество временных таблиц, которые клиент может открывать одновременно. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">max_write_lock_count</span> После данного количества блокирования записей разрешается выполнить между ними несколько блокировок чтения. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisam_recover_options</span> Значение параметра <span style=" font-family:'Courier New,courier';">--myisam-recover</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisam_sort_buffer_size</span> Буфер, который выделяется для сортировки индексов при выполнении команды <span style=" font-family:'Courier New,courier';">REPAIR</span> или для создания индексов при помощи команд <span style=" font-family:'Courier New,courier';">CREATE INDEX</span> или <span style=" font-family:'Courier New,courier';">ALTER TABLE</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisam_max_extra_sort_file_size</span>. Если размер временного файла, используемого для быстрого создания индексов, превышает на указанный здесь объем используемый кэш ключей, то лучше отдать предпочтение методу кэша ключей. Такой метод применяется для того, чтобы для больших ключей символов в больших таблицах использовался более медленный метод кэширования ключей при создании таблиц. <span style=" font-weight:600;">Обратите внимание</span>: значение этого параметра в байтах, начиная с 4.0.3 (до 4.0.3 параметр указывался в мегабайтах). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisam_max_sort_file_size</span> Максимальный размер временного файла, который в MySQL может использоваться при восстановлении индекса (во время работы команд <span style=" font-family:'Courier New,courier';">REPAIR</span>, <span style=" font-family:'Courier New,courier';">ALTER TABLE</span> или <span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span>). Для файлов, размер которых превышает указанное значение, индекс будет создаваться при помощи кэша ключей (такой алгоритм работает несколько медленнее). <span style=" font-weight:600;">Обратите внимание</span>: значение этого параметра в байтах, начиная с 4.0.3 (до 4.0.3 параметр указывался в мегабайтах). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">net_buffer_length</span> В данное значение устанавливается в промежутках между запросами буфер соединения. Обычно это значение не изменяется, но если у вас очень мало памяти, можно установить его по размеру ожидаемого запроса (т.е. равным предполагаемой длине операторов SQL, отправляемых клиентами; если оператор превысит указанную длину, буфер будет автоматически увеличен как максимум до <span style=" font-family:'Courier New,courier';">max_allowed_packet</span> байтов). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">net_read_timeout</span> Количество времени в секундах, на протяжении которого ожидаются дополнительные данные от соединения, пока не будет отменено чтение. Обратите внимание, что мы не ожидаем поступления данных от соединения, время ожидания определяется по <span style=" font-family:'Courier New,courier';">write_timeout</span>. Также см. <span style=" font-family:'Courier New,courier';">slave_net_timeout</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">net_retry_count</span> Если чтение из порта связи было прервано, будет предпринято указанное количество попыток повторного чтения. Это значение должно быть достаточно высоким на <span style=" font-family:'Courier New,courier';">FreeBSD</span>, так как внутренние прерывания направляются на все потоки. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">net_write_timeout</span> Время ожидания записи блока через соединение, пока запись не будет прервана (в секундах). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">open_files_limit</span> Если это значение отлично от 0, то <span style=" font-family:'Courier New,courier';">mysqld</span> будет применять его для резервных дескрипторов файлов, используемых с <span style=" font-family:'Courier New,courier';">setrlimit()</span>. Если это значение равно 0, то <span style=" font-family:'Courier New,courier';">mysqld</span> будет резервировать <span style=" font-family:'Courier New,courier';">max_connections*5</span> или <span style=" font-family:'Courier New,courier';">max_connections + table_cache*2</span> (в зависимости от того, какое число больше) файлов. Если <span style=" font-family:'Courier New,courier';">mysqld</span> выдает ошибку 'Too many open files' (слишком много открытых файлов), данное значение необходимо увеличить. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">pid_file</span> Значение параметра <span style=" font-family:'Courier New,courier';">--pid-file</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">port</span> Значение параметра <span style=" font-family:'Courier New,courier';">--port</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">protocol_version</span> Версия протокола, используемого сервером MySQL. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">read_buffer_size</span> (было <span style=" font-family:'Courier New,courier';">record_buffer</span>) Каждый поток, осуществляющий последовательное сканирование, выделяет буфер указанного размера для каждой сканируемой таблицы. Если проводится много последовательных сканирований, это значение можно увеличить. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">record_rnd_buffer_size</span> При считывании строк после проведения сортировки в отсортированном порядке строки считываются через буфер, чтобы избежать операций поиска по диску. Это может улучшить выполнение <span style=" font-family:'Courier New,courier';">ORDER BY</span> весьма и весьма, если параметр установлен в большое значение. Т.к. эта переменная имеет отношение к потоку, то не устанавливайте слишком большое значение глобально, но просто меняйте его при выполнении некоторых больших запросов. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">query_cache_limit</span> Результаты, превышающие это значение, не кэшируются (по умолчанию - 1Мб). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">query_cache_size</span> Память, выделенная для хранения результатов старых запросов. Если значение установлено в 0, кэш запросов отключен (принято по умолчанию). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">query_cache_type</span> Могут быть заданы следующие значения (только числовые): </li>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:80px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Объяснение</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Примечание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">0</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">OFF</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не кэширует и не извлекает результаты.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">1</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">ON</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Кэширует все результаты, кроме запросов </span><span style=" font-family:'Courier New,courier';">SELECT SQL_NO_CACHE ...</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">2</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">DEMAND</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Кэширует только запросы </span><span style=" font-family:'Courier New,courier';">SELECT SQL_CACHE ...</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr></table>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">safe_show_database</span> Не отображаются базы данных, для которых у пользователя нет каких-либо привилегий по базам данных или таблицам. Таким образом можно увеличить степень безопасности, если вы не хотите предоставлять посторонним лицам возможность получать информацию о том, какие базы данных есть у других пользователей. Также см. <span style=" font-family:'Courier New,courier';">skip_show_database</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">server_id</span> Значение параметра <span style=" font-family:'Courier New,courier';">--server-id</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">skip_locking</span> Установлено в значение <span style=" font-family:'Courier New,courier';">OFF</span>, если <span style=" font-family:'Courier New,courier';">mysqld</span> использует внешнюю блокировку. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">skip_networking</span> Установлено в значение <span style=" font-family:'Courier New,courier';">ON</span>, если разрешаются только локальные соединения (через сокет). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">skip_show_database</span> Эта переменная не позволяет выполнять команду <span style=" font-family:'Courier New,courier';">SHOW DATABASES</span>, если у пользователя нет привилегии <span style=" font-family:'Courier New,courier';">PROCESS</span>. Таким образом можно увеличить степень безопасности, если вы не хотите предоставлять посторонним лицам возможность получать информацию о том, какие базы данных есть у других пользователей. Также см. <span style=" font-family:'Courier New,courier';">safe_show_database</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">slave_net_timeout</span> Количество времени в секундах, в течение которого ожидаются дополнительные данные от подсоединенного головного или подчиненного компьютера прежде, чем будет отменено чтение. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">slow_launch_time</span> Если создание потока занимает больше, чем указанное значение (в секундах), значение счетчика <span style=" font-family:'Courier New,courier';">Slow_launch_threads</span> будет увеличено. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">socket</span> Сокет Unix, используемый сервером. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">sort_buffer_size</span> Каждый поток, которому необходимо произвести сортировку, выделяет буфер данного размера. Увеличение данного значения позволит ускорить выполнение операторов <span style=" font-family:'Courier New,courier';">ORDER BY</span> или <span style=" font-family:'Courier New,courier';">GROUP BY</span>. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#temporary-files"><span style=" text-decoration: underline; color:#0000ff;">Раздел A.4.4, «Где MySQL хранит временные файлы»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">table_cache</span> Количество открытых таблиц для всех потоков. С увеличением этого значения увеличивается количество дескрипторов файлов, необходимых для <span style=" font-family:'Courier New,courier';">mysqld</span>. Чтобы узнать, необходимо ли изменять значение кэша таблиц, следует проверить значение переменной <span style=" font-family:'Courier New,courier';">Opened_tables</span>. См. раздел See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/problems.html#temporary-files"><span style=" text-decoration: underline; color:#0000ff;">Раздел A.4.4, «Где MySQL хранит временные файлы»</span></a>. Если у этой переменной большое значение, а команда <span style=" font-family:'Courier New,courier';">FLUSH TABLES</span> (которая закрывает все таблицы, а потом открывает их повторно) используется не часто, то необходимо увеличить ее значение. Чтобы получить дополнительную информацию по кэшу таблиц, см. раздел See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#table-cache"><span style=" text-decoration: underline; color:#0000ff;">Раздел 5.4.7, «Открытие и закрытие таблиц в MySQL»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">table_type</span> Принятый по умолчанию тип таблиц. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">thread_cache_size</span> Определяет, сколько потоков должно сохраняться в кэше для повторного использования. После отключения клиента потоки клиента помещаются в кэш, если там не больше потоков, чем <span style=" font-family:'Courier New,courier';">thread_cache_size</span>. Все новые потоки сначала берутся из кэша, и только когда кэш становится пустым, создаются новые потоки. Значение этой переменной можно увеличить, чтобы повысить производительность, если создается много новых соединений (если потоки у вас хорошо организованы, обычно заметного улучшения производительности не наблюдается). Насколько эффективен текущий кэш потоков, можно определить по разнице между <span style=" font-family:'Courier New,courier';">Connections</span> и <span style=" font-family:'Courier New,courier';">Threads_created</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">thread_concurrency</span> В системе Solaris <span style=" font-family:'Courier New,courier';">mysqld</span> вызывает функцию <span style=" font-family:'Courier New,courier';">thr_setconcurrency()</span> с этим значением. <span style=" font-family:'Courier New,courier';">thr_setconcurrency()</span> позволяет приложению дать системе потоков подсказку по необходимому количеству потоков, которые должны быть запущены в одно и то же время. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">thread_stack</span> Размер стека для каждого потока. От данного значения зависит большое количество ограничений, обнаруживаемых при помощи теста <span style=" font-family:'Courier New,courier';">crash</span>-me. По умолчанию этот размер достаточен для нормальной работы. See <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#mysql-benchmarks"><span style=" text-decoration: underline; color:#0000ff;">Раздел 5.1.4, «Набор тестов MySQL (The MySQL Benchmark Suite)»</span></a>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">timezone</span> Часовой пояс, в котором находится сервер. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tmp_table_size</span> Если находящаяся в памяти временная таблица превысит этот размер, MySQL автоматически преобразует ее в дисковую таблицу <span style=" font-family:'Courier New,courier';">MyISAM</span>. Значение <span style=" font-family:'Courier New,courier';">tmp_table_size</span> следует увеличить, если выполняется много расширенных запросов <span style=" font-family:'Courier New,courier';">GROUP BY</span> и в вашей системе установлено значительное количество оперативной памяти. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tmpdir</span> Каталог, используемый для временных файлов и временных таблиц. Начиная с MySQL 4.1, в <span style=" font-family:'Courier New,courier';">tmpdir</span> могут быть указаны несколько путей, разделенных двоеточием <span style=" font-family:'Courier New,courier';">:</span> (точкой с запятой на Windows <span style=" font-family:'Courier New,courier';">;</span>). Эти пути будут использованы в ротации. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">version</span> Номер версии сервера. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">wait_timeout</span> Время в секундах, на протяжении которого сервер наблюдает неактивность в неинтерактивном соединения прежде, чем закрыть его. Когда запускается поток, <span style=" font-family:'Courier New,courier';">SESSION.WAIT_TIMEOUT</span> инициализируется исходя из <span style=" font-family:'Courier New,courier';">GLOBAL.WAIT_TIMEOUT</span> или <span style=" font-family:'Courier New,courier';">GLOBAL.INTERACTIVE_TIMEOUT</span>, в зависимости от типа клиента (как определяется в <span style=" font-family:'Courier New,courier';">CLIENT_INTERACTIVE</span> опции соединения). </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">См. также </span><span style=" font-family:'Courier New,courier';">interactive_timeout</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Раздел руководства, в котором описывается настройка MySQL содержит некоторую информацию по настройке приведенных выше переменных. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#server-parameters"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.2, «Настройка параметров сервера»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-logs"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.5. </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">SHOW LOGS</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW LOGS</span><span style=" font-family:'Ubuntu';"> отображает информацию по состоянию существующих файлов журналов. На данный момент выводится информация только по файлам журналов Berkeley DB. </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">File</span> отображает полный путь к файлу журнала </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Type</span> отображает тип файла журнала (<span style=" font-family:'Courier New,courier';">BDB</span> для файлов журналов Berkeley DB) </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Status</span> отображает состояние файла журнала (<span style=" font-family:'Courier New,courier';">FREE</span> - если файл может быть удален, или <span style=" font-family:'Courier New,courier';">IN USE</span>, если файл необходим подсистеме транзакций). </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-processlist"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.6. </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">SHOW PROCESSLIST</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW [FULL] PROCESSLIST</span><span style=" font-family:'Ubuntu';"> показывает, какие потоки запущены в настоящий момент. Эту информацию также можно получить при помощи команды </span><span style=" font-family:'Courier New,courier';">mysqladmin processlist</span><span style=" font-family:'Ubuntu';">. Если у вас привилегия </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';">, можно просматривать все потоки, в противном случае - только свои потоки. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#kill"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.5, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#kill"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">KILL</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#kill"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. Если не используется параметр </span><span style=" font-family:'Courier New,courier';">FULL</span><span style=" font-family:'Ubuntu';">, будут показаны только первые 100 символов каждого запроса. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с 4.0.12, MySQL сообщает имя хоста для TCP/IP соединений как </span><span style=" font-family:'Courier New,courier';">имя_хоста:клиентский_порт</span><span style=" font-family:'Ubuntu';"> с тем, чтобы было проще понять, какой клиент чем занят. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда очень полезна, если выдается сообщение об ошибке 'too many connections' (слишком много соединений) и необходимо выяснить, что происходит. MySQL резервирует одно дополнительное соединение для клиента с привилегией </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';">, чтобы у вас всегда была возможность войти в систему и произвести проверку (предполагается, что вы не станете раздавать эту привилегию всем своим пользователям). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Некоторые состояния обычно можно увидеть в </span><span style=" font-family:'Courier New,courier';">mysqladmin processlist</span><span style=" font-family:'Ubuntu';">. </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Checking table</span> Поток осуществляет [автоматическую] проверку таблицы. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Closing tables</span> Означает, что поток записывает измененные данные таблиц на диск и закрывает использующиеся таблицы. Выполнение этой операции должно произойти быстро. Если на нее уходит значительное время, убедитесь, что диск не переполнен или что диск не используется слишком интенсивно. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Connect Out</span> Подчиненный компьютер, подсоединенный к головному компьютеру. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Copying to tmp table on disk</span> Набор временных результатов превысил <span style=" font-family:'Courier New,courier';">tmp_table_size</span>, и теперь поток изменяет таблицу временных данных, расположенную в памяти, на дисковую таблицу, чтобы сохранить память. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Creating tmp table</span> Поток создает временную таблицу, чтобы хранить часть результатов для запроса. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">deleting from main table</span> При запуске первой части удаления нескольких таблиц удаление производится только начиная с первой таблицы. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">deleting from reference tables</span> При запуске второй части удаления нескольких таблиц удаляются совпадающие строки из других таблиц. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Flushing tables</span> Поток запускает команду <span style=" font-family:'Courier New,courier';">FLUSH TABLES</span> и ожидает, пока все потоки закроют свои таблицы. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Killed</span> Кто-то направил команду на закрытие потока, и поток будет закрыт при следующей проверке флага закрытия. Флаг проверяется при каждом основном цикле в MySQL, но в некоторых случаях закрытие потока может занять некоторое время. Если поток заблокирован другим потоком, закрытие будет произведено сразу после того, как другой поток снимет блокировку. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Sending data</span> Поток обрабатывает строки для оператора <span style=" font-family:'Courier New,courier';">SELECT</span>, а также направляет данные клиенту. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Sorting for group</span> Поток осуществляет сортировку в соответствии с <span style=" font-family:'Courier New,courier';">GROUP BY</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Sorting for order</span> Поток осуществляет сортировку в соответствии с <span style=" font-family:'Courier New,courier';">ORDER BY</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Opening tables</span> Это просто означает, что поток пытается открыть таблицу. Такая процедура осуществляется довольно быстро, если что-либо не мешает открытию. Например, команды <span style=" font-family:'Courier New,courier';">ALTER TABLE</span> или <span style=" font-family:'Courier New,courier';">LOCK TABLE</span> могут помешать открытию таблицы, пока выполнение команды не будет завершено. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Removing duplicates</span> Запрос использовал команду <span style=" font-family:'Courier New,courier';">SELECT DISTINCT</span> таким образом, что MySQL не смог произвести оптимизацию на начальном этапе. Поэтому MySQL перед отправкой результатов клиенту должен выполнить дополнительное удаление всех дублирующихся строк. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Reopen table</span> Поток заблокировал таблицу, но обнаружил, что после блокировки структура таблицы изменилась. Он снял блокировку, закрыл таблицу и теперь пытается повторно ее открыть. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Repair by sorting</span> Код восстановления использует сортировку для создания индексов. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Repair with keycache</span> Код восстановления использует создание ключей один за другим, через кэш ключей. Это намного медленнее, чем <span style=" font-family:'Courier New,courier';">Repair by sorting</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Searching rows for update</span> Поток осуществляет первую фазу - производит поиск всех совпадающих строк, чтобы затем обновить их. Это действие необходимо выполнить, если команда <span style=" font-family:'Courier New,courier';">UPDATE</span> изменяет индекс, который используется для поиска указанных строк. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Sleeping</span> Поток ожидает, когда клиент направит ему новую команду. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">System lock</span> Поток ожидает получения внешней системной блокировки таблицы. Если не используется несколько серверов <span style=" font-family:'Courier New,courier';">mysqld</span>, которые получают доступ к одним и тем же таблицам, системную блокировку можно отключить при помощи параметра <span style=" font-family:'Courier New,courier';">--skip-external-locking</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Upgrading lock</span> Обработчик <span style=" font-family:'Courier New,courier';">INSERT DELAYED</span> пытается заблокировать таблицу, чтобы вставить строки. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Updating</span> Поток производит поиск строк, которые необходимо обновить, и обновляет их. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">User Lock</span> Поток ожидает <span style=" font-family:'Courier New,courier';">GET_LOCK()</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Waiting for tables</span> Поток получил уведомление, что структура таблицы изменилась, и ему необходимо повторно открыть таблицу, чтобы получить новую структуру. Чтобы повторно открыть таблицу, он должен подождать, пока ее не закроют все остальные потоки. Это уведомление выдается, если другой поток воспользовался командой <span style=" font-family:'Courier New,courier';">FLUSH TABLES</span> или к таблице была применена одна из следующих команд: <span style=" font-family:'Courier New,courier';">FLUSH TABLES table_name</span>, <span style=" font-family:'Courier New,courier';">ALTER TABLE</span>, <span style=" font-family:'Courier New,courier';">RENAME TABLE</span>, <span style=" font-family:'Courier New,courier';">REPAIR TABLE</span>, <span style=" font-family:'Courier New,courier';">ANALYZE TABLE</span> или <span style=" font-family:'Courier New,courier';">OPTIMIZE TABLE</span>. Обработчик <span style=" font-family:'Courier New,courier';">INSERT DELAYED</span> завершил работу со всеми вставками и ожидает новые. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Большинство состояний - это очень быстрые операции. Если потоки остаются в любом из этих состояний на протяжении большого количества секунд, то, возможно, возникла какая-то проблема, которую следует устранить. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Существует еще несколько состояний, не упомянутых выше, но большинство из них полезны только для поиска ошибок в </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-grants"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.7. </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">SHOW GRANTS</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">SHOW GRANTS FOR user выводит список команд назначения привилегий, которые нужны при дублировании привилегий для пользователя. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SHOW GRANTS FOR root@localhost;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Grants for root@localhost                                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION |</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------------------------------------------------------------+</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для получения информации по привилегии в текущей сессии можно использовать функцию </span><span style=" font-family:'Courier New,courier';">CURRENT_USER()</span><span style=" font-family:'Ubuntu';"> (новшество в версии 4.0.6) для того, чтобы выяснить, по какому пользователю в действительности аутентифицировалась сессия. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#miscellaneous-functions"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.3.6.2, «Разные функции»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-create-table"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.8. </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">SHOW CREATE TABLE</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Показывает оператор </span><span style=" font-family:'Courier New,courier';">CREATE TABLE</span><span style=" font-family:'Ubuntu';">, который будет создавать данную таблицу: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SHOW CREATE TABLE t\G</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">*************************** 1. row ***************************</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Table: t</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Create Table: CREATE TABLE t (</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">id int(11) default NULL auto_increment,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">s char(60) default NULL,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PRIMARY KEY (id)</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">) TYPE=MyISAM</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">SHOW CREATE TABLE</span><span style=" font-family:'Ubuntu';"> будет выдавать таблицу и названия столбцов в соответствии с параметром </span><span style=" font-family:'Courier New,courier';">SQL_QUOTE_SHOW_CREATE</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.6, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SET</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-warnings"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.9. </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">SHOW WARNINGS | ERRORS</span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW WARNINGS [LIMIT #]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW ERRORS [LIMIT #]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда реализована в версии MySQL 4.1.0. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда показывает информацию по ошибкам, предупреждениям и сообщениям, касающихся последней команды. Эти сообщения сбрасываются для каждой новой команды, использующей таблицы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сервер MySQL возвращает общее количество сообщений и ошибок, которые вы получили для последней команды. Это количество можно получить вызовом </span><span style=" font-family:'Courier New,courier';">mysql_warning_count()</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Максимум </span><span style=" font-family:'Courier New,courier';">max_error_count</span><span style=" font-family:'Ubuntu';"> сообщений сохраняется (переменная глобальная и специфичная для потока). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы можете получить количество ошибок из </span><span style=" font-family:'Courier New,courier';">@error_count</span><span style=" font-family:'Ubuntu';"> и количество предупреждений из </span><span style=" font-family:'Courier New,courier';">@warning_count</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW WARNINGS</span><span style=" font-family:'Ubuntu';"> сообщает все ошибки, предупреждения и заметки, которые вы получили для последней команды, в то время как </span><span style=" font-family:'Courier New,courier';">SHOW ERRORS</span><span style=" font-family:'Ubuntu';"> даешь лишь только информацию по ошибкам. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">DROP TABLE IF EXISTS нет_такой_таблицы;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SHOW WARNINGS;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-weight:600;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+-------+------+-----------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Level | Code | Message                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+-------+------+-----------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Note  | 1051 | Unknown table 'нет_такой_таблицы' |</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+-------+------+-----------------------------------+</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-table-types"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.10. </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">SHOW TABLE TYPES</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW TABLE TYPES</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда реализована в 4.1.0. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW TABLE TYPES</span><span style=" font-family:'Ubuntu';"> дает статусную информацию про типы таблиц. Эта информация полезна, например, для проверки, поддерживается ли определенный тип таблицы или для того чтобы узнать, какой тип таблиц используется по умолчанию. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SHOW TABLE TYPES;</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-weight:600;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+--------+---------+----------------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Type   | Support | Comment                                                        |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+--------+---------+----------------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| MyISAM | DEFAULT | Основной тип для 3.23 с отличной производительностью           | </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| HEAP   | YES     | Хеш-тип, хранится только в памяти, полезен для временных таблиц|</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| MERGE  | YES     | Набор идентичных MyISAM-таблиц                                 |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| ISAM   | YES     | Старый тип; замещен MyISAM                                     |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| InnoDB | YES     | Поддерживает транзакции, строчную блокировку и внешние ключи   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| BDB    | NO      | Поддерживает транзакции и страничную блокировку                |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+--------+---------+----------------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">6 rows in set (0.00 sec)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Опция </span><span style=" font-family:'Courier New,courier';">DEFAULT</span><span style=" font-family:'Ubuntu';"> в столбце </span><span style=" font-family:'Courier New,courier';">Support</span><span style=" font-family:'Ubuntu';"> указывает, что данный конкретный тип таблицы поддерживается и является принятым по умолчанию. Если сервер был запущен с </span><span style=" font-family:'Courier New,courier';">--default-table-type=InnoDB</span><span style=" font-family:'Ubuntu';">, тогда для InnoDB столбец </span><span style=" font-family:'Courier New,courier';">Support</span><span style=" font-family:'Ubuntu';"> примет значение </span><span style=" font-family:'Courier New,courier';">DEFAULT</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="show-privileges"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.5.6.11. </span><span style=" font-family:'Courier New,courier'; font-size:medium; font-weight:600;">SHOW PRIVILEGES</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW PRIVILEGES</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда реализована в MySQL 4.1.0. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW PRIVILEGES</span><span style=" font-family:'Ubuntu';"> показывает список системных привилегий, которые поддерживаются сервером MySQL. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">show privileges;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+------------+--------------------------+-------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Privilege  | Context                  | Comment                                               |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+------------+--------------------------+-------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Select     | Tables                   | To retrieve rows from table                           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Insert     | Tables                   | To insert data into tables                            |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Update     | Tables                   | To update existing rows                               |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Delete     | Tables                   | To delete existing rows                               |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Index      | Tables                   | To create or drop indexes                             |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Alter      | Tables                   | To alter the table                                    |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Create     | Databases,Tables,Indexes | To create new databases and tables                    |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Drop       | Databases,Tables         | To drop databases and tables                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Grant      | Databases,Tables         | To give to other users those privileges you possess   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| References | Databases,Tables         | To have references on tables                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Reload     | Server Admin             | To reload or refresh tables, logs and privileges      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Shutdown   | Server Admin             | To shutdown the server                                |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Process    | Server Admin             | To view the plain text of currently executing queries |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| File       | File access on server    | To read and write files on the server                 |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+------------+--------------------------+-------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">14 rows in set (0.00 sec)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Этот же пример в переводе на русский язык: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">show privileges;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+------------+--------------------------+-------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Привилегия | Контекст                 | Описание                                              |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+------------+--------------------------+-------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Select     | Таблица                  | Для выборки строк из таблицы                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Insert     | Таблица                  | Для вставки данных в таблицы                          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Update     | Таблица                  | Для обновления существующих записей                   |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Delete     | Таблица                  | Для удаления существующих записей                     |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Index      | Таблица                  | Для создания или удаления индексов                    |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Alter      | Таблица                  | Для изменения таблиц                                  |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Create     | База,Таблица,Индекс      | Для создания новых баз данных и таблиц                |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Drop       | База,Таблица             | Для удаления баз данных и таблиц                      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Grant      | База,Таблица             | Для раздачи другим пользователям имеющихся у вас прав |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| References | База,Таблица             | Для обладания ссылок на таблицы                       |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Reload     | Администрирование        | Для обновления таблиц, журналов и привилегий          |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Shutdown   | Администрирование        | Для остановки сервера                                 |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Process    | Администрирование        | Для просмотра текста выполняющихся запросов           |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| File       | Доступ к файлам          | Для чтения и записи файлов на сервере                 |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+------------+--------------------------+-------------------------------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">14 rows in set (0.00 sec)</span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="localisation"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">.6. Локализация MySQL и использование национальных алфавитов</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#character-sets"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.1. Набор символов, применяющийся для записи данных и сортировки</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#languages"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.2. Сообщения об ошибках на языках, отличных от английского</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#adding-character-set"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.3. Добавление набора символов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#character-arrays"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.4. Массивы определения символов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#string-collating"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.5. Поддержка упорядочивания строк</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#multi-byte-characters"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.6. Поддержка многобайтовых символов</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#problems-with-character-sets"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.7. Проблемы с наборами символов</span></a></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="character-sets"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.6.1. Набор символов, применяющийся для записи данных и сортировки</span></p>
<p style=" margin-top:8px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#german-character-set"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.6.1.1. Набор символов немецкого алфавита</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">По умолчанию в MySQL используется набор символов ISO-8859-1 (Latin1) с сортировкой согласно шведским/финским правилам. Этот набор символов также подходит для использования в США и Западной Европе. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все стандартные исполняемые файлы MySQL компилируются с настройкой </span><span style=" font-family:'Courier New,courier';">--with-extra-charsets=complex</span><span style=" font-family:'Ubuntu';">. Таким образом в файл помещается код, позволяющий всем стандартным программам работать с набором символов </span><span style=" font-family:'Courier New,courier';">latin1</span><span style=" font-family:'Ubuntu';">, а также многобайтовыми наборами символов. Другие наборы символов могут загружаться из соответствующих файлов определений по необходимости. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Набор определяет, какие символы могут использоваться в именах, а также способ сортировки значений в операторах </span><span style=" font-family:'Courier New,courier';">ORDER BY</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">GROUP BY</span><span style=" font-family:'Ubuntu';"> команды </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При запуске сервера можно изменить набор символов при помощи параметра </span><span style=" font-family:'Courier New,courier';">--default-character-set</span><span style=" font-family:'Ubuntu';">. Выбрать доступные наборы символов можно при помощи параметров </span><span style=" font-family:'Courier New,courier';">--with-charset=charset</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">--with-extra-charsets= список-кодировок | complex | all</span><span style=" font-family:'Ubuntu';">, и файлов наборов символов, перечисленных в </span><span style=" font-family:'Courier New,courier';">SHAREDIR/charsets/Index</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/installing.html#configure-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 2.3.3, «Типичные опции </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/installing.html#configure-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">configure</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/installing.html#configure-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При смене набора символов во время работы MySQL (что может одновременно изменить и порядок сортировки) необходимо запустить команду </span><span style=" font-family:'Courier New,courier';">myisamchk -r -q --set-character-set=charset</span><span style=" font-family:'Ubuntu';"> для всех таблиц. В противном случае индексы могут быть созданы в неправильном порядке. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При подключении клиента к серверу MySQL сервер отправляет ему используемый по умолчанию набор символов. На время соединения клиент переключается на использование этого набора. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для экранирования строк в SQL-запросе необходимо пользоваться функцией </span><span style=" font-family:'Courier New,courier';">mysql_real_escape_string()</span><span style=" font-family:'Ubuntu';">. </span><span style=" font-family:'Courier New,courier';">mysql_real_escape_string()</span><span style=" font-family:'Ubuntu';"> идентична старой функции </span><span style=" font-family:'Courier New,courier';">mysql_escape_string()</span><span style=" font-family:'Ubuntu';"> - во всем, кроме одного: в качестве первого параметра она принимает дескриптор соединения MYSQL. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если клиент был скомпилирован с набором путей, в которых не было пути установки сервера, а настраивавший MySQL пользователь на включил в исполняемый файл системы все наборы символов, клиенту необходимо сообщить о местонахождении дополнительных наборов символов, которые нужны ему для общения с сервером. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сделать это можно путем внесения в файл настроек MySQL следующей строки: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[client]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">character-sets-dir=/usr/local/mysql/share/mysql/charsets</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">путь в ней указывает на каталог, в котором хранятся динамические наборы символов MySQL. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заставить клиента использовать определенный набор символов можно следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[client]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">default-character-set=character-set-name</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">но обычно этого не требуется. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="german-character-set"></a><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:medium; font-weight:600;">.6.1.1. Набор символов немецкого алфавита</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для задания порядка сортировки в соответствии с немецким алфавитом нужно запустить </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> с параметром </span><span style=" font-family:'Courier New,courier';">--default-character-set=latin1_de</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При сортировке и сравнении строк осуществляется следующая подстановка: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Д  -&gt;  ae</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Ж  -&gt;  oe</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Э  -&gt;  ue</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ъ  -&gt;  ss</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все символы с диакритическими знаками заменяются их аналогами из верхнего регистра и без ударения. Все буквы переводятся в верхний регистр. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При сравнении строк с помощью команды </span><span style=" font-family:'Courier New,courier';">LIKE</span><span style=" font-family:'Ubuntu';">, подстановки двух символов вместо одного не происходит. Все буквы переводятся в верхний регистр. Диакритические знаки снимаются со всех букв, кроме: </span><span style=" font-family:'Courier New,courier';">э</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">Э</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">ж</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">Ж</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">д</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">Д</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="languages"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.6.2. Сообщения об ошибках на языках, отличных от английского</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> может выдавать сообщения об ошибках на следующих языках: чешском, датском, голландском, английском (по умолчанию), эстонском, французском, немецком, греческом, венгерском, итальянском, японском, корейском, норвежском, новонорвежском, польском, португальском, румынском, русском, словацком, испанском и шведском. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При запуске </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> выбрать определенный язык можно при помощи настройки </span><span style=" font-family:'Courier New,courier';">--language=язык</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">-L язык</span><span style=" font-family:'Ubuntu';">. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqld --language=swedish</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или:</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqld --language=/usr/local/share/swedish</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание: названия языков вводятся в нижнем регистре. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файлы языков по умолчанию располагаются в папке </span><span style=" font-family:'Courier New,courier'; font-style:italic;">mysql_base_dir</span><span style=" font-family:'Courier New,courier';">/share/</span><span style=" font-family:'Courier New,courier'; font-style:italic;">LANGUAGE</span><span style=" font-family:'Courier New,courier';">/</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для того чтобы изменить тексты сообщений об ошибках, нужно отредактировать файл </span><span style=" font-family:'Courier New,courier';">errmsg.txt</span><span style=" font-family:'Ubuntu';"> и запустить следующую команду для генерации нового файла </span><span style=" font-family:'Courier New,courier';">errmsg.sys</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">comp_err errmsg.txt errmsg.sys</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Установив новую версию MySQL, не забудьте внести те же изменения в новый файл </span><span style=" font-family:'Courier New,courier';">errmsg.txt</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="adding-character-set"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.6.3. Добавление набора символов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Снабдить MySQL новым набором символов можно следующим образом. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Определите, является ли новый набор символов простым или сложным. Если для работы с этим набором никаких специальных процедур обработки строк и поддержки многобайтовых символов не требуется, он является простым. Если вышеперечисленные возможности необходимы, этот набор символов относится к сложным. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Например, наборы </span><span style=" font-family:'Courier New,courier';">latin1</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">danish</span><span style=" font-family:'Ubuntu';"> - простые, а </span><span style=" font-family:'Courier New,courier';">big5</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">czech</span><span style=" font-family:'Ubuntu';"> - сложные. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для всех приведенных ниже примеров предполагается, что используемый набор символов называется </span><span style=" font-family:'Courier New,courier';">MYSET</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для создания простого набора достаточно сделать следующее: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вставьте имя <span style=" font-family:'Courier New,courier';">MYSET</span> в конец файла <span style=" font-family:'Courier New,courier';">sql/share/charsets/Index</span> и присвойте этому набору символов уникальный номер. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Создайте файл <span style=" font-family:'Courier New,courier';">sql/share/charsets/MYSET.conf</span>. (в качестве основы можно использовать файл <span style=" font-family:'Courier New,courier';">sql/share/charsets/latin1.conf</span>). Правила составления этого файла очень просты: </li>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Комментарием считается целая строка, начинающаяся с символа ‘<span style=" font-family:'Courier New,courier';">#</span>’. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Слова разделяются любым количеством непечатаемых символов. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При определении набора символов каждое слово должно представлять собой число в шестнадцатеричной системе счисления. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Массив ctype занимает первых 257 слов. За ним следуют массивы <span style=" font-family:'Courier New,courier';">to_lower</span>, <span style=" font-family:'Courier New,courier';">to_upper[]</span> и <span style=" font-family:'Courier New,courier';">sort_order[]</span>, каждый из которых занимает 256 слов. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#character-arrays"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.6.4, «Массивы определения символов»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Добавьте имя набора символов в списки <span style=" font-family:'Courier New,courier';">CHARSETS_AVAILABLE</span> и <span style=" font-family:'Courier New,courier';">COMPILED_CHARSETS</span> файла <span style=" font-family:'Courier New,courier';">configure.in</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Перенастройте, перекомпилируйте и протестируйте систему. </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для создания сложного набора необходимо выполнить следующие действия: </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Создайте файл strings/ctype-MYSET.c в исходном дистрибутиве MySQL. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вставьте имя MYSET в конец файла sql/share/charsets/Index и присвойте этому набору символов уникальный номер. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Просмотрите один из существующих файлов ctype-*.c (например strings/ctype-big5.c) и узнайте, что нужно определить. Не забывайте, что имена массивов в вашем файле должны быть похожи на следующие: ctype_MYSET, to_lower_MYSET и т.п. Эти имена соответствуют именам массивов из простого набора символов (see <a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#character-arrays"><span style=" text-decoration: underline; color:#0000ff;">Раздел 4.6.4, «Массивы определения символов»</span></a>). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В начале файла целесообразно поместить комментарий наподобие следующего: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">этот комментарий разбирается configure для создания ctype.c,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">поэтому не меняйте его, если не уверены в правильности своих действий.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">.configure. number_MYSET=MYNUMBER</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">.configure. strxfrm_multiply_MYSET=N</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">.configure. mbmaxlen_MYSET=N</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">*/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Программа configure использует этот комментарий для линкования набора символов с библиотекой MySQL. Значение строк strxfrm_multiply и mbmaxlen будет разъяснено ниже. Использовать их нужно только в том случае, если вам нужны функции для сортировки строк или работы с многобайтовыми наборами символов соответственно. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После этого нужно создать некоторые из следующих функций: </li>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">my_strncoll_MYSET()</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">my_strcoll_MYSET()</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">my_strxfrm_MYSET()</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">my_like_range_MYSET()</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#string-collating"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.6.5, «Поддержка упорядочивания строк»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Добавьте имя набора символов в списки <span style=" font-family:'Courier New,courier';">CHARSETS_AVAILABLE</span> и <span style=" font-family:'Courier New,courier';">COMPILED_CHARSETS</span> файла <span style=" font-family:'Courier New,courier';">configure.in</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Перенастройте, перекомпилируйте и протестируйте систему. </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Более подробные инструкции приведены в файле </span><span style=" font-family:'Courier New,courier';">sql/share/charsets/README</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы хотите, чтобы ваш набор символов был включен в комплект поставки MySQL, вышлите патч с ним по адресу </span><span style=" font-family:'Courier New,courier';">&lt;</span><a href="mailto:internals@lists.mysql.com"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">internals@lists.mysql.com</span></a><span style=" font-family:'Courier New,courier';">&gt;</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="character-arrays"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.6.4. Массивы определения символов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Простые массивы </span><span style=" font-family:'Courier New,courier';">to_lower[]</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">to_upper[]</span><span style=" font-family:'Ubuntu';"> содержат символы верхнего и нижнего регистров, соответствующие каждому из символов набора. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">to_lower['A'] should contain 'a'</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">to_upper['a'] should contain 'A'</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">sort_order[]</span><span style=" font-family:'Ubuntu';"> - карта, устанавливающая правила упорядочивания символов для сравнения и сортировки. Во многих наборах символов эта таблица совпадает с </span><span style=" font-family:'Courier New,courier';">to_upper[]</span><span style=" font-family:'Ubuntu';"> (благодаря чему при сортировке регистр символов не учитывается). MySQL сортирует символы в соответствии со значением </span><span style=" font-family:'Courier New,courier';">sort_order[символ]</span><span style=" font-family:'Ubuntu';">. Более сложные правила упорядочивания строк разъясняются ниже. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#string-collating"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.6.5, «Поддержка упорядочивания строк»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ctype[]</span><span style=" font-family:'Ubuntu';"> представляет собой массив битов, по одному элементу на каждый из символов. (Массивы </span><span style=" font-family:'Courier New,courier';">to_lower[]</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">to_upper[]</span><span style=" font-family:'Ubuntu';">, и </span><span style=" font-family:'Courier New,courier';">sort_order[]</span><span style=" font-family:'Ubuntu';"> индексируются по значению символа, а </span><span style=" font-family:'Courier New,courier';">ctype[]</span><span style=" font-family:'Ubuntu';"> - по значению символа + 1. Это позволяет обрабатывать символы </span><span style=" font-family:'Courier New,courier';">EOF</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В файле </span><span style=" font-family:'Courier New,courier';">m_ctype.h</span><span style=" font-family:'Ubuntu';"> приведены следующие определения битовых масок: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#define _U 01 /* верхний регистр */</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#define _L 02 /* нижний регистр */</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#define _N 04 /* число (цифра) */</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#define _S 010 /* символ пробела */</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#define _P 020 /* знак пунктуации */</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#define _C 040 /* управляющий символ */</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#define _B 0100 /* пустой символ */</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#define _X 0200 /* шестнадцатеричная цифра */</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Значение </span><span style=" font-family:'Courier New,courier';">ctype[]</span><span style=" font-family:'Ubuntu';"> для каждого из символов должно представлять собой объединение значений битовых масок, описывающих символ. Например, </span><span style=" font-family:'Courier New,courier';">'A'</span><span style=" font-family:'Ubuntu';"> представят собой символ верхнего регистра (</span><span style=" font-family:'Courier New,courier';">_U</span><span style=" font-family:'Ubuntu';">) а также шестнадцатеричную цифру (</span><span style=" font-family:'Courier New,courier';">_X</span><span style=" font-family:'Ubuntu';">), поэтому элемент </span><span style=" font-family:'Courier New,courier';">['A'+1]</span><span style=" font-family:'Ubuntu';"> должен содержать значение: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">_U + _X = 01 + 0200 = 0201</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="string-collating"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.6.5. Поддержка упорядочивания строк</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если правила сортировки вашего естественного языка слишком сложны и не могут быть заданы с помощью простой таблицы </span><span style=" font-family:'Courier New,courier';">sort_order</span><span style=" font-family:'Ubuntu';">[], необходимо использовать функции упорядочивания строк. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В настоящее время лучшим справочным пособием по этому вопросу являются уже реализованные наборы символов. Примером такой реализации могут служить наборы </span><span style=" font-family:'Courier New,courier';">big5</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">czech</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">gbk</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">sjis</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">tis160</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В начале файла в особом комментарии необходимо указать значение </span><span style=" font-family:'Courier New,courier';">strxfrm_multiply_MYSET=N</span><span style=" font-family:'Ubuntu';">. Значение </span><span style=" font-family:'Courier New,courier';">N</span><span style=" font-family:'Ubuntu';"> представляет собой максимальный прирост объема строк во время </span><span style=" font-family:'Courier New,courier';">my_strxfrm_MYSET</span><span style=" font-family:'Ubuntu';"> (т.е. положительное целое число). </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="multi-byte-characters"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.6.6. Поддержка многобайтовых символов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При желании обеспечить поддержку нового набора, содержащего многобайтовые символы, нужно пользоваться специальными функциями для работы с многобайтовыми символами. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В настоящее время лучшим справочным пособием по этому вопросу являются уже реализованные наборы символов. Примером такой реализации могут служить наборы </span><span style=" font-family:'Courier New,courier';">euc_kr</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">gb2312</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">gbk</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">sjis</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">ujis</span><span style=" font-family:'Ubuntu';">. Они реализованы в файлах </span><span style=" font-family:'Courier New,courier';">ctype-'charset'.c</span><span style=" font-family:'Ubuntu';">, расположенных в папке </span><span style=" font-family:'Courier New,courier';">strings</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В начале файла в особом комментарии необходимо указать значение </span><span style=" font-family:'Courier New,courier';">strxfrm_multiply_MYSET=N</span><span style=" font-family:'Ubuntu';">. Значение </span><span style=" font-family:'Courier New,courier';">N</span><span style=" font-family:'Ubuntu';"> должно содержать объем самого ``большого'' символа набора в байтах. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="problems-with-character-sets"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.6.7. Проблемы с наборами символов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При попытке воспользоваться набором символов, не включенным в исполняемый файл, можно столкнуться со следующими неприятностями: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В программе задан неверный путь к каталогу, в котором хранятся наборы символов (по умолчанию это <span style=" font-family:'Courier New,courier';">/usr/local/mysql/share/mysql/charsets</span>). Данную проблему можно решить с помощью настройки <span style=" font-family:'Courier New,courier';">--character-sets-dir</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Набор символов является многобайтовым и не может быть загружен динамически. В таком случае нужно перекомпилировать программу и включить в нее поддержку нужного набора. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Набор символов может быть загружен динамически, но конфигурационного файла для него нет. В таком случае нужно скопировать файл для этого набора из нового дистрибутива MySQL. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В файле <span style=" font-family:'Courier New,courier';">Index</span> нет имени набора символов. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ERROR 1105: File '/usr/local/share/mysql/charsets/?.conf' not found (Errcode: 2)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">В таком случае нужно либо установить новый файл </span><span style=" font-family:'Courier New,courier';">Index</span><span style=" font-family:'Ubuntu';"> или вручную внести в него недостающие имена наборов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Узнать имя набора символов таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> можно с помощью команды </span><span style=" font-family:'Courier New,courier';">myisamchk -dvv table_name</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="server-side-scripts"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">.7. Серверные сценарии и утилиты MySQL</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#server-side-overview"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7.1. Обзор серверных сценариев и утилит</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7.2. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">safe_mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, оболочка </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-multi"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7.3. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-multi"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">Mysqld_multi</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-multi"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, программа для управления множеством серверов MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisampack"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7.4. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisampack"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">myisampack</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#myisampack"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, MySQL-генератор сжатых таблиц (только для чтения)</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-max"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.7.5. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-max"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld-max</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-max"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, расширенный сервер </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqld-max"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="server-side-overview"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.7.1. Обзор серверных сценариев и утилит</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все программы MySQL имеют множество различных опций. При этом каждая программа MySQL поддерживает опцию </span><span style=" font-family:'Courier New,courier';">--help</span><span style=" font-family:'Ubuntu';">, которую можно использовать для получения полного описания различных опций программы. Например, попробуйте выполнить </span><span style=" font-family:'Courier New,courier';">mysql --help</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заданные по умолчанию опции для всех стандартных программ можно переопределять при помощи файла опций. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В следующем списке приводятся краткие описания серверных программ MySQL: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id386014"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">yisamchk</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита, используемая для описания, проверки, оптимизации и восстановления таблиц MySQL. Поскольку утилита </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> имеет много функций, она описывается в отдельном разделе. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Глава 4, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html"><span style=" font-family:'Ubuntu'; font-style:italic; text-decoration: underline; color:#0000ff;">Администрирование баз данных</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id386067"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">ake_binary_distribution</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Создает бинарную поставку откомпилированного кода MySQL. Эту версию при помощи </span><span style=" font-family:'Courier New,courier';">FTP</span><span style=" font-family:'Ubuntu';"> можно передать на сайт </span><span style=" font-family:'Courier New,courier';">support.mysql.com</span><span style=" font-family:'Ubuntu';"> в директорию </span><span style=" font-family:'Courier New,courier';">/pub/mysql/Incoming</span><span style=" font-family:'Ubuntu';">, чтобы ею могли воспользоваться и другие пользователи MySQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id386128"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">ysqlbug</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сценарий, составляющий отчет о возникшей в MySQL неполадке. Этот сценарий должен всегда использоваться для составления отчета для почтового списка рассылки MySQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id386168"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">ysqld</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сам сервер MySQL, демон. Он должен работать постоянно. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id386202"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">ysql_install_db</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Создает таблицы привилегий MySQL с заданными по умолчанию привилегиями. Это обычно делается только один раз, при первой инсталляции MySQL в системе. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="safe-mysqld"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.7.2. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">safe_mysqld</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, оболочка </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqld</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В MySQL 4.0 </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> был переименован в </span><span style=" font-family:'Courier New,courier';">mysqld_safe</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> - это сценарий, с помощью которого рекомендуется запускать демон mysqld на Unix. </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> служит для реализации неких дополнительных функций безопасности для </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, таких как возможность перезапуска сервера при обнаружении ошибки и записи в журнал информации о процессе работы </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если не указаны опции </span><span style=" font-family:'Courier New,courier';">--mysqld=#</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">--mysqld-version=#</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> будет использовать исполняемый файл </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">-max, если последний существует. Если </span><span style=" font-family:'Courier New,courier';">mysqld-max</span><span style=" font-family:'Ubuntu';"> не существует, </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> запустит </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. Это позволяет легко выяснить, что даст использование </span><span style=" font-family:'Courier New,courier';">mysqld-max</span><span style=" font-family:'Ubuntu';"> вместо </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">: просто скопируйте </span><span style=" font-family:'Courier New,courier';">mysqld-max</span><span style=" font-family:'Ubuntu';"> поверх </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, и он будет работать. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Как правило, редактировать сценарий </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> не следует, однако можно указать опции для </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">, поместив их в раздел </span><span style=" font-family:'Courier New,courier';">[safe_mysqld]</span><span style=" font-family:'Ubuntu';"> файла </span><span style=" font-family:'Courier New,courier';">my.cnf</span><span style=" font-family:'Ubuntu';">. </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> будет считывать все опции из разделов файлов опций </span><span style=" font-family:'Courier New,courier';">[mysqld]</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">[server]</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">[safe_mysqld]</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание: все опции, которые вводятся в командной строке для </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">, передаются </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. Если требуется применить в </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> какие-либо опции, которые </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> не поддерживает, эти опции нужно определить в файле опций. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Большинство опций </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> - те же, что и у </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.1, «Параметры командной строки </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Safe_mysqld</span><span style=" font-family:'Ubuntu';"> поддерживает следующие опции: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--basedir=path</span>, <span style=" font-family:'Courier New,courier';">--core-file-size=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Размер </span><span style=" font-family:'Courier New,courier';">core</span><span style=" font-family:'Ubuntu';">-файла который может быть создан </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. Значение передается </span><span style=" font-family:'Courier New,courier';">ulimit -c</span><span style=" font-family:'Ubuntu';"> </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--datadir=path</span>, <span style=" font-family:'Courier New,courier';">--defaults-extra-file=path</span>, <span style=" font-family:'Courier New,courier';">--defaults-file=path</span>, <span style=" font-family:'Courier New,courier';">--err-log=path (устарело в 4.0; Используйте --log-error вместо)</span>, <span style=" font-family:'Courier New,courier';">--log-error=path</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Писать журнал ошибок в указанный файл. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#error-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.1, «Журнал ошибок»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--ledir=path</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Путь к </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--log=path</span>, <span style=" font-family:'Courier New,courier';">--mysqld=mysqld-version</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя версии </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, которую вы хотите запустить в директории </span><span style=" font-family:'Courier New,courier';">ledir</span><span style=" font-family:'Ubuntu';"> </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--mysqld-version=version</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">То же, что и </span><span style=" font-family:'Courier New,courier';">--mysqld=</span><span style=" font-family:'Ubuntu';">, но в этой опции задается только суффикс для </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. Например, если используется </span><span style=" font-family:'Courier New,courier';">--mysqld-version=max</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> запустит версию </span><span style=" font-family:'Courier New,courier';">ledir/mysqld-max</span><span style=" font-family:'Ubuntu';">. Если задать </span><span style=" font-family:'Courier New,courier';">--mysqld-version</span><span style=" font-family:'Ubuntu';"> без аргумента, будет использоваться </span><span style=" font-family:'Courier New,courier';">ledir/mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--no-defaults</span>, <span style=" font-family:'Courier New,courier';">--open-files-limit=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Максимальное количество файлов, которые могут быть открыты </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. Значение передается </span><span style=" font-family:'Courier New,courier';">ulimit -n</span><span style=" font-family:'Ubuntu';">. Обратите внимание: чтобы эта опция работала корректно, необходимо запустить </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> от пользователя root! </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--pid-file=path</span>, <span style=" font-family:'Courier New,courier';">--port=#</span> , <span style=" font-family:'Courier New,courier';">--socket=path</span>, <span style=" font-family:'Courier New,courier';">--timezone=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Устанавливает переменную часового пояса (</span><span style=" font-family:'Courier New,courier';">TZ</span><span style=" font-family:'Ubuntu';">) в значение, передаваемое в этом параметре. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--user=#</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сценарий </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> написан таким образом, чтобы можно было запустить сервер, инсталлированный как из исходного кода, так и из бинарной поставки MySQL, даже если компоненты сервера, в зависимости от используемой инсталляции, будут размещены несколько по-другому. Для </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> требуется выполнение одного из следующих условий: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сервер и базы данных можно обнаружить относительно каталога, в котором вызывается <span style=" font-family:'Courier New,courier';">safe_mysqld</span>. <span style=" font-family:'Courier New,courier';">safe_mysqld</span> ищет в своей рабочей директории <span style=" font-family:'Courier New,courier';">bin</span> и <span style=" font-family:'Courier New,courier';">data</span> (для бинарных дистрибутивов) или <span style=" font-family:'Courier New,courier';">libexec</span> и <span style=" font-family:'Courier New,courier';">var</span> (для дистрибутивов с исходным кодом). Это условие должно выполняться, если <span style=" font-family:'Courier New,courier';">safe_mysqld</span> запускается из директории, в которую инсталлирован MySQL (например <span style=" font-family:'Courier New,courier';">/usr/local/mysql</span> для бинарного дистрибутива). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если сервер и базы данных не могут быть найдены относительно рабочей директории, <span style=" font-family:'Courier New,courier';">safe_mysqld</span> пытается найти их по абсолютным путям. Типичные местоположения - <span style=" font-family:'Courier New,courier';">/usr/local/libexec</span> и <span style=" font-family:'Courier New,courier';">/usr/local/var</span>. Действительные местоположения определяются при создании дистрибутива, из которого запускается <span style=" font-family:'Courier New,courier';">safe_mysqld</span>. Они должны быть корректными, если MySQL был инсталлирован в стандартное местоположение. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Поскольку </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> будет пытаться найти сервер и базы данных относительно собственной рабочей директории, можно инсталлировать двоичный дистрибутив MySQL куда угодно, при условии, что </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> будет запускаться из директории, в которой установлен MySQL: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">cd mysql_installation_directory</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">bin/safe_mysqld &amp;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> не может запустить сервер, даже в том случае, когда он вызывается из инсталляционной директории MySQL, сценарий </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> можно модифицировать так, чтобы он использовал верный путь к </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> и опции путей, которые являются правильными для вашей системы. Обратите внимание: если в будущем вы будете делать апгрейд MySQL, новая версия </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> будет записана поверх старой, поэтому нужно сделать копию отредактированной версии, которую вы сможете затем установить повторно. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mysqld-multi"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.7.3. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">Mysqld_multi</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, программа для управления множеством серверов MySQL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Программа </span><span style=" font-family:'Courier New,courier';">mysqld_multi</span><span style=" font-family:'Ubuntu';"> предназначена для управления несколькими процессами </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, работающих на различных сокетах Unix и портах TCP/IP. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Программа будет искать группу(группы) </span><span style=" font-family:'Courier New,courier';">[mysqld#]</span><span style=" font-family:'Ubuntu';"> в </span><span style=" font-family:'Courier New,courier';">my.cnf</span><span style=" font-family:'Ubuntu';"> (или заданных при помощи </span><span style=" font-family:'Courier New,courier';">--config-file=...</span><span style=" font-family:'Ubuntu';"> файлах), где </span><span style=" font-family:'Courier New,courier';">#</span><span style=" font-family:'Ubuntu';"> - любое положительное число, начиная с 1. Мы говорим про этот номер далее как про номер группы опций, или GNR. Номера групп различают группы опций одну от другой и используются как аргумент при запуске </span><span style=" font-family:'Courier New,courier';">mysqld_multi</span><span style=" font-family:'Ubuntu';"> чтобы указать, какие сервера вы хотите запустить, остановить или получить статус об. Эти группы должны быть такими же, как и обычная группа </span><span style=" font-family:'Courier New,courier';">[mysqld</span><span style=" font-family:'Ubuntu';">] (например содержать опции для </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">; см. в руководстве более подробную информацию), но с такими портом, сокетом и т.д., которые требуются для каждого отдельного процесса </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqld_multi</span><span style=" font-family:'Ubuntu';"> запускается в таком синтаксисе: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Использование: mysqld_multi [OPTIONS] {start|stop|report} [GNR,GNR,GNR...]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или            mysqld_multi [OPTIONS] {start|stop|report} [GNR-GNR,GNR,GNR-GNR,...]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">GNR здесь означает номер группы. Можно запускать, останавливать или создавать отчеты о любом GNR, или о нескольких из них одновременно. Получить пример о том, как бы вы могли настроить файл опций, можно так: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqld_multi --example</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В качестве разделителей в списке GNR применяются запятые, комбинации создаются при помощи тире. Последнее означает, что будут задействованы все номера GNR из диапазона GNR1-GNR2. Если не задан аргумент GNR, то все группы будут либо запущены, либо остановлены, либо будет выведен отчет об этих группах. Обратите внимание, что в списке GNR не должно быть никаких пропусков (пробелов, символов табуляции или пустых строк). Любые данные после пропуска будут игнорироваться. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">mysqld_multi поддерживает следующие опции: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387512"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-config-file=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Альтернативный файл конфигурации (</span><span style=" font-family:'Courier New,courier';">config file</span><span style=" font-family:'Ubuntu';">). Примечание: данный файл не влияет на собственные опции этой программы (группа </span><span style=" font-family:'Courier New,courier';">[mysqld_multi]</span><span style=" font-family:'Ubuntu';">), а только на группы </span><span style=" font-family:'Courier New,courier';">[mysqld#]</span><span style=" font-family:'Ubuntu';">. Без этой опции поиск всех данных будет осуществляться только в обычном файле </span><span style=" font-family:'Courier New,courier';">my.cnf</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387577"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-example</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Представляет пример файла конфигурации. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387605"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-help</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводит справочную информацию и завершает работу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387633"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-log=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файл журнала. Имя файла журнала и полный путь к нему. Примечание: если файл существует, записи будут добавляться в конец файла. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387667"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-mysqladmin=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Исполняемый файл </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';">, используемый для завершения работы сервера. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387702"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-mysqld=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Исполняемый файл </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, который будет использоваться. Обратите внимание: в этой опции можно также указывать </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">. Опции передаются </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. Необходимо только удостовериться, что в переменной окружения PATH имеется </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> или что установлен </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387816"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-no-log</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывод в </span><span style=" font-family:'Courier New,courier';">stdout</span><span style=" font-family:'Ubuntu';"> вместо журнала. По умолчанию журналы включены. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387851"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-password=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пароль пользователя для доступа к </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387884"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-tcp-ip</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Подсоединение к серверу(ам) MySQL по TCP/IP вместо Unix-сокетов. Данная опция влияет на завершение работы сервера и создание отчетов. Если файл сокета отсутствует, сервер будет работать, но к нему можно будет обращаться только через порт TCP/IP. По умолчанию соединение осуществляется через сокет Unix. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387930"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-user=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя пользователя MySQL для </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id387962"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-version</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывод номера версии и завершение работы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Некоторые примечания относительно mysqld_multi: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Удостоверьтесь, что пользователь MySQL, останавливающий <span style=" font-family:'Courier New,courier';">mysqld</span> (например, при помощи <span style=" font-family:'Courier New,courier';">mysqladmin</span>), имеет один пароль и имя пользователя для всех директорий данных, к которым производится доступ (имеется в виду - к базе данных <span style=" font-family:'Courier New,courier';">mysql</span>). Убедитесь также, что пользователь имеет привилегию <span style=" font-family:'Courier New,courier';">Shutdown_priv</span>! Если имеется несколько директорий с данными и несколько различных баз данных <span style=" font-family:'Courier New,courier';">mysql</span> с различными паролями для пользователя <span style=" font-family:'Courier New,courier';">root</span> в MySQL, можно создать некоего общего пользователя <span style=" font-family:'Courier New,courier';">multi_admin</span> для всех, с одинаковым паролем (см. ниже). Сделать это можно так: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql -u root -S /tmp/mysql.sock -proot_password -e</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&quot;GRANT SHUTDOWN ON *.* TO multi_admin@localhost IDENTIFIED BY</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#privileges"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.2.6, «Как работает система привилегий»</span></a><span style=" font-family:'Ubuntu';">. Эти действия нужно выполнять для каждого </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> для каждой имеющейся директории данных (для этого нужно выбрать другой сокет </span><span style=" font-family:'Courier New,courier';">-S=...</span><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">pid-файл</span> играет очень важную роль, если для запуска <span style=" font-family:'Courier New,courier';">mysqld</span> используется сценарий <span style=" font-family:'Courier New,courier';">safe_mysqld</span> (например, <span style=" font-family:'Courier New,courier';">--mysqld=safe_mysqld</span>). Преимущество использования <span style=" font-family:'Courier New,courier';">safe_mysqld</span> вместо <span style=" font-family:'Courier New,courier';">mysqld</span> заключается в том, что <span style=" font-family:'Courier New,courier';">safe_mysqld</span> ``бережет'' каждый процесс <span style=" font-family:'Courier New,courier';">mysqld</span> и перезапустит его, если <span style=" font-family:'Courier New,courier';">mysqld</span>-процесс умрет по сигналу 9 или подобному (например, в случае ошибки сегментации - хотя, конечно, уж этой ошибки MySQL в принципе совершать не должен;). Пожалуйста, обратите внимание: может оказаться, что сценарий <span style=" font-family:'Courier New,courier';">safe_mysqld</span> требуется запускать из определенного каталога. Это означает, что прежде чем запустить <span style=" font-family:'Courier New,courier';">mysqld_multi</span>, прийдется перейти в нужный каталог. Если при запуске возникнут проблемы, пожалуйста, просмотрите сценарий <span style=" font-family:'Courier New,courier';">safe_mysqld</span>. Обратите внимание на следующие строки: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--------------------------------------------------------------------------</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MY_PWD=`pwd` Check if we are starting this relative (for the binary</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">release) if test -d /data/mysql -a -f ./share/mysql/english/errmsg.sys</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-a -x ./bin/mysqld</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--------------------------------------------------------------------------</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">Раздел 4.7.2, «safe_mysqld, оболочка</span></a></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">        mysqld»</span></a><span style=" font-family:'Courier New,courier';">.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Этот тест может пройти успешно, однако возможны и проблемы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не запускайте несколько демонов <span style=" font-family:'Courier New,courier';">mysqld</span> с одной и тожй же директорией данных. Используйте различные директории с данными, если Вы четко не уверены в своих действиях! </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Файл сокета и порт TCP/IP должны быть различными для каждого демона <span style=" font-family:'Courier New,courier';">mysqld</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Первая и пятая группы <span style=" font-family:'Courier New,courier';">mysqld</span> были преднамеренно не включены в пример. В файле конфигурации могут быть ``промежутки'' - это увеличивает гибкость. Порядок, в котором запускаются или завершают работу демоны <span style=" font-family:'Courier New,courier';">mysqld</span>, зависит от порядка, в котором они указаны в файле конфигурации. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Когда нужно обратиться к некоторой группе (GNR) в этой программе, просто используйте номер в конце имени группы. Например, GNR для группы <span style=" font-family:'Courier New,courier';">[mysqld17]</span> - 17. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для <span style=" font-family:'Courier New,courier';">mysqld</span> можно использовать опцию <span style=" font-family:'Courier New,courier';">--user</span>, но для этого сценарий <span style=" font-family:'Courier New,courier';">mysqld_multi</span> должен быть запущен от <span style=" font-family:'Courier New,courier';">root</span>. Наличие опции в файле конфигурации не имеет значения; вы получите предупреждение только в случаях, если не являетесь суперпользователем и демон <span style=" font-family:'Courier New,courier';">mysqlds</span> запущен под <span style=" font-weight:600;">вашим</span> аккаунтом Unix. <span style=" font-weight:600;">Важно</span>: удостоверьтесь, что для <span style=" font-family:'Courier New,courier';">pid-файла</span> и директории с данными имеется доступ для чтения+записи(+выполнения - для директории с данными) для <span style=" font-weight:600;">того</span> пользователя Unix, который запускает определенный процесс <span style=" font-family:'Courier New,courier';">mysqld</span>. <span style=" font-weight:600;">Не</span> используйте для этого аккаунт <span style=" font-family:'Courier New,courier';">root</span> в Unix, если Вы не уверены в своих действиях! </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">Очень важно</span>: удостоверьтесь, что вы понимаете значения опций, которые передаются демонам <span style=" font-family:'Courier New,courier';">mysqld</span>, и что осознаете то, почему могут быть нужны отдельные процессы <span style=" font-family:'Courier New,courier';">mysqld</span>. Запуск нескольких демонов <span style=" font-family:'Courier New,courier';">mysqld</span> с одной директорией данных не увеличит производительность в многопоточной системе! </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#multiple-servers"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.4, «Запуск нескольких серверов MySQL на одном компьютере»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пример файла конфигурации для </span><span style=" font-family:'Courier New,courier';">mysqld_multi</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Этот файл может находиться в вашей домашней директории (~/.my.cnf) или</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/etc/my.cnf</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';"># Version 2.1 by Jani Tolonen</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysqld_multi]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqld = /usr/local/bin/safe_mysqld</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqladmin = /usr/local/bin/mysqladmin</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user = multi_admin</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">password = multipass</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysqld2]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">socket = /tmp/mysql.sock2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">port = 3307</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">pid-file = /usr/local/mysql/var2/hostname.pid2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">datadir = /usr/local/mysql/var2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">language = /usr/local/share/mysql/english</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user = john</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysqld3]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">socket = /tmp/mysql.sock3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">port = 3308</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">pid-file = /usr/local/mysql/var3/hostname.pid3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">datadir = /usr/local/mysql/var3</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">language = /usr/local/share/mysql/swedish</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user = monty</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysqld4]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">socket = /tmp/mysql.sock4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">port = 3309</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">pid-file = /usr/local/mysql/var4/hostname.pid4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">datadir = /usr/local/mysql/var4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">language = /usr/local/share/mysql/estonia</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user = tonu</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysqld6]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">socket = /tmp/mysql.sock6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">port = 3311</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">pid-file = /usr/local/mysql/var6/hostname.pid6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">datadir = /usr/local/mysql/var6</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">language = /usr/local/share/mysql/japanese</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">user = jani</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="myisampack"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.7.4. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">myisampack</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, MySQL-генератор сжатых таблиц (только для чтения)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> используется для сжатия таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">, а утилита </span><span style=" font-family:'Courier New,courier';">pack_isam</span><span style=" font-family:'Ubuntu';"> - для сжатия таблиц </span><span style=" font-family:'Courier New,courier';">ISAM</span><span style=" font-family:'Ubuntu';">. Поскольку таблицы </span><span style=" font-family:'Courier New,courier';">ISAM</span><span style=" font-family:'Ubuntu';"> являются устаревшими, здесь будет рассматриваться только </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';">, но все, сказанное относительно </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';">, справедливо также и для </span><span style=" font-family:'Courier New,courier';">pack_isam</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> сжимает каждый столбец в таблице по отдельности. Информация, необходимая для декомпрессии столбцов, считывается в память при открытии таблицы. В результате обеспечивается более высокая производительность при доступе к отдельным записям, поскольку нужно распаковывать только одну запись, а не значительно больший по размеру дисковый блок, как при использовании программы Stacker в MS DOS. В среднем </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> сжимает файл данных на 40%-70%. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">(MySQL использует отображение в памяти (</span><span style=" font-family:'Courier New,courier';">mmap()</span><span style=" font-family:'Ubuntu';">) для сжатых таблиц </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">а если </span><span style=" font-family:'Courier New,courier';">mmap()</span><span style=" font-family:'Ubuntu';"> не работает, возвращается назад к нормальному режиму чтения/записи. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание на следующее: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После сжатия таблица доступна в режиме только для чтения. Это удобно, скажем, для записи на CD. Реализация возможности записи в сжатые таблицы находится в нашем списке задач к выполнению, но имеет низкий приоритет. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisampack</span> может также сжимать столбцы c типами <span style=" font-family:'Courier New,courier';">BLOB</span> или <span style=" font-family:'Courier New,courier';">TEXT</span>. В предыдущей версии <span style=" font-family:'Courier New,courier';">pack_isam</span> (для таблиц <span style=" font-family:'Courier New,courier';">ISAM</span>) данной функции не было. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилиту </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> можно запустить следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">myisampack [options] filename ...</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Каждое имя файла (</span><span style=" font-family:'Courier New,courier';">filename</span><span style=" font-family:'Ubuntu';">) должно быть именем индексного файла (</span><span style=" font-family:'Courier New,courier';">.MYI</span><span style=" font-family:'Ubuntu';">). Если вы не находитесь в директории базы данных, необходимо указать полный путь к файлу. Допускается опускать расширение </span><span style=" font-family:'Courier New,courier';">.MYI</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">myisampack поддерживает следующие опции: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-b, --backup</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Создает резервную копию таблицы, присваивая ей имя </span><span style=" font-family:'Courier New,courier';">tbl_name.OLD</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-#, --debug=debug_options</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводить журнал отладки. Строка </span><span style=" font-family:'Courier New,courier';">debug_options</span><span style=" font-family:'Ubuntu';"> часто принимает значение </span><span style=" font-family:'Courier New,courier';">d:t:o,filename</span><span style=" font-family:'Ubuntu';"> </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-f, --force</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сжатие таблицы происходит, даже если она увеличивается или если существует временный файл. Во время сжатия таблицы </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> создает временный файл </span><span style=" font-family:'Courier New,courier';">tbl_name.TMD</span><span style=" font-family:'Ubuntu';">. Если вы вручную прекратите выполнение </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';">, может оказаться так, что файл </span><span style=" font-family:'Courier New,courier';">tbl_name.TMD</span><span style=" font-family:'Ubuntu';"> не будет удален. Обычно если </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> обнаруживает существующий </span><span style=" font-family:'Courier New,courier';">tbl_name.TMD</span><span style=" font-family:'Ubuntu';">, она прекращает работу и выдает ошибку. При указании опции </span><span style=" font-family:'Courier New,courier';">--force</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> сжимает таблицу в любом случае. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-?, --help</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выдает справочную информацию и завершает работу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-j big_tbl_name, --join=big_tbl_name</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Соединяет все таблицы, указанные в командной строке, в одну таблицу </span><span style=" font-family:'Courier New,courier';">big_tbl_name</span><span style=" font-family:'Ubuntu';">. Все таблицы, подлежащие объединению, должны быть идентичными (одинаковые имена и типы столбцов, одинаковые индексы и т.д.). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-p #, --packlength=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Определяет разрядность поля, хранящего длину строки, в байтах. Может принимать значения 1, 2 или 3. (</span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> хранит все строки с указателями длины размером в 1, 2, или 3 байта. В большинстве случаев </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> способна определить правильное значение длины перед началом сжатия файла, но во время сжатия она может обнаружить, что может быть использована более короткая длина. В этом случае </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> выведет сообщение о том, что в следующий раз при сжатии данного файла можно использовать более короткую длину записи.) </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-s, --silent</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Молчаливый режим. Сообщения выводятся только при возникновении ошибок. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-t, --test</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сжатие таблицы не выполняется, происходит только проверка процедуры сжатия. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-T dir_name, --tmp_dir=dir_name</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указанная директория используется как местоположение для создания временной таблицы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-v, --verbose</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Расширенный режим вывода сообщений. Выводится информация о состоянии процесса и результаты сжатия. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-V, --version</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отображает информацию о версии и завершает работу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-w, --wait</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если таблица уже используется, подождать повторить попытку. Если сервер </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> был вызван с опцией </span><span style=" font-family:'Courier New,courier';">--skip-external-locking</span><span style=" font-family:'Ubuntu';">, то не самая лучшая идея - вызывать </span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';">, если таблица может модифицироваться во время процесса сжатия. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Последовательность приведенных ниже команд иллюстрирует типичный сеанс сжатия таблицы: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">ls -l station.*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-rw-rw-r--   1 monty    my         994128 Apr 17 19:00 station.MYD</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-rw-rw-r--   1 monty    my          53248 Apr 17 19:00 station.MYI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-rw-rw-r--   1 monty    my           5767 Apr 17 19:00 station.frm</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">myisamchk -dvv station</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-weight:600;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MyISAM file:     station</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Isam-version:  2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Creation time: 1996-03-13 10:08:58</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recover time:  1997-02-02  3:06:43</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Data records:              1192  Deleted blocks:              0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Datafile: Parts:           1192  Deleted data:                0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Datafile pointer (bytes):     2  Keyfile pointer (bytes):     2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Max datafile length:   54657023  Max keyfile length:   33554431</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recordlength:               834</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Record format: Fixed length</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">table description:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key Start Len Index   Type                       Root  Blocksize    Rec/key</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">1   2     4   unique  unsigned long              1024       1024          1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">2   32    30  multip. text                      10240       1024          1</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Field Start Length Type</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">1     1     1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">2     2     4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">3     6     4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">4     10    1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">5     11    20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">6     31    1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">7     32    30</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">8     62    35</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">9     97    35</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">10    132   35</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">11    167   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">12    171   16</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">13    187   35</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">14    222   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">15    226   16</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">16    242   20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">17    262   20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">18    282   20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">19    302   30</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">20    332   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">21    336   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">22    340   1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">23    341   8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">24    349   8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">25    357   8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">26    365   2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">27    367   2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">28    369   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">29    373   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">30    377   1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">31    378   2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">32    380   8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">33    388   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">34    392   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">35    396   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">36    400   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">37    404   1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">38    405   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">39    409   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">40    413   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">41    417   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">42    421   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">43    425   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">44    429   20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">45    449   30</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">46    479   1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">47    480   1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">48    481   79</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">49    560   79</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">50    639   79</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">51    718   79</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">52    797   8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">53    805   1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">54    806   1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">55    807   20</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">56    827   4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">57    831   4</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">myisampack station.MYI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Compressing station.MYI: (1192 records)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- Calculating statistics</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">normal:     20  empty-space:      16  empty-zero:        12  empty-fill:  11</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">pre-space:   0  end-space:        12  table-lookups:      5  zero:         7</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Original trees:  57  After join: 17</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">- Compressing file</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">87.14%</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">ls -l station.*</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-rw-rw-r--   1 monty    my         127874 Apr 17 19:00 station.MYD</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-rw-rw-r--   1 monty    my          55296 Apr 17 19:04 station.MYI</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-rw-rw-r--   1 monty    my           5767 Apr 17 19:00 station.frm</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">myisamchk -dvv station</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-weight:600;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MyISAM file:     station</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Isam-version:  2</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Creation time: 1996-03-13 10:08:58</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recover time:  1997-04-17 19:04:26</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Data records:              1192  Deleted blocks:              0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Datafile: Parts:           1192  Deleted data:                0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Datafilepointer (bytes):      3  Keyfile pointer (bytes):     1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Max datafile length:   16777215  Max keyfile length:     131071</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Recordlength:               834</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Record format: Compressed</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">table description:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Key Start Len Index   Type                       Root  Blocksize    Rec/key</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">1   2     4   unique  unsigned long             10240       1024          1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">2   32    30  multip. text                      54272       1024          1</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Field Start Length Type                         Huff tree  Bits</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">1     1     1      constant                             1     0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">2     2     4      zerofill(1)                          2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">3     6     4      no zeros, zerofill(1)                2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">4     10    1                                           3     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">5     11    20     table-lookup                         4     0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">6     31    1                                           3     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">7     32    30     no endspace, not_always              5     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">8     62    35     no endspace, not_always, no empty    6     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">9     97    35     no empty                             7     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">10    132   35     no endspace, not_always, no empty    6     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">11    167   4      zerofill(1)                          2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">12    171   16     no endspace, not_always, no empty    5     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">13    187   35     no endspace, not_always, no empty    6     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">14    222   4      zerofill(1)                          2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">15    226   16     no endspace, not_always, no empty    5     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">16    242   20     no endspace, not_always              8     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">17    262   20     no endspace, no empty                8     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">18    282   20     no endspace, no empty                5     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">19    302   30     no endspace, no empty                6     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">20    332   4      always zero                          2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">21    336   4      always zero                          2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">22    340   1                                           3     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">23    341   8      table-lookup                         9     0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">24    349   8      table-lookup                        10     0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">25    357   8      always zero                          2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">26    365   2                                           2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">27    367   2      no zeros, zerofill(1)                2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">28    369   4      no zeros, zerofill(1)                2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">29    373   4      table-lookup                        11     0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">30    377   1                                           3     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">31    378   2      no zeros, zerofill(1)                2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">32    380   8      no zeros                             2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">33    388   4      always zero                          2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">34    392   4      table-lookup                        12     0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">35    396   4      no zeros, zerofill(1)               13     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">36    400   4      no zeros, zerofill(1)                2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">37    404   1                                           2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">38    405   4      no zeros                             2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">39    409   4      always zero                          2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">40    413   4      no zeros                             2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">41    417   4      always zero                          2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">42    421   4      no zeros                             2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">43    425   4      always zero                          2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">44    429   20     no empty                             3     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">45    449   30     no empty                             3     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">46    479   1                                          14     4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">47    480   1                                          14     4</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">48    481   79     no endspace, no empty               15     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">49    560   79     no empty                             2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">50    639   79     no empty                             2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">51    718   79     no endspace                         16     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">52    797   8      no empty                             2     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">53    805   1                                          17     1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">54    806   1                                           3     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">55    807   20     no empty                             3     9</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">56    827   4      no zeros, zerofill(2)                2     9</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">57    831   4      no zeros, zerofill(1)                2     9</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ниже приведено описание вывода myisampack: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">normal</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество столбцов, для которых не используется никакого дополнительного сжатия. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">empty-space</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество столбцов, содержащих пустые значения; эти занимают по 1 биту. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">empty-zero</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество целочисленных столбцов, в которых содержатся только двоичные нули (ascii 0); каждый из них будет занимать 1 бит </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">empty-fill</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество целочисленных столбцов, значения которых не полностью занимают отведенную для них разрядность в байтах; тип этих столбцов изменяется на тип с меньшей разрядностью(например, столбец </span><span style=" font-family:'Courier New,courier';">INTEGER</span><span style=" font-family:'Ubuntu';"> может быть изменен на </span><span style=" font-family:'Courier New,courier';">MEDIUMINT</span><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">pre-space</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество десятичных столбцов, которые хранятся с начальными пробелами. В этом случае каждое значение будет содержать число ведущих пробелов. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">end-space</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество столбцов, имеющих много оконечных пробелов. В этом случае каждое значение будет содержать число таких пробелов. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">table-lookup</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Столбец имеет только небольшое количество различающихся значений, которые перед сжатием Хаффмана (Huffman) конвертируются в </span><span style=" font-family:'Courier New,courier';">ENUM</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">zero</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество столбцов, все значения которых являются нулями. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Original trees</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начальное количество деревьев Хаффмана. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">After join</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество различных деревьев Хаффмана, оставленных после соединения деревьев для сохранения немного пространства в заголовках. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После сжатия таблицы </span><span style=" font-family:'Courier New,courier';">myisamchk -dvv</span><span style=" font-family:'Ubuntu';"> выводит дополнительную информацию по каждому полю: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Type</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Тип поля может содержать следующие дескрипторы: </span></p>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">constant</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:2; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все строки содержат одинаковое значение. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">no endspace</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:2; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не сохраняются замыкающие пробелы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">no endspace, not_always</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:2; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не сохраняются замыкающие пробелы и не производится сжатие за счет замыкающих пробелов для всех значений. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">no endspace, no empty</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:2; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не сохраняются замыкающие пробелы. Не сохраняются пустые значения. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">table-lookup</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:2; text-indent:0px;"><span style=" font-family:'Ubuntu';">Столбец был преобразован к </span><span style=" font-family:'Courier New,courier';">ENUM</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">zerofill(n)</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:2; text-indent:0px;"><span style=" font-family:'Ubuntu';">В значении n главных байтов всегда являются 0 и не сохранены. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">no zeros</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:2; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не сохраняются нули. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">always zero</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:2; text-indent:0px;"><span style=" font-family:'Ubuntu';">Значения 0 хранятся в 1 бите. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Huff tree</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Дерево Хаффмана, связанное с полем. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Bits</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество битов, используемых в дереве Хаффмана. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После запуска </span><span style=" font-family:'Courier New,courier';">pack_isam</span><span style=" font-family:'Ubuntu';">/</span><span style=" font-family:'Courier New,courier';">myisampack</span><span style=" font-family:'Ubuntu';"> нужно запустить </span><span style=" font-family:'Courier New,courier';">isamchk</span><span style=" font-family:'Ubuntu';">/</span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> для повторного создания индекса. В это время можно также отсортировать индексные блоки и создать статистику, необходимую для более эффективной работы оптимизатора MySQL: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">myisamchk -rq --analyze --sort-index table_name.MYI</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">isamchk -rq --analyze --sort-index table_name.ISM</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После установки сжатой таблицы в директорию базы данных MySQL нужно проделать операцию </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-tables</span><span style=" font-family:'Ubuntu';">, чтобы сервер </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> начал использовать новую таблицу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для распаковки сжатой таблицы можно использовать опцию </span><span style=" font-family:'Courier New,courier';">--unpack</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">isamchk</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mysqld-max"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.7.5. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqld-max</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, расширенный сервер </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqld</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqld-max</span><span style=" font-family:'Ubuntu';"> - это сервер MySQL (</span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">), скомпилированный со следующими конфигурационными опциями: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Опция</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">--with-server-suffix=-max</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Добавляет суффикс к версии </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">--with-innodb</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Поддержка таблиц InnoDB.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">--with-bdb</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Поддержка таблиц Беркли DB (BDB)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">CFLAGS=-DUSE_SYMDIR</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Символические ссылки для Windows.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Бинарную версию MySQL-max можно найти по адресу http://www.mysql.com/downloads/mysql-max-3.23.html. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Бинарные дистрибутивы Windows MySQL включают стандартный двоичный файл </span><span style=" font-family:'Courier New,courier';">mysqld.exe</span><span style=" font-family:'Ubuntu';"> а также двоичный файл </span><span style=" font-family:'Courier New,courier';">mysqld-max.exe</span><span style=" font-family:'Ubuntu';">. http://www.mysql.com/downloads/mysql-3.23.html. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/installing.html#windows-installation"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 2.1.2, «Установка MySQL на Windows»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание: поскольку таблицы InnoDB и Berkeley DB доступны не для всех платформ, некоторые из двоичных дистрибутивов могут не поддерживать оба этих типа таблиц. Проверить, какие типы таблиц поддерживаются, можно при помощи следующего запроса: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SHOW VARIABLES LIKE &quot;have_%&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------+-------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Variable_name | Value |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------+-------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_bdb | YES |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_innodb | NO |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_isam | YES |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_raid | NO |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| have_openssl | NO |</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------+-------+</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Значения имеют следующий смысл: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Значение</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">YES</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Опция активизирована.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">NO</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">MySQL не поддерживает эту опцию.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">DISABLED</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Опция xxxx заблокирована, потому что </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> был запущен с параметром </span><span style=" font-family:'Courier New,courier';">--skip-xxxx</span><span style=" font-family:'Ubuntu';"> или потому, что </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> был запущен не со всеми опциями, необходимыми для того, чтобы использование данной опции было возможным. В этом случае файл </span><span style=" font-family:'Courier New,courier';">hostname.err</span><span style=" font-family:'Ubuntu';"> будет содержать причину, по которой опция заблокирована.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Примечание</span><span style=" font-family:'Ubuntu';">: чтобы получить возможность создавать таблицы InnoDB, вы </span><span style=" font-family:'Ubuntu'; font-weight:600;">должны</span><span style=" font-family:'Ubuntu';"> отредактировать опции, включив по меньшей мере опцию </span><span style=" font-family:'Courier New,courier';">innodb_data_file_path</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html#innodb-start"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 7.5.2, «Параметры запуска InnoDB»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы улучшить производительность таблиц BDB, для них нужно также добавить некоторые конфигурационные опции. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html#bdb-start"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 7.6.3, «Параметры запуска </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html#bdb-start"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">BDB</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/table-types.html#bdb-start"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> будет автоматически пытаться запустить двоичный </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> с суффиксом </span><span style=" font-family:'Courier New,courier';">-max</span><span style=" font-family:'Ubuntu';">. Таким образом можно просто осуществлять тестирование свежесобранного бинарного </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> в существующей инсталляции. Для этого нужно выполнить </span><span style=" font-family:'Courier New,courier';">configure</span><span style=" font-family:'Ubuntu';"> с требуемыми опциями, собрать, и затем установить новый </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> как </span><span style=" font-family:'Courier New,courier';">mysqld-max</span><span style=" font-family:'Ubuntu';"> в тот же самый каталог, где находится ``старый'' бинарный </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.7.2, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">safe_mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, оболочка </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#safe-mysqld"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqld-max</span><span style=" font-family:'Ubuntu';"> RPM использует вышеупомянутую возможность </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">. Он только устанавливает исполняемый </span><span style=" font-family:'Courier New,courier';">mysqld-max</span><span style=" font-family:'Ubuntu';">, и </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> будет автоматически использовать его после перезапуска </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В следующей таблице показаны типы таблиц, поддерживаемые двоичным </span><span style=" font-family:'Courier New,courier';">MySQL-Max</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">System</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">BDB</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">InnoDB</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">AIX 4.3</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">HP-UX 11.0</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Linux-Alpha</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Linux-Intel</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Linux-IA64</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Solaris-Intel</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Solaris-SPARC</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Caldera (SCO) OSR5</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">UnixWare</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Windows/NT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Да</span></p></td></tr></table>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="client-side-scripts"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">.8. Клиентские сценарии и утилиты MySQL</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#client-side-overview"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.1. Обзор клиентских сценариев и утилит</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.2. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysql</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Утилита командной строки</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqladmin"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.3. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqladmin"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqladmin</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqladmin"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Администрирование MySQL-сервера.</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#using-mysqlcheck"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.4. Использование </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#using-mysqlcheck"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlcheck</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#using-mysqlcheck"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> для сопровождения и аварийного восстановления таблиц.</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.5. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqldump</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Получение дампов данных и структуры таблицы</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.6. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlhotcopy</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Копирование баз данных и таблиц MySQL</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlimport"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.7. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlimport"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlimport</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlimport"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, импорт данных из текстовых файлов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlshow"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.8. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlshow"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlshow</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlshow"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, просмотр баз данных, таблиц и столбцов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql-config"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.9. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql-config"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysql_config</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysql-config"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Получение опций компиляции для компиляции клиентских программ</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#perror"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.10. </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#perror"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">perror</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#perror"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, разъяснение кодов ошибок</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#batch-commands"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.8.11. Как запускать SQL-команды из текстового файла</span></a></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="client-side-overview"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.1. Обзор клиентских сценариев и утилит</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все клиенты MySQL, которые взаимодействуют с сервером с помощью библиотеки </span><span style=" font-family:'Courier New,courier';">mysqlclient</span><span style=" font-family:'Ubuntu';">, используют следующие переменные окружения: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Имя</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MYSQL_UNIX_PORT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сокет, используемый по умолчанию для локальных подсоединений</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MYSQL_TCP_PORT</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Устанавливаемый по умолчанию порт TCP/IP</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MYSQL_PWD</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Устанавливаемый по умолчанию пароль</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">MYSQL_DEBUG</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Опции пошаговой отладки программ</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">TMPDIR</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Каталог для создания временных таблиц/файлов</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использование </span><span style=" font-family:'Courier New,courier';">MYSQL_PWD</span><span style=" font-family:'Ubuntu';"> небезопасно. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#connecting"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.2.8, «Соединение с сервером MySQL»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Клиент </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> использует файл, указанный в переменной окружения </span><span style=" font-family:'Courier New,courier';">MYSQL_HISTFILE</span><span style=" font-family:'Ubuntu';">, для хранения истории командной строки. Значение по умолчанию для этого файла истории - </span><span style=" font-family:'Courier New,courier';">$HOME/.mysql_history</span><span style=" font-family:'Ubuntu';">, где </span><span style=" font-family:'Courier New,courier';">$HOME</span><span style=" font-family:'Ubuntu';"> - значение переменной окружения </span><span style=" font-family:'Courier New,courier';">HOME</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Приложение F, </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/environment-variables.html"><span style=" font-family:'Ubuntu'; font-style:italic; text-decoration: underline; color:#0000ff;">Переменные окружения</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все программы MySQL принимают множество различных опций. При этом каждая программа MySQL поддерживает опцию </span><span style=" font-family:'Courier New,courier';">--help</span><span style=" font-family:'Ubuntu';">, которую можно использовать для получения полного описания различных опций программы. Например, попробуйте запустить </span><span style=" font-family:'Courier New,courier';">mysql --help</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для всех стандартных клиентских программ можно переопределить значения опций по умолчанию, используя файл опций. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.2, «Файлы параметров </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#option-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В приведенном ниже списке дано краткое описание клиентских программ MySQL: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id391771"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">sql2mysql</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сценарий оболочки операционной системы, преобразующий программы базы данных mSQL к виду, приемлемому для MySQL. Он не обрабатывает всех случаев, но с него хорошо начинать такое преобразование. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id391811"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">ysqlaccess</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сценарий, который проверяет привилегии доступа для комбинации значений хоста, пользователя и базы данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id391849"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">ysqladmin</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита для выполнения административных функций, таких как создание или удаление баз данных, перезагрузка таблиц привилегий, запись на диск содержимого таблиц, находящегося в буфере, повторное открытие файлов журналов. Утилита </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';"> может также использоваться для получения информации с сервера о номере версии, процессах и состоянии сервера. См. раздел See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqladmin"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.8.3, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqladmin"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqladmin</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqladmin"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Администрирование MySQL-сервера.»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id391935"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">ysqldump</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводит содержимое базы данных MySQL в виде файла с SQL-операторами или в виде текстовых файлов с символом табуляции в качестве разделителя. Усовершенствованная свободно распространяемая утилита, автором которой является Игорь Романенко. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.8.5, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqldump</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqldump"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Получение дампов данных и структуры таблицы»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id391979"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">ysqlimport</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Импортирует текстовые файлы в соответствующие таблицы, используя команду </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlimport"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.8.7, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlimport"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlimport</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlimport"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, импорт данных из текстовых файлов»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392024"></a><span style=" font-family:'Courier New,courier';">m</span><span style=" font-family:'Courier New,courier';">ysqlshow</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отображает информацию о существующих базах данных, таблицах, полях и индексах. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392060"></a><span style=" font-family:'Courier New,courier';">r</span><span style=" font-family:'Courier New,courier';">eplace</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Служебная программа, использующаяся в сценарии </span><span style=" font-family:'Courier New,courier';">msql2mysql</span><span style=" font-family:'Ubuntu';">, но имеющая также более широкое применение. Утилита </span><span style=" font-family:'Courier New,courier';">replace</span><span style=" font-family:'Ubuntu';"> изменяет строки, находящиеся в файлах или в стандартных входных данных. Использует принцип конечного автомата, чтобы в первую очередь найти соответствие длинных строк. Может применяться для замены строк. Например, эта команда меняет местами </span><span style=" font-family:'Courier New,courier';">a</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">b</span><span style=" font-family:'Ubuntu';"> в данных файлах: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">replace a b b a -- file1 file2 ...</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mysql"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.2. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysql</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, Утилита командной строки</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита командной строки </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> является простой SQL-оболочкой (с возможностями библиотеки </span><span style=" font-family:'Courier New,courier';">readline</span><span style=" font-family:'Ubuntu';"> проекта GNU). Она поддерживает интерактивный и неинтерактивный режимы. В интерактивном режиме результаты запроса представляются в ASCII-формате. При использовании в неинтерактивном режиме (например, в качестве фильтра) результат представляется в текстовом формате с символом табуляции в качестве разделителя (выходной формат можно изменить при помощи параметров командной строки). Сценарии можно запускать, как показано ниже: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql database &lt; script.sql &gt; output.tab</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если возникают проблемы из-за недостатка памяти на данном клиенте, применяйте параметр </span><span style=" font-family:'Courier New,courier';">--quick</span><span style=" font-family:'Ubuntu';">! Это заставит </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> использовать функцию </span><span style=" font-family:'Courier New,courier';">mysql_use_result()</span><span style=" font-family:'Ubuntu';"> вместо функции </span><span style=" font-family:'Courier New,courier';">mysql_store_result()</span><span style=" font-family:'Ubuntu';"> для получения результирующей выборки данных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> очень легко. Запустите </span><span style=" font-family:'Courier New,courier';">mysql database</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">mysql --user=user_name --password=your_password databas</span><span style=" font-family:'Ubuntu';">e. Наберите SQL-команду прямо в командной строке, завершив ее одним из символов: ‘</span><span style=" font-family:'Courier New,courier';">;</span><span style=" font-family:'Ubuntu';">’, '</span><span style=" font-family:'Courier New,courier';">\g</span><span style=" font-family:'Ubuntu';">' или '</span><span style=" font-family:'Courier New,courier';">\G</span><span style=" font-family:'Ubuntu';">', и нажмите клавишу ``Ввод''. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита командной строки </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> поддерживает следующие параметры: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392472"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">?, --help</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывод справочной информации об использовании программы и выход из нее. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392516"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">A, --no-auto-rehash</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отключает автоматическое рехеширование. </span><span style=" font-family:'Courier New,courier';">rehash</span><span style=" font-family:'Ubuntu';"> следует использовать для получения хеша таблиц и полей. Это обеспечивает более быстрый старт </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392580"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-prompt=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Устанавливает приглашение на ввод команд в заданном формате. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392624"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">b, --no-beep</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выключает звуковой сигнал об ошибке. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392668"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">B, --batch</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводит результаты в пакетном режиме с символом табуляции в качестве разделителя, каждая строка с новой строки. Файл истории не используется. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392720"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-character-sets-dir=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Директория, где находятся наборы символов. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392763"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">C, --compress</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать сжатие данных в протоколе сервер/клиент. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392808"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">#, --debug[=...]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Журнал отладки. Значение по умолчанию - 'd:t:o,/tmp/mysql.trace'. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392854"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">D, --database=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя используемой базы данных. Большей частью применяется в конфигурационном файле </span><span style=" font-family:'Courier New,courier';">my.cnf</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392925"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-default-character-set=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Установить набор символов по умолчанию. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id392968"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">e, --execute=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выполнить команду и завершить программу (вывод результата как и для </span><span style=" font-family:'Courier New,courier';">--batch</span><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393018"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">E, --vertical</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести результаты запроса (строки) по вертикали. Можно произвести вывод подобным образом и без данного параметра, завершая команды символами </span><span style=" font-family:'Courier New,courier';">\G</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393075"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">f, --force</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Продолжать обработку даже при обнаружении ошибки SQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393121"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">g, --no-named-commands</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выключает именованные команды. Следует использовать только команды вида \* либо применять именованные команды только в начале строки, заканчивающейся символом ‘</span><span style=" font-family:'Courier New,courier';">;</span><span style=" font-family:'Ubuntu';">’. Начиная с версии 10.9 клиент запускается с этой опцией, </span><span style=" font-family:'Ubuntu'; font-weight:600;">включенной</span><span style=" font-family:'Ubuntu';"> по умолчанию! С опцией </span><span style=" font-family:'Courier New,courier';">-g</span><span style=" font-family:'Ubuntu';">, однако, длинные команды все еще работают с первой строки. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393199"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">G, --enable-named-commands</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает именованные команды. Допускаются длинные команды, а также укороченные команды вида \*. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393248"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">i, --ignore-space</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Игнорировать пробел после имен функций. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393293"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">h, --host=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Подсоединиться к базе данных на указанном хосте. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393338"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">H, --html</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести выходные данные в виде HTML. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393383"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">X, --xml</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести выходные данные в виде XML. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393428"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">L, --skip-line-numbers</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не указывать номера строк для ошибок. Полезно для сравнения результирующих файлов, включающих сообщения об ошибках. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393495"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-no-pager</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Блокирует пейджер (программа постраничного вывода) и выводит результат в стандартный вывод stdout (в Unix). Смотрите также команду </span><span style=" font-family:'Courier New,courier';">\h</span><span style=" font-family:'Ubuntu';"> (интерактивная помощь). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393578"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-no-tee</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Блокирует выходной файл. Смотрите также команду </span><span style=" font-family:'Courier New,courier';">\h</span><span style=" font-family:'Ubuntu';"> (интерактивная помощь). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393629"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">n, --unbuffered</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Очищать буфер после каждого запроса. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393674"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">N, --skip-column-names</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не указывать имена столбцов в результатах. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393719"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">O, --set-variable var=option</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Установить значение переменной. Список используемых переменных выводится через </span><span style=" font-family:'Courier New,courier';">--help</span><span style=" font-family:'Ubuntu';">. Обратите внимание, что </span><span style=" font-family:'Courier New,courier';">--set-variable</span><span style=" font-family:'Ubuntu';"> не используется в MySQL 4.0. Просто используйте </span><span style=" font-family:'Courier New,courier';">--var=option</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393784"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">o, --one-database</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обновить только базу данных, установленную по умолчанию. Позволяет пропускать обновления другой базы данных в журнале обновления. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393835"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-pager[=...]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Устанавливает тип данных вывода. По умолчанию это переменная окружения </span><span style=" font-family:'Courier New,courier';">PAGER</span><span style=" font-family:'Ubuntu';">. Ее возможные значения - less, more, cat [&gt; имя файла], и т.д. См. также команду \h (интерактивная помощь). Этот параметр не работает в пакетном (batch) режиме. Пейджер работает только под Unix. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393901"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">p[password], --password[=...]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пароль, используемый при подсоединении к серверу баз данных. Если в командной строке пароль не указан, то он запрашивается у пользователя. При использовании краткой формы </span><span style=" font-family:'Courier New,courier';">-p</span><span style=" font-family:'Ubuntu';"> не оставляйте пробел между параметром и значением пароля. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id393963"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">P порт, --port=порт</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Номер порта TCP/IP, используемый для подсоединения. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394010"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-protocol=(TCP | SOCKET | PIPE | MEMORY)</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для указания протокола соединения, который надлежит использовать. Новшество в MySQL 4.1.0. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394057"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">q, --quick</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не кэшировать результат. Выводить его строка за строкой так, как он приходит от сервера. Это может замедлить скорость работы сервера, если вывод результата будет приостановлен. Файл истории не используется. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394125"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">r, --raw</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Показывать значения столбцов без какого-либо преобразования. Используется с </span><span style=" font-family:'Courier New,courier';">--batch</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394176"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">s, --silent</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Режим молчания. Выводить только сообщения об ошибках. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394222"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">S --socket=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файл сокета, используемый для подсоединения. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394267"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">t --table</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводить результат в табличном формате. Установлено по умолчанию для непакетного режима. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394315"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">T, --debug-info</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводить некоторые отладочные данные при выходе из программы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394362"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">-tee=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Присоединить что-либо к выходному файлу. Смотрите также команду \h (интерактивная помощь). Этот параметр не работает в пакетном режиме. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394411"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">u, --user=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя пользователя MySQL, если этот пользователь не является активным в данное время. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394459"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">U, --safe-updates[=#], --i-am-a-dummy[=#]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешает выполнять только операции </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">DELETE</span><span style=" font-family:'Ubuntu';">, используя ключи. Более полная информация об этом параметре приведена ниже. Можно сбросить данный параметр, установив в конфигурационном файле </span><span style=" font-family:'Courier New,courier';">my.cnf</span><span style=" font-family:'Ubuntu';"> значение аргумента </span><span style=" font-family:'Courier New,courier';">--safe-updates=0</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394538"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">v, --verbose</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Более расширенный режим вывода результатов (</span><span style=" font-family:'Courier New,courier';">-v -v -v</span><span style=" font-family:'Ubuntu';"> дает формат вывода таблицы). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394591"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">V, --version</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывод информации о версии и выход из программы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id394637"></a><span style=" font-family:'Courier New,courier';">-</span><span style=" font-family:'Courier New,courier';">w, --wait</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если соединение с сервером упало, подождать и попытаться восстановить его, вместо того, чтобы прервать работу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Через параметры командной строки </span><span style=" font-family:'Courier New,courier';">-O</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">--set-variable</span><span style=" font-family:'Ubuntu';"> (в MySQL 4.0 используйте просто </span><span style=" font-family:'Courier New,courier';">--var=option</span><span style=" font-family:'Ubuntu';">) можно также установить следующие переменные: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Имя переменной</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">По умолчанию</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">connect_timeout</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">0</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Число секунд до истечения времени ожидания соединения</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">max_allowed_packet</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">16777216</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Максимальная величина пакета, посылаемого/принимаемого с сервера</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">net_buffer_length</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">16384</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Размер буфера для TCP/IP и сокетного соединения</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">select_limit</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">1000</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Автоматическое ограничение количества команд SELECT при использовании --i-am-a-dummy</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">max_join_size</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">1000000</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Автоматическое ограничение количества связанных строк при использовании --i-am-a-dummy.</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если ввести в командной строке </span><span style=" font-family:'Courier New,courier';">help</span><span style=" font-family:'Ubuntu';">, программа </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> выведет список поддерживаемых ею команд: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">help</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier'; font-weight:600;"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Команды MySQL</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">help (\h) Выводит данный текст.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">? (\h)    Синоним для help.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">clear (\c)  Команда очистки.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">connect (\r)  Снова подключиться к серверу.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    Дополнительные аргументы - db и host.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">edit (\e) Редактировать текущую команду с помощью $EDITOR.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ego (\G)  Послать текущую команду MySQL серверу</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    и вывести результат по вертикали.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">exit (\q) Выйти из программы. То же что и quit.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">go (\g)   Послать текущую команду MySQL серверу.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">nopager (\n)  Блокировать пейджер, выводить через stdout.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">notee (\t)  Не добавлять записи в выходной файл outfile.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">pager (\P)  Установить PAGER [to_pager].</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    Выводить результаты запроса через PAGER.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">print (\p)  Вывести текущую команду.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">prompt (\R) Изменить формат приглашения на ввод команд mysql.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">quit (\q) Выйти из программы.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">rehash (\#) Восстановить таблицу хэшей.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">source (\.) Запустить на выполнение файл с SQL-сценарием.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    Указать имя файла в качестве аргумента.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">status (\s) Получить информацию о статусе сервера.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tee (\T)  Установить параметр outfile [to_outfile].</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    Присоединить что-либо к данному выходному файлу.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">use (\u)  Использовать другую базу данных.</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    Указать имя базы данных в качестве аргумента.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';"> работает только под Unix. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Команда </span><span style=" font-family:'Courier New,courier';">status</span><span style=" font-family:'Ubuntu';"> дает информацию о текущем соединении и используемом сервере. Если вы работаете в режиме </span><span style=" font-family:'Courier New,courier';">--safe-updates</span><span style=" font-family:'Ubuntu';">, команда </span><span style=" font-family:'Courier New,courier';">status</span><span style=" font-family:'Ubuntu';"> также выведет значения переменных для </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">, которые влияют на ваши запросы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для начинающих рекомендуется пользоваться программой </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> с установленным параметром (введен в MySQL 3.23.11) </span><span style=" font-family:'Courier New,courier';">--safe-updates</span><span style=" font-family:'Ubuntu';"> (или </span><span style=" font-family:'Courier New,courier';">--i-am-a-dummy</span><span style=" font-family:'Ubuntu';"> для пользователей, выполнивших </span><span style=" font-family:'Courier New,courier';">DELETE FROM table_name</span><span style=" font-family:'Ubuntu';">, но забывших указать аргументы в </span><span style=" font-family:'Courier New,courier';">WHERE</span><span style=" font-family:'Ubuntu';">). В этом случае </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> при установлении соединения посылает следующую команду MySQL-серверу: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SET SQL_SAFE_UPDATES=1,SQL_SELECT_LIMIT=#select_limit#,</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    SQL_MAX_JOIN_SIZE=#max_join_size#&quot;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">где </span><span style=" font-family:'Courier New,courier';">#select_limit#</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">#max_join_size#</span><span style=" font-family:'Ubuntu';"> - переменные, которые можно установить из командной строки mysql. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 5.5.6, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SET</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html#set-option"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Результат этого следующий: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Не разрешено выполнять команды <span style=" font-family:'Courier New,courier';">UPDATE</span> или <span style=" font-family:'Courier New,courier';">DELETE</span>, если не указаны ограничения по ключам в секции <span style=" font-family:'Courier New,courier';">WHERE</span>. Однако можно заставить выполняться команды <span style=" font-family:'Courier New,courier';">UPDATE</span>/<span style=" font-family:'Courier New,courier';">DELETE</span>, используя оператор <span style=" font-family:'Courier New,courier';">LIMIT</span>: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">UPDATE table_name SET not_key_column=# WHERE not_key_column=# LIMIT 1;</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Все слишком большие результаты ограничены строками <span style=" font-family:'Courier New,courier';">#select_limit#</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SELECT</span>ы, которые могут потребовать для исполнения количество комбинаций строк более, чем <span style=" font-family:'Courier New,courier';">#max_join_size#</span>, будут прерваны. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Несколько полезных советов по использованию клиента </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Некоторые данные более удобочитаемы при выводе их по вертикали вместо обычно используемого горизонтального окна вывода. Например, текст, который больше по длине, чем по ширине, и содержит в себе много новых строк, часто намного легче читать в вертикальном представлении. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SELECT * FROM mails WHERE LENGTH(txt) &lt; 300 lIMIT 300,1\G</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">*************************** 1. row ***************************</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">  msg_nro: 3068</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">     date: 2000-03-01 23:29:50</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">time_zone: +0200</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mail_from: Monty</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">    reply: monty@no.spam.com</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">  mail_to: &quot;Thimble Smith&quot; &lt;tim@no.spam.com&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">      sbj: UTF-8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">      txt: &gt;&gt;&gt;&gt;&gt; &quot;Thimble&quot; == Thimble Smith writes:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Thimble&gt; Hi.  I think this is a good idea.  Is anyone familiar with UTF-8</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Thimble&gt; or Unicode? Otherwise, I'll put this on my TODO list and see what</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Thimble&gt; happens.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Yes, please do that.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Regards,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Monty</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">     file: inbox-jani-1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">     hash: 190402944</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">1 row in set (0.09 sec)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для журналирования можно использовать опции команды tee. Она может быть запущена с помощью параметра </span><span style=" font-family:'Courier New,courier';">--tee=...</span><span style=" font-family:'Ubuntu';"> для </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> или интерактивно из командной строки вводом команды </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';">. Все представляемые на экране данные будут также добавлены к заданному файлу. Это может быть очень полезно для целей отладки программы. Утилиту tee можно блокировать из командной строки командой </span><span style=" font-family:'Courier New,courier';">notee</span><span style=" font-family:'Ubuntu';">. Повторный запуск команды </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';"> снова включит журналирование. Если при этом параметр для команды </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';"> не указан, то будет использоваться предыдущий файл. Следует учесть, что команда </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';"> будет записывать результаты в файл после каждой выполненной команды, как раз перед появлением командной строки для ввода очередной команды. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При помощи опции </span><span style=" font-family:'Courier New,courier';">--pager[=...]</span><span style=" font-family:'Ubuntu';"> стал возможным просмотр или поиск результатов в интерактивном режиме с помощью Unix-программ </span><span style=" font-family:'Courier New,courier';">less</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">more</span><span style=" font-family:'Ubuntu';"> или иных подобных. Если явно не указать аргумент в этом параметре, клиент </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> будет искать переменную окружения </span><span style=" font-family:'Courier New,courier';">PAGER</span><span style=" font-family:'Ubuntu';"> и установит значение </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';">. Программу </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';"> также можно запустить из интерактивной командной строки командой </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';"> и остановить командой </span><span style=" font-family:'Courier New,courier';">nopager</span><span style=" font-family:'Ubuntu';">. Команда может принимать аргумент, который является необязательным; </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';"> будет установлена в значение этого аргумента.. Команда </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';"> может быть вызвана и без аргумента, но это требует использования опции </span><span style=" font-family:'Courier New,courier';">--pager</span><span style=" font-family:'Ubuntu';"> или соответствующей установки по умолчанию стандартного вывода </span><span style=" font-family:'Courier New,courier';">stdout</span><span style=" font-family:'Ubuntu';">. Команда pager работает только в Unix, поскольку использует функцию </span><span style=" font-family:'Courier New,courier';">popen()</span><span style=" font-family:'Ubuntu';">, отсутствующую в Windows. Вместо этого в Windows можно использовать параметр </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';">, хотя в ряде ситуаций это менее удобно, чем применение команды </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Несколько советов касательно команды </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';">: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Ее можно использовать для записи в файл: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">pager cat &gt; /tmp/log.txt</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">и результаты будут направлены только в файл. Вызываемые командой </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';"> программы могут принимать любые допустимые опции: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">pager less -n -i -S</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Обратите особое внимание на опцию -S в вышеприведенном примере. Она может быть очень полезна при просмотре результатов. Попробуйте применить ее с горизонтальным выводом (завершайте команды символами '\g', or ';') и с вертикальным (в конце команд - '\G'). Очень громоздкие результаты вывода иногда трудно бывает прочесть с экрана, в этом случае команда less с опцией -S позволит просмотреть результаты в интерактивном режиме слева направо, при этом при появлении строк с длиной больше, чем ширина экрана, их вывод будет продолжен вывод с новой строки. Вывод данных в таких случаях получается более удобочитаемым. При интерактивном вызове команды less с опцией '-S' можно переключать режим ее работы (включено/выключено) из командной строки. Чтобы получить дополнительную информацию относительно less, обращайтесь к описанию команды 'h'. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В заключение отметим (если вы этого еще не поняли из предыдущих примеров :), что существует возможность комбинировать очень сложные способы обработки результатов. Так, в следующем примере результаты будут посланы в два различных каталога, смонтированных на двух различных жестких дисках в /dr1 and /dr2, и, несмотря на это, результаты можно увидеть на экране посредством команды less: </li></ul>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">pager cat | tee /dr1/tmp/res.txt | \</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">       </span><span style=" font-family:'Courier New,courier'; font-weight:600;">tee /dr2/tmp/res2.txt | less -n -i -S</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Приведенные выше функции можно тоже комбинировать: запустив </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';"> и установив </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';"> в </span><span style=" font-family:'Courier New,courier';">less</span><span style=" font-family:'Ubuntu';">, можно просматривать результаты с помощью Unix-команды </span><span style=" font-family:'Courier New,courier';">less</span><span style=" font-family:'Ubuntu';"> и при этом одновременно производить запись в файл. Разница между служебной Unix-утилитой </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';">, используемой в программе </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';">, и встроенной в клиент </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> командой </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';"> заключается в том, что встроенная команда </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';"> работает даже в том случае, если в Unix утилита </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';"> недоступна. Встроенная команда </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';"> также ведет запись всего, что выводится на экран, тогда как утилита Unix </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';">, используемая с </span><span style=" font-family:'Courier New,courier';">pager</span><span style=" font-family:'Ubuntu';">, не делает этого в достаточном объеме. Последнее, но тем не менее важное обстоятельство состоит в том, что интерактивная команда </span><span style=" font-family:'Courier New,courier';">tee</span><span style=" font-family:'Ubuntu';"> более удобна для переключения режимов работы включено/выключено, если при записи в файл иногда возникает необходимость отключить эту функцию. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с версии MySQL 4.0.2 можно изменить формат приглашения в командной строке клиента </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Возможны следующие опции приглашения: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Опция</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\v</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">версия mysqld</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\d</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">имя используемой базы данных</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\h</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">имя хоста, к которому производится подсоединение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\p</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">номер порта, через который производится подсоединение</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\u</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">имя пользователя</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\U</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">полный адрес username@host</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\\</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">обратный слэш ‘</span><span style=" font-family:'Courier New,courier';">\</span><span style=" font-family:'Ubuntu';">’</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\n</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">символ новой строки</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\t</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">табуляция</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">пробел</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\_</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">пробел с подчеркиванием</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\R</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">время по военному часовому поясу (0-23)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\r</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">время по стандартному часовому поясу (1-12)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\m</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">минуты</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\y</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">два разряда года</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\Y</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">четыре разряда года</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\D</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">полный формат даты</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\s</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">секунды</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\w</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">день недели в трехбуквенном формате (Mon, Tue, ...)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\P</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Время до полудня/после полудня (am/pm)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\o</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">месяц в числовом формате</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\O</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">месяц в трехбуквенном формате (Jan, Feb, ...)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">\c</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Счетчик, подсчитывающий количество вводимых команд</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Символ ‘</span><span style=" font-family:'Courier New,courier';">\</span><span style=" font-family:'Ubuntu';">’ за которым следует любая другая буква, просто дополняет эту букву. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Установить параметры приглашения можно следующими способами: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">В переменных окружения</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно установить переменную окружения </span><span style=" font-family:'Courier New,courier';">MYSQL_PS1</span><span style=" font-family:'Ubuntu';"> для строки приглашения. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">export MYSQL_PS1=&quot;(\u@\h) [\d]&gt; &quot;</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600;">my.cnf</span> , <span style=" font-family:'Courier New,courier'; font-weight:600;">.my.cnf</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно установить опцию prompt в любом конфигурационном файле MySQL в группе </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysql]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">prompt=(\u@\h) [\d]&gt;\_</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">В командной строке</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно установить опцию </span><span style=" font-family:'Courier New,courier';">--prompt</span><span style=" font-family:'Ubuntu';"> из командной строки утилиты </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql --prompt=&quot;(\u@\h) [\d]&gt; &quot;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">(user@host) [database]&gt;</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-weight:600;">В интерактивном режиме</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно также использовать команду </span><span style=" font-family:'Courier New,courier';">prompt</span><span style=" font-family:'Ubuntu';"> (или </span><span style=" font-family:'Courier New,courier';">\R</span><span style=" font-family:'Ubuntu';">) для изменения настроек приглашения в интерактивном режиме. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">prompt (\u@\h) [\d]&gt;\_</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PROMPT set to '(\u@\h) [\d]&gt;\_'</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">(user@host) [database]&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">(user@host) [database]&gt; prompt</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Возвращение к исходным (по умолчанию) настройкам PROMPT в утилите mysql&gt;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt;</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mysqladmin"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.3. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqladmin</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, Администрирование MySQL-сервера.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита для выполнения административных операций. Ее синтаксис: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqladmin [ПАРАМЕТРЫ] command [command-option] command ...</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Список опций, поддерживаемых вашей конкретной версией </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';">, можно получить, выполнив команду </span><span style=" font-family:'Courier New,courier';">mysqladmin --help</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Текущая версия </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';"> поддерживает следующие команды: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">create databasename</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Создать новую базу данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">drop databasename</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Удалить базу данных и все ее таблицы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">extended-status</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выдает расширенный отчет о состоянии сервера (более полный, чем при команде </span><span style=" font-family:'Courier New,courier';">status</span><span style=" font-family:'Ubuntu';"> ) </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">flush-hosts</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сбросить и перезагрузить хосты. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">flush-logs</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сбросить на диск и переоткрыть все журналы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">flush-tables</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Закрыть все открытые таблицы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">flush-privileges</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Перечитать таблицы привилегий. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">kill id,id,...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Завершить потоки </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> с указанными </span><span style=" font-family:'Courier New,courier';">thread-id</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">password</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Установить новый пароль для сервера баз данных. Изменить старый пароль на новый. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ping</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверить, работает ли сервер </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">processlist</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Показать список активных потоков на сервере. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">reload</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Перезагрузить таблицы привилегий. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">refresh</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выполнить все табличные операции, находящиеся в буфере, закрыть и открыть заново все системные журналы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shutdown</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Завершить работу сервера баз данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">slave-start</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Запустить подчиненный дублирующий поток. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">slave-stop</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Остановить подчиненный дублирующий поток. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">status</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выдает краткий отчет о состоянии сервера. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">variables</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести доступные для использования переменные. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">version</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести данные о версии сервера. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все команды могут сокращаться до их уникальных префиксов. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqladmin proc stat</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+----+-------+-----------+----+-------------+------+-------+------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| Id | User  | Host      | db | Command     | Time | State | Info |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+----+-------+-----------+----+-------------+------+-------+------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| 6  | monty | localhost |    | Processlist | 0    |       |      |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+----+-------+-----------+----+-------------+------+-------+------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Uptime: 10077  Threads: 1  Questions: 9  Slow queries: 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Opens: 6 Flush tables: 1  Open tables: 2</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Memory in use: 1092K  Max memory used: 1116K</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Результат команды </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';"> status выводится в виде следующих столбцов: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Столбец</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Uptime</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество секунд с момента запуска MySQL-сервера. </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id397287"></a><span style=" font-family:'Ubuntu';">T</span><span style=" font-family:'Ubuntu';">hreads</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество активных потоков (клиентов). </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id397308"></a><span style=" font-family:'Ubuntu';">Q</span><span style=" font-family:'Ubuntu';">uestions</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество вопросов от клиентов с момента запуска программы </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id397335"></a><span style=" font-family:'Ubuntu';">S</span><span style=" font-family:'Ubuntu';">low queries</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество запросов, потребовавших большее количество секунд, чем установлено в конфигурации ключом </span><span style=" font-family:'Courier New,courier';">long_query_time</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#slow-query-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.5, «Журнал медленных запросов»</span></a><span style=" font-family:'Ubuntu';">. </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id397369"></a><span style=" font-family:'Ubuntu';">O</span><span style=" font-family:'Ubuntu';">pens</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество таблиц, открытых программой </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id397399"></a><span style=" font-family:'Ubuntu';">F</span><span style=" font-family:'Ubuntu';">lush table</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество выполненных команд </span><span style=" font-family:'Courier New,courier';">flush</span><span style=" font-family:'Ubuntu';"> ..., </span><span style=" font-family:'Courier New,courier';">refresh</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">reload</span><span style=" font-family:'Ubuntu';">. </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id397450"></a><span style=" font-family:'Ubuntu';">O</span><span style=" font-family:'Ubuntu';">pen tables</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Количество таблиц, открытых в данное время. </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id397471"></a><span style=" font-family:'Ubuntu';">M</span><span style=" font-family:'Ubuntu';">emory in use</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Память, используемая непосредственно программой </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> (доступно только в случае компиляции MySQL с установленным значением </span><span style=" font-family:'Courier New,courier';">--with-debug=full</span><span style=" font-family:'Ubuntu';">). </span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="id397508"></a><span style=" font-family:'Ubuntu';">M</span><span style=" font-family:'Ubuntu';">ax memory used</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Максимальный объем памяти, использованный непосредственно программой mysqld (доступно только в случае компиляции MySQL с установленным значением </span><span style=" font-family:'Courier New,courier';">--with-debug=full</span><span style=" font-family:'Ubuntu';">).</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При выполнении </span><span style=" font-family:'Courier New,courier';">mysqladmin shutdown</span><span style=" font-family:'Ubuntu';"> через сокет (другими словами, через компьютер с запущенным </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">) </span><span style=" font-family:'Courier New,courier';">mysqladmin</span><span style=" font-family:'Ubuntu';"> будет ожидать, пока на сервере MySQL не будет удален файл </span><span style=" font-family:'Courier New,courier';">pid-file</span><span style=" font-family:'Ubuntu';"> (в котором содержится идентификатор процесса </span><span style=" font-family:'Courier New,courier';">pid</span><span style=" font-family:'Ubuntu';"> запущенного сервера) чтобы убедиться, что сервер остановлен должным образом. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="using-mysqlcheck"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.4. Использование </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqlcheck</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;"> для сопровождения и аварийного восстановления таблиц.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с версии MySQL 3.23.38 можно применять новый инструмент для проверки и восстановления </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">-таблиц. Отличие </span><span style=" font-family:'Courier New,courier';">mysqlcheck</span><span style=" font-family:'Ubuntu';"> от </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> состоит в том, что утилита </span><span style=" font-family:'Courier New,courier';">mysqlcheck</span><span style=" font-family:'Ubuntu';"> должна использоваться при работающем сервере </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, в то время как </span><span style=" font-family:'Courier New,courier';">myisamchk</span><span style=" font-family:'Ubuntu';"> - при остановленном. Преимущество же заключается в том, что теперь не нужно останавливать сервер для проверки или восстановления таблиц. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита </span><span style=" font-family:'Courier New,courier';">mysqlcheck</span><span style=" font-family:'Ubuntu';"> использует соответствующие команды MySQL-сервера </span><span style=" font-family:'Courier New,courier';">CHECK</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">REPAIR</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">ANALYZE</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">OPTIMIZE</span><span style=" font-family:'Ubuntu';"> удобным для пользователя образом. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Существует три альтернативных способа запуска </span><span style=" font-family:'Courier New,courier';">mysqlcheck</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqlcheck [OPTIONS] database [tables]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqlcheck [OPTIONS] --databases DB1 [DB2 DB3...]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqlcheck [OPTIONS] --all-databases</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таким образом, утилита может использоваться подобно </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';"> по отношению к выбранным базам данных и таблицам. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В сравнении с другими клиентами утилита </span><span style=" font-family:'Courier New,courier';">mysqlcheck</span><span style=" font-family:'Ubuntu';"> имеет следующую отличительную особенность: установка поведения по умолчанию, (проверка таблиц, </span><span style=" font-family:'Courier New,courier';">-с</span><span style=" font-family:'Ubuntu';">), может быть изменена путем переименования исполняемого файла утилиты. Итак, чтобы получить инструмент, восстанавливающий таблицы по умолчанию, просто скопируйте </span><span style=" font-family:'Courier New,courier';">mysqlcheck</span><span style=" font-family:'Ubuntu';"> с новым именем, </span><span style=" font-family:'Courier New,courier';">mysqlrepair</span><span style=" font-family:'Ubuntu';">, или, наоборот, сделайте символьную ссылку на </span><span style=" font-family:'Courier New,courier';">mysqlrepair</span><span style=" font-family:'Ubuntu';"> и обозначьте ее как </span><span style=" font-family:'Courier New,courier';">mysqlrepair</span><span style=" font-family:'Ubuntu';">. Если теперь запустить </span><span style=" font-family:'Courier New,courier';">mysqlrepair</span><span style=" font-family:'Ubuntu';">, то утилита по умолчанию будет восстанавливать таблицы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для изменения поведения </span><span style=" font-family:'Courier New,courier';">mysqlcheck</span><span style=" font-family:'Ubuntu';"> по умолчанию можно использовать следующие обозначения: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqlrepair: Значение по умолчанию будет -r</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqlanalyze: Значение по умолчанию будет -a</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqloptimize: Значение по умолчанию будет -o</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ниже приведены возможные опции для </span><span style=" font-family:'Courier New,courier';">mysqlcheck</span><span style=" font-family:'Ubuntu';">. Какие из них поддерживает ваша версия, можно проверить с помощью команды </span><span style=" font-family:'Courier New,courier';">mysqlcheck --help</span><span style=" font-family:'Ubuntu';">. </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-A, --all-databases</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверить все базы данных. Аналогична опции </span><span style=" font-family:'Courier New,courier';">--databases</span><span style=" font-family:'Ubuntu';">, если указать все базы данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-1, --all-in-1</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вместо выполнения запросов для каждой таблицы в отдельности выполнить все запросы в одном отдельно для каждой таблицы. Имена таблиц будут представлены в виде списка имен, разделенных запятой. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-a, --analyze</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Анализировать данные таблицы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--auto-repair</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если проверенная таблица повреждена, автоматически восстановить ее. Исправления будут произведены после проверки всех таблиц, если были обнаружены повреждения. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-#, --debug=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводит информацию журнала отладки. Часто используется следующий набор параметров: 'd:t:o,filename' </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--character-sets-dir=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Директория, где находятся установки символов. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-c, --check</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверить таблицу на наличие ошибок. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-C, --check-only-changed</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверить только таблицы, измененные со времени последней проверки или некорректно закрытые. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--compress</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать сжатие данных в протоколе сервер/клиент. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-?, --help</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести данную вспомогательную информацию и выйти из программы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-B, --databases</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверить несколько баз данных. Обратите внимание на разницу в использовании: в этом случае таблицы не указываются. Все имена аргументов рассматриваются как имена баз данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--default-character-set=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Установить набор символов по умолчанию. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-F, --fast</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Проверить только базы данных, которые не были закрыты должным образом. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-f, --force</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Продолжать даже при получении ошибки SQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-e, --extended</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">При использовании данного параметра совместно с </span><span style=" font-family:'Courier New,courier';">CHECK TABLE</span><span style=" font-family:'Ubuntu';"> можно быть на 100 процентов быть уверенным в целостности таблицы, хотя это и займет много времени. Если же использовать этот параметр с </span><span style=" font-family:'Courier New,courier';">REPAIR TABLE</span><span style=" font-family:'Ubuntu';">, запустится расширенное восстановление таблицы, которое может потребовать не только длительного времени выполнения, но и привнесет также массу ненужных строк! </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-h, --host=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Подключиться к хосту. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-m, --medium-check</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Быстрее, чем </span><span style=" font-family:'Courier New,courier';">--extended-check</span><span style=" font-family:'Ubuntu';">, но находит только 99,99 процентов всех ошибок. Для большинства случаев этот вариант вполне подходит. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-o, --optimize</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Оптимизировать таблицу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-p, --password[=...]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Используемый пароль при подключении к серверу. Если пароль не указан, у пользователя запрашивается пароль с терминала. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-P, --port=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Номер порта, используемого для подключения по TCP/IP. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--protocol=(TCP | SOCKET | PIPE | MEMORY)</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для указания протокола соединения, который надлежит использовать. Новшество в MySQL 4.1.0. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-q, --quick</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">При использовании данной опции совместно с </span><span style=" font-family:'Courier New,courier';">CHECK TABLE</span><span style=" font-family:'Ubuntu';"> предотвращается сканирование строк для корректировки неправильных связей. Это наиболее быстрый метод проверки. Если же использовать этот параметр с </span><span style=" font-family:'Courier New,courier';">REPAIR TABLE</span><span style=" font-family:'Ubuntu';">, программа попытается восстановить только систему индексов. Это наиболее быстрый метод восстановления таблицы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-r, --repair</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Может исправить почти все, за исключением уникальных ключей, имеющих дубликаты. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-s, --silent</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводить только сообщения об ошибках. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-S, --socket=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файл сокета, используемый для подсоединения. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--tables</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Перекрывает опцию </span><span style=" font-family:'Courier New,courier';">--databases</span><span style=" font-family:'Ubuntu';"> (</span><span style=" font-family:'Courier New,courier';">-B</span><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-u, --user=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя пользователя MySQL, если этот пользователь в данное время не является активным. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-v, --verbose</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести информацию о различных этапах. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-V, --version</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести информацию о версии и выйти из программы. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mysqldump"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.5. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqldump</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, Получение дампов данных и структуры таблицы</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Данная утилита позволяет получить дамп (``моментальный снимок'') содержимого базы данных или совокупности баз для создания резервной копии или пересылки данных на другой SQL-сервер баз данных (не обязательно MySQL-сервер). Дамп будет содержать набор команд SQL для создания и/или заполнения таблиц. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если же резервная копия создается на сервере, то вместо описываемой утилиты следует использовать </span><span style=" font-family:'Courier New,courier';">mysqlhotcopy</span><span style=" font-family:'Ubuntu';">. См.раздел See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.8.6, «</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqlhotcopy</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#mysqlhotcopy"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">, Копирование баз данных и таблиц MySQL»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqldump [OPTIONS] database [tables]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или  mysqldump [OPTIONS] --databases [OPTIONS] DB1 [DB2 DB3...]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">или  mysqldump [OPTIONS] --all-databases [OPTIONS]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если не указывать имена таблиц или использовать параметры </span><span style=" font-family:'Courier New,courier';">--databases</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">--all-databases</span><span style=" font-family:'Ubuntu';">, то будет получен дамп базы данных в целом (соответственно - всех баз данных). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Перечень опций, поддерживаемых вашей конкретной версией утилиты </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';">, можно получить, выполнив команду </span><span style=" font-family:'Courier New,courier';">mysqldump --help</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Следует иметь в виду, что утилита </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';">, используемая без опций </span><span style=" font-family:'Courier New,courier';">--quick</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">--opt</span><span style=" font-family:'Ubuntu';">, перед тем, как сделать дамп результата выборки информации, загрузит весь результат в память. Это может создать проблемы при получении дампа большой базы данных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Учтите, что не следует применять параметры </span><span style=" font-family:'Courier New,courier';">--opt</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">-e</span><span style=" font-family:'Ubuntu';">, если вы собираетесь использовать для получения дампа новую копию программы </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';">, а затем воспроизводить его на очень старом MySQL-сервере. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';"> поддерживает следующие опции: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--add-locks</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Добавить команды </span><span style=" font-family:'Courier New,courier';">LOCK TABLES</span><span style=" font-family:'Ubuntu';"> перед выполнением и </span><span style=" font-family:'Courier New,courier';">UNLOCK TABLE</span><span style=" font-family:'Ubuntu';"> после выполнения каждого дампа таблицы (для ускорения доступа к MySQL). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--add-drop-table</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Добавить команду </span><span style=" font-family:'Courier New,courier';">DROP TABLE</span><span style=" font-family:'Ubuntu';"> перед каждой командой </span><span style=" font-family:'Courier New,courier';">CREATE TABLE</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-A, --all-databases</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Произвести дамп всех баз данных. Аналогично опции </span><span style=" font-family:'Courier New,courier';">--databases</span><span style=" font-family:'Ubuntu';"> с указанием всех баз данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-a, --all</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Включить все опции создания объектов, специфичные для MySQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--allow-keywords</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешить создавать имена столбцов, которые совпадают с ключевыми словами. Отсутствие конфликтов обеспечивается прибавлением имени таблицы в качестве префикса к имени каждого столбца. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-c, --complete-insert</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать полные команды </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> (с именами столбцов). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-C, --compress</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать сжатие всей информации между клиентом и сервером, если они оба поддерживают сжатие. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-B, --databases</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выполнить дамп нескольких баз данных. Обратите внимание на разницу в использовании: в этом случае таблицы не указываются. Все имена аргументов рассматриваются как имена баз данных. Оператор </span><span style=" font-family:'Courier New,courier';">USE db_name;</span><span style=" font-family:'Ubuntu';"> включается в вывод перед каждой новой базой данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--delayed</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать команду </span><span style=" font-family:'Courier New,courier';">INSERT DELAYED</span><span style=" font-family:'Ubuntu';"> при вставке строк. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-e, --extended-insert</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать команду </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';"> с новым многострочным синтаксисом (повышает компактность и быстродействие операторов ввода). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-#, --debug[=option_string]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отслеживать прохождение программы (для отладки). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--help</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести справочную информацию и выйти из программы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--fields-terminated-by=...</span>, <span style=" font-family:'Courier New,courier';">--fields-enclosed-by=...</span>, <span style=" font-family:'Courier New,courier';">--fields-optionally-enclosed-by=...</span>, <span style=" font-family:'Courier New,courier';">--fields-escaped-by=...</span>, <span style=" font-family:'Courier New,courier';">--lines-terminated-by=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эти опции используются совместно с параметром </span><span style=" font-family:'Courier New,courier';">-T</span><span style=" font-family:'Ubuntu';"> и имеют то же самое значение, что и соответствующие операторы для </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span><span style=" font-family:'Ubuntu';">. См. раздел See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.4.9, «Синтаксис оператора </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">LOAD DATA INFILE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-F, --flush-logs</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Записать на диск данные системного журнала из буфера MySQL-сервера перед началом выполнения дампа. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-f, --force,</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Продолжать даже при получении ошибки SQL при выполнении дампа таблицы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-h, --host=..</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выполнить дамп данных MySQL сервера на указанном хосте. Значение хоста по умолчанию - </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-l, --lock-tables.</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заблокировать все таблицы перед началом выполнения дампа. Таблицы блокируются оператором </span><span style=" font-family:'Courier New,courier';">READ LOCAL</span><span style=" font-family:'Ubuntu';">, чтобы разрешить параллельные записи для </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">-таблиц. Следует отметить, что при выполнении дампа совокупности баз данных опция </span><span style=" font-family:'Courier New,courier';">--lock-tables</span><span style=" font-family:'Ubuntu';"> блокирует таблицы каждой базы по отдельности. Таким образом, использование этого параметра не гарантирует, что таблицы будут логически непротиворечивы в пределах этих баз данных. В различных базах данных при выполнении дампа таблицы могут находиться в совершенно разных состояниях. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-K, --disable-keys</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Добавляет выражение </span><span style=" font-family:'Courier New,courier';">/*!40000 ALTER TABLE tb_name DISABLE KEYS */;</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">/*!40000 ALTER TABLE tb_name ENABLE KEYS */;</span><span style=" font-family:'Ubuntu';"> в выводе результата. Это ускорит загрузку данных на сервер MySQL 4.0, так как индексы создаются после внесения всех данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-n, --no-create-db</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">В выводе результата выражение </span><span style=" font-family:'Courier New,courier';">CREATE DATABASE /*!32312 IF NOT EXISTS*/ db_name;</span><span style=" font-family:'Ubuntu';"> будет отсутствовать. Данная строка будет добавлена в любом случае при использовании опций </span><span style=" font-family:'Courier New,courier';">--databases</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">--all-databases</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-t, --no-create-info</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не записывать информацию о создании таблицы (команда </span><span style=" font-family:'Courier New,courier';">CREATE TABLE</span><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-d, --no-data</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не записывать информацию из строк таблицы. Это очень полезно для получения дампа структуры таблицы! </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--opt</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">То же, что и </span><span style=" font-family:'Courier New,courier';">--quick --add-drop-table --add-locks --extended-insert --lock-tables</span><span style=" font-family:'Ubuntu';">. Должно дать наиболее быстрый дамп для чтения на MySQL-сервере. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-pyour_pass, --password[=your_pass]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Используемый пароль при подключении к серверу. Если аргумент </span><span style=" font-family:'Courier New,courier';">=your_pass</span><span style=" font-family:'Ubuntu';"> не введен, </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';"> предложит ввести пароль. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-P port_num, --port=port_num</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Номер порта TCP/IP, используемого для подключения к хосту. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--protocol=(TCP | SOCKET | PIPE | MEMORY)</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для указания протокола соединения, который надлежит использовать. Новшество в MySQL 4.1.0. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-q, --quick</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводить дамп непосредственно на стандартный вывод </span><span style=" font-family:'Courier New,courier';">stdout</span><span style=" font-family:'Ubuntu';"> без буферизации запроса. Для этого используется функция </span><span style=" font-family:'Courier New,courier';">mysql_use_result()</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-Q, --quote-names</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Взять в кавычки имена таблиц и столбцов без символов ‘</span><span style=" font-family:'Courier New,courier';">`</span><span style=" font-family:'Ubuntu';">’. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-r, --result-file=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Прямой вывод указанного файла. Этот опцию следует использовать в MS DOS, так как она предотвращает преобразование символа новой строки '\n' в последовательность '\n\r' (новая строка + возврат каретки). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--single-transaction</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Данная опция выдает SQL-команду </span><span style=" font-family:'Courier New,courier';">BEGIN</span><span style=" font-family:'Ubuntu';"> перед выполнением дампа данных с сервера. Наиболее часто используется с </span><span style=" font-family:'Courier New,courier';">InnoDB</span><span style=" font-family:'Ubuntu';">-таблицамии и уровнем изоляции транзакций </span><span style=" font-family:'Courier New,courier';">READ_COMMITTED</span><span style=" font-family:'Ubuntu';">, так как именно в этом режиме можно получить дамп с непротиворечивым состоянием базы данных после выполнения команды </span><span style=" font-family:'Courier New,courier';">BEGIN</span><span style=" font-family:'Ubuntu';"> без блокирования каких-либо приложений. Используя эту опцию, необходимо помнить, что при выполнении дампа только транзакционные таблицы будут находиться в непротиворечивом состоянии, т.е. некоторые </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">- или </span><span style=" font-family:'Courier New,courier';">HEAP</span><span style=" font-family:'Ubuntu';">-таблицы при использовании данной опции могут все же изменить свое состояние. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Опция </span><span style=" font-family:'Courier New,courier';">--single-transaction</span><span style=" font-family:'Ubuntu';"> добавлена в версии 4.0.2. Она является взаимоисключающей по отношению к опции </span><span style=" font-family:'Courier New,courier';">--lock-tables</span><span style=" font-family:'Ubuntu';">, так как команда </span><span style=" font-family:'Courier New,courier';">LOCK TABLES</span><span style=" font-family:'Ubuntu';"> уже принимает открытую транзакцию. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-S /path/to/socket, --socket=/path/to/socket</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файл сокета для подсоединения к </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';"> (значение хоста по умолчанию). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--tables</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Перекрывает параметр --databases (-B). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-T, --tab=path-to-some-directory</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для каждой заданной таблицы создает файл a </span><span style=" font-family:'Courier New,courier';">table_name.sql</span><span style=" font-family:'Ubuntu';">, содержащий SQL </span><span style=" font-family:'Courier New,courier';">CREATE</span><span style=" font-family:'Ubuntu';"> команды для создания таблицы, и файл </span><span style=" font-family:'Courier New,courier';">table_name.txt</span><span style=" font-family:'Ubuntu';"> с данными таблицы. Файл </span><span style=" font-family:'Courier New,courier';">.txt</span><span style=" font-family:'Ubuntu';"> имеет формат в соответствии с параметрами </span><span style=" font-family:'Courier New,courier';">--fields-xxx</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">--lines--xxx</span><span style=" font-family:'Ubuntu';">. </span><span style=" font-family:'Ubuntu'; font-weight:600;">Примечание</span><span style=" font-family:'Ubuntu';">: Этот параметр работает только при условии, что утилита </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';"> запущена на том же компьютере, что и демон </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, причем пользователь/группа, запустившие данный поток </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> (обычно это пользователь </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> и группа </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">), должны иметь право создавать/записывать файл по указанному адресу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-u user_name, --user=user_name</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя пользователя MySQL-сервера, используемое при подключении к серверу. Значением по умолчанию является имя пользователя Unix. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-O var=option, --set-variable var=option</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Установить значения переменных. Доступные для использования переменные перечислены ниже. В MySQL 4.0 просто используйте </span><span style=" font-family:'Courier New,courier';">--var=option</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-v, --verbose</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Расширенный режим вывода. Вывод более детальной информации о работе программы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-V, --version</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести информацию о версии и выйти из программы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-w, --where='where-condition'</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выполнить дамп только выбранных записей. Обратите внимание, что кавычки обязательны. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">&quot;--where=user='jimf'&quot; &quot;-wuserid&gt;1&quot; &quot;-wuserid&lt;1&quot;</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-X, --xml</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Представляет дамп базы данных в виде XML. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-x, --first-slave</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Блокирует все таблицы во всех базах данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-O net_buffer_length=#, where # &lt; 16M</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">При создании многострочных операторов ввода (как и в случаях применения параметров </span><span style=" font-family:'Courier New,courier';">--extended-insert</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">--opt</span><span style=" font-family:'Ubuntu';">) утилита </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';"> будет создавать строки длиной вплоть до указанной в </span><span style=" font-family:'Courier New,courier';">net_buffer_length</span><span style=" font-family:'Ubuntu';">. При увеличении значения этой переменной необходимо также убедиться в том, что в MySQL-сервере для переменной </span><span style=" font-family:'Courier New,courier';">max_allowed_packet</span><span style=" font-family:'Ubuntu';"> указано значение больше, чем величина </span><span style=" font-family:'Courier New,courier';">net_buffer_length</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чаще всего утилита </span><span style=" font-family:'Courier New,courier';">mysqldump</span><span style=" font-family:'Ubuntu';"> используется для получения резервной копии всех баз данных. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.1, «Резервное копирование баз данных»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqldump --opt database &gt; backup-file.sql</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно, наоборот, прочитать этот файл на MySQL-сервере посредством команды: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql database &lt; backup-file.sql</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">или </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql -e &quot;source /patch-to-backup/backup-file.sql&quot; database</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Данная утилита достаточно часто используется и для переноса информации из базы данных на другой MySQL-сервер: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqldump --opt database | mysql --host=remote-host -C database</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вполне возможно получить дамп нескольких баз данных с помощью одной команды: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqldump --databases database1 [database2 ...] &gt; my_databases.sql</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если необходим дамп всех баз данных, можно использовать: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqldump --all-databases &gt; all_databases.sql</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mysqlhotcopy"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.6. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqlhotcopy</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, Копирование баз данных и таблиц MySQL</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита </span><span style=" font-family:'Courier New,courier';">mysqlhotcopy</span><span style=" font-family:'Ubuntu';"> представляет собой Perl-сценарий, использующий SQL-команды </span><span style=" font-family:'Courier New,courier';">LOCK TABLES</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">FLUSH TABLES</span><span style=" font-family:'Ubuntu';"> и Unix-утилиты </span><span style=" font-family:'Courier New,courier';">cp</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">scp</span><span style=" font-family:'Ubuntu';"> для быстрого получения резервной копии базы данных. Пожалуй, это наиболее быстрый способ копирования баз данных или таблиц, но он может работать только на том же компьютере, где расположены каталоги копируемой базы данных. </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqlhotcopy db_name [/path/to/new_directory]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqlhotcopy db_name_1 ... db_name_n /path/to/new_directory</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqlhotcopy db_name./regex/</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита </span><span style=" font-family:'Courier New,courier';">mysqlhotcopy</span><span style=" font-family:'Ubuntu';"> поддерживает следующие опции: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-?, --help</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Показать окно справки и выйти из программы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-u, --user=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя пользователя для входа в базу данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-p, --password=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Используемый пароль при подсоединении к серверу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-P, --port=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Номер порта, используемого для подсоединения к локальному серверу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-S, --socket=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Номер сокета, используемого для подсоединения к локальному серверу. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--allowold</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не делать прерывания, если объект уже существует (переименовать в it_old). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--keepold</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не удалять предыдущий результат (только что переименованный) после выполнения команды. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--noindices</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не включать обширные индексные файлы в копию, чтобы сделать дубликат меньше по размеру и более быстрым. Индексы можно реконструировать позже с помощью команды </span><span style=" font-family:'Courier New,courier';">myisamchk -rq</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--method=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Метод копирования (</span><span style=" font-family:'Courier New,courier';">cp</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">scp</span><span style=" font-family:'Ubuntu';">). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-q, --quiet</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводить только сообщения об ошибках. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--debug</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Разрешить отладку. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-n, --dryrun</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сообщать о действиях без их выполнения. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--regexp=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Копировать все базы данных с именами, встречающимися в функции regexp. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--suffix=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Суффикс для имен скопированных баз данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--checkpoint=#</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Внести проверочную запись в предусмотренную таблицу базы данных. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--flushlog</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Записать на диск данные журналов из буфера, как только все таблицы заблокируются. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--tmpdir=#</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Временная директория (вместо </span><span style=" font-family:'Courier New,courier';">/tmp</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Более полное описание данного сценария можно посмотреть в документации по языку программирования Perl. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сценарий </span><span style=" font-family:'Courier New,courier';">mysqlhotcopy</span><span style=" font-family:'Ubuntu';"> берет информацию для групп </span><span style=" font-family:'Courier New,courier';">[client]</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">[mysqlhotcopy]</span><span style=" font-family:'Ubuntu';"> из файлов опций. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для выполнения программы </span><span style=" font-family:'Courier New,courier';">mysqlhotcopy</span><span style=" font-family:'Ubuntu';"> необходимы доступ для записи в директорию, куда будет помещена копия, и привилегия выполнения команды </span><span style=" font-family:'Courier New,courier';">SELECT</span><span style=" font-family:'Ubuntu';"> для копируемых таблиц и команды </span><span style=" font-family:'Courier New,courier';">RELOAD</span><span style=" font-family:'Ubuntu';"> для MySQL-сервера (чтобы выполнить </span><span style=" font-family:'Courier New,courier';">FLUSH TABLES</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mysqlimport"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.7. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqlimport</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, импорт данных из текстовых файлов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита </span><span style=" font-family:'Courier New,courier';">mysqlimport</span><span style=" font-family:'Ubuntu';"> обеспечивает интерфейс командной строки для SQL-оператора </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span><span style=" font-family:'Ubuntu';">. Большинство параметров </span><span style=" font-family:'Courier New,courier';">mysqlimport</span><span style=" font-family:'Ubuntu';"> полностью соответствует аналогичным параметрам для оператора </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.4.9, «Синтаксис оператора </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">LOAD DATA INFILE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита </span><span style=" font-family:'Courier New,courier';">mysqlimport</span><span style=" font-family:'Ubuntu';"> вызывается следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqlimport [параметры] database textfile1 [textfile2 ...]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для каждого текстового файла, указанного в командной строке, </span><span style=" font-family:'Courier New,courier';">mysqlimport</span><span style=" font-family:'Ubuntu';"> удаляет расширение в каждом имени файла и использует его, чтобы определить, в какую таблицу занести содержимое. Например, файлы с именами </span><span style=" font-family:'Courier New,courier';">patient.txt</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">patient.text</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">patient</span><span style=" font-family:'Ubuntu';"> должны быть все занесены в таблицу с именем </span><span style=" font-family:'Courier New,courier';">patient</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита </span><span style=" font-family:'Courier New,courier';">mysqlimport</span><span style=" font-family:'Ubuntu';"> поддерживает следующие опции: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-c, --columns=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта опция принимает в качестве аргумента список разделенных запятыми имен полей. Данный список полей используется для создания соответствующей команды </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span><span style=" font-family:'Ubuntu';">, которая затем посылается в MySQL. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.4.9, «Синтаксис оператора </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">LOAD DATA INFILE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-C, --compress</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Использовать компрессию в связи между клиентом и сервером, если они оба поддерживают сжатие. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-#, --debug[=option_string]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отслеживать прохождение программы (для отладки). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-d, --delete</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Удалить данные из таблицы перед импортированием текстового файла. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--fields-terminated-by=...</span>, <span style=" font-family:'Courier New,courier';">--fields-enclosed-by=...</span>, <span style=" font-family:'Courier New,courier';">--fields-optionally-enclosed-by=...</span>, <span style=" font-family:'Courier New,courier';">--fields-escaped-by=...</span>, <span style=" font-family:'Courier New,courier';">--lines-terminated-by=...</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эти опции аналогичны соответствующим операторам для </span><span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 6.4.9, «Синтаксис оператора </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">LOAD DATA INFILE</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/reference.html#load-data"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-f, --force</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Игнорировать ошибки. Например, если таблица для текстового файла не существует, продолжать обработку остающихся файлов. Без параметра </span><span style=" font-family:'Courier New,courier';">--force</span><span style=" font-family:'Ubuntu';"> утилита </span><span style=" font-family:'Courier New,courier';">mysqlimport</span><span style=" font-family:'Ubuntu';"> прекращает работу при отсутствии таблицы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--help</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести справочную информацию и выйти из программы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-h host_name, --host=host_name</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Импортировать данные в MySQL-сервер на указанном хосте. Значение хоста по умолчанию - </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-i, --ignore</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">См. описание для параметра </span><span style=" font-family:'Courier New,courier';">--replace</span><span style=" font-family:'Ubuntu';">. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-l, --lock-tables</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заблокировать все таблицы для записи перед обработкой любых текстовых файлов. Это обеспечивает синхронизацию всех таблиц на сервере. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-L, --local</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Читать входящие файлы из клиента. По умолчанию предполагается, что текстовые файлы расположены на сервере при подсоединении к </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';"> (значение хоста по умолчанию). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-pyour_pass, --password[=your_pass]</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Используемый пароль при подключении к серверу. Если аргумент </span><span style=" font-family:'Courier New,courier';">=your_pass</span><span style=" font-family:'Ubuntu';"> не введен, </span><span style=" font-family:'Courier New,courier';">mysqlimport</span><span style=" font-family:'Ubuntu';"> предложит ввести пароль. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-P port_num, --port=port_num</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Номер порта TCP/IP, используемого для подсоединения к хосту. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--protocol=(TCP | SOCKET | PIPE | MEMORY)</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для указания протокола соединения, который надлежит использовать. Новшество в MySQL 4.1.0. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-r, --replace</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Опции </span><span style=" font-family:'Courier New,courier';">--replace</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">--ignore</span><span style=" font-family:'Ubuntu';"> управляют обработкой поступающих на вход записей, которые дублируют имеющиеся записи по значениям уникальных ключей. Если задано значение </span><span style=" font-family:'Courier New,courier';">--replace</span><span style=" font-family:'Ubuntu';">, новые строки заменяют существующие с тем же самым значением уникального ключа. Если задано значение </span><span style=" font-family:'Courier New,courier';">--ignore</span><span style=" font-family:'Ubuntu';">, входные строки, которые дублируют существующую строку по значению уникального ключа, пропускаются. Если же ни одна из опций не задана, то при обнаружении ключа-дубликата возникает ошибка и остаток текстового файла игнорируется. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-s, --silent</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Режим молчания. Выводить только сообщения об ошибках. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-S /path/to/socket, --socket=/path/to/socket</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Файл сокета для подсоединения к </span><span style=" font-family:'Courier New,courier';">localhost</span><span style=" font-family:'Ubuntu';"> (значение хоста по умолчанию). </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-u user_name, --user=user_name</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя пользователя MySQL-сервера, используемое при подсоединении к серверу. Значением по умолчанию является имя для входа в Unix. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-v, --verbose</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Расширенный режим вывода. Вывод более детальной информации о работе программы. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-V, --version</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывести информацию о версии и выйти из программы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ниже приведен пример листинга программы, использующей утилиту </span><span style=" font-family:'Courier New,courier';">mysqlimport</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ mysql --version</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql  Ver 9.33 Distrib 3.22.25, for pc-linux-gnu (i686)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ uname -a</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Linux xxx.com 2.2.5-15 #1 Mon Apr 19 22:21:09 EDT 1999 i586 unknown</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ mysql -e 'CREATE TABLE imptest(id INT, n VARCHAR(30))' test</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ ed</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">a</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">100     Max Sydow</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">101     Count Dracula</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">w imptest.txt</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">32</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">q</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ od -c imptest.txt</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">0000000   1   0   0  \t   M   a   x       S   y   d   o   w  \n   1   0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">0000020   1  \t   C   o   u   n   t       D   r   a   c   u   l   a  \n</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">0000040</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ mysqlimport --local test imptest.txt</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">test.imptest: Records: 2  Deleted: 0  Skipped: 0  Warnings: 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">$ mysql -e 'SELECT * FROM imptest' test</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+------+---------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| id   | n             |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+------+---------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">|  100 | Max Sydow     |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">|  101 | Count Dracula |</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+------+---------------+</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mysqlshow"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.8. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysqlshow</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, просмотр баз данных, таблиц и столбцов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита </span><span style=" font-family:'Courier New,courier';">mysqlshow</span><span style=" font-family:'Ubuntu';"> позволяет кратко ознакомиться с существующими базами данных, их таблицами и столбцами таблиц. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Аналогичную информацию можно получить с помощью программы </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';">, используя команду </span><span style=" font-family:'Courier New,courier';">SHOW</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.6, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">SHOW</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#show"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Утилита </span><span style=" font-family:'Courier New,courier';">mysqlshow</span><span style=" font-family:'Ubuntu';"> вызывается следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqlshow [ПАРАМЕТРЫ] [database [table [column]]]</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если имя базы данных не указано, то выдается список всех существующих баз данных. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если не указана таблица - показываются все таблицы, найденные в этой базе данных </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если не задан столбец - показываются все найденные в таблице столбцы и представленные в виде столбцов данные. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Следует отметить, что в более новых версиях MySQL пользователь может просмотреть только те базы/таблицы/столбцы, для которых у него имеются соответствующие привилегии. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если последний аргумент содержит в себе шаблонные символы (</span><span style=" font-family:'Courier New,courier';">*</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">?</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">%</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">_</span><span style=" font-family:'Ubuntu';">) процессора или SQL, то будут представлены только данные, совпадающие с шаблоном. Если имя базы данных содержит подчеркивание, то оно должно быть экранировано обратным слешом (некоторые оболочки в Unix востребуют два обратных слеша) для того, чтобы получить корректные имена. ‘</span><span style=" font-family:'Courier New,courier';">*</span><span style=" font-family:'Ubuntu';">’ корвертируются в ‘</span><span style=" font-family:'Courier New,courier';">%</span><span style=" font-family:'Ubuntu';">’ и ‘</span><span style=" font-family:'Courier New,courier';">?</span><span style=" font-family:'Ubuntu';">’ - в ‘</span><span style=" font-family:'Courier New,courier';">_</span><span style=" font-family:'Ubuntu';">’. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Это может вызвать путаницу при попытке просмотреть столбцы таблицы с символом </span><span style=" font-family:'Courier New,courier';">_</span><span style=" font-family:'Ubuntu';">, так как в таком случае </span><span style=" font-family:'Courier New,courier';">mysqlshow</span><span style=" font-family:'Ubuntu';"> покажет только имена таблиц, совпадающие с шаблоном. Ситуацию можно легко исправить добавлением дополнительного символа </span><span style=" font-family:'Courier New,courier';">%</span><span style=" font-family:'Ubuntu';"> в конец командной строки (как отдельного аргумента). </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="mysql-config"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.9. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">mysql_config</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, Получение опций компиляции для компиляции клиентских программ</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql_config</span><span style=" font-family:'Ubuntu';"> дает полезную информацию о том, как компилировать ваши клиентские программы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql_config</span><span style=" font-family:'Ubuntu';"> поддерживает такие опции: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--cflags</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Опции компилятора для поиска включаемых файлов </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--libs</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Библиотеки и опции, необходимые для линкования с клиентской библиотекой. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--socket</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя сокета по умолчанию, определенное, когда конфигурировался MySQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--port</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Номер порта по умолчанию, определенный, когда конфигурировался MySQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--version</span> </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Номер версии и версия для поставки MySQL. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">--libmysqld-libs</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Библиотеки и опции, необходимые для линкования с библиотекой встраиваемого сервера. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы выполняете </span><span style=" font-family:'Courier New,courier';">mysql_config</span><span style=" font-family:'Ubuntu';"> без каких-либо параметров, вы получите все опции, которые он поддерживает плюс значение этих опций: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql_config</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">sage: /usr/local/mysql/bin/mysql_config [OPTIONS]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Options:</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        --cflags         [-I'/usr/local/mysql/include/mysql']</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        --libs           [-L'/usr/local/mysql/lib/mysql' -lmysqlclient -lz -lcrypt -lnsl -lm -L/usr/lib -lssl -lcrypto]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        --socket         [/tmp/mysql.sock]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        --port           [3306]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        --version        [4.0.8-gamma]</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">        --libmysqld-libs [ -L'/usr/local/mysql/lib/mysql' -lmysqld -lpthread -lz -lcrypt -lnsl -lm  -lpthread  -lrt]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы можете это использовать, чтобы скопмилировать клиента MySQL таким образом: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CFG=/usr/local/mysql/bin/mysql_config</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">sh -c &quot;gcc -o progname `$CFG --cflags` progname.c `$CFG --libs`&quot;</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="perror"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.10. </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">perror</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">, разъяснение кодов ошибок</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для большинства системных ошибок, помимо внутреннего текстового сообщения MySQL, можно также выводить номер кода системной ошибки в одном из следующих стилей: </span><span style=" font-family:'Courier New,courier';">message ... (errno: #)</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">message ... (Errcode: #)</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выяснить, что данный код ошибки означает, можно либо путем изучения документации на данную систему, либо воспользовавшись возможностями утилиты </span><span style=" font-family:'Courier New,courier';">perror</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">perror выводит описание кода системной ошибки или код ошибки обработчика таблиц </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">/</span><span style=" font-family:'Courier New,courier';">ISAM</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">perror</span><span style=" font-family:'Ubuntu';"> вызывается следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">perror [ПАРАМЕТРЫ] [ERRORCODE [ERRORCODE...]]</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пример: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">perror 13 64</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Error code 13: Доступ запрещен</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Error code 64: Компьютер не находится в сети</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Следует учитывать, что сообщения об ошибках в большинстве своем являются системно-зависимыми! </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="batch-commands"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.8.11. Как запускать SQL-команды из текстового файла</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обычно клиент </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> используется в интерактивном режиме, например, следующим образом: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql database</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Однако вполне можно поместить SQL команды в текстовый файл и указать </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> считывать входные данные из этого файла. Для этого необходимо создать текстовый файл </span><span style=" font-family:'Courier New,courier';">text_file</span><span style=" font-family:'Ubuntu';">, содержащий команды, которые предстоит выполнить. Затем запускаем </span><span style=" font-family:'Courier New,courier';">mysql</span><span style=" font-family:'Ubuntu';"> как показано ниже: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql database &lt; text_file</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Можно также запустить текстовый файл с командой </span><span style=" font-family:'Courier New,courier';">USE db_name</span><span style=" font-family:'Ubuntu';">. В этом случае указывать имя базы данных в командной строке не обязательно: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysql &lt; text_file</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если программ</span><span style=" font-family:'Courier New,courier';">а</span><span style=" font-family:'Ubuntu';"> mysql уже работает, можно запустить файл с SQL-сценарием, используя команду </span><span style=" font-family:'Courier New,courier';">source</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">source filename;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Более подробная информация по пакетному режиму работы находится в разделе See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/tutorial.html#batch-mode"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 3.6, «Использование </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/tutorial.html#batch-mode"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysql</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/tutorial.html#batch-mode"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;"> в пакетном режиме»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="log-files"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">.9. Файлы журналов MySQL</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#error-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.1. Журнал ошибок</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#query-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.2. Общий журнал запросов</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#update-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.3. Журнал обновлений (update)</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#binary-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.4. Бинарный журнал обновлений</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#slow-query-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.5. Журнал медленных запросов</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#log-file-maintenance"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.9.6. Обслуживание файлов журналов</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В MySQL имеется несколько журналов, позволяющих узнать, что происходит внутри </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Журнал</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Журнал ошибок</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В нем хранятся ошибки запуска, работы или завершения работы </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Журнал isam</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В нем хранится информация обо всех изменениях таблиц </span><span style=" font-family:'Courier New,courier';">ISAM</span><span style=" font-family:'Ubuntu';">. Используется только при отладке кода isam.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Общий журнал запросов</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В нем хранится информация об установленных соединениях и выполненных запросах.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Журнал обновлений log</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В нем хранятся все команды, меняющие данные; в скором времени выйдет из употребления</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Бинарный журнал обновлений</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В нем хранятся все меняющие что-либо команды. Используется для репликации</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Журнал медленных запросов</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В нем хранятся все запросы, на выполнение которых ушло больше времени, чем указано в переменной </span><span style=" font-family:'Courier New,courier';">long_query_time</span><span style=" font-family:'Ubuntu';"> (или запросы, не использовавшие индексов).</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все файлы журналов хранятся в каталоге с данными </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. С помощью команды </span><span style=" font-family:'Courier New,courier';">FLUSH LOGS</span><span style=" font-family:'Ubuntu';"> можно заставить </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> открыть файлы журналов снова (или - в некоторых случаях - переключиться на новый файл). See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.3, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">FLUSH</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#flush"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="error-log"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.9.1. Журнал ошибок</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Журнал ошибок содержит информацию о том, когда запускается и останавливается mysqld, а также все критические ошибки, обнаруженные в процессе работы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В нем содержится информация о запуске и завершении работы </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, а также обо всех серьезных ошибках, возникших во время работы. Если произойдет неожиданное аварийное завершение работы, и </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> придется перезапустить </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> внесет в этот файл соответствующую запись. Кроме того, в этот журнал заносится предупреждение в том случае, если </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> обнаружит таблицу, нуждающуюся в автоматической проверке или исправлении. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Все ошибки </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> записывает в </span><span style=" font-family:'Courier New,courier';">stderr</span><span style=" font-family:'Ubuntu';">, который сценарий </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> перенаправляет в файл с именем </span><span style=" font-family:'Courier New,courier';">'hostname'.err</span><span style=" font-family:'Ubuntu';"> (в Windows </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> сохраняет его в каталоге </span><span style=" font-family:'Courier New,courier';">\mysql\data\mysql.err</span><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В некоторых ОС в журнал включается распечатка части стека погибшего </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">. С помощью этой информации можно определить причину сбоя (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/porting.html#using-stack-trace"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел E.1.4, «Использование трассировки стека»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с MySQL 4.0.10 можно указать, где именно mysqld должен сохранять журнал ошибок, с помощью опции </span><span style=" font-family:'Courier New,courier';">--log-error[=filename]</span><span style=" font-family:'Ubuntu';">. Если имя файла не задается, то тогда mysqld будет использовать </span><span style=" font-family:'Courier New,courier';">mysql-data-dir/'hostname'.err</span><span style=" font-family:'Ubuntu';"> на Unix и </span><span style=" font-family:'Courier New,courier';">\mysql\data\mysql.err</span><span style=" font-family:'Ubuntu';"> на windows. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы выполняете </span><span style=" font-family:'Courier New,courier';">FLUSH LOGS</span><span style=" font-family:'Ubuntu';"> старый файл будет сохранен с префиксом </span><span style=" font-family:'Courier New,courier';">--old</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> создаст новый пустой журнал. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На старых версиях MySQL журнал ошибок велся скриптом mysqld_safe, который перенаправлял вывод в файл </span><span style=" font-family:'Courier New,courier';">'hostname'.err</span><span style=" font-family:'Ubuntu';">. В старых версиях можно было изменить имя этого файла опцией </span><span style=" font-family:'Courier New,courier';">--err-log=filename</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы не указываете </span><span style=" font-family:'Courier New,courier';">--log-error</span><span style=" font-family:'Ubuntu';"> или используете опцию </span><span style=" font-family:'Courier New,courier';">--console</span><span style=" font-family:'Ubuntu';">, то ошибки будут выводиться на stderr (на терминал). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На Windows вывод всегда пишется в </span><span style=" font-family:'Courier New,courier';">.err</span><span style=" font-family:'Ubuntu';">-файл если </span><span style=" font-family:'Courier New,courier';">--console</span><span style=" font-family:'Ubuntu';"> не была указана. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="query-log"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.9.2. Общий журнал запросов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы хотите знать обо всем, что происходит с </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, нужно запустить систему с ключом </span><span style=" font-family:'Courier New,courier';">--log[=file]</span><span style=" font-family:'Ubuntu';">. После этого информация обо всех соединениях и запросах будет записываться в файл журнала (по умолчанию ему дается имя </span><span style=" font-family:'Courier New,courier';">'hostname'.log</span><span style=" font-family:'Ubuntu';">). Этот журнал может оказаться полезным, если вы подозреваете наличие ошибки в клиентском ПО и хотите выяснить, что, по мнению </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">, клиент передал базе. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Старые версии скрипта </span><span style=" font-family:'Courier New,courier';">mysql.server</span><span style=" font-family:'Ubuntu';"> (с MySQL 3.23.4 по 3.23.8) передавали </span><span style=" font-family:'Courier New,courier';">safe_mysqld</span><span style=" font-family:'Ubuntu';"> опцию </span><span style=" font-family:'Courier New,courier';">--log</span><span style=" font-family:'Ubuntu';"> (включить общий журнал запросов). Если вам нужна большая производительность при запуске MySQL в промышленной эксплуатации, вы можете удалить опцию </span><span style=" font-family:'Courier New,courier';">--log</span><span style=" font-family:'Ubuntu';"> из </span><span style=" font-family:'Courier New,courier';">mysql.server</span><span style=" font-family:'Ubuntu';"> или поменять ее на </span><span style=" font-family:'Courier New,courier';">--log-bin</span><span style=" font-family:'Ubuntu';">. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#binary-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.4, «Бинарный журнал обновлений»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Записи в журнал заносятся по мере получения </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> запросов. Порядок их занесения может отличаться от порядка выполнения команд. В этом и заключается основное отличие данного журнала от журналов обновлений и бинарных журналов, в которые информация заносится по мере выполнения запросов, но до отмены блокировок. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="update-log"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.9.3. Журнал обновлений (update)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Обратите внимание</span><span style=" font-family:'Ubuntu';">: журнал обновлений (update) заменен бинарным журналом (binary) (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#binary-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.4, «Бинарный журнал обновлений»</span></a><span style=" font-family:'Ubuntu';">. С этим журналом можно производить те же операции, что и с журналом обновлений. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При запуске с ключом </span><span style=" font-family:'Courier New,courier';">--log-update[=file_name]</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> создает журнал, в который заносятся все команды SQL, обновляющие данные. Если имя файла не задано, по умолчанию ему присваивается имя хоста. Если файлу присвоено имя, не содержащее пути доступа к нему, этот файл сохраняется в каталоге с данными. Если у имени </span><span style=" font-family:'Courier New,courier';">file_name</span><span style=" font-family:'Ubuntu';"> нет расширения, </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> даст файлу примерно такое имя: </span><span style=" font-family:'Courier New,courier';">file_name.###</span><span style=" font-family:'Ubuntu';">, где </span><span style=" font-family:'Courier New,courier';">###</span><span style=" font-family:'Ubuntu';"> - номер, увеличивающийся при каждом выполнении команд </span><span style=" font-family:'Courier New,courier';">mysqladmin refresh</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-logs</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">FLUSH LOGS</span><span style=" font-family:'Ubuntu';"> или при перезапуске сервера. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Обратите внимание</span><span style=" font-family:'Ubuntu';">: чтобы вышеописанная схема могла работать, нельзя самостоятельно создавать файлы с тем же именем, что и у журнала обновлений, а также с некоторыми расширениями, которые могут быть восприняты как номер, в каталоге, использующемся для хранения этого журнала! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При запуске с ключами </span><span style=" font-family:'Courier New,courier';">--log</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">-l</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> создает общий журнал в файле с именем </span><span style=" font-family:'Courier New,courier';">hostname.log</span><span style=" font-family:'Ubuntu';">, причем перезапуски и обновления не приводят к созданию нового файла журнала (хотя существующий при таких операциях закрывается и затем открывается вновь). В таком случае скопировать его (в Unix) можно так: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mv hostname.log hostname-old.log</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqladmin flush-logs</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">cp hostname-old.log to-backup-directory</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">rm hostname-old.log</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Журнал обновлений работает избирательно - в него попадают только те команды, которые действительно обновляют данные. Команда </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">DELETE</span><span style=" font-family:'Ubuntu';">, выражение </span><span style=" font-family:'Courier New,courier';">WHERE</span><span style=" font-family:'Ubuntu';"> которой не находит совпадающих строк, в журнал не заносится - как и команды </span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';">, присваивающие столбцам те же значения, которые у них были до ``обновления''. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Запись в журнал осуществляется сразу по завершении работы запроса, но до того, как будут сняты блокировки. Таким образом обеспечивается уверенность в том, что журнал ведется именно в порядке выполнения запросов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При желании обновить базу в соответствии с данными журналов обновлений можно воспользоваться следующей командой (при условии, что имена файлов журналов соответствуют форме </span><span style=" font-family:'Courier New,courier';">file_name.###</span><span style=" font-family:'Ubuntu';">): </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">ls -1 -t -r file_name.[0-9]* | xargs cat | mysql</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ls</span><span style=" font-family:'Ubuntu';"> расставляет все файлы журналов в правильном порядке. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта возможность может пригодиться в случае, если возникнет необходимость (в результате серьезного сбоя) привести базу в соответствие с резервной копией и затем повторить все обновления, произошедшие с момента создания копии и до сбоя. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="binary-log"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.9.4. Бинарный журнал обновлений</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Бинарный журнал обновлений в скором времени должен полностью заменить журнал обновлений, так что мы рекомендуем вам как можно скорее перейти на его использование! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Бинарный журнал содержит всю информацию, имеющуюся в журнале обновлений, в более эффективном формате. В нем имеется информация и о времени выполнения каждого обновляющего базу запроса. В нем не содержится информации о запросах, которые не изменяют данные. Если вам нужно журналировать все запросы (например для выявления проблемного запроса), вам следует использовать общий журнал запросов. See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#query-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.2, «Общий журнал запросов»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Бинарный журнал используется и при репликации подчиненного сервера (slave) с головного (master) (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.10, «Репликация в MySQL»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При запуске с ключом </span><span style=" font-family:'Courier New,courier';">--log-bin[=file_name]</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> создает файл журнала, в который вносятся данные обо всех обновляющих данные командах SQL. Если имя файла не задано, по умолчанию ему дается имя хоста с окончанием </span><span style=" font-family:'Courier New,courier';">-bin</span><span style=" font-family:'Ubuntu';">. Если файлу присвоено имя, не содержащее пути доступа к нему, этот файл сохраняется в каталоге данных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При вводе расширения в имя файла (например: </span><span style=" font-family:'Courier New,courier';">--log-bin=filename.extension</span><span style=" font-family:'Ubuntu';">) это расширение удаляется без предупреждения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">К имени файла бинарного журнала программа </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> прибавляет специальное расширение - номер, увеличивающийся при каждом выполнении команд </span><span style=" font-family:'Courier New,courier';">mysqladmin refresh</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-logs</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">FLUSH LOGS</span><span style=" font-family:'Ubuntu';"> или перезапуске сервера. При достижении файлом журнала максимального размера, заданного в параметре </span><span style=" font-family:'Courier New,courier';">max_binlog_size</span><span style=" font-family:'Ubuntu';">, автоматически создается новый. Все неактивные файлы бинарных журналов можно удалить командой </span><span style=" font-family:'Courier New,courier';">RESET MASTER</span><span style=" font-family:'Ubuntu';"> (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#reset"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.5.4, «Синтаксис команды </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#reset"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">RESET</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#reset"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На выбор данных, записываемых в журнал, влияют следующие настройки </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';">: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Опция</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">binlog-do-db=database_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указывает головному серверу что он должен журналировать обновления в двоичный журнал если текущая (т.е. выбранная) база данных - это 'database_name'. Остальные базы данных, особо не отмеченные, игнорируются. Имейте в виду, что если вы используете эту опцию, то вам следует делать обновления только в этой базе данных. (пример: binlog-do-db=some_database)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">binlog-ignore-db=database_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заставляет master отказаться от занесения в журнал обновлений определенной базы данных (пример: </span><span style=" font-family:'Courier New,courier';">binlog-ignore-db=some_database</span><span style=" font-family:'Ubuntu';">)</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы была возможность определить, какие файлы журналов используются в данный момент, </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> создает и индексный файл, содержащий имена всех находящихся в работе файлов. По умолчанию ему присваивается то же имя, что и файлу журнала, но с расширением .index. Имя этого файла можно изменить с помощью параметра </span><span style=" font-family:'Courier New,courier';">--log-bin-index=[filename]</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При использовании репликации удалять старые файлы журналов не стоит до тех пор, пока вы не будете уверены в том, что они никогда не понадобятся ни одной зависимой базе. Добиться такого результата можно, запуская команду </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-logs</span><span style=" font-family:'Ubuntu';"> раз в день и затем удаляя все журналы, созданные более 3 дней назад. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Работать с файлами бинарного журнала можно с помощью программы </span><span style=" font-family:'Courier New,courier';">mysqlbinlog</span><span style=" font-family:'Ubuntu';">. Обновить MySQL в соответствии с записями в журнале можно так: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqlbinlog log-file | mysql -h server_name</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">С помощью программы </span><span style=" font-family:'Courier New,courier';">mysqlbinlog</span><span style=" font-family:'Ubuntu';"> можно даже считывать файлы журнала прямо с удаленного сервера MySQL! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При запуске </span><span style=" font-family:'Courier New,courier';">mysqlbinlog</span><span style=" font-family:'Ubuntu';"> с ключом </span><span style=" font-family:'Courier New,courier';">--help</span><span style=" font-family:'Ubuntu';"> на экран выводится дополнительная информация по работе с этой программой. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При работе с настройками </span><span style=" font-family:'Courier New,courier';">BEGIN [WORK]</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">SET AUTOCOMMIT=0</span><span style=" font-family:'Ubuntu';"> для резервного копирования нужно использовать бинарный журнал, а не старый журнал обновлений. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Занесение данных в бинарный журнал происходит сразу по завершении исполнения запроса, но до снятия блокировок. Таким образом обеспечивается уверенность в том, что журнал ведется именно в порядке выполнения запросов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Updates to non-transactional tables are stored in the binary log immediately after execution. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обновления нетранзакционных таблиц сохраняются в двоичном журнале немедленно после выполнения. Все обновления (</span><span style=" font-family:'Courier New,courier';">UPDATE</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">DELETE</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">INSERT</span><span style=" font-family:'Ubuntu';">), изменяющие данные в транзакционных таблицах (например, BDB-таблицу) находятся в кэше до вызова </span><span style=" font-family:'Courier New,courier';">COMMIT</span><span style=" font-family:'Ubuntu';">. В этот момент </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> пишет всю транзакцию целиком в двоичный журнал перед тем, как выполнить </span><span style=" font-family:'Courier New,courier';">COMMIT</span><span style=" font-family:'Ubuntu';">. Каждый поток при запуске будет создавать буффер размером </span><span style=" font-family:'Courier New,courier';">binlog_cache_size</span><span style=" font-family:'Ubuntu';"> для буферизации запросов. Если запрос превышает этот размер, тогда поток откроет временный файл для сохранения транзакции. Временный файл будет удален при выходе потока. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При запуске каждого потока создается буфер запросов, объем которого соответствует значению параметра </span><span style=" font-family:'Courier New,courier';">binlog_cache_size</span><span style=" font-family:'Ubuntu';">. Если запрос не помещается в буфере, поток создаст временный файл для кэша. Временный файл удаляется по завершении работы потока. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Параметр </span><span style=" font-family:'Courier New,courier';">max_binlog_cache_size</span><span style=" font-family:'Ubuntu';"> (по умолчанию 4Гб) позволяет ограничить общий объем памяти, используемой для кэширования мультитранзакционного запроса. Если транзакция больше этого - будет произведен откат. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При использовании журнала обновлений или бинарного журнала параллельные операции вставки будут преобразованы в нормальные операции вставки в командах </span><span style=" font-family:'Courier New,courier';">CREATE ... SELECT</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">INSERT ... SELECT</span><span style=" font-family:'Ubuntu';">. Это сделано специально - для того, чтобы обеспечить возможность создания точной копии таблиц путем объединения резервной копии с журналом. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="slow-query-log"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.9.5. Журнал медленных запросов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При запуске с параметром </span><span style=" font-family:'Courier New,courier';">--log-slow-queries[=file_name]</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Courier New,courier';">mysqld</span><span style=" font-family:'Ubuntu';"> создает файл журнала, в котором сохраняются данные обо всех командах SQL, на выполнение которых ушло больше времени, чем указано в значении параметра </span><span style=" font-family:'Courier New,courier';">long_query_time</span><span style=" font-family:'Ubuntu';">. Время, уходящее на первоначальную блокировку таблиц, не включается во время исполнения запроса. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Занесение данных в журнал происходит сразу по завершении исполнения запроса и снятия блокировок. Таким образом, порядок расположения записей может отличаться от порядка выполнения запросов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если имя файла не задано, по умолчанию ему дается имя хоста с окончанием </span><span style=" font-family:'Courier New,courier';">-slow.log</span><span style=" font-family:'Ubuntu';">. Если файлу присвоено имя, не содержащее пути доступа к нему, этот файл сохраняется в каталоге с данными. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Этот журнал позволяет определить запросы, на выполнение которых ушло слишком много времени, а, значит, и обнаружить основных кандидатов на оптимизацию. Конечно, при достижении журналом значительного объема эта задача усложняется. В таком случае журнал можно пропустить через команду </span><span style=" font-family:'Courier New,courier';">mysqldumpslow</span><span style=" font-family:'Ubuntu';"> и получить краткий отчет о запросах, попавших в список. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При использовании ключа </span><span style=" font-family:'Courier New,courier';">--log-long-format</span><span style=" font-family:'Ubuntu';"> на экран выводятся и запросы, не работающие с индексами (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.1.1, «Параметры командной строки </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">mysqld</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#command-line-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="log-file-maintenance"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.9.6. Обслуживание файлов журналов</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В MySQL предусмотрено наличие нескольких файлов журналов, позволяющих следить за всеми аспектами работы системы (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#log-files"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9, «Файлы журналов MySQL»</span></a><span style=" font-family:'Ubuntu';">). Правда, иногда приходится проверять, не занимают ли журналы лишнего места, и удалять ненужные. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При работе с журналами MySQL, вам, вероятнее всего, понадобится удалять их или создавать их резервные копии, и указывать MySQL записывать данные журналов в новые файлы (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.1, «Резервное копирование баз данных»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В системе Linux (</span><span style=" font-family:'Courier New,courier';">Red Hat</span><span style=" font-family:'Ubuntu';">) для этого можно использовать сценарий </span><span style=" font-family:'Courier New,courier';">mysql-log-rotate</span><span style=" font-family:'Ubuntu';">. При установке MySQL с дистрибутива RPM этот сценарий устанавливается автоматически. Обратите внимание: использовать журнал для репликации необходимо с максимальной аккуратностью! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В других ОС вы можете самостоятельно создать небольшой сценарий для обработки журналов, запускаемый из </span><span style=" font-family:'Courier New,courier';">cron</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заставить MySQL создать новый файл журнала можно с помощью команды </span><span style=" font-family:'Courier New,courier';">mysqladmin flush-logs</span><span style=" font-family:'Ubuntu';"> или SQL-команды </span><span style=" font-family:'Courier New,courier';">FLUSH LOGS</span><span style=" font-family:'Ubuntu';">. При работе с MySQL версии 3.21 пользоваться можно только командой </span><span style=" font-family:'Courier New,courier';">mysqladmin refresh</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда выполняет следующие действия: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если используется стандартный журнал (<span style=" font-family:'Courier New,courier';">--log</span>) или журнал медленных запросов (<span style=" font-family:'Courier New,courier';">--log-slow-queries</span>), файл журнала (<span style=" font-family:'Courier New,courier';">mysql.log</span> и <span style=" font-family:'Courier New,courier';">`hostname`-slow.log</span> по умолчанию) закрывается и открывается вновь. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если используется журнал обновлений (<span style=" font-family:'Courier New,courier';">--log-update</span>), файл журнала закрывается, после чего создается новый файл с большим номером. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">При использовании одного журнала обновлений нужно очистить журналы и перенести их старые файлы в резервную копию. При использовании обычной процедуры ведения журналов для этого нужно выполнить примерно следующую последовательность команд: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">cd mysql-data-directory</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mv mysql.log mysql.old</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqladmin flush-logs</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">а затем сделать резервную копию файла </span><span style=" font-family:'Courier New,courier';">mysql.old</span><span style=" font-family:'Ubuntu';"> и удалить его. </span></p>
<p style=" margin-top:16px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="replication"></a><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:x-large; font-weight:600;">.10. Репликация в MySQL</span></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-intro"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.1. Введение</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-implementation"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.2. Как реализована репликация: обзор</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-howto"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.3. Как настроить репликацию</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-features"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.4. Возможности репликации и известные проблемы</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.5. Опции репликации в файле </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-sql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.6. SQL-команды, относящиеся к репликации</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-faq"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.7. Часто задаваемые вопросы по репликации</span></a></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-problems"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">4.10.8. Поиск неисправностей репликации</span></a></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В этом разделе описаны различные функциональные возможности репликации в MySQL. Он может служить справочником по опциям, используемым при репликации. Здесь будет описан механизм репликации и показано, как реализовывать репликации. В конце раздела мы дадим ответы на некоторые часто задаваемые вопросы, а также описания проблем и способы их решения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Рекомендуем регулярно посещать наш web-сайт по адресу http://www.mysql.com/ для ознакомления с обновлениями, произошедшими в этом разделе. Механизм репликации постоянно улучшается, и руководство постоянно дополняется самой свежей информацией. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="replication-intro"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.10.1. Введение</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">К числу преимуществ, которые обеспечивает репликация, относится повышение скорости и надежности. Чтобы обеспечить надежность, можно установить две системы и при возникновении проблем с головным сервером переключаться на резервную копию. Для увеличения скорости можно перенаправлять те запросы, которые не обновляют данные, на сервер с копиями. Разумеется, это даст эффект лишь в том случае, если запросы, не обновляющие данные, преобладают, но, как правило, чаще всего так и бывает. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">MySQL, начиная с версии 3.23.15, поддерживает односторонний внутренний механизм репликации. Один сервер действует как головной, а другие - как подчиненные. Обратите внимание: один сервер может играть роль головного в одной паре и подчиненного - в другой. Головной сервер содержит двоичный журнал обновлений (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#binary-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.4, «Бинарный журнал обновлений»</span></a><span style=" font-family:'Ubuntu';">) и индексный файл двоичных журналов для протоколирования ротации двоичных журналов. Подчиненный сервер при соединении уведомляет головной о том, в каком состоянии он находится, начиная от последнего обновления, которое было успешно опубликовано на подчиненный сервер. После этого подчиненный сервер принимает обновления, а затем блокируется и ждет, пока головной сервер не сообщит о новых обновлениях. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание: при реплицировании базы данных все обновления этой базы данных должны производиться через головной сервер! </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Еще одно преимущество использования механизма репликации заключается в том, что можно иметь &quot;живую&quot; резервную копию системы, выполняя резервное копирование не на головном, а на подчиненном сервере (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#backup"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.4.1, «Резервное копирование баз данных»</span></a><span style=" font-family:'Ubuntu';">). </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="replication-implementation"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.10.2. Как реализована репликация: обзор</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Репликация в MySQL основывается на том, что все изменения базы данных (обновления, удаления и т.д.) протоколируются в двоичном журнале на сервере (see </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#binary-log"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.9.4, «Бинарный журнал обновлений»</span></a><span style=" font-family:'Ubuntu';">), а подчиненный сервер читает сохраненные запросы из двоичного журнала головного сервера и выполняет эти запросы на своей копии данных. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Очень важно</span><span style=" font-family:'Ubuntu';"> понимать, что двоичный журнал - это просто запись, начатая с фиксированного момента времени (с момента, когда вы включаете ведение записей в двоичном журнале). При установке каждого из подчиненных серверов нужно будет скопировать с головного сервера все данные, существовавшие на нем к моменту начала ведения записей в двоичном журнале. Если подчиненный сервер будет запущен с данными, не соответствующими тем, которые содержались на головном сервере </span><span style=" font-family:'Ubuntu'; font-weight:600;">к моменту запуска двоичного журнала</span><span style=" font-family:'Ubuntu';">, на подчиненном сервере может произойти сбой. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В следующей таблице вы найдете информацию о совместимости головных и подчиненных серверов разных версий. С учетом версии 4.0, мы рекомендуем использовать одну и ту же версию на обеих серверах, подчиненном и головном. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Головной</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Головной</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Головной</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Головной</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">3.23.33 и новее</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">4.0.0</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">4.0.1</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">4.0.3 и новее</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Подчиненный</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">3.23.33 и новее</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">да</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">нет</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Подчиненный</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">4.0.0</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">да</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">нет</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Подчиненный</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">4.0.1</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">да</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">да</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">нет</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Подчиненный</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">4.0.3 и новее</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">да</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">нет</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">да</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Note</span><span style=" font-family:'Ubuntu';">: MySQL 4.0.2 не рекомендован для репликации. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Начиная с версии 4.0.0 для записи данных на подчиненный сервер можно использовать команду </span><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span><span style=" font-family:'Ubuntu';">. Учтите, что команда </span><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span><span style=" font-family:'Ubuntu';"> в настоящее время работает только если все таблицы на головном сервере имеют тип </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';">, и для них будет установлена глобальная блокировка чтения, чтобы не допустить никаких записей во время передачи таблиц от головного сервера к подчиненному. Данное ограничение носит временный характер. Оно обусловлено тем, что мы еще не реализовали горячее резервное копирование таблиц без блокировок. Это ограничение мы снимем для следующих ветвей версии 4.0 - как только будет реализовано горячее резервное копирование, которое позволит команде </span><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span><span style=" font-family:'Ubuntu';"> работать без блокирования обновлений на головном сервере. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Из-за вышеупомянутого ограничения рекомендуется использовать команду </span><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span><span style=" font-family:'Ubuntu';"> только в тех случаях, если набор данных на головном сервере относительно невелик или если для головного сервера допустима длительная блокировка чтения. Скорость выполнения команды </span><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span><span style=" font-family:'Ubuntu';"> для разных систем может быть различной, поэтому для грубой оценки времени выполнения команды можно считать, что для передачи 1 Мб данных требуется 1 секунда. Это приблизительно соответствует случаю, когда и головной, и подчиненный серверы эквивалентны Pentium с тактовой частотой 700 МГц и связаны сетью с пропускной способностью 100 Мбит/с, а размер индексного файла равен примерно половине размера файла данных. Разумеется, такая прикидка дает лишь грубую приближенную оценку и в случае каждой конкретной системы потребуются свои допущения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После того как подчиненный сервер будут правильно сконфигурирован и запущен, он должен легко соединиться с головным сервером и ожидать обработки обновлений. Если головной сервер завершит работу или подчиненный сервер потеряет связь с головным, подчиненный сервер будет пытаться установить соединение каждый раз по истечении интервала времени, указанного в опции </span><span style=" font-family:'Courier New,courier';">master-connect-retry</span><span style=" font-family:'Ubuntu';"> (в секундах) до тех пор, пока не установится подсоединение и не продолжится прослушивание обновлений. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Каждый подчиненный сервер отслеживает события с момента разрыва. Головной сервер не имеет никакой информации о том, сколько существует подчиненных серверов, и какие из них обновлены последними данными в любой момент времени. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В следующем разделе процесс установки головного/подчиненного серверов рассматривается более подробно. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="replication-howto"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.10.3. Как настроить репликацию</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Здесь кратко описано как настроить полную репликацию вашего MySQL-сервера. Предполагается, что реплицироваться будут все базы данных и репликация ранее не настраивалась. Для того чтобы выполнить указанные здесь действия, вам придется на короткое время остановить головной сервер. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Это самый простой способ установки подчиненного сервера, однако он не единственный. Например, если уже имеется образ головного сервера, на головном сервере уже установлен ID сервера и производятся записи в журнал, подчиненный сервер можно установить, не останавливая головной сервер и даже не устанавливая блокировки обновлений (за дополнительной информацией обращайтесь к разделу See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-faq"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.10.7, «Часто задаваемые вопросы по репликации»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы стать настоящим гуру по репликации в MySQL, советуем сначала изучить, осмыслить и опробовать все команды, упомянутые в разделе See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-sql"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.10.6, «SQL-команды, относящиеся к репликации»</span></a><span style=" font-family:'Ubuntu';">. Необходимо также ознакомиться с опциями запуска репликации из файла </span><span style=" font-family:'Courier New,courier';">my.cnf</span><span style=" font-family:'Ubuntu';"> в разделе See </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Раздел 4.10.5, «Опции репликации в файле </span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-options"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">my.cnf</span></a><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-database-administration.html#replication-options"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">»</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<ol style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Удостоверьтесь, что на головном и подчиненном(ых) серверах установлена свежая версия MySQL. Используйте версию 3.23.29 или выше. В предыдущих релизах применялся другой формат двоичного журнала и содержались ошибки, которые были исправлены в более новых релизах. Большая просьба: пожалуйста, не посылайте сообщения об ошибках, не проверив, присутствует ли эта ошибка в последнем релизе. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Установите на головном сервере отдельного пользователя для репликации с привилегией <span style=" font-family:'Courier New,courier';">FILE</span> (в версиях MySQL ниже 4.0.2) или <span style=" font-family:'Courier New,courier';">REPLICATION SLAVE</span> в более новых версиях MySQL. У этого пользователя должно быть также разрешение подсоединяться со всех подчиненных серверов. Если пользователь будет выполнять только репликацию (рекомендуется), то ему не нужно предоставлять какие-либо дополнительные привилегии. Например, чтобы создать пользователя с именем <span style=" font-family:'Courier New,courier';">repl</span>, который может иметь доступ к головному серверу с любого хоста, можно использовать такую команду: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT FILE ON *.* TO repl@&quot;%&quot; IDENTIFIED BY '&lt;password&gt;'; # головной &lt; 4.0.2</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">GRANT REPLICATION SLAVE ON *.* TO repl@&quot;%&quot; IDENTIFIED BY '&lt;password&gt;'; # головной &gt;= 4.0.2</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы планируете использовать </span><span style=" font-family:'Courier New,courier';">LOAD TABLE FROM MASTER</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span><span style=" font-family:'Ubuntu';"> (доступные с версии 4.0.0), вам также надо выделить привилегии </span><span style=" font-family:'Courier New,courier';">RELOAD</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';"> на головном сервере для вышеуказанного пользователя. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если вы используете MyISAM-таблицы, сохраните содержимое и заблокируйте модифицирующие запросы командой <span style=" font-family:'Courier New,courier';">FLUSH TABLES WITH READ LOCK</span>. </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FLUSH TABLES WITH READ LOCK;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">и после этого - снимите образ данных на вашем головном сервере. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Легче всего сделать это (на Unix), создав при помощи </span><span style=" font-family:'Ubuntu'; font-weight:600;">tar</span><span style=" font-family:'Ubuntu';"> архив всей своей директории данных. Точное местоположение директории данных зависит от вашей инсталляции. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">tar -cvf /tmp/mysql-snapshot.tar /path/to/data-dir</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пользователи Windows для создания архива каталога данных могут использовать </span><span style=" font-family:'Courier New,courier';">WinZIP</span><span style=" font-family:'Ubuntu';"> или другую подобную программу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">После того как снимок будет или прямо во время этого процесса, узнайте значения: имя текущего двоичного журнала и позицию на головном сервере: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql &gt; SHOW MASTER STATUS;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------+----------+--------------+-------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| File          | Position | Binlog_do_db | Binlog_ignore_db              |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------+----------+--------------+-------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">| mysql-bin.003 | 73       | test,bar     | foo,manual,sasha_likes_to_run |</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">+---------------+----------+--------------+-------------------------------+</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">1 row in set (0.06 sec)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Столбец </span><span style=" font-family:'Courier New,courier';">File</span><span style=" font-family:'Ubuntu';"> дает имя журнала, </span><span style=" font-family:'Courier New,courier';">Position</span><span style=" font-family:'Ubuntu';"> дает информацию о смещении в журнале (позиции). В этом примере имя журнала - </span><span style=" font-family:'Courier New,courier';">mysql-bin.003</span><span style=" font-family:'Ubuntu';"> и смещение - </span><span style=" font-family:'Courier New,courier';">73</span><span style=" font-family:'Ubuntu';">. Запишите эти значения - они вам понадобятся чуть позже, когда будете настраивать подчиненный сервер. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Когда вы получили образ и сохранили указанную информацию, вы можете снова разрешить запись в таблицы на головном сервере: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">UNLOCK TABLES;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы используете таблицы InnoDB, то в идеале было бы хорошо, чтобы вы использовали ПО InnoDB Hot Backup. Она берет целостный снимок без установки каких-либо блокировок на головном сервере, и сохраняет имя журнала и позицию непосредственно в снимке, что позволит в дальнейшем использовать эту информацию на подчиненном сервере. Более подробная информация об этой программе доступна на </span><a href="http://www.innodb.com/hotbackup.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">http://www.innodb.com/hotbackup.html</span></a><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Без использования этой утилиты, наиболее быстрый способ получить снимок таблиц InnoDB - это остановить головной сервер и скопировать файлы данных, журналы, и файлы определений формата таблицы (</span><span style=" font-family:'Courier New,courier';">.frm</span><span style=" font-family:'Ubuntu';">). Для сохранения текущего имени файла журнала и смещения, вам следует выполнить следующее перед остановкой сервера: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">FLUSH TABLES WITH READ LOCK;</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SHOW MASTER STATUS;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">И затем сохраните имя журнала и смещение из вывода команды </span><span style=" font-family:'Courier New,courier';">SHOW MASTER STATUS</span><span style=" font-family:'Ubuntu';"> так, как было показано выше. После этого остановите сервер без снятия блокировок с таблиц. Это нужно сделать именно так, чтобы быть уверенным, что сервер остановится именно с тем снимком, который мы сделали: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">shell&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">mysqladmin -uroot shutdown</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если головной сервер был ранее запущен без опции </span><span style=" font-family:'Courier New,courier';">log-bin</span><span style=" font-family:'Ubuntu';">, то значения имени файла журнала и позиции будут пустыми в выводе </span><span style=" font-family:'Courier New,courier';">SHOW MASTER STATUS</span><span style=" font-family:'Ubuntu';">. В этом случае, сохраните пустую строку ('') как имя файла журнала и </span><span style=" font-family:'Courier New,courier';">4</span><span style=" font-family:'Ubuntu';"> как позицию. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В <span style=" font-family:'Courier New,courier';">my.cnf</span> на головном сервере добавьте к разделу <span style=" font-family:'Courier New,courier';">[mysqld]</span> записи <span style=" font-family:'Courier New,courier';">log-bin</span> и <span style=" font-family:'Courier New,courier';">server-id=уникальный номер</span> и перезапустите сервер. Очень важно, чтобы номер подчиненного сервера отличался от номера головного сервера. Можно считать, что <span style=" font-family:'Courier New,courier';">server-id</span> играет роль IP-адреса - он уникально идентифицирует сервер среди участников репликации. </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">[mysqld]</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">log-bin</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">server-id=1</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Добавьте в my.cnf на подчиненном сервере(ах) следующий фрагмент: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">server-id=&lt;некоторое уникальное число между 2 и 2^32-1&gt;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">заменяя значения в &lt;&gt; значениями, соответствующими вашей системе. Значения </span><span style=" font-family:'Courier New,courier';">server-id</span><span style=" font-family:'Ubuntu';"> должны быть различными на каждом сервере, участвующем в репликации. Если значение </span><span style=" font-family:'Courier New,courier';">server-id</span><span style=" font-family:'Ubuntu';"> не определено, оно будет установлено в 1, если также не определено значение </span><span style=" font-family:'Courier New,courier';">master-host</span><span style=" font-family:'Ubuntu';">, оно будет установлено в 2. Обратите внимание, что если значение </span><span style=" font-family:'Courier New,courier';">server-id</span><span style=" font-family:'Ubuntu';"> опущено, то головной сервер будет отказывать в соединении всем подчиненным серверам, а подчиненный сервер - отказывать в соединении головному серверу. Таким образом, опускать установку значения </span><span style=" font-family:'Courier New,courier';">server-id</span><span style=" font-family:'Ubuntu';"> можно лишь в случае резервного копирования с использованием двоичного журнала. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Когда подчиненный сервер будет работать, заставьте его забыть старую конфигурацию репликации, если он использовался в репликации раньше: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">RESET SLAVE;</span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Скопируйте данные снимка в директорию данных на подчиненном сервере (ах). Удостоверьтесь в правильности привилегий для файлов и каталогов. Пользователь, от имени которого запускается MySQL, должен иметь возможность читать и записывать данные в них так же, как и на головном сервере. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Перезапустите подчиненный(ые) сервер(ы). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Когда подчиненные сервера запустятся, выполните: </li>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">CHANGE MASTER TO MASTER_HOST='&lt;имя хоста головного сервера&gt;',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';"> MASTER_USER='&lt;имя пользователя репликации&gt;',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';"> MASTER_PASSWORD='&lt;пароль репликации&gt;',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';"> MASTER_LOG_FILE='&lt;записанное вами имя журнала&gt;',</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';"> MASTER_LOG_POS=&lt;записанная вами позиция&gt;;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">заменяя значения в &lt;&gt; значениями, соответствующими вашей системе. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запустите поток подчиненного сервера: </li></ol>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysql&gt; </span><span style=" font-family:'Courier New,courier'; font-weight:600;">SLAVE START;</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После выполнения указанных действий подчиненный(ые) сервер(ы) должен(ы) подсоединиться к головному серверу и подгонять свои данные под любые изменения, произошедшие на головном сервере после принятия образа. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если не установлен идентификатор </span><span style=" font-family:'Courier New,courier';">server</span><span style=" font-family:'Ubuntu';">-id для подчиненного сервера, в журнальный файл регистрации ошибок будет внесена следующая ошибка: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Warning: one should set server_id to a non-0 value if master_host is set.</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">The server will not act as a slave.</span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Courier New,courier';"><br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">(Предупреждение: если задан master_host, следует установить server_id в</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">ненулевое значение.</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Сервер не будет работать как подчиненный сервер.)</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если не установлен идентификатор головного сервера, подчиненные серверы не смогут подключиться к головному серверу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если подчиненный сервер по какой-либо причине не может выполнять репликацию, соответствующие сообщения об ошибках можно найти в журнале регистрации ошибок на подчиненном сервере. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После того как подчиненный сервер начнет выполнять репликацию, в той же директории, где находится журнал регистрации ошибок, появится файл </span><span style=" font-family:'Courier New,courier';">master.info</span><span style=" font-family:'Ubuntu';">. Файл </span><span style=" font-family:'Courier New,courier';">master.info</span><span style=" font-family:'Ubuntu';"> используется подчиненным сервером для отслеживания того, какие записи двоичных журналов головного сервера обработаны. Не удаляйте и не редактируйте этот файл, если не уверены в том, что это необходимо. Даже если такая уверенность есть, все равно лучше использовать команду </span><span style=" font-family:'Courier New,courier';">CHANGE MASTER TO</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">На данном этапе у вас есть снимок, который вы можете использовать для настройки и установки других подчиненных серверов. Чтобы сделать это, вам надо повторить вышеописанную процедуру в части настройки подчиненного сервера. Вам не нужно создавать еще один снимок головного сервера. </span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="replication-features"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.10.4. Возможности репликации и известные проблемы</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ниже приводится список поддерживаемых и не поддерживаемых при репликации функций: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Реплицирование будет выполнено правильно при использовании значений <span style=" font-family:'Courier New,courier';">AUTO_INCREMENT</span>, <span style=" font-family:'Courier New,courier';">LAST_INSERT_ID()</span> и <span style=" font-family:'Courier New,courier';">TIMESTAMP</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если в обновлениях присутствует функция <span style=" font-family:'Courier New,courier';">RAND()</span>, реплицирование будет выполнено некорректно. При реплицировании обновлений с функцией <span style=" font-family:'Courier New,courier';">RAND()</span> применяйте <span style=" font-family:'Courier New,courier';">RAND(some_non_rand_expr)</span>. В качестве аргумента (<span style=" font-family:'Courier New,courier';">some_non_rand_expr</span> - некоторое не случайное выражение) для функции <span style=" font-family:'Courier New,courier';">RAND()</span> можно, например, использовать функцию <span style=" font-family:'Courier New,courier';">UNIX_TIMESTAMP()</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На головном и подчиненном серверах следует использовать одинаковый набор символов (<span style=" font-family:'Courier New,courier';">--default-character-set</span>). В противном случае могут возникать ошибки дублирующихся ключей на подчиненном сервере, поскольку ключ, который считается уникальным на головном сервере, может не быть таковым при использовании другого набора символов. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В MySQL 3.23 команда <span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span> будет выполнена корректно, если файл во время выполнения обновления будет находиться на головном сервере. Команда <span style=" font-family:'Courier New,courier';">LOAD LOCAL DATA INFILE</span> будет проигнорирована. В MySQL 4.0 это ограничение не присутствует - все разновидности команды <span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span> реплицируются правильно. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запросы на обновление, в которых используются пользовательские переменные, являются не безопасными для репликации (пока). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Команды <span style=" font-family:'Courier New,courier';">FLUSH</span> не записываются в двоичный журнал и поэтому не копируются на подчиненный сервер. Проблем при этом не возникает, поскольку команды <span style=" font-family:'Courier New,courier';">FLUSH</span> ничего не изменяют. Однако это означает, что при непосредственном, без использования оператора <span style=" font-family:'Courier New,courier';">GRANT</span>, обновлении таблиц привилегий MySQL и при последующем реплицировании базы данных привилегий <span style=" font-family:'Courier New,courier';">mysql</span> нужно выполнить команду <span style=" font-family:'Courier New,courier';">FLUSH PRIVILEGES</span> на подчиненных серверах, чтобы новые привилегии вступили в силу. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Временные таблицы, начиная с версии 3.23.29, реплицируются корректно, за исключением случая, когда при прекращении работы подчиненного сервера (не только потока подчиненного сервера) некоторые временные таблицы остаются открытыми и используются в последующих обновлениях. Для решения этой проблемы перед прекращением работы подчиненного сервера выполните команду <span style=" font-family:'Courier New,courier';">SLAVE STOP</span>, проверьте, чтобы переменная <span style=" font-family:'Courier New,courier';">Slave_open_temp_tables</span> содержала значение 0, затем выполните <span style=" font-family:'Courier New,courier';">mysqladmin shutdown</span>. Если значение переменной <span style=" font-family:'Courier New,courier';">Slave_open_temp_tables</span> не 0, перезапустите поток подчиненного сервера при помощи команды <span style=" font-family:'Courier New,courier';">SLAVE START</span> и проверьте, не улучшилась ли ситуация теперь. Эта проблема будет решаться более изящно, но придется подождать MySQL 4.0. В более ранних версиях при использовании временных таблиц репликации не выполняются должным образом - в таких случаях мы рекомендуем либо обновить версию MySQL, либо перед выполнением запросов, использующих временные таблицы, выполнить команду <span style=" font-family:'Courier New,courier';">SET SQL_LOG_BIN=0</span> на своих клиентах. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">MySQL поддерживает лишь один головной и много подчиненных серверов. В 4.x будет добавлен алгоритм голосования, обеспечивающий автоматическое изменение головного сервера, если что-либо будет выполняться неправильно при текущем головном сервере. Будут также введены процессы 'агента', которые помогут выполнять распределение нагрузки путем посылки запросов на выборки различным подчиненным серверам. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Начиная с версии 3.23.26 стало безопасно соединять серверы циклическими соединениями головной-подчиненный с включенной опцией <span style=" font-family:'Courier New,courier';">log-slave-updates</span>. Однако обратите внимание: при таком способе установки многие запросы не будут выполняться корректно, если только в коде вашего клиента не предусмотрена обработка потенциальных проблем, которые могут случаться при обновлениях, происходящих в различной последовательности на различных серверах. Это означает, что если вы сделаете установку следующим образом: </li>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">A - &gt; B &gt; - C - &gt; A</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Ubuntu';">то такая установка будет работать только в том случае, если выполняются непротиворечивые обновления между таблицами. Другими словами, при вставке данных на серверах </span><span style=" font-family:'Courier New,courier';">A</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">C</span><span style=" font-family:'Ubuntu';"> нельзя вставлять на сервере </span><span style=" font-family:'Courier New,courier';">A</span><span style=" font-family:'Ubuntu';"> строку, которая может иметь ключ, противоречащий строке, вставляемой на сервере </span><span style=" font-family:'Courier New,courier';">C</span><span style=" font-family:'Ubuntu';">. Также нельзя обновлять одинаковые строки на двух серверах, если имеет значение порядок обновлений. Обратите внимание: в версии 3.23.26 изменился формат журнала. Таким образом, если версия подчиненного сервера меньше 3.23.26, сервер не сможет считывать записи из журнала. </span></p>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если запрос на подчиненном сервере вызывает ошибку, поток подчиненного сервера завершится, и в файле <span style=" font-family:'Courier New,courier';">.err</span> появится соответствующее сообщение. После этого нужно будет вручную установить соединение с подчиненным сервером, исправить причину ошибки (например обращение к несуществующей таблице) и затем выполнять SQL-команду <span style=" font-family:'Courier New,courier';">SLAVE START</span> (доступна в версии 3.23.16). При использовании версии 3.23.15 потребуется перезапустить сервер. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если соединение с головным сервером прервется, подчиненный сервер попытается сразу же восстановить его, и затем в случае неудачи будет повторять попытки через установленное в опции <span style=" font-family:'Courier New,courier';">master-connect-retry</span> количество секунд (по умолчанию 60). По этой причине безопасно выключить головной сервер и после этого перезапустить его через некоторое время. Подчиненный сервер будет также разрешать проблемы, возникающие при аварийных отключениях электричества в узлах сети. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Завершение работы подчиненного сервера (корректное) также является безопасным, поскольку при этом отслеживаются события начиная от момента остановки сервера. Но в случае некорректного отключения сервера могут возникать проблемы, особенно, если дисковый кэш не был синхронизирован перед ``смертью'' системы. Для того чтобы значительно повысить эффективность своей системы обеспечения отказоустойчивости, целесообразно приобрести хороший UPS (источник бесперебойного питания). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если головной сервер слушает нестандартный порт, это нужно будет указать также в параметре <span style=" font-family:'Courier New,courier';">master-port</span> в файле <span style=" font-family:'Courier New,courier';">my.cnf</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">В версии 3.23.15 все таблицы и базы данных могут быть реплицированы. Начиная с версии 3.23.16 появилась возможность ограничить репликацию набором баз данных при помощи директив <span style=" font-family:'Courier New,courier';">replicate-do-db</span> в файле <span style=" font-family:'Courier New,courier';">my.cnf</span>; можно также исключить набор баз данных из репликации при помощи директив <span style=" font-family:'Courier New,courier';">replicate-ignore-db</span>. Обратите внимание,: в версиях MySQL до 3.23.23, имелась ошибка, из-за которой команда <span style=" font-family:'Courier New,courier';">LOAD DATA INFILE</span> выполнялась некорректно, если она применялась к базе данных, исключенной из репликации. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Начиная с версии 3.23.16 команда <span style=" font-family:'Courier New,courier';">SET SQL_LOG_BIN = 0</span> будет выключать ведение записей о репликации в журналах (двоичных) на головном сервере, а команда <span style=" font-family:'Courier New,courier';">SET SQL_LOG_BIN = 1</span> - включать такое ведение записей. Для выполнения этих команд нужно иметь привилегию <span style=" font-family:'Courier New,courier';">SUPER</span> (в MySQL 4.0.2 и выше) или <span style=" font-family:'Courier New,courier';">PROCESS</span> (в более ранних версиях MySQL). </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Начиная с версии 3.23.19 можно убрать мусор, оставшийся после неоконченной репликации (если ее выполнение пошло не должным образом), и начать все сначала, используя команды <span style=" font-family:'Courier New,courier';">FLUSH MASTER</span> и <span style=" font-family:'Courier New,courier';">FLUSH SLAVE</span>. В версии 3.23.26 эти команды переименованы в RESET MASTER и RESET SLAVE соответственно - чтобы сделать понятным их назначение. Тем не менее, старые варианты <span style=" font-family:'Courier New,courier';">FLUSH</span> все еще работают - для обеспечения совместимости. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Начиная с версии 3.23.23 можно заменять головные серверы и корректировать точку положения в журнале репликации при помощи команды <span style=" font-family:'Courier New,courier';">CHANGE MASTER TO</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Начиная с версии 3.23.23 можно при помощи опции <span style=" font-family:'Courier New,courier';">binlog-ignore-db</span> уведомлять головной сервер о том, что обновления в некоторых базах данных не должны отражаться в двоичном журнале. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Начиная с версии 3.23.26, можно использовать опцию <span style=" font-family:'Courier New,courier';">replicate-rewrite-db</span> для уведомления подчиненного сервера о том, что он должен применить обновления базы данных на головном сервере к базе данных с другим именем на подчиненном сервере. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Начиная с версии 3.23.28 можно использовать команду <span style=" font-family:'Courier New,courier';">PURGE MASTER LOGS TO 'имя-журнала'</span>, чтобы избавиться от старых журналов без завершения работы подчиненного сервера. Это удалит все журналы до, но не включая <span style=" font-family:'Courier New,courier';">log-name</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Из-за того, что по своей природе таблицы <span style=" font-family:'Courier New,courier';">MyISAM</span> являются нетранзакционными, может случиться так, что запрос обновит таблицу только частично и возвратит код ошибки. Это может произойти, например, при вставке нескольких строк, одна из которых нарушает ограничение ключа, или в случае, когда длинный запрос обновления ``убивается'' после обновления некоторых строк. Если такое случится на головном сервере, поток подчиненного сервера завершит работу и будет ждать, пока администратор базы данных не примет решение о том, что делать в этом случае (если только код ошибки не является легитимным и в результате выполнения запроса не будет сгенерирована ошибка с тем же кодом). Если такой способ проверки правильности кода ошибки нежелателен, начиная с версии 3.23.47, некоторые (или все) ошибки могут быть замаскированы при помощи опции <span style=" font-family:'Courier New,courier';">slave-skip-errors</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Отдельные таблицы могут исключаться из репликации при помощи опции <span style=" font-family:'Courier New,courier';">replicate-do-table</span>/<span style=" font-family:'Courier New,courier';">replicate-ignore-tab</span> или опции <span style=" font-family:'Courier New,courier';">replicate-wild-do-table</span>/<span style=" font-family:'Courier New,courier';">replicate-wild-ignore-table</span>. Однако в настоящее время наличие определенных конструктивных неточностей в некоторых довольно редких случаях может приводить к неожиданным результатам. Протокол репликации явно не уведомляет подчиненный сервер о том, какие таблицы должны быть изменены запросом, поэтому подчиненному серверу требуется анализировать запрос, чтобы узнать это. Чтобы избежать лишнего синтаксического анализа, для которого требуется прерывать выполнение запросов, исключение таблицы в настоящее время реализуется путем посылки запроса к стандартному анализатору MySQL для упрощенного синтаксического анализа. Если анализатор обнаружит, что таблица должна игнорироваться, выполнение запроса будет остановлено и выдано сообщение об успехе. Этот подход несколько неэффективен, при его применении чаще возникают ошибки и, кроме того, имеются две известные ошибки в версии 3.23.49. Первая может возникнуть из-за того, что поскольку анализатор автоматически открывает таблицу при анализе некоторых запросов, игнорируемая таблица должна существовать на подчиненном сервере. Другая ошибка заключается в том, что при частичном обновлении игнорируемой таблицы поток подчиненного сервера не заметит, что таблица должна игнорироваться, и приостановит процесс репликации. Несмотря на то что вышеупомянутые ошибки концептуально очень просто исправить, для этого придется изменить достаточно много кода, что поставит под угрозу состояние стабильности ветви 3.23. Если описанные случаи непосредственно имеют отношение к вашему приложению (а это довольно редкий случай) - используйте опцию <span style=" font-family:'Courier New,courier';">slave-skip-errors</span>, чтобы дать указание серверу продолжать репликации, игнорируя эти ошибки. </li></ul>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="replication-options"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.10.5. Опции репликации в файле </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">my.cnf</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Для использования репликации рекомендуется MySQL 3.23.33 или выше. С более ранними версиями тоже можно работать, но в них имеются ошибки и отсутствуют некоторые возможности. Если у вас не самая последняя версия MySQL, то в ней может не оказаться некоторых из упомянутых в данном разделе опций. Все опции, появившиеся в ветви 4.0, сопровождаются примечанием, в котором это указано. В противном случае, если интересующая вас опция не присутствует в версии 3.23, но действительно необходима, пожалуйста, замените версию на самую новую ветвь 3.23. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Не следует забывать о том, что ветвь 4.0 все еще находится в стадии альфа-разработки, поэтому некоторые функции могут работать не так гладко, как хотелось бы. Новые возможности, появившиеся в 4.0, рекомендуется использовать так, чтобы в случае возникновения проблемы не нарушилась работа приложения. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Как на головном, так и на подчиненном серверах нужно использовать опцию </span><span style=" font-family:'Courier New,courier';">server-id</span><span style=" font-family:'Ubuntu';">. Она устанавливает уникальный идентификатор репликации. Нужно выбрать уникальное значение из диапазона от 1 до 2^32-1 для каждого головного и подчиненного сервера, например: </span><span style=" font-family:'Courier New,courier';">server-id=3</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В следующей таблице представлены опции, которые можно использовать для головного сервера. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Опция</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">log-bin=filename</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указывает местоположение двоичного журнала обновлений, в котором будут вестись записи. Обратите внимание: если передаваемый параметр имеет расширение (например </span><span style=" font-family:'Courier New,courier';">log-bin=/mysql/logs/replication.log</span><span style=" font-family:'Ubuntu';">), то в случае вызова команды </span><span style=" font-family:'Courier New,courier';">FLUSH LOGS</span><span style=" font-family:'Ubuntu';"> версии MySQL ниже 3.23.24 не будут правильно работать во время репликации. Эта проблема устранена в версии 3.23.25. Теперь, если используется такой способ определения имени журнала, команда </span><span style=" font-family:'Courier New,courier';">FLUSH LOGS</span><span style=" font-family:'Ubuntu';"> для двоичных журналов будет игнорироваться. Для очистки журнала выполните команду </span><span style=" font-family:'Courier New,courier';">FLUSH MASTER</span><span style=" font-family:'Ubuntu';"> и не забудьте запустить команду </span><span style=" font-family:'Courier New,courier';">FLUSH SLAVE</span><span style=" font-family:'Ubuntu';"> на всех подчиненных серверах. В версии 3.23.26 или выше нужно использовать для этого команды </span><span style=" font-family:'Courier New,courier';">RESET MASTER</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">RESET SLAVE</span><span style=" font-family:'Ubuntu';"> Вы можете использовать эту опци. если вы хотите иметь имя, которое будет независимо от имени хоста (может быть полезно, скажем, если вы переименуете ваш сервер в один прекрасный день).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">log-bin-index=filename</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Так как пользователь может выполнять команду </span><span style=" font-family:'Courier New,courier';">FLUSH LOG</span><span style=" font-family:'Ubuntu';">, нужно знать, какой журнал является активным в настоящее время, а также какие журналы использовались ранее и в какой последовательности они сменялись. Эта информация сохранена в индексном файле двоичного журнала, имя которого по умолчанию </span><span style=" font-family:'Courier New,courier';">имя_хоста.index</span><span style=" font-family:'Ubuntu';">. Имя и содержимое данного файла не следует изменять. Пример: </span><span style=" font-family:'Courier New,courier';">log-bin-index=db.index</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">sql-bin-update-same</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если включена данная опция, то при установке значения переменной </span><span style=" font-family:'Courier New,courier';">SQL_LOG_BIN</span><span style=" font-family:'Ubuntu';"> это же значение будет автоматически установлено и для переменной </span><span style=" font-family:'Courier New,courier';">SQL_LOG_UPDATE</span><span style=" font-family:'Ubuntu';">, и наоборот.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">binlog-do-db=database_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указывает головному серверу, что он должен вести записи об обновлениях в двоичном журнале, если текущая база данных - </span><span style=" font-family:'Courier New,courier';">database_name</span><span style=" font-family:'Ubuntu';">. Все другие базы данных игнорируются. Обратите внимание: при использовании этой опции вы должны быть уверены, что обновления будут производиться только в текущей базе данных. Пример: </span><span style=" font-family:'Courier New,courier';">binlog-do-db=sales</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">binlog-ignore-db=database_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указывает головному серверу, что если текущая база данных - </span><span style=" font-family:'Courier New,courier';">database_name</span><span style=" font-family:'Ubuntu';">, то записи об обновлениях не должны вестись в двоичном журнале. Обратите внимание: при использовании этой опции вы должны быть уверены, что обновления будут производиться только в текущей базе данных. Пример: </span><span style=" font-family:'Courier New,courier';">binlog-ignore-db=accounting</span></p></td></tr></table>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В следующей таблице представлены опции, которые можно использовать для подчиненного сервера: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Опция</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">master-host=host</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя хоста головного сервера или IP-адрес для репликации. Если значение этой опции не установлено, поток подчиненного сервера не будет запущен. Обратите внимание: установка </span><span style=" font-family:'Courier New,courier';">master-host</span><span style=" font-family:'Ubuntu';"> будет игнорироваться, если существует корректный файл </span><span style=" font-family:'Courier New,courier';">master.info</span><span style=" font-family:'Ubuntu';">. Возможно, лучше было бы назвать эти опции как-нибудь иначе, что-то вроде </span><span style=" font-family:'Courier New,courier';">bootstrap-master-host</span><span style=" font-family:'Ubuntu';">, но менять их имена уже поздно. Пример: </span><span style=" font-family:'Courier New,courier';">master-host=db-master.mycompany.com</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">master-user=username</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя пользователя, которое подчиненный сервер будет использовать для аутентификации при подсоединении к головному серверу. Пользователь должен иметь привилегию </span><span style=" font-family:'Courier New,courier';">FILE</span><span style=" font-family:'Ubuntu';">. Если пользователь головного сервера не установлен, будет использовано имя пользователя </span><span style=" font-family:'Courier New,courier';">test</span><span style=" font-family:'Ubuntu';">. Если удастся считать значение из файла </span><span style=" font-family:'Courier New,courier';">master.info</span><span style=" font-family:'Ubuntu';">, то оно будет иметь больший приоритет. Пример: </span><span style=" font-family:'Courier New,courier';">master-user=scott</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">master-password=password</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пароль, который будет использоваться при подсоединении подчиненного сервера к головному серверу. Если этот пароль не установлен, будет использоваться пустой пароль. Если удастся считать значение из файла </span><span style=" font-family:'Courier New,courier';">master.info,</span><span style=" font-family:'Ubuntu';"> то оно будет иметь больший приоритет. Пример: </span><span style=" font-family:'Courier New,courier';">master-password=tiger</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">master-port=portnumber</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Порт, который слушает головной сервер. Если не он не установлен, используется откомпилированная установка </span><span style=" font-family:'Courier New,courier';">MYSQL_PORT</span><span style=" font-family:'Ubuntu';">. Это должно быть значение </span><span style=" font-family:'Courier New,courier';">3306</span><span style=" font-family:'Ubuntu';">, если оно не было изменено при помощи опций </span><span style=" font-family:'Courier New,courier';">configure</span><span style=" font-family:'Ubuntu';">. Если удастся считать значение из файла </span><span style=" font-family:'Courier New,courier';">master.info</span><span style=" font-family:'Ubuntu';">, то оно будет иметь больший приоритет Пример: </span><span style=" font-family:'Courier New,courier';">master-port=3306</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">master-connect-retry=seconds</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Время ожидания в секундах для потока подчиненного сервера перед повторением попытки установить связь с головным сервером в случае прекращения работы головного сервера или потери связи. По умолчанию - 60. Пример: </span><span style=" font-family:'Courier New,courier';">master-connect-retry=60</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">master-ssl</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Доступна для версий выше 4.0.0. Включает SSL для репликации. Это относительно новая опция, поэтому применять ее следует осторожно. Пример: </span><span style=" font-family:'Courier New,courier';">master-ssl</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">master-ssl-key</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Доступна для версий выше 4.0.0. Имя файла-ключа SSL на головном сервере. Используется только в том случае, если включена опция </span><span style=" font-family:'Courier New,courier';">master-ssl</span><span style=" font-family:'Ubuntu';">. Пример: </span><span style=" font-family:'Courier New,courier';">master-ssl-key=SSL/master-key.pem</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">master-ssl-cert</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Доступна для версий выше 4.0.0. Имя файла-сертификата SSL. Используется только в том случае, если включена опция </span><span style=" font-family:'Courier New,courier';">master-ssl</span><span style=" font-family:'Ubuntu';">. Пример: </span><span style=" font-family:'Courier New,courier';">master-ssl-key=SSL/master-cert.pem</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">master-info-file=filename</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Местоположение файла, в который записывается информация о том, где на головном сервере произошла остановка во время выполнения репликации. По умолчанию это файл </span><span style=" font-family:'Courier New,courier';">master.info</span><span style=" font-family:'Ubuntu';"> в директории данных. Изменять это местоположение нет необходимости. Пример: </span><span style=" font-family:'Courier New,courier';">master-info-file=master.info</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">report-host</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Доступна для версий выше 4.0.0. Имя хоста или IP-адрес подчиненного сервера, который передается головному серверу во время регистрации подчиненного сервера. Может быть выведен командой </span><span style=" font-family:'Courier New,courier';">SHOW SLAVE HOSTS</span><span style=" font-family:'Ubuntu';">. Не устанавливайте эту опцию, если не хотите, чтобы подчиненный сервер регистрировался на головном сервере. Обратите внимание: для того, чтобы головной сервер установил соединение с подчиненным сервером, ему недостаточно просто получить IP-адрес подчиненного сервера из соединения. Из-за </span><span style=" font-family:'Courier New,courier';">NAT</span><span style=" font-family:'Ubuntu';"> и других проблем маршрутизации IP-адрес может быть недопустимым для подсоединения головного сервера или других хостов к подчиненному серверу. Пример: </span><span style=" font-family:'Courier New,courier';">report-host=slave1.mycompany.com</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">report-port</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Доступна для версий выше 4.0.0. Порт для соединения с подчиненным сервером, имя хоста или IP-адрес которого были переданы головному серверу при регистрации подчиненного сервера. Порт нужно устанавливать лишь в том случае, когда подчиненный сервер слушает порт, который задан не по умолчанию, или если имеется специальный тоннель от головного сервера или других клиентов к подчиненному серверу. Не используйте эту опцию, если не уверены в своих действиях.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">replicate-do-table=db_name.table_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сообщает подчиненному серверу, что он должен реплицировать только указанную таблицу. Для указания более чем одной таблицы директиву следует использовать несколько раз, по одному разу для каждой таблицы. В отличие от </span><span style=" font-family:'Courier New,courier';">replicate-do-db</span><span style=" font-family:'Ubuntu';">, данную опцию можно применять для обновлений, в которых используется несколько баз данных. Пример: </span><span style=" font-family:'Courier New,courier';">replicate-do-table=some_db.some_table</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">replicate-ignore-table=db_name.table_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указывает подчиненному серверу, что команды, обновляющие эту таблицу, не должны реплицироваться. Для указания более чем одной таблицы директиву следует задавать несколько раз, по одному разу для каждой таблицы. В отличие от </span><span style=" font-family:'Courier New,courier';">replicate-do-db</span><span style=" font-family:'Ubuntu';">, данную опцию можно применять для обновлений, в которых используется несколько баз данных. Пример: </span><span style=" font-family:'Courier New,courier';">replicate-ignore-table=db_name.some_table</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">replicate-wild-do-table=db_name.table_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указывает подчиненному серверу, что должны реплицироваться только те запросы, где хоть одна из таблиц удовлетворяет указанном шаблону. Для указания более чем одной таблицы директиву следует задавать несколько раз, по одному разу для каждой таблицы. Данную опцию можно применять для обновлений, в которых используется несколько баз данных. Пример: при использовании </span><span style=" font-family:'Courier New,courier';">replicate-wild-do-table=foo%.bar%</span><span style=" font-family:'Ubuntu';"> будут реплицироваться обновления только таблиц с именами, начинающимися с ``bar'', которые находятся в базах данных, с именами, начинаются с ``foo''. Заметьте, что если вы используете </span><span style=" font-family:'Courier New,courier';">replicate-wild-do-table=foo%.%</span><span style=" font-family:'Ubuntu';"> тогда это правило также распространяется и на </span><span style=" font-family:'Courier New,courier';">CREATE DATABASE</span><span style=" font-family:'Ubuntu';"> и на </span><span style=" font-family:'Courier New,courier';">DROP DATABASE</span><span style=" font-family:'Ubuntu';">, т.е. эти два выражения также будут реплицированы если имя базы данных совпадет с шаблоном (</span><span style=" font-family:'Courier New,courier';">'foo%'</span><span style=" font-family:'Ubuntu';"> в этом примере; это получается из-за того, что символ </span><span style=" font-family:'Courier New,courier';">%</span><span style=" font-family:'Ubuntu';"> становится шаблонным).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">replicate-wild-ignore-table=db_name.table_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указывает подчиненному серверу, запросы, где используется одна из перечисленных здесь таблиц, реплицироваться не должны. Для указания более чем одной подлежащей игнорированию таблицы директиву следует задавать несколько раз, по одному разу для каждой таблицы. Данную опцию можно применять для обновлений, в которых используется несколько баз данных. Например, при использовании </span><span style=" font-family:'Courier New,courier';">replicate-wild-do-table=foo%.bar%</span><span style=" font-family:'Ubuntu';"> не будут реплицироваться обновления всех таблиц, начинающихся на ``bar'', в базах данных, имена которых начинаются на ``foo''.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">replicate-ignore-db=database_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сообщает подчиненному серверу, что не следует реплицировать ни один запрос, в котором текущая база данных - </span><span style=" font-family:'Courier New,courier';">database_name</span><span style=" font-family:'Ubuntu';">. Чтобы указать более одной базы данных, директиву следует использовать несколько раз, по одному разу для каждой базы данных. Вы не должны использовать эту директиву, если вы используете кросс-табличные обновления, и не хотите чтобы эти обновления реплицировались. Основная причина такого поведения заключается в том, что очень трудно из самой команды понять, должен ли этот запрос реплицироваться или нет. Например, если вы используете многотабличное удаление или многотабличное обновление в MySQL 4.x, которое охватывает более чем одну базу данных. Кроме того, достаточно быстро можно проверить, является ли текущая база данных соответствующей, т.к. эта проверка выполняется только на момент соединения или смены базы данных. Если такие обновления необходимо производить, убедитесь, что у вас установлена версия MySQL 3.23.28 или выше и используйте </span><span style=" font-family:'Courier New,courier';">replicate-ignore-db=db_name.%</span><span style=" font-family:'Ubuntu';">. Пример: </span><span style=" font-family:'Courier New,courier';">replicate-ignore-db=some_db</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">replicate-do-db=database_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сообщает подчиненному серверу, что реплицироваться должна только указанная база данных. Чтобы указать более одной базы данных, директиву следует использовать несколько раз, по одному разу для каждой базы данных. Заметьте, что не будут реплицироваться обновления, охватывающие несколько баз данных, такие как </span><span style=" font-family:'Courier New,courier';">UPDATE some_db.some_table SET foo='bar'</span><span style=" font-family:'Ubuntu';"> при том, что выбрана другая база данных или не выбрана вовсе. Если такие обновления необходимо производить, убедитесь, что у вас установлена версия MySQL 3.23.28 или выше и используйте </span><span style=" font-family:'Courier New,courier';">replicate-wild-do-table=db_name.%</span><span style=" font-family:'Ubuntu';">. Пример: </span><span style=" font-family:'Courier New,courier';">replicate-do-db=some_db</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">log-slave-updates</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указывает подчиненному серверу, чтобы тот вел записи об обновлениях, происходящих на подчиненном сервере, в двоичном журнале. По умолчанию эта опция выключена. Ее следует включить, если требуется организовать подчиненные серверы в гирляндную цепь.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">replicate-rewrite-db=from_name-&gt;to_name</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обновления производятся не в подлинную базу данных, а в базу данных с именем, указанным в опции. Пример: </span><span style=" font-family:'Courier New,courier';">replicate-rewrite-db=master_db_name-&gt;slave_db_name</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">slave-skip-errors= [err_code1,err_code2,... | all]</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Доступна только в версии 3.23.47 и выше. Сообщает потоку подчиненного сервера, что он должен продолжать репликацию, если запрос возвращает ошибку, указанную в списке. Обычно при возникновении ошибки выполнение реплицирование прекращается, чтобы пользователь мог вручную исправить несоответствия в данных. Не используйте данную опцию, если вы до конца не разобрались в причинах возникновения ошибок. Если не было допущено ошибок при установке репликации, нет ошибок в клиентских программах и нет никаких ошибок непосредственно в MySQL, то прекращения работы из-за ошибки происходить не должно. Неразборчивое применение данной опции может привести к тому, что подчиненный сервер окажется безнадежно не синхронизированным с головным сервером, и вы будете тщетно ломать себе голову над тем, каким образом это случилось. Код ошибок можно получить в сообщениях об ошибках в журнале ошибок и в выводе команды </span><span style=" font-family:'Courier New,courier';">SHOW SLAVE STATUS</span><span style=" font-family:'Ubuntu';">. Полный список сообщений об ошибках можно найти в файле исходного дистрибутива </span><span style=" font-family:'Courier New,courier';">Docs/mysqld_error.txt</span><span style=" font-family:'Ubuntu';">. Можно также (но не нужно) использовать значение </span><span style=" font-family:'Courier New,courier';">all</span><span style=" font-family:'Ubuntu';"> (хотя этого делать настоятельно не рекомендуется) - тогда будут игнорироваться все сообщения об ошибках и за процессом переброски данных наблюдения не будет. Само собой разумеется, при использовании этой опции целостность данных ставится под угрозу. В этом случае просьба не жаловаться, если данные на подчиненном сервере не будут соответствовать данным на головном сервере, - вас предупреждали. Пример: </span><span style=" font-family:'Courier New,courier';">slave-skip-errors=1062,1053</span><span style=" font-family:'Ubuntu';"> или </span><span style=" font-family:'Courier New,courier';">slave-skip-errors=all</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">skip-slave-start</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указывает компьютеру, на котором установлен подчиненный сервер, что при его запуске не должен запускаться подчиненный сервер. Пользователь может запустить его позже при помощи команды </span><span style=" font-family:'Courier New,courier';">SLAVE START</span><span style=" font-family:'Ubuntu';">.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">slave_compressed_protocol=#</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если 1, то использовать сжание в клиент/серверном протоколе связи, если оба, и сервер и клиент, поддерживают сжатие.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">slave_net_timeout=#</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Время ожидания (в секундах) дополнительных данных от головного сервера, после чего чтение будет прервано.</span></p></td></tr></table>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="replication-sql"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.10.6. SQL-команды, относящиеся к репликации</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Управление репликацией производится командами SQL. Ниже приводится краткое описание команд: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Команда</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SLAVE START</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Запускает поток подчиненного сервера (подчиненный сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SLAVE STOP</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Завершает поток подчиненного сервера. Также как и </span><span style=" font-family:'Courier New,courier';">SLAVE START</span><span style=" font-family:'Ubuntu';">, этот оператор можно использовать с опциями </span><span style=" font-family:'Courier New,courier';">IO_THREAD</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">SQL_THREAD</span><span style=" font-family:'Ubuntu';">. (подчиненный сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SET SQL_LOG_BIN=0</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Блокирует ведение записей в журналах обновлений, если пользователь имеет привилегию </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';">. В противном случае ничего не выполняет (головной сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SET SQL_LOG_BIN=1</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Отменяет блокировку ведения записей в журналах обновлений, если пользователь имеет привилегию </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';">. В противном случае ничего не выполняет (головной сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SET GLOBAL SQL_SLAVE_SKIP_COUNTER=n</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пропускает последующие n событий на головном сервере. Опция допустима, если поток подчиненного сервера не запущен, в противном случае будет выдана ошибка. Полезна для восстановления после сбоев репликации.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">RESET MASTER</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Удаляет все двоичные журналы, перечисленные в индексном файле, и делает индексный файл двоичных журналов пустым. Для версий ниже 3.23.26 используйте команду </span><span style=" font-family:'Courier New,courier';">FLUSH SLAVE</span><span style=" font-family:'Ubuntu';"> (головной сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">RESET SLAVE</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заставляет подчиненный сервер &quot;забыть&quot; свою точку положения репликации в журналах головного сервера. Для версий ниже 3.23.26 эта команда называется </span><span style=" font-family:'Courier New,courier';">FLUSH SLAVE</span><span style=" font-family:'Ubuntu';"> (подчиненный сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">LOAD TABLE tblname FROM MASTER</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Загружает копию таблицы из головного на подчиненный сервер. Используется главным образом для отладки команды </span><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span><span style=" font-family:'Ubuntu';">, но некоторые &quot;пользователи-гурманы&quot; могут найти ей и другие применения. Если вы относите себя к числу обычных, не отягощенных хакерскими амбициями пользователей, данную опцию применять не стоит. Требуется, чтобы у пользователя репликации, использущегося в соединении с головным сервером, присутствовали привилегии </span><span style=" font-family:'Courier New,courier';">RELOAD</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';"> на головном сервере. (подчиненный сервер).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Присутствует в версиях выше 4.0.0. Создает образ головного сервера и копирует его на подчиненный сервер. Требуется, чтобы у пользователя репликации, использущегося в соединении с головным сервером, присутствовали привилегии </span><span style=" font-family:'Courier New,courier';">RELOAD</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">SUPER</span><span style=" font-family:'Ubuntu';"> на головном сервере. Обновляет значения </span><span style=" font-family:'Courier New,courier';">MASTER_LOG_FILE</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">MASTER_LOG_POS</span><span style=" font-family:'Ubuntu';"> таким образом, чтобы подчиненный сервер начинал репликацию из конкретной позиции. Будет обрабатывать ограничения таблиц и баз данных, указанные в опциях </span><span style=" font-family:'Courier New,courier';">replicate-*</span><span style=" font-family:'Ubuntu';">. При этом, пока происходит создание образа, могут использоваться лишь таблицы </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> и требуется глобальная блокировка чтения на головном сервере. В будущем планируется обеспечить работу этой команды с таблицами </span><span style=" font-family:'Courier New,courier';">InnoDB</span><span style=" font-family:'Ubuntu';"> и устранить необходимость глобальной блокировки чтения при помощи интерактивного резервного копирования, не требующего блокировки. Заметьте, </span><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Ubuntu'; font-weight:600;">НЕ</span><span style=" font-family:'Ubuntu';"> копирует ни одну таблицу в базе данных mysql. Это сделано для того, чтобы было легко управлять разными пользователями на головном и подчиненном серверах.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHANGE MASTER TO master_def_list</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Заменяет параметры головного сервера значениями, заданными в списке </span><span style=" font-family:'Courier New,courier';">master_def_list</span><span style=" font-family:'Ubuntu';">, и перезапускает поток подчиненного сервера. </span><span style=" font-family:'Courier New,courier';">master_def_list</span><span style=" font-family:'Ubuntu';"> - это список с разделителем-запятой, содержащий значения </span><span style=" font-family:'Courier New,courier';">master_def</span><span style=" font-family:'Ubuntu';">, где </span><span style=" font-family:'Courier New,courier';">master_def</span><span style=" font-family:'Ubuntu';"> - одно из следующих значений: </span><span style=" font-family:'Courier New,courier';">MASTER_HOST, MASTER_USER, MASTER_PASSWORD, MASTER_PORT, MASTER_CONNECT_RETRY, MASTER_LOG_FILE, MASTER_LOG_POS</span><span style=" font-family:'Ubuntu';">. Например: </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHANGE MASTER TO</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">   MASTER_HOST='master2.mycompany.com',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">   MASTER_USER='replication',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">   MASTER_PASSWORD='bigs3cret',</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">   MASTER_PORT=3306,</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">   MASTER_LOG_FILE='master2-bin.001',</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">   MASTER_LOG_POS=4;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Следует указывать только те значения, которые подлежат изменению. Не указанные значения останутся неизменными, за исключением тех случаев, когда изменяется хост или порт. В этом случае подчиненный сервер считает, что поскольку изменяется хост или порт, головной сервер становится другим. Следовательно, старые значения и точки положения в журнале будут автоматически заменены на значение пустой строки и </span><span style=" font-family:'Courier New,courier';">0</span><span style=" font-family:'Ubuntu';"> соответственно (начальные значения). Обратите внимание: если подчиненный сервер перезапускается, он сохраняет &quot;память&quot; о своем последнем головном сервере. Если это нежелательно, можно перед перезапуском удалить файл </span><span style=" font-family:'Courier New,courier';">master.info</span><span style=" font-family:'Ubuntu';"> - тогда подчиненный сервер будет считывать информацию о своем головном сервере из файла </span><span style=" font-family:'Courier New,courier';">my.cnf</span><span style=" font-family:'Ubuntu';"> или из командной строки. Эта команда используется для настройки подчиненного сервера при наличии образа головного сервера, а также записей из журнала и сдвига головного сервера, которые соответствуют образу. Можно выполнить команду </span></p>
<p style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">CHANGE MASTER TO</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">   MASTER_LOG_FILE='log_name_on_master',</span></p>
<p style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">   MASTER_LOG_POS=log_offset_on_master </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">на подчиненном сервере после восстановления образа (подчиненный сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW MASTER STATUS</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводит информацию о состоянии головного сервера, исходя из информации в двоичных журналах (головной сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW SLAVE HOSTS</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Присутствует в версии 4.0.0 и выше. Выводит список подчиненных серверов, связанных в текущее время с головным сервером (подчиненный сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW SLAVE STATUS</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Выводит информацию о состоянии существенных параметров потока подчиненного сервера (головной сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW MASTER LOGS</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Присутствует только начиная с версии 3.23.28. Выводит список двоичных журналов головного сервера. Эту команду следует использовать перед вызовом команды </span><span style=" font-family:'Courier New,courier';">PURGE MASTER LOGS TO</span><span style=" font-family:'Ubuntu';"> для определения того, какие из журналов можно удалить (головной сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW BINLOG EVENTS [ IN 'logname' ] [ FROM pos ] [LIMIT [offset,] rows ]</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Показывает события в двоичном журнале обновлений. Преимущественно применяется для тестирования/отладки, но может также использоваться и для обычных клиентов, по какой-либо причине нуждающихся в чтении содержимого двоичных журналов (головной сервер).</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW NEW MASTER FOR SLAVE WITH MASTER_LOG_FILE='logfile' AND MASTER_LOG_POS=pos AND MASTER_LOG_SEQ=log_seq AND MASTER_SERVER_ID=server_id</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда используется, когда подчиненному серверу, связанному с головным сервером, который, возможно, является &quot;мертвым&quot; или недоступным, нужно отключить репликации на другом подчиненном сервере, связанном с тем же головным сервером. Команда возвратит пересчитанные координаты репликации (имя файла журнала и позицию в нем), и вывод этой команды может использоваться в последующей команде </span><span style=" font-family:'Courier New,courier';">CHANGE MASTER TO</span><span style=" font-family:'Ubuntu';">. Обычным пользователям данная команда, как правило, никогда не понадобится: она главным образом служит для внутреннего использования в отказобезопасном репликационном коде. В будущем возможны изменения синтаксиса опции, если будет найден более интуитивно понятный способ описания этой операции.</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PURGE MASTER LOGS TO 'logname'</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Присутствует начиная с версии 3.23.28. Удаляет все журналы репликации, которые перечислены в индексном файле журналов до передаваемого журнала, и удаляет их из индексного файла журналов. Таким образом передаваемый журнал становится первым в индексном файле журналов. Пример: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PURGE MASTER LOGS TO 'mysql-bin.010'</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда не выполнит никаких действий и возвратит ошибку, если имеется активный подчиненный сервер, который в текущее время читает данные из одного из журналов, который должен быть удален. Однако если имеется бездействующий подчиненный сервер и происходит удаление одного из журналов, который он хочет прочитать, то после того, как подчиненный сервер &quot;поднимется&quot;, он станет неспособным к репликации. Команда может быть безопасно выполнена на подчиненных серверах во время процесса репликации - не нужно останавливать процесс. Сначала необходимо проверить все подчиненные серверы при помощи команды </span><span style=" font-family:'Courier New,courier';">SHOW SLAVE STATUS</span><span style=" font-family:'Ubuntu';">, чтобы увидеть, какой журнал используется, затем вывести список журналов головного сервера при помощи команды </span><span style=" font-family:'Courier New,courier';">SHOW MASTER LOGS</span><span style=" font-family:'Ubuntu';">, найти самый ранний журнал среди всех подчиненных серверов (если все подчиненные серверы получили последние обновления, это будет последний журнал в списке), сделать резервные копии всех журналов, которые должны быть удалены (необязательно), и очистить все до целевого журнала.</span></p></td></tr></table>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="replication-faq"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.10.7. Часто задаваемые вопросы по репликации</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Вопрос:</span><span style=" font-family:'Ubuntu';"> Как сконфигурировать подчиненный сервер, если головной сервер уже запущен, и я не хочу его останавливать? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Ответ:</span><span style=" font-family:'Ubuntu';"> Есть несколько возможностей. Если имеется резервная копия головного сервера в некоторой точке, имя двоичного журнала и сдвиг (от вывода </span><span style=" font-family:'Courier New,courier';">SHOW MASTER STATUS</span><span style=" font-family:'Ubuntu';">), соответствующий образу, выполните следующие действия: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Удостоверьтесь, что подчиненному серверу назначен уникальный идентификатор. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Выполните команды <span style=" font-family:'Courier New,courier';">CHANGE MASTER TO MASTER_HOST='master-host-name', MASTER_USER='master-user-name', MASTER_PASSWORD='master-pass', MASTER_LOG_FILE='recorded-log-name', MASTER_LOG_POS=recorded_log_pos</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Выполните команду <span style=" font-family:'Courier New,courier';">SLAVE START</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если нет резервной копии головного сервера, существует быстрый способ создать ее в той же последовательности действий: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">FLUSH TABLES WITH READ LOCK</span><span style=" font-family:'Ubuntu';"> </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">gtar zcf /tmp/backup.tar.gz /var/lib/mysql</span> (или разновидность данной команды) </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SHOW MASTER STATUS</span> - удостоверьтесь в том что вывод этой команды сохранен - он пригодится позже </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">UNLOCK TABLES</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После этого следуйте инструкциям для случая, когда имеется образ, имя двоичного журнала и сдвиг. Можно использовать один и тот же образ для конфигурации нескольких подчиненных серверов. Пока существуют двоичные журналы головного сервера, установить подчиненный сервер можно через несколько дней, а то и через месяц - при наличии образа головного сервера. Теоретически промежуток ожидания может быть бесконечным. На практике существуют два ограничения - дисковое пространство головного сервера, которое будет занято старыми журналами, и время, которое потребуется подчиненному серверу, чтобы догнать головной сервер. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В версии 4.0.0 и выше можно также использовать команду </span><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span><span style=" font-family:'Ubuntu';">. Это удобная команда, которая создает образ, восстанавливает его на подчиненном сервере и сразу же корректирует имя журнала и сдвиг на подчиненном сервере. Именно команду </span><span style=" font-family:'Courier New,courier';">LOAD DATA FROM MASTER</span><span style=" font-family:'Ubuntu';"> можно рекомендовать как способ установки подчиненного сервера. Имейте в виду, однако, что при использовании данной команды чтение может быть блокировано на долгое время. В настоящее время эта команда еще не реализована настолько эффективно, как бы нам хотелось. Если имеются большие таблицы, пока лучше использовать локальный архив tar после выполнения команды </span><span style=" font-family:'Courier New,courier';">FLUSH TABLES WITH READ LOCK</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">В</span><span style=" font-family:'Ubuntu';">: Должен ли подчиненный сервер постоянно быть подсоединен к головному серверу? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">О</span><span style=" font-family:'Ubuntu';">: Нет, не должен. Можно прекращать работу подчиненного сервера или оставлять его отсоединенным на несколько часов или даже дней, затем повторно подгонять подчиненный сервер к произошедшим обновлениям, и затем снова отсоединять или останавливать его на некоторое время. Таким образом можно, например, использовать установку &quot;головной-подчиненный&quot; через коммутационную связь, работающую в течение коротких периодов времени. При такой реализации, однако, нельзя гарантировать, что в какое-либо заданное время подчиненный сервер будет синхронизирован с головным сервером, если вы для этого не примете специальных мер. В будущем будет добавлена опция для блокировки головного сервера до тех пор, пока хотя бы один подчиненный сервер находится в синхронизации с ним. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">В</span><span style=" font-family:'Ubuntu';">: Как заставить головной сервер блокировать обновления, пока происходит соединение с подчиненным сервером? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">О</span><span style=" font-family:'Ubuntu';">: Выполните следующие команды: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Головной сервер: <span style=" font-family:'Courier New,courier';">FLUSH TABLES WITH READ LOCK</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Головной сервер: <span style=" font-family:'Courier New,courier';">SHOW MASTER STATUS</span> - запомните имя журнала и сдвиг </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Подчиненный сервер: <span style=" font-family:'Courier New,courier';">SELECT MASTER_POS_WAIT('recorded_log_name', recorded_log_offset</span>) После выполнения этой команды подчиненный сервер будет синхронизирован с головным сервером </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Головной сервер: <span style=" font-family:'Courier New,courier';">UNLOCK TABLES</span> - теперь головной сервер может продолжить обновления. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">В</span><span style=" font-family:'Ubuntu';">: Почему иногда после перезапуска подчиненного сервера я вижу более одного потока </span><span style=" font-family:'Courier New,courier';">Binlog_Dump</span><span style=" font-family:'Ubuntu';"> на головном сервере? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">О:</span><span style=" font-family:'Ubuntu';"> Поток </span><span style=" font-family:'Courier New,courier';">Binlog_Dump</span><span style=" font-family:'Ubuntu';"> является непрерывным процессом, который обрабатывается сервером следующим способом: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Осуществляется захват обновлений. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если не остается больше обновлений, входит в число <span style=" font-family:'Courier New,courier';">pthread_cond_wait()</span>, откуда его можно &quot;пробудить&quot;, выполнив следующее обновление, или уничтожить. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">После пробуждения проверяется причина пробуждения. Если нет причины прекращения цикла, цикл <span style=" font-family:'Courier New,courier';">Binlog_dump</span> продолжается. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">При возникновении какой-либо фатальной ошибки, такой как обнаружение &quot;мертвого&quot; клиента, цикл прекращается. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таким образом, если поток подчиненного сервера прекратится на подчиненном сервере, соответствующий поток </span><span style=" font-family:'Courier New,courier';">Binlog_Dump</span><span style=" font-family:'Ubuntu';"> на головном сервере не будет замечать этого, пока не произойдет по крайней мере одного обновления на головном сервере (или уничтожения потока), которое необходимо, чтобы пробудить его из числа </span><span style=" font-family:'Courier New,courier';">pthread_cond_wait()</span><span style=" font-family:'Ubuntu';">. Тем временем подчиненный сервер может открыть другое соединение, результатом которого будет другой поток </span><span style=" font-family:'Courier New,courier';">Binlog_Dump</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта проблема не должна присутствовать в версии 3.23.26 и более поздних версиях. В версии 3.23.26 для каждого репликационного сервера добавляется идентификатор </span><span style=" font-family:'Courier New,courier';">server-id</span><span style=" font-family:'Ubuntu';">, и теперь все старые процессы-зомби на головном сервере уничтожаются при присоединении нового репликационного потока из того же самого подчиненного сервера. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">В</span><span style=" font-family:'Ubuntu';">: Как прокручивать журналы репликации? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">О</span><span style=" font-family:'Ubuntu';">: В версии 3.23.28 нужно использовать команду </span><span style=" font-family:'Courier New,courier';">PURGE MASTER LOGS TO</span><span style=" font-family:'Ubuntu';"> после определения тех журналов, которые должны быть удалены, и выборочно сделать резервные копии этих журналов. В более ранних версиях этот процесс намного более трудоемкий, и не может быть безопасно выполнен без остановки всех подчиненных серверов, если планируется повторное использование имен журналов. Нужно будет остановить потоки подчиненного сервера, отредактировать индексный файл двоичного журнала, удалить все старые журналы, перезапустить головной сервер, запустить потоки подчиненного сервера и затем удалить файлы старых журналов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">В</span><span style=" font-family:'Ubuntu';">: Как сделать апгрейд сервера во время репликации? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">О</span><span style=" font-family:'Ubuntu';">: Если модернизируемая версия ниже 3.23.26, нужно лишь блокировать таблицы головного сервера, позволить подчиненному серверу подогнать обновления, затем выполнить команду </span><span style=" font-family:'Courier New,courier';">FLUSH MASTER</span><span style=" font-family:'Ubuntu';"> на головном сервере и команду </span><span style=" font-family:'Courier New,courier';">FLUSH SLAVE</span><span style=" font-family:'Ubuntu';"> на подчиненном сервере, чтобы очистить журналы, затем перезапустить новые версии на головном и подчиненном серверах. Обратите внимание: подчиненный сервер может останавливаться на некоторое время - пока головной сервер записывает в журнал все обновления, подчиненный сервер будет способен подогнать обновления как только сможет начать работу и подсоединиться к головному серверу. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В версиях выше 3.23.26 осуществляется блокировка протокола репликации для обновлений. Таким образом можно делать апгрейд до более свежей версии 3.23 головного и подчиненного серверов динамически. Помимо этого, на головном и подчиненном серверах могут быть запущены различающиеся версии MySQL, если обе версии выше 3.23.26. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Q</span><span style=" font-family:'Ubuntu';">: Какие проблемы могут возникать при установке двухсторонней репликации? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">A</span><span style=" font-family:'Ubuntu';">: В настоящее время для репликаций MySQL не поддерживается никакого протокола блокировки между головным и подчиненным сервером, который обеспечивал бы неделимость распределенных (междусерверных) обновлений. Другими словами, клиент A может делать обновления на головном сервере 1, и в это же время, перед тем, как эти обновления скопируются на головной сервер 2, клиент B может делать обновления на головном сервере 2, из-за которых обновления клиента A будут выполняться не так, как на головном сервере 1 компании. Таким образом, когда обновления, сделанные клиентом A, будут перенесены на головной сервер 2, таблицы, полученные в результате, будут отличаться от таблиц на головном сервере 1. В этом случае таблицы на двух серверах будут разными, даже если обновления, произошедшие на головном сервере 2, также будут скопированы на головной сервер 1. Отсюда следует, что не стоит соединять в цепочку два сервера двусторонней репликационной связью, если вы не уверены, что обновления будут безопасно выполняться в любом порядке, или если вы не обрабатываете каким-либо образом такие неупорядоченные обновления где-либо в клиентском коде. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Важно понять также и то, что если двухсторонний механизм репликации и повышает производительность, то не настолько, что это могло бы отразиться на обновлениях. Каждый из серверов должен выполнять такое же количество обновлений, как и один сервер, разве что уменьшатся конфликты при блокировках, потому что обновления, происходящие на другом сервере, будут сериализованы в одном потоке подчиненного сервера. Эта выгода, тем не менее, может быть компенсирована задержками в сети. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Q</span><span style=" font-family:'Ubuntu';">: Как использовать репликацию для повышения производительности системы? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">A</span><span style=" font-family:'Ubuntu';">: Установите один сервер как головной и направляйте все записи к нему, а также сконфигурируйте такое количество подчиненных серверов, на какое у вас хватит средств и дискового пространства, и распределите чтение между головным сервером и подчиненными серверами. Можно также запустить подчиненные серверы с опциями </span><span style=" font-family:'Courier New,courier';">--skip-bdb</span><span style=" font-family:'Ubuntu';">, </span><span style=" font-family:'Courier New,courier';">--low-priority-updates</span><span style=" font-family:'Ubuntu';"> и </span><span style=" font-family:'Courier New,courier';">--delay-key-write=ALL</span><span style=" font-family:'Ubuntu';">, чтобы получить увеличение скорости на подчиненном сервере. В данном случае подчиненный сервер для повышения скорости будет использовать нетранзакционные таблицы </span><span style=" font-family:'Courier New,courier';">MyISAM</span><span style=" font-family:'Ubuntu';"> вместо таблиц </span><span style=" font-family:'Courier New,courier';">BDB</span><span style=" font-family:'Ubuntu';">. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Q</span><span style=" font-family:'Ubuntu';">: Что нужно сделать, чтобы подготовить свой клиентский код для использования репликации, повышающей производительность? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">A</span><span style=" font-family:'Ubuntu';">: Если та часть вашего кода, которая отвечает за доступ к базе данных, является достаточно абстрактной и модульной, преобразование ее для работы с установленной репликацией произойдет очень гладко и просто - для этого нужно лишь изменить реализацию доступа для чтения к базе данных от некоторого подчиненного сервера или головного сервера так, чтобы запись всегда производилась на головной сервер. Если же ваш код не имеет такого уровня абстракции, то установка системы репликации окажется для вас хорошей и мотивированной возможностью почистить свой код. Начните с создания библиотеки или оболочки со следующими функциями: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Safe_writer_connect()</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Safe_reader_connect()</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Safe_reader_query()</span> </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Safe_writer_query()</span> </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Префикс </span><span style=" font-family:'Courier New,courier';">safe_</span><span style=" font-family:'Ubuntu';"> означает, что функция будет нести ответственность за обработку всех возникающих ошибок. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">После этого нужно преобразовать клиентский код так, чтобы он использовал библиотеку оболочки. Вначале все это покажется лишней головной болью, но в конечном счете ваши усилия окупятся. Все приложения, построенные в соответствии с приведенной выше схемой, смогут &quot;приобщиться&quot; к преимуществам решения один головной/много подчиненных. Код будет гораздо легче поддерживать, а добавление опций поиска неисправностей станет тривиальным. К примеру, если вам захочется узнать, какой запрос среди многих тысяч возвращает ошибку или реализовать регистрацию продолжительности выполнения каждого запроса, то понадобится изменить всего пару функций. Если у вас уже написано много кода, то для автоматизации задачи его преобразования можно использовать написанную Монти утилиту </span><span style=" font-family:'Courier New,courier';">replace</span><span style=" font-family:'Ubuntu';">, которая имеется в стандартном дистрибутиве MySQL, или написать собственный сценарий на Perl. Остается надеяться, что ваш код удовлетворяет некоторой распознаваемой схеме. В противном случае будет лучше переписать его каким-либо образом, или, по крайней мере, вручную подогнать его под схему. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание: имена функций, конечно же, можно использовать любые. Важно иметь унифицированный интерфейс для подключения для чтения, подсоединения для записи, выполнения чтения и выполнения записи. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Q</span><span style=" font-family:'Ubuntu';">: В каких случаях репликация MySQL может улучшить производительность системы, и насколько? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">A</span><span style=" font-family:'Ubuntu';">: Механизм репликации MySQL наиболее эффективен для системы, где чтение производится часто, а запись - редко. Теоретически, используя установку один головной/много подчиненных, можно наращивать ее, добавляя подчиненные серверы, пока не исчерпается пропускная способность сети или количество обновлений не вырастет настолько, что головной сервер не сможет обрабатывать их. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Чтобы определить какое количество подчиненных серверов можно установить, прежде чем выгоды от дополнительных ресурсов не перестанут оправдывать затраты, и насколько увеличится производительность вашего сайта, нужно знать структуру запросов и опытным путем (тестированием) определить связь между производительностью чтения (количество считываний за секунду, или </span><span style=" font-family:'Courier New,courier';">max_reads</span><span style=" font-family:'Ubuntu';">) и записи (</span><span style=" font-family:'Courier New,courier';">max_writes</span><span style=" font-family:'Ubuntu';">) на типовом головном сервере и типовом подчиненном сервере. В приведенном примере показан достаточно упрощенный подсчет того, что можно получить, используя механизм репликации для предполагаемой системы. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Предположим, что загрузка системы состоит из 10% операций записи и 90% операций чтения, и известно что </span><span style=" font-family:'Courier New,courier';">max_reads = 1200 - 2 * max_writes</span><span style=" font-family:'Ubuntu';">, или другими словами, наша система, не делая записей, может делать 1200 операций чтения за секунду, средняя скорость записи вдвое ниже, чем средняя скорость чтения, а зависимость между этими величинами линейная. Предположим, что головной сервер и подчиненный сервер имеют одинаковую мощность, и имеется N подчиненных серверов и 1 головной. Тогда для каждого сервера (головного или подчиненного) имеем: </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">reads = 1200 - 2 * writes</span><span style=" font-family:'Ubuntu';"> (по результатам тестирования) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">reads = 9 * writes / (N + 1)</span><span style=" font-family:'Ubuntu';"> (операции чтения распределяются по серверам, но запись выполняются на всех серверах) </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">9 * writes/(N+1) + 2 * writes = 1200</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">writes = 1200/(2 + 9/(N+1)</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Таким образом, если N = 0, что означает отсутствие репликации, система может обрабатывать 1200/11, т.е. около 109 записей в секунду (а число операций чтения, в соответствии с нашими допущениями для данной системы, будет в 9 раз больше, чем число операций записи). </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если N = 1, можно получить 184 операций записи в секунду. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если N = 8, можно получить до 400 операций записи в секунду. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если N = 17, то - 480 операций записи в секунду. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В конечном счете, если N приближается к бесконечности (а бюджет к минус бесконечности), можно получить около 600 записей в секунду, при этом производительность системы увеличится приблизительно в 5,5 раз. Однако при использовании лишь 8 серверов производительность уже увеличивается почти в 4 раза. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Обратите внимание: в приведенных вычислениях мы принимали, что сеть имеет неограниченную пропускную способность, и пренебрегали некоторыми другими факторами, которые могут оказаться существенными для системы. Во многих случаях такие подсчеты могут и не дать точного прогноза того, как отразится на системе добавление N подчиненных серверов. Однако определить, улучшат ли репликации производительность вашей системы, а если да, то насколько, вам помогут ответы на следующие вопросы: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Каково отношение числа операций чтения к числу операций записи в вашей системе? </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Насколько увеличится количество записей, которые сможет обрабатывать один сервер, при уменьшении количества операций чтения? </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сколько подчиненных серверов можно установить при текущей пропускной способности сети? </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">Q</span><span style=" font-family:'Ubuntu';">: Как использовать репликацию для обеспечения избыточности и хорошей доступности? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">A</span><span style=" font-family:'Ubuntu';">: С учетом сегодняшних возможностей репликации нужно будет установить головной сервер и подчиненный сервер (или несколько подчиненных серверов), и написать сценарий для мониторинга головного сервера - для определения, включен ли он, и уведомления приложения и подчиненных серверов об изменениях головного сервера в случае ошибки. Ниже приведено несколько советов: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для уведомления подчиненного сервера об изменениях головного сервера используйте команду <span style=" font-family:'Courier New,courier';">CHANGE MASTER TO</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Хороший способ информирования приложений о местоположении головного сервера - иметь на головном сервере динамической компонент DNS. При использовании <span style=" font-family:'Courier New,courier';">bind</span> для динамического обновления DNS можно применять <span style=" font-family:'Courier New,courier';">nsupdate</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запустите подчиненные серверы с опцией <span style=" font-family:'Courier New,courier';">log-bin</span>, но без <span style=" font-family:'Courier New,courier';">log-slave-updates</span>. Таким образом подчиненный сервер будет готов стать головным сервером после выполнения команд <span style=" font-family:'Courier New,courier';">STOP SLAVE; RESET MASTER</span> и <span style=" font-family:'Courier New,courier';">CHANGE MASTER TO</span> на других подчиненных серверах. Указание этой опции обеспечит также возможность перехвата ложных обновлений, которые могут происходить из-за ошибочной конфигурации подчиненного сервера (в идеале можно настроить права доступа таким образом, чтобы никакой клиент не мог производить обновления на подчиненном сервере иначе, чем через поток подчиненного сервера) в сочетании с ошибками в клиентских программах (они никогда не должны производить обновления на подчиненном сервере непосредственно). </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">В настоящее время мы работаем над интеграцией системы автоматического выбора головного сервера в MySQL, но пока эта функция не будет готова, придется создавать собственные средства контроля. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Q</span><span style=" font-family:'Ubuntu';">: Каким образом подчиненный сервер сохраняет информацию о том, где он находится на головном сервер? </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">A</span><span style=" font-family:'Ubuntu';">: Подчиненный сервер использует файл в каталоге данных, определенный в опции </span><span style=" font-family:'Courier New,courier';">master-info-file=filename</span><span style=" font-family:'Ubuntu';">. В этом файле находится вся информация, необходимая подчиненному сервер для запроса новых обновлений. Этот файл содержит следующую информацию: </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<table border="1" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" cellspacing="2" cellpadding="0">
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Номер строки</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-weight:600;">Описание</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">1</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Имя файла двоичного журнала</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">2</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Позиция в файле журнала</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">3</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Удаленный компьютер (головной сервер)</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">4</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пользователь</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">5</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пароль</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">6</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Порт</span></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">7</span></p></td>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Интервал в секундах между соединениями</span></p></td></tr></table>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="replication-problems"></a><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">4</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">.10.8. Поиск неисправностей репликации</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы следовали инструкциям, но установленный механизм репликации не работает, прежде всего следует искать пользовательские ошибки. Выполните следующие проверки: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Производит ли головной сервер записи в двоичный журнал? Проверьте это при помощи команды <span style=" font-family:'Courier New,courier';">SHOW MASTER STATUS</span>. Если да, значение <span style=" font-family:'Courier New,courier';">Position</span> будет отличным от нуля. Если нет, проверьте, запущен ли головной сервер с опцией <span style=" font-family:'Courier New,courier';">log-bin</span> и установлен ли <span style=" font-family:'Courier New,courier';">server-id</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запущен ли подчиненный сервер? Проверьте это при помощи команды <span style=" font-family:'Courier New,courier';">SHOW SLAVE STATUS</span>. Ответ находится в столбце <span style=" font-family:'Courier New,courier';">Slave_running</span>. Если нет, проверьте опции подчиненного сервера и просмотрите сообщения в журнале ошибок. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если подчиненный сервер запущен, установил ли он соединение с головным сервером? Выполните команду <span style=" font-family:'Courier New,courier';">SHOW PROCESSLIST</span>, найдите поток, которому соответствует значение <span style=" font-family:'Courier New,courier';">system user</span> в столбце <span style=" font-family:'Courier New,courier';">User</span> и <span style=" font-family:'Courier New,courier';">none</span> в столбце <span style=" font-family:'Courier New,courier';">Host</span>, и проверьте столбец <span style=" font-family:'Courier New,courier';">State</span>. Если в нем находится значение <span style=" font-family:'Courier New,courier';">connecting to master</span>, проверьте привилегии для пользователя репликации на головном сервере, имя хоста головного сервера, установку DNS, посмотрите, запущен ли головной сервер в текущее время, доступен ли он для подчиненного сервера. После этого, если все окажется в порядке, просмотрите журналы ошибок. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если подчиненный сервер был запущен, но затем остановился, посмотрите на вывод команды <span style=" font-family:'Courier New,courier';">SHOW SLAVE STATUS</span> и проверьте журналы ошибок. Такое обычно случается, когда некоторый запрос, успешно выполняющийся на головном сервере, не выполняется на подчиненном. Если создан корректный образ головного сервера и данные на подчиненном сервере обновлялись только через поток подчиненного сервера, этого происходить не должно. Но если все же такое случилось - значит, имеет место ошибка; как сообщить о ней, читайте ниже. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если запрос, успешно выполняемый на головном сервере, не выполняется на подчиненном, и нельзя выполнить полную ресинхронизацию базы данных (ее стоит выполнить), попробуйте сделать следующее: </li>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сначала проверьте: возможно где-либо случайно оказалась ненужная запись. Разберитесь, как она оказалась там, затем удалите ее, и выполните команду <span style=" font-family:'Courier New,courier';">SLAVE START</span>. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если вы проделали все, о чем написано выше, и ничего не помогло или этого сделать нельзя, попытайтесь понять, будет ли безопасно выполнить обновления вручную (если необходимо) и после этого игнорировать следующий запрос от головного сервера. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если вы решили пропустить следующий запрос, выполните команды <span style=" font-family:'Courier New,courier';">SET GLOBAL SQL_SLAVE_SKIP_COUNTER=1; SLAVE START;</span> чтобы пропустить запрос, не использующий функции <span style=" font-family:'Courier New,courier';">AUTO_INCREMENT</span> или <span style=" font-family:'Courier New,courier';">LAST_INSERT_ID()</span>. В противном случае выполните команды <span style=" font-family:'Courier New,courier';">SET GLOBAL SQL_SLAVE_SKIP_COUNTER=2; SLAVE START</span>. Причина того, что запросы, использующие функции <span style=" font-family:'Courier New,courier';">AUTO_INCREMENT</span> или <span style=" font-family:'Courier New,courier';">LAST_INSERT_ID()</span>, обрабатываются по-другому, заключается в том, что они создают два события в двоичном журнале головного сервера. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если вы уверены, что подчиненный сервер был успешно запущен и синхронизирован с головным сервером, а также что обновления таблиц не производились вне потока подчиненного сервера, пришлите нам отчет об ошибке, и вам не потребуется опять повторять описанные выше уловки. </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Удостоверьтесь, что вы не внесли старой ошибки при апгрейде MySQL до более новой версии. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Если ничего не помогает, просмотрите журналы ошибок. Если журналы большие, выполните команду <span style=" font-family:'Courier New,courier';">grep -i slave /path/to/your-log.err</span> на подчиненном сервере. Искать ошибку на головном сервере - не лучшая идея, поскольку в его журналах находятся лишь системные ошибки общего характера; если это возможно, он посылает ошибку на подчиненный сервер, когда что-либо происходит не так, как надо. </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Если вы убедились, что пользовательская ошибка здесь ни при чем, однако механизм репликации по-прежнему не работает или работает нестабильно, пришло время начать работу над отчетом об ошибке. Вы должны предоставить нам столько информации, сколько нужно, чтобы отследить ошибку. Пожалуйста, уделите отчету об ошибке нужное количество времени и усилий, чтобы сделать его хорошо. В идеале мы хотели бы иметь контрольный пример в формате, который находится в каталоге </span><span style=" font-family:'Courier New,courier';">mysql-test/t/rpl*</span><span style=" font-family:'Ubuntu';"> исходного дерева. Отослав такой контрольный пример, в большинстве случаев можно рассчитывать на получение патча в течение одного-двух дней, хотя, конечно, это время может варьироваться в зависимости от множества факторов. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Еще один хороший способ проинформировать нас об ошибке - написать простую программу с легко конфигурируемыми параметрами соединения для головного и подчиненного серверов, в которой будет продемонстрирована проблема наших систем. Программа может быть написана на Perl или на C, в зависимости от того, какой язык вы знаете лучше. </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Подготовив информацию об ошибке одним из двух способов, используйте утилиту </span><span style=" font-family:'Courier New,courier';">mysqlbug</span><span style=" font-family:'Ubuntu';">, чтобы создать отчет об ошибке, и пошлите его по адресу </span><span style=" font-family:'Courier New,courier';">&lt;</span><a href="mailto:bugs@lists.mysql.com"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">bugs@lists.mysql.com</span></a><span style=" font-family:'Courier New,courier';">&gt;</span><span style=" font-family:'Ubuntu';">. Если же вы имеете дело с фантомом - проблемой, которая имеет место, но вы по какой-либо причине не можете ее воспроизвести по желанию: </span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Убедитесь, что эта проблема не вызвана пользовательской ошибкой. Например, при обновлении подчиненного сервера вне потока подчиненного сервера данные будут не синхронизированы, и могут быть нарушения уникальных ключей при обновлениях. В этом случае поток подчиненного сервера остановится и будет ждать, пока таблицы не будут очищены вручную, для приведения их в синхронизированный режим. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Запустите подчиненный сервер с опциями <span style=" font-family:'Courier New,courier';">log-slave-updates</span> и <span style=" font-family:'Courier New,courier';">log-bin</span> - при этом в журнал будет заноситься информация обо всех обновлениях, происходящих на подчиненном сервере. </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Сохраните все доказательства наличия ошибки перед сбросом репликации. Если у нас нет информации о проблеме, или имеется только отрывочная информация, потребуется время, чтобы найти источник проблемы. Вы должны собрать следующие &quot;свидетельства&quot;: </li>
<ul type="circle" style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 2;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Все двоичные журналы головного сервера </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Весь двоичный журнал подчиненного сервера </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вывод команды <span style=" font-family:'Courier New,courier';">SHOW MASTER STATUS</span> на головном сервере во время обнаружения проблемы </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Вывод команды <span style=" font-family:'Courier New,courier';">SHOW SLAVE STATUS</span> на головном сервере во время обнаружения проблемы </li>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Журналы ошибок головного сервера и подчиненного сервера </li></ul>
<li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Для изучения двоичных журналов используйте утилиту <span style=" font-family:'Courier New,courier';">mysqlbinlog</span>. Таким образом можно находить проблемные запросы, например: </li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:1; text-indent:0px;"><span style=" font-family:'Courier New,courier';">mysqlbinlog -j pos_from_slave_status /path/to/log_from_slave_status | head</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Собрав &quot;свидетельства&quot; о проблеме-фантоме, попробуйте сначала организовать их в отдельный контрольный пример. После этого сообщите о проблеме по адресу </span><span style=" font-family:'Courier New,courier';">&lt;</span><a href="mailto:bugs@lists.mysql.com"><span style=" font-family:'Courier New,courier'; text-decoration: underline; color:#0000ff;">bugs@lists.mysql.com</span></a><span style=" font-family:'Courier New,courier';">&gt;</span><span style=" font-family:'Ubuntu';">, описав эту проблему во всех подробностях. </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p>
<hr />
<table border="0" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px;" width="100%" cellspacing="2" cellpadding="0">
<tr>
<td width="40%" style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/tutorial.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Пред.</span></a><span style=" font-family:'Ubuntu';"> </span></p></td>
<td width="20%" style=" vertical-align:top;">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span></p></td>
<td width="40%" style=" vertical-align:top;">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> </span><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/mysql-optimisation.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">След.</span></a></p></td></tr>
<tr>
<td style=" vertical-align:top;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Глава 3. Учебное пособие по MySQL </span></p></td>
<td style=" vertical-align:top;">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a href="http://www.mysql.ru/docs/mysql-man-4.0-ru/index.html"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Начало</span></a></p></td>
<td style=" vertical-align:top;">
<p align="right" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"> Глава 5. Оптимизация в MySQL</span></p></td></tr></table>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p></td></tr></table></td></tr></table></body></html>