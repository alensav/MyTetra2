<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:40px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:xx-large; font-weight:696; color:rgba(6,6,15,0.866667); background-color:#ffffff;">DWIN. Знакомство с программным обеспечением DWIN Graphic Utilized Software. Hello World</span></p>
<p style=" margin-top:0px; margin-bottom:8px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:40px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">В данной статье поработаем с программным обеспечение DGUS (DWIN Graphic Utilized Software). Познакомимся с некоторыми элементами программы, ознакомимся с протоколом передачи данных с дисплея и создадим первый проект &quot;HELLO WORLD&quot;.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; font-style:italic; color:rgba(6,6,15,0.866667);">Прошлые статьи:</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><a href="https://dzen.ru/a/YZZCkwlnrkXsbk_z"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; font-style:italic; text-decoration: underline; color:#000000;">DWIN человеко-машинный интерфейс. Введение</span></a><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);"><br /></span><a href="https://dzen.ru/a/YZ5iAhUHvAt_zPPR"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; font-style:italic; text-decoration: underline; color:#000000;">DWIN. Подготовка дисплея к работе и загрузка демо-проекта</span></a></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Продолжаем работать с дисплеем DMG80480Y070_01NR с TN матрицей, разрешением экрана 800 на 480 точек и резистивной сенсорной панелью.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764jvoj7w9417.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Дисплей DMG80480Y070_01NR вид спереди</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Далее рассмотрим программу DGUS (сокращение от DWIN Graphic Utilized Software) и основные формируемые файлы для работы. Ниже представлена краткая диаграмма разработки ПО.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">С системой на кристалле T5L можно работать напрямую, программируя ядро, например, через Keil и с помощью программы DGUS через визуальный интерфейс. В программу DGUS загружаются изображения, иконки, аудиофайлы, шрифты. Далее при работе формируются взаимодействия элементов дисплея, элементов сенсорной панели, размечается область памяти для переменных. После загрузки файлов на дисплей происходит взаимодействие через графический интерфейс и через асинхронный порт UART (TTL/RS232/RS485).</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image17214617647g3bh4kgrl.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Диаграмма разработки ПО</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Для того чтобы понять как работать с программой напишем &quot;Hello World&quot;. В него будет включена работа с переменными, элементами управления, формированием клавиатуры для ввода цифр, приемом и отправкой данных через UART на компьютер и выводом полученной информации на дисплее.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Для начала необходимо скачать саму программу DGUS, сделать это можно по ссылке на </span><a href="https://dzen.ru/away?to=https%3A%2F%2Fgithub.com%2FVB-Radchenko%2FDWIN-Project"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#000000;">GitHub</span></a><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">, далее во всех статьях будет по умолчанию использоваться расположение программы и проекта в директории &quot;D:\DWIN\DWIN-Project&quot; программа DGUS будет располагаться по пути &quot;D:\DWIN\DWIN-Project\DGUS_V7624&quot;.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Необходимо запустить программу DGUS, нажать на значок New, в появившемся окне выбрать разрешение экрана 800х480 и папку где будет храниться проект в данном случае &quot;D:\DWIN\DWIN-Project\Lesson 1&quot;.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image172146176406fafnisp5.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Меню программы DGUS</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Если интерфейс программы на китайском языке необходимо перейти в последнюю вкладу и поле &quot;Language&quot; выбрать &quot;English&quot;.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764mwvxfph42e.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Меню программы DGUS</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Воспользуемся бесплатным стоком изображений </span><a href="https://dzen.ru/away?to=http%3A%2F%2Fwww.freepik.com"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#000000;">freepik </span></a><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">для поиска фона и иконок. Фоновое изображение сохраняем в папке \DWIN_SET (фоновые изображения лучше сохранять с цифирным обозначением в начале названия, например, 0_fon.png), иконки в папке \Icon.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Далее переходим во вкладку &quot;Touch and display config&quot; нажимаем на плюс, переходим в папку \DWIN_SET и добавляем три фоновых изображения.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Формируем фоновый файл для дисплея, для этого переходим на вкладку &quot;Welcome&quot; и нажимаем на пункт DWIN ICL Generator.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764g89uealcy9.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Меню программы DGUS</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Открывается окно формирования ICL файла.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">1. Выбираем директорию где сохранены изображения в нашем случае \DWIN_SET.<br />2. Выставляем качество изображения на 100%.<br />3. Выбираем пункт применить ко всем.<br />4. Проверяем чтобы на всех изображениях применились новые параметры.<br />5. Генерируем файл ICL в папку \DWIN_SET.<br />!ВАЖНО, файл фона должен начинаться с цифры 32(это связанно с архитектурой памяти). Можно оставить 32.ICL.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764wx0zzofinm.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Генерация файла фоновых изображений</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764yitifhoug0.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Разметка памяти дисплея</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Точно также формируем файл иконок. Директория хранения изображений иконок будет \Icon. Генерируемый файл сохраняем в папку \DWIN_SET, но присваиваем имя 46.ICL.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Для формирования шрифта необходимо перейти на вкладку &quot;Welcome&quot; и в поле &quot;DGUS config tool&quot; нажать &quot;0# word bank generating&quot;.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764ieokvxsf9q.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Включение генерации шрифтов</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Откроется окно генерации шрифта. Нажатием на кнопку &quot;Font&quot; выбираем подходящий шрифт и выставляем параметры так, чтобы все буквы не были срезаны, отследить это можно в левой половине окна. Далее нажатием на кнопку &quot;Create 0_DWIN_ASC.HZK&quot; формируем файл шрифта. Файл генерируется в корневой папке программы DGUS(DWIN-Project\DGUS_V7624), его необходимо перенести в папку Lesson1\DWIN_SET.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764i3z9sf1yla.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Окно генерации шрифта</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Откроем вкладку &quot;Touch and display config&quot;, в верхнем выберем пункт &quot;Text Display&quot;. В правой стороне появится окно редактирования элемента. В первых двух строчках устанавливается положение верхней левой точки, и размер окна.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764wglk6yf83u.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Добавление элемента &quot;text display&quot;</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Устанавливаем значение на X = 200, Y = 21, W =400, H = 64.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Далее идут такие элементы как:<br />&quot;Name&quot; название элемента;<br />&quot;SP&quot; указатель описания элемента, в данной статье не будем его затрагивать;<br />&quot;VP&quot; адрес памяти начала элемента (адреса с 0x0000 по 0x0FFF используются системой, 0x1000-0x4FFF используется для вывода графиков, 0x5000-0xFFFF отведено для пользователя);</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image17214617644yh35wh9fc.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Адресное пространство переменных</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">&quot;Encoding Mode&quot; режим декодирования, выставляем 0x01 для правильного отображения информации;<br />&quot;Automatic character spacing adjustment&quot; ставим галочку для автоматического выравнивания межсимвольного расстояния;<br />&quot;Text Length&quot; количество символов надписи. Надпись будет состоять из 11 символов &quot;HELLO WORLD&quot;, что и указываем в этом поле.<br />FONT0_ID выбор банка шрифтов, оставляем 0;<br />Следующие два поля отвечают за размер букв, стоит соблюдать отношение 1:2.<br />Далее идут поля отвечающие за горизонтальный и вертикальный интервалы между букв, так как мы выставили галочку на автоматическое выравнивание, то эти поля не задействуются.<br />И наконец в последнем поле вводится сама надпись &quot;HELLO WORLD&quot;.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764j6a84zo22b.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">FONTДобавление элементов &quot;Data variables display&quot;</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Добавим поля отображения переменных. Переменных будет 4, для них на фоновом изображении отведены места и указаны области памяти в которые мы и будем их записывать. Переменные обозначим типом INT(16 бит) который занимает по 2 байта информации. Поэтому адреса переменных будут 5000, 5002, 5004 и 5006.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Для добавления элемента в верхнем меню выбираем иконку &quot;Data variables&quot; и размещаем на отведенных областях фона. Окно редактирования элемента содержит поля:<br />&quot;Name&quot; название элемента;<br />SP&quot; указатель описания элемента, в данной статье не будем его затрагивать;<br />&quot;VP&quot; адрес памяти для переменной;<br />&quot;Show Colour&quot; для выбора цвета цифры;<br />&quot;Word Bank ID&quot; выбор шрифта, это поле оставляем 0;<br />&quot;Font size&quot; установка размера шрифта;<br />&quot;Alignment&quot; выравнивание, можно установить по левому краю, по правому краю и по центру;<br />&quot;Automatic character spacing adjustment&quot; автоматическое выставления межсимвольного расстояния;<br />&quot;Display invalid zero&quot; показывает незначащие нули;<br />&quot;Variable type&quot; позволяет выбрать несколько вариантов типов переменных, если переменные будут не 2 байта необходимо учесть это в разметки памяти. В данной случае тип остаётся int (2 bytes);<br />&quot;Integer digits&quot; количество цифр;<br />&quot;Decimal digit&quot; количество цифр после запятой;<br />&quot;Variable unit length&quot; длина названия единиц изменения;<br />&quot;Show unit&quot; названия единиц измерения;<br />&quot;Initial value&quot; начальное значение переменной.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Установим &quot;Initial value&quot; для переменной по адресу 5000 - 0, 5002 - 100, 5004 - 100, 5006 - 50.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764sx0bnobrxx.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Добавление элемента &quot;variables Icon&quot;</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Раз уже сформировали файл иконок то добавим и их. Для добавления в меню сверху выбираем &quot;variables Icon&quot;. Рассмотрим какие параметры у этого элемента:<br />&quot;Name&quot; название элемента;<br />&quot;SP&quot; указатель описания элемента, в данной статье не будем его затрагивать;<br />&quot;VP&quot;адрес памяти для переменной относительно которой будет изменяться иконка;<br />&quot;Icon file&quot; файл в котором находятся изображения иконок, был создан файл 46.icl, его и указываем;<br />&quot;Minimum&quot; минимальное значение переменной;<br />&quot;Icon ID&quot; ID иконки отображаемой при достижении минимального значения переменной;<br />&quot;Maximum&quot; максимальное значение переменной;<br />&quot;Icon ID&quot; ID иконки отображаемой при достижении максимального значения переменной;<br />&quot;Display mode&quot; режим отображения, прозрачный фон или фон изображения;<br />&quot;Filter Set&quot; Значение фильтра в режиме прозрачности;<br />&quot;Initial value&quot;начальное значение переменной;<br />&quot;Background transparent Mode&quot; режим прозрачности.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Выставим адрес переменной VP 5006, поле Minimum - 50, Maximum - 101,Initial value 50, Icon ID минимального значения выставим 0, максимального 1. В файле иконок присутствует только одна иконка с номером 0, она и будет отображаться на дисплее.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764scvo63sha1.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Добавление элемента &quot;Incremental Adjustment&quot;</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Добавим два элемент &quot;Incremental Adjustment&quot; для изменения переменной. Для этого в верхнем меню переходим на вкладку &quot;Touch Control&quot; выбираем соответствующий элемент.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Настройка элемента содержит:<br />Позицию элемента и его геометрические размеры;<br />&quot;Key Ct Value&quot; значение кнопки - оставляем 0;<br />&quot;Audio ID&quot; если установить галочку активируется возможность воспроизведения звука при касании;<br />&quot;Name&quot; название элемента;<br />&quot;Data auto-uploading&quot; автоматическая отправка данных при нажатии;<br />&quot;Button effect&quot; действие при нажатии;<br />&quot;VP&quot;адрес памяти для переменной над которой будет произведена операция;<br />Выбор типа переменной;<br />&quot;Adjust method&quot; приращение или уменьшение переменной;<br />&quot;Over limith Operation&quot; действие при достижении лимита. Два варианта: остановиться (STOP) или продолжать действие циклически(Cycle);<br />&quot;Adjusting step length&quot; шаг операции;<br />&quot;Lower limit&quot; нижний лимит;<br />&quot;Upper limit&quot; верхний лимит;<br />&quot;Touch effect&quot; эффект при прикосновении, два варианта: Constant постоянное приращение или вычитание и Disposable одноразовое приращение или вычитание;</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Один из созданных элементов будет осуществлять приращение переменной 5006, второй элемент будет уменьшать переменную. Выставим пределы изменения переменной 0 и 100, шаг приращения 1, тип приращения Constant и остановку при достижении лимита. Также выставим действие при нажатии на смену фонового изображения на 1 и включим воспроизведение аудио №2. Установим расположение элементов на кнопке &quot;-&quot; и &quot;+&quot; соответственно.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Благодаря добавленным элементам можно изменять переменные на дисплее, но этого мало, и нужно вывести эти данные во внешний мир, сделаем это с помощью элемента &quot;Synchrodata return&quot; который позволяет отправлять данные через асинхронный порт. Добавить его можно через верхнее меню и вкладку &quot;Touch Control&quot; выбрав соответствующий элемент.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764xbqvhv7cls.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Добавление элемента &quot;Synchrodata return&quot;</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Настройка элемента содержит:<br />Позицию элемента и его геометрические размеры.<br />&quot;Key Ct Value&quot; значение кнопки - оставляем 0;<br />&quot;Audio ID&quot; активация аудиофайла. Если установить галочку появится возможность воспроизведения звука при касании;<br />&quot;Name&quot; название элемента;<br />&quot;Button effect&quot; действие при нажатии;<br />&quot;Page switching&quot; переход на другую страницу при нажатии;<br />Далее идёт три настройки &quot;First press&quot; первое нажатие, &quot;Continuous pressing&quot; продолжительное нажатие и &quot;Loosen pressing&quot; завершение нажатия. Настройки содержат пункты:<br />&quot;Mode&quot; режим, 0x00 не задействуется, 0x01 активирован, остальные режимы не задействованы.<br />&quot;VP*S&quot; адрес считывания данных;<br />&quot;VP*T&quot; адрес записи данных;<br />&quot;Data length&quot; длинна переменной в байтах.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Создадим элемент с отображением 1 фона при нажатии, включим воспроизведение аудио №2, считыванием данных с переменной 5006 при первом касании и зададим расположение на кнопке &quot;SEND&quot;.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Для переменной по адресу 5000 сделаем ввод значения с клавиатуры. Чтобы это сделать необходимо создать клавиатуру. Для неё выделен отдельный фон под номером 2. Перейдём на него в меню слева.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image17214617642b54obno1q.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Добавление клавиатуры</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Каждой кнопке необходимо задать действие, в нашем случае это ввод цифры соответствующей цифре на изображении. Для этого в верхнем меню переходим на вкладку &quot;Touch Control&quot; и выбираем элемент &quot;Basic touch module&quot;. Рассмотрим настройки этого модуля:<br />В первых строках настраивается положение модуля и его размеры, размеры кнопки равны 50х50, поэтому выставим данные параметры в поля W и H. Расположение кнопки выставим поверх соответствующего изображения;<br />&quot;Name&quot; название элемента;<br />&quot;Button effect&quot; действие при нажатии;<br />&quot;Page switching&quot; переход на другую страницу при нажатии;<br />&quot;key value&quot; значение передаваемое кнопкой при нажатии;<br />&quot;Hold Time&quot; время удержания необходимого для срабатывания.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">В примечании ниже указано какие значения кнопок стоит выставлять для присвоения им действий.<br />значения 0x0030-0x0039 соответствуют цифрам от 0 до 9;<br />0x002E точка;<br />0x002D +/-;<br />0x00F0 отмена;<br />0x00F1 ввод;<br />0x00F2 стереть символ;<br />Соответственно этому примечанию заполняем полня Key Value.<br />Цифры от 0 до 9 значениями 0x0030-0x0039;<br />C 0x00F2;<br />OK 0x00F1.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Клавиатура готова, теперь нужно научиться её вызывать. Сделать это можно используя элемент &quot;Variable data Input&quot; найти его можно в верхнем меню в вкладке &quot;Touch Control&quot; нажав на элемент &quot;Variable Input&quot;;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image17214617647z2djl6ikp.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image1721461764siun1dgrr3.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px;"><img src="image1721461764yqpouw53yp.png" /></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Настройки модуля:<br />Расположение и размер элемента;<br />&quot;Key Ct Value&quot; значение кнопки - оставляем 0;<br />&quot;Audio ID&quot; активация аудиофайла;<br />&quot;Name&quot; название элемента;<br />&quot;Data auto-uploading&quot; автоматическая отправка данных в порт;<br />&quot;Button effect&quot; действие при нажатии;<br />&quot;Page switching&quot; переход на другую страницу при нажатии;<br />&quot;VP&quot; адрес переменной в которую будет производиться запись;&quot;<br />Variable type&quot; позволяет выбрать несколько вариантов типов переменных; В данной случае тип Int соответствующий тип полю &quot;Data variables&quot; установленному ранее для переменной по адресу 5000;<br />&quot;Integer digits&quot; количество цифр;<br />&quot;Decimal digit&quot; количество цифр после запятой;<br />&quot;Show location&quot; область клавиатуры в которую будет совершаться ввод данных;<br />&quot;Show Colour&quot; для выбора цвета цифры;<br />&quot;Font ID&quot; выбор шрифта, это поле оставляем 0;<br />&quot;Font size&quot; установка размера шрифта;<br />&quot;Cursor color&quot; цвет курсора при вводе, есть два варианта &quot;White&quot;(белый) и &quot;Black&quot;(черный);<br />&quot;Display Method&quot; режим отображения вводимой информации &quot;Show \*\&quot; ввод звездочками или &quot;Direct display&quot; ввод цифр;<br />&quot;Keyboard location&quot; расположение клавиатуры на данном фоне &quot;Current page&quot; или на другой странице &quot;Other page&quot;;<br />&quot;Keyboard setting&quot; настройка клавиатуры, после нажатия на кнопку откроется меню (изображения есть выше в галереи Настройка элемента &quot;Variable data Input&quot;) в котором необходимо выбрать страницу с клавиатурой и выбрать второй фон, после чего нажать на кнопку &quot;OK&quot; откроется следующее меню в котором необходимы выделить область клавиатуры. Должны получиться координаты (значения могут +/- отличаться) x1 = 352, y1 = 121, x2 = 571, y2 = 461, после чего нажать &quot;OK&quot;;<br />&quot;Current page&quot; номер выбранной страницы с клавиатурой;<br />&quot;Keyboard area&quot; область выбранной клавиатуры;<br />&quot;Show location&quot; область отображения клавиатуры на текущей странице, устанавливаем значения x = 350, y = 130;<br />&quot;Background transparency&quot; прозрачность фона, выставляем 0;<br />&quot;Enabling limits&quot; область ввода значений с клавиатуры, устанавливаем от 0 до 999;<br />&quot;Loading data when input&quot; при установке галочки происходит ввод данных из переменной;<br />&quot;Data address&quot; адрес переменной для отображения при включении клавиатуры;<br />&quot;Download data&quot; установка цвета кодом в десятичном формате, не используем оставляем 0.<br />Область &quot;Show location&quot; заполняется после установки клавиатуры через настройку &quot;Keyboard setting&quot;. При нажатии на кнопку &quot;Set&quot; возле пункта &quot;Show location&quot; в появившемся окне ставим галочку возле пункта &quot;Displayed Keyboard&quot; и ставим точку в правой точке поля где должен совершаться ввод(последнее изображение в галерее Настройка элемента &quot;Variable data Input&quot;).</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Проект готов, переходим в верхнем меню во вкладку &quot;File&quot; ждем на пункт &quot;Save&quot; сохраняя проект и на кнопку &quot;Generate&quot; для генерации файлов в папку &quot;DWIN_SET&quot;. В папке должны быть файлы:<br />0.png, 1.png, 2.png файлы фоновых изображений.<br />0_DWIN_ASC.HZK файл сгенерированного шрифта.<br />сгенерированные файлы 13TouchFile.bin, 14ShowFile.bin, 22_Config.bin, 32.icl, 46.icl.<br />Дополнительные файлы 40.wae звуковые дорожки и T5LCFG.CFG конфигурационный файл их можно скачать из репозитория </span><a href="https://dzen.ru/away?to=https%3A%2F%2Fgithub.com%2FVB-Radchenko%2FDWIN-Project%2F"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#000000;">GitHub</span></a><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Рассмотрим конфигурационный файл(CFG) через программу Notepad++ совместно с плагином HEX-Editor. Файл выглядит следующим образом:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764na983tnky5.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Конфигурационный файл</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Рассмотрим некоторые параметры которые нам могут понадобится в ближайшее время (Список всех параметров можно посмотреть в Application Development Guide скачать можно с </span><a href="https://dzen.ru/away?to=https%3A%2F%2Fgithub.com%2FVB-Radchenko%2FDWIN-Project%2Ftree%2Fmain%2FDocs"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#000000;">GitHub</span></a><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">).</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764htlz8whtqe.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Описание конфигурационного файла</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Область с 0x00 по 0x04 не изменяется, фиксирована производителем, если её изменить можно закирпичить дисплей.<br />0x05 - 0x78 или 0111 1000 сопоставляя таблице выше получаем: 7 - 0 проверка CRC отсутствует, 6 - 1 используем музыкальный файл, 5 - 1 загружаем файл инициализации 22.bin, 4 - 1 автоматическое обновление переменных, 3 - 1 включение сенсорной панели, 2 - 0 управление режимом ожидания через сенсорную панель, 1,0 - 0 картинка на дисплее не повернута;<br />0x06 - 0x20 или 0010 0000 очистка памяти NAND Flash памяти;<br />0x07 - 0x28 или 40 позиция музыкального файла WAE;<br />0x08 - 0x20 или 32 позиция файла фоновых изображений;<br />0x09 - 0x28 или 40, параметр для расчёта скорости считывания сенсорной панели, рассчитывается по формуле 400Гц/установленное значение, получается 10 Гц;<br />0x0A,0x0B - 0x001C или 28 делитель скорости для асинхронного порта, данное число соответствует скорости 115200 бод, вычисляется данное значение из формулы 3225600/badurate например 3225600/115200 = 28;<br />0x0C - 0x64 или 100 значение яркости дисплея в нормальном режиме в %;<br />0x0D - 0x32 или 50 значение яркости дисплея в режиме ожидания в %;<br />0x0E,0x0F - 0x03E8 или 1000 время пробуждения после режима ожидания, единицы измерения 10мс;</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Файл CFG рекомендуется записывать однократно, и не оставлять на постоянно основе в папке DWIN_SET.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Осталось понять в каком формате передаются данные, разобраться с этим поможет следующая таблица из официальной документации:</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764d4gim8lvp3.png" /></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Нас интересует работа с 4 переменными по адресам 5000, 5002, 5004, и 5006.<br />Для считывания переменных нужно отправить команды:<br />5A A5 04 83 50 00 01<br />5A A5 04 83 50 02 01<br />5A A5 04 83 50 04 01<br />5A A5 04 83 50 06 01<br />В ответ должны прийти соответствующие пакеты (для примера опишем пакеты с заданными значениями по умолчанию):<br />5A A5 06 83 50 00 01 00 00 где 00 00 два байта переменной в HEX формате соответствуют значению 0 в десятичном виде;<br />5A A5 06 83 50 02 01 00 64 где 00 64 два байта переменной в HEX формате соответствуют значению 100 в десятичном виде;<br />5A A5 06 83 50 04 01 00 64 где 00 64 два байта переменной в HEX формате соответствуют значению 100 в десятичном виде;<br />5A A5 06 83 50 06 01 00 32 где 00 32 два байта переменной в HEX формате соответствуют значению 50 в десятичном виде;<br />Также у нас имеются два пакета формируемых на дисплее, это переменная по адресу 5000 и 5006.<br />При нажатии на кнопку SEND, будет приходить сообщение:<br />5A A5 06 83 50 06 01 00 32 где 00 32 два байта переменной в HEX формате соответствуют значению 50 в десятичном виде;<br />При вводе числа 222 в поле 5000 будет отправляться пакет:<br />5A A5 06 83 50 00 01 00 DE где 00 DE два байта переменной в HEX формате соответствуют значению 222 в десятичном виде;</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Получать данные научились, теперь нужно изменять, для этого отправляем команды:<br />5A A5 05 82 50 00 00 02<br />5A A5 05 82 50 02 00 03<br />5A A5 05 82 50 04 00 04<br />5A A5 05 82 50 06 00 05<br />В ответ будет приходить подтверждение принятого пакета следующего вида:<br />5A A5 03 82 4F 4B;<br />Бонус, для изменения яркости подсветки можно записать данные по адресу 00 82:<br />5A A5 05 82 00 82 14 10 - где старший байт равным 14 в hex виде десятичного числа 20 которое означает 20% яркости в рабочем режиме, а младший байт равный 10 в hex виде десятичного числа 10, означает 10% яркости в режиме ожидания.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">С теорией закончили переходим к практике. Для обмена данными с компьютером будет использована программа DockLight, которая может работать в бесплатном режиме без сохранения заданных команд.</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Добавим в DockLight команды на чтение и запись.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764ef74lndr47.png" /></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:18px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#000000;">Рабочее окно программы Docklight</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Далее представлен листинг команд с демонстрации видео ниже.<br />Как можно заметить команды совпали с теми что указаны в документации.</span></p>
<p style=" margin-top:20px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><img src="image1721461764804ul595qn.png" /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:16px;"><a href="https://dzen.ru/id/5f8af3f24ab7c3765a17edcc"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; font-weight:496; text-decoration: underline; color:#ffffff;">Владимир Радченко</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:26px;"><a href="https://dzen.ru/video/watch/619f8705b5d7d6303d6427c6"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; font-weight:496; text-decoration: underline; color:#000000;">DWIN. Hello World проект</span></a></p>
<p style=" margin-top:8px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:16px;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(255,255,255,0.866667);">25 ноября 2021</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:15px; background-color:rgba(47,47,50,0.94902);"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:#ffffff;">1:07</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:36px; margin-right:36px; -qt-block-indent:0; text-indent:0px; line-height:16px;"><span style=" font-family:'-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Helvetica Neue,Helvetica,roboto,arial'; font-size:8.25pt; color:#000000;">1,0×</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">В данной статье получилось сделать первую программу. В процессе ознакомились с элементами вывода текста, вывода переменных, блоком приращения переменной, блоком синхронизации данных, формированием клавиатуры и вводом с неё, автоматическим переключением иконок при изменении переменных и передачей данных по UART.<br /></span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Ссылка на GitHub: </span><a href="https://dzen.ru/away?to=https%3A%2F%2Fgithub.com%2FVB-Radchenko%2FDWIN-Project%2F"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#000000;">https://github.com/VB-Radchenko/DWIN-Project/</span></a></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">По вопросам закупок, технической поддержкой и общим вопросам обращайтесь на электронную почту: Info_dwin@mail.ru</span></p>
<p style=" margin-top:6px; margin-bottom:20px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">Скидочный купон для официального магазина </span><a href="https://dzen.ru/away?to=https%3A%2F%2Faliexpress.ru%2Fstore%2F911127255"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; text-decoration: underline; color:#000000;">AliExpress </span></a><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">- DWVLPRO</span></p>
<p style=" margin-top:6px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; line-height:28px; background-color:#ffffff;"><span style=" font-family:'-apple-system,system-ui,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif'; font-size:8.25pt; color:rgba(6,6,15,0.866667);">#dwin #hmi #dgus #iot #diy #сенсорная панель</span></p></body></html>