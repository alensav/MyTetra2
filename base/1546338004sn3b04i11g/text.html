<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">GREP_INSTR</p>
<p align="center" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:xx-large; font-weight:600;">Как использовать команду grep в linux</span><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">grep</span><span style=" font-family:'Ubuntu';"> это вполне возможно самая популярная из существующих команд в Unix/Linux. Многие бы с этим поспорили, но стоит начать использовать </span><span style=" font-family:'Courier New,courier';">grep</span><span style=" font-family:'Ubuntu';">, эта команда будет присутствовать почти во всех ваших скриптах для консоли Linux. </span><span style=" font-family:'Courier New,courier';">grep</span><span style=" font-family:'Ubuntu';"> расшифровывается как ‘</span><span style=" font-family:'Ubuntu'; font-style:italic;">global regular expression printer</span><span style=" font-family:'Ubuntu';">‘. Иными словами </span><span style=" font-family:'Courier New,courier';">grep</span><span style=" font-family:'Ubuntu';"> выдрезает нужные вам строки из текстовых файлов которые содержат указаный пользователем текст.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">grep</span><span style=" font-family:'Ubuntu';"> может быть использован двумя путями — сам по себе или в комбинации с потоками.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">Использование </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">grep</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;"> в чистом виде</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600;">$ grep '12:00' /home/david/backup/log.txt</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда показывает как можно использовать grep для того чтобы получить строки из файла содержащие подстроку указаную в командной строке. Файл не обязательно должен оканчиваться на .txt. Показаная выше команда производит поиск подстроки </span><span style=" font-family:'Courier New,courier';">12.00</span><span style=" font-family:'Ubuntu';"> в файле </span><span style=" font-family:'Courier New,courier';">/home/david/backup/log.txt</span><span style=" font-family:'Ubuntu';"> и отображает все строки где эта подстрока встречается.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта комбинация может быть использована например для поиска бекапов которые происходили в 12:00.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600;">$ grep -v '12.00' /home/david/backup/log.txt</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">А вот эта команда (с использованием ключа -v) наоборот покажет только те строки где подстрока ’12:00′ не встречается.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600;">$ grep -l 'delay' /code/*.c</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда будет искать все файлы оканчивающиеся на </span><span style=" font-family:'Courier New,courier';">.c</span><span style=" font-family:'Ubuntu';"> и текст в найденых файлах соответствующий подстроке </span><span style=" font-family:'Courier New,courier';">'delay'</span><span style=" font-family:'Ubuntu';"> и в конечном итоге выведет только имена файлов где эта подстрока встречается.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600;">$ grep -w '\&lt;bay' * $ grep -w 'watch\&gt;' *</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда уже более сложная и состоит из комбинации двух команд </span><span style=" font-family:'Courier New,courier';">grep</span><span style=" font-family:'Ubuntu';">. Первая ищет строки которые начинаются со слова ‘bay’ а вторая строки которые заканчиваются на слово ‘watch’.</span></p>
<p style=" margin-top:14px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;">Использование </span><span style=" font-family:'Courier New,courier'; font-size:large; font-weight:600;">grep</span><span style=" font-family:'Ubuntu'; font-size:large; font-weight:600;"> вместе с потоками</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600;">$ ls -l | grep rwxrwxrwx</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы наверно уже знаете что команда </span><span style=" font-family:'Courier New,courier';">ls -l</span><span style=" font-family:'Ubuntu';"> отображает подробный список файлов в директории. Часть </span><span style=" font-family:'Courier New,courier';">grep rwxrwxrwx</span><span style=" font-family:'Ubuntu';"> фильтрует результат полученый от </span><span style=" font-family:'Courier New,courier';">ls -l</span><span style=" font-family:'Ubuntu';"> и выводит только те директории у которых установлены соответствующие права доступа. В данном случае это открытый доступ на чтение, запись и поиск для всех пользователей и групп. Так что вместо того чтобы увидеть полный список файлов вы увидите только те файлы у которых установлены нужные вам права доступа.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вывод от команды </span><span style=" font-family:'Courier New,courier';">grep</span><span style=" font-family:'Ubuntu';"> может также быть направлен потоком в другую команду, например как в следующем примере:</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600;">$ du | grep 'mp3' | more</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Вы должны уже догадаться что делает указаная выше команда </span><img src="image1490851084.png" /><span style=" font-family:'Ubuntu';"> Если не догадались то все просто — она выводит постранично список mp3 файлов найденых в текущей директории. Все просто </span><img src="image1490851084.png" /></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600;">$ grep '^#' /home/david/script1 | more</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда отобразит все строки в файле </span><span style=" font-family:'Courier New,courier';">/home/david/script1</span><span style=" font-family:'Ubuntu';"> которые начинаются с символа ‘#’. Определение тип ‘^#’ означает что символ ‘#’ должен быть первым символом с троке.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier'; font-weight:600;">$ grep -v '^[0-9]' /home/david/backup/log.txt | more</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Эта команда ищет строки содержащие в первом символе цифры от 0 до 9 а потом выводит только те строки которые не попали в результаты поиска. Как вы видите — был использован ключ ‘-v’ означающий реверсивный поиск.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Важно: Необходимо заключать искомые строки в одинарные кавычки как указано в двух предыдущих примерах для того чтобы интерпретатор командной строки мог воспринимать их корректно. Иначе интерпретатор может понять это как другую команду и результат выполнения будет непредсказуем.</span></p>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Некоторые дополнительные ключи команды </span><span style=" font-family:'Courier New,courier';">grep</span><span style=" font-family:'Ubuntu';">:</span></p>
<ul style="margin-top: 0px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; -qt-list-indent: 1;"><li style=" font-family:'Ubuntu';" style=" margin-top:12px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-v</span> : Выводи реверсивные результаты. Вместо того чтобы вывести строки где искомое было найдено — выводи те строки где искомой подстроки нет.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-c</span> : Отключает стандартный способ вывода результата и вместо этого отображает только число обозначающее количество найденых строк.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-i</span> : Делает поиск регистронезависимым</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-w</span> : Ведет поиск по цельным словам. Например при обычном поиске строки ‘wood’ <span style=" font-family:'Courier New,courier';">grep</span> может найти слово ‘hollywood’. А если используется данный ключ то будут найдены только строки где есть слово ‘wood’.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-l</span> : Выводит только имена файлов где была найдена строка.</li>
<li style=" font-family:'Ubuntu';" style=" margin-top:0px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">-r</span> : Производит поиск рекурсивно по всем поддиректориям.</li></ul>
<p style=" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Я надеюсь эта небольшая инструкция поможет вам разобраться с этой полезной командой.</span></p></body></html>