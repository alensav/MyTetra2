<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Сначала просто написал скрипт будильника. Теперь попробую собрать инфу по разным скриптам с использованием синтезатора речи festival в одну тему.<br />Хотя на самом деле это уже сделано </span><a href="http://ru.festivalspeaker.wikia.com/wiki/%D0%91%D0%B0%D0%BD%D0%BA_%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B2_%D0%B4%D0%BB%D1%8F_%D0%B3%D0%BE%D0%BB%D0%BE%D1%81%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE_%D0%B4%D0%B2%D0%B8%D0%B6%D0%BA%D0%B0_Festival"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">здесь</span></a><span style=" font-family:'Ubuntu';"><br />Ну да ладно. Итак начнем.<br /></span></p>
<hr />
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span><span style=" font-family:'Ubuntu'; font-size:20pt;">Установка festival и festvox-ru, исправление багов.</span><span style=" font-family:'Ubuntu';"><br /><br />Пакеты festival и festvox-ru лежат в стандартных репозиториях UBUNTU Karmic и Lucid. Ставим:<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">sudo apt-get install festival festvox-ru</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Если у вас более ранний дистрибутив, то festvox-ru можно взять </span><a href="http://download.berlios.de/festlang/msu_ru_nsh_clunits-0.5.tar.bz2"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">здесь</span></a><span style=" font-family:'Ubuntu';"> (распаковать в /usr/share/festival/voices/russian/msu_ru_nsh_clunits)<br /><br />Теперь исправим пару багов:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">(Нажмите, чтобы показать/скрыть)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu'; font-size:14pt;">Обеспечение полноценной поддержки русского языка</span><span style=" font-family:'Ubuntu';"><br />(Начиная с версии festival 1.96 лечение этого бага не требуется)<br /><br />В файл /usr/share/festival/languages.scm дописать вначале:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">(define (language_russian)<br />&quot;(language_russian)<br />Set up language parameters for Russian.&quot;<br />(set! male1 voice_msu_ru_nsh_clunits)<br />(male1)<br />(Parameter.set 'Language 'russian)<br />)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />и в этом же файле в define(select_language language) добавить пару строчек<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">((equal? language 'russian)<br />(language_russian))</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">(Нажмите, чтобы показать/скрыть)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />На этом подготовка завершена. Приступим непосредственно к написанию скриптов.<br />Стоп, чуть не забыл. Чтобы не было лишних вопросов, заранее предупрежу (или напомню), скриптам нужно давать право на исполнение. <br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">chmod +x script.sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Теперь приступим.<br /></span></p>
<hr />
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span><span style=" font-family:'Ubuntu'; font-size:20pt;">Будильник</span><span style=" font-family:'Ubuntu';"><br /><br />Создаем скрипт в домашнем каталоге<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">gedit alarm.sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">(Нажмите, чтобы показать/скрыть)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#!/bin/bash<br /><br />#Чтобы поставить будильник, вводим в терминале команду &quot;crontab -e&quot;<br />#И прописываем нужные параметры:<br />## m h  dom mon dow   command<br />#0 7 * * 1-5 ./alarm.sh<br />#0 10 * * 6-7 ./alarm.sh<br /><br /><br />export DISPLAY=:0<br />export LANG=ru_RU.UTF-8<br /><br /><br /># Выбираем нужный синтезатор речи, раскомментировав одну из строк:<br />#sayit () { espeak -vru -s130; }<br />#sayit () { festival --tts --language russian; }<br />#sayit () { festival_client --ttw | aplay -q; }<br />sayit () { RHVoice | aplay -q; }<br /><br /><br /># Склоняем в соответствующем падеже слова &quot;час&quot; и &quot;минута&quot;<br /><br />check_date ()<br /><br />{<br /><br />HOUR=`date +%H`<br />MIN=`date +%M`<br /><br />if [[ &quot;$HOUR&quot; = 1[1234] || &quot;$HOUR&quot; = ?[056789] ]]; then LC_HOUR=&quot;часов&quot;<br />elif [[ &quot;$HOUR&quot; = ?[234] ]]; then LC_HOUR=&quot;час+а&quot;<br />elif [[ &quot;$HOUR&quot; = ?1 ]]; then LC_HOUR=&quot;час&quot;<br />else LC_HOUR=&quot;значение не определено&quot;<br />fi<br /><br />if [[ &quot;$MIN&quot; = 1[1234] || &quot;$MIN&quot; = ?[056789] ]]; then LC_MINUTE=&quot;минут&quot;<br />elif [[ &quot;$MIN&quot; = ?[34] ]]; then LC_MINUTE=&quot;минуты&quot;<br />else LC_MINUTE=&quot;значение не определено&quot;<br />fi<br /><br />if [[ &quot;$MIN&quot; = 01 ]]; then TIME=&quot;$HOUR $LC_HOUR однa минута&quot;<br />elif [[ &quot;$MIN&quot; = 11 ]]; then TIME=&quot;$HOUR $LC_HOUR $MIN $LC_MINUTE&quot;<br />elif [[ &quot;$MIN&quot; = ?1 ]]; then TIME=&quot;$HOUR $LC_HOUR $(($MIN-1)) одна минута&quot;<br />elif [[ &quot;$MIN&quot; = 02 ]]; then TIME=&quot;$HOUR $LC_HOUR две минуты&quot;<br />elif [[ &quot;$MIN&quot; = 12 ]]; then TIME=&quot;$HOUR $LC_HOUR $MIN $LC_MINUTE&quot;<br />elif [[ &quot;$MIN&quot; = ?2 ]]; then TIME=&quot;$HOUR $LC_HOUR $(($MIN-2)) две минуты&quot;<br />elif [[ &quot;$MIN&quot; = 00 ]]; then TIME=&quot;$HOUR $LC_HOUR ровно&quot;<br />else TIME=&quot;$HOUR $LC_HOUR $MIN $LC_MINUTE&quot;<br />fi<br /><br />if [[ &quot;$HOUR&quot; = 08 ]] || [[ &quot;$HOUR&quot; -ge 06 &amp;&amp; &quot;$HOUR&quot; -le 11 ]]; then<br />HELLO=&quot;Доброе утро&quot;<br />elif [[ &quot;$HOUR&quot; -ge 12 &amp;&amp; &quot;$HOUR&quot; -le 17 ]]; then<br />HELLO=&quot;Добрый день&quot;<br />elif [[ &quot;$HOUR&quot; -ge 18 &amp;&amp; &quot;$HOUR&quot; -le 23 ]]; then<br />HELLO=&quot;Добрый вечер&quot;<br />elif [[ &quot;$HOUR&quot; -ge 00 &amp;&amp; &quot;$HOUR&quot; -le 05 ]]; then<br />HELLO=&quot;Доброй ночи&quot;<br />else HELLO=&quot;Привет&quot;<br />fi<br /><br />}<br /><br /><br /># Выясняем, в каком городе мы находимся<br /><br />CITY=`wget -q -O - 2ip.ru | grep -P geoip | sed 's/&lt;[^&gt;]*&gt;//g' | awk '{print $3}'`<br /><br />CITY_ID=`wget -q -O - http://bar.gismeteo.ru/gmbartlist.xml | iconv -f cp1251 -t utf8 | grep $CITY | awk '{print $3}' | sed 's/[i=&quot;]//g'`<br /><br />TMP_FILE=&quot;/tmp/gismeteo_$CITY_ID&quot;<br /><br />URL=&quot;http://www.gismeteo.ru/ztowns/$CITY_ID.htm&quot; #CITY_ID - не тот, к которому привыкли, но перенаправляет, куда надо. Информер: http://informer.gismeteo.ru/xml/$CITY_ID_1.xml<br /><br /><br /># Получаем температуру в своем городе<br /><br />wget -q -O - $URL &gt; $TMP_FILE<br /><br />TEMP=&quot;`grep -m 1 'value m_temp c' $TMP_FILE | sed 's/&lt;[^&gt;]*&gt;/ /g' | awk '{print $1}'`&quot;<br /><br />if [[ `echo $TEMP | grep minus` ]]; then TEMP_SIGN=&quot;минус&quot;<br />else TEMP_SIGN=&quot;&quot;<br />fi<br /><br />DEGREE=&quot;`echo $TEMP | grep -Po '[0-9]{1,2}'`&quot;<br /><br /><br /># Проверяем погодные условия<br /><br />WEATH=&quot;`grep -m 1 '&lt;dd&gt;' $TMP_FILE | sed 's/[ \t]*//;s/&lt;[^&gt;]*&gt;//g'`&quot;<br /><br /><br /># Склоняем в соответствующем падеже слово &quot;градус&quot;<br /><br />if [[ &quot;$DEGREE&quot; = 1[1234] || &quot;$DEGREE&quot; = *[056789] ]]; then LC_DEGREE=&quot;градусов&quot;<br />elif [[ &quot;$DEGREE&quot; = *[234] ]]; then LC_DEGREE=&quot;градуса&quot;<br />elif [[ &quot;$DEGREE&quot; = *1 ]]; then LC_DEGREE=&quot;градус&quot;<br />else LC_DEGREE=&quot;значение не определено&quot;<br />fi<br /><br /><br /># начальная громкость, в процентах<br />VOLUME=25<br /># конечная (максимальная) громкость, в процентах<br />MAXVOLUME=65<br /><br /><br /># А теперь сам будильник<br /><br />amixer -q sset Master $VOLUME% unmute<br />if [[ `ps h -C rhythmbox` ]]<br />then sleep 10<br />else rhythmbox &amp;&gt; /dev/null &amp; sleep 10<br />fi<br />rhythmbox-client --set-volume 1.0<br /><br />playlist=&quot;`qdbus --literal org.mpris.MediaPlayer2.rhythmbox /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Playlists.GetPlaylists 1 1 0 0 | sed -e :a -e 's/\][^&gt;]*\]//g;s/\[[^&gt;]*\[ObjectPath: //g'`&quot; #Ищем динамический плейлист &quot;Любимые композиции&quot;<br />qdbus org.mpris.MediaPlayer2.rhythmbox /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Playlists.ActivatePlaylist $playlist #Запускаем найденный плейлист<br />rhythmbox-client --next<br /><br />#rhythmbox-client --play-uri=&quot;http://online.radiorecord.ru:8102/tm_128&quot; #Можно и радио послушать<br /><br />while [[ &quot;$VOLUME&quot; -le &quot;$MAXVOLUME&quot; ]]<br />do<br />VOLUME=$(($VOLUME+1))<br />sleep 1<br />amixer -q sset Master $VOLUME% unmute<br />done<br /><br />sleep 230<br /><br />rhythmbox-client --set-volume 0.9<br />sleep 1<br />rhythmbox-client --set-volume 0.8<br />sleep 1<br />rhythmbox-client --set-volume 0.7<br />sleep 1<br />rhythmbox-client --set-volume 0.6<br />sleep 1<br />rhythmbox-client --set-volume 0.5<br />sleep 1<br />rhythmbox-client --set-volume 0.4<br /><br />check_date<br />echo &quot;$HELLO, Хозяин&quot; | sayit<br />echo &quot;Я надеюсь, что вы хорошо спали?&quot; | sayit<br />echo &quot;Сегодня `date +%A`&quot; | sayit<br />echo &quot;Время $TIME&quot; | sayit<br />echo &quot;Температура за окном $TEMP_SIGN $DEGREE $LC_DEGREE, $WEATH&quot; | sayit<br />echo &quot;Желаю вам удач+нава дня&quot; | sayit<br /><br />rhythmbox-client --set-volume 0.5<br />sleep 1<br />rhythmbox-client --set-volume 0.6<br />sleep 1<br />rhythmbox-client --set-volume 0.7<br />sleep 1<br />rhythmbox-client --set-volume 0.8<br />sleep 1<br />rhythmbox-client --set-volume 0.9<br />sleep 1<br />rhythmbox-client --set-volume 1.0<br /><br />exit 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Пришлось нарушить правила русского языка ради более-менее нормального звочания festival </span><img src="image2045330743.png" /><span style=" font-family:'Ubuntu';"><br /><br />Чтобы поставить будильник, вводим в терминале команду &quot;crontab -e&quot;.<br />Должен запускаться консольный текстовый редактор. Но в первый раз система спрашивает, какой именно редактор вам больше по душе: ed, nano или vim.tiny. Если не знаете, выбирайте nano (нужно нажать &quot;2&quot;).<br />В редакторе прописываем нужные параметры:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PATH=/sbin:/bin:/usr/sbin:/usr/bin<br />SHELL=/bin/bash<br /># m h  dom mon dow   command<br />0 7 * * 1-5 ./alarm.sh<br />0 10 * * 6-7 ./alarm.sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Указываем нужное время, у меня в будние дни будильник срабатывает в 7:00, а в выходные в 10:00.<br />Сохраняем (Ctrl+O), сохраняем как будет предложено. И выходим из редактора (Ctrl+X).<br /><br />Если манипуляции в терминале оказались (или показались) сложными, то можно запланировать время работы будильника, воспользовавшись gui для cron - gnome-schedule.<br /><br />При срабатывании будильника сначала включается плеер, какое-то время играет музыка, потом громкость снижается, и электронный голос приветствует и сообщает нам инфу по сегодняшнему дню, время, день, температура за окном. Затем снова играет плеер.<br /></span></p>
<hr />
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span><span style=" font-family:'Ubuntu'; font-size:20pt;">Озвучка открытия/закрытия крышки ноутбука</span><span style=" font-family:'Ubuntu';"><br /><br />Открываем для редактирования файл /etc/acpi/lid.sh, для этого набираем в терминале:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">sudo gedit /etc/acpi/lid.sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Добавляем в этот файл перед строкой </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">test -f /usr/share/acpi-support/state-funcs || exit 0</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">следующий текст:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">grep -q closed /proc/acpi/button/lid/LID/state<br />if [ $? = 0 ]<br />then<br />echo &quot;Зачем вы меня закрыли?&quot; | festival --tts --language russian;<br />else<br />echo &quot;Привет!&quot; | festival --tts --language russian;<br />fi</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Ну или можно вписать стандартные фразы типа &quot;открыто/закрыто&quot;.<br />Соответственно что напишете, то и будет говорить ноутбук при открытии/закрытии крышки.<br /></span></p>
<hr />
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span><span style=" font-family:'Ubuntu'; font-size:20pt;">Проверка почты gmail</span><span style=" font-family:'Ubuntu';"><br /><br />Создаем скрипт в домашнем каталоге<br /><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">gedit gmail</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">(Нажмите, чтобы показать/скрыть)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Вместо login:password соответственно вставляем свои логин и пароль. Скрипт также работает для почты @xakep.ru<br /><br />И снова используем cron, чтобы запланировать автоматическую проверку. Вводим в терминале команду &quot;crontab -e&quot;. И прописываем нужные параметры. В моем случае это:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">PATH=/sbin:/bin:/usr/sbin:/usr/bin<br />SHELL=/bin/bash<br /># m h  dom mon dow   command<br />*/15 17-23 * * 1-5 bash gmail<br />*/15 10-23 * * 6-7 bash gmail</span></p>
<hr />
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span><span style=" font-family:'Ubuntu'; font-size:20pt;">Чтение всплывающих уведомлений</span><span style=" font-family:'Ubuntu';"><br /><br />Нам необходимо создать два скрипта, один из которых мы потом добавим в автоматически-запускаемые приложения в GNOME.<br />Итак, скрипт первый (speech.sh):<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">(Нажмите, чтобы показать/скрыть)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Суть этого скрипта на bash заключается в следующем. Он принимает со стандартного ввода данные, полученные из второго скрипта и затем парсит их. Затем формирует сообщение и отправляет его в festival для синтеза речевого сообщения. Данные для этого скрипта предоставляет второй скрипт (run_speech.sh), который очень короткий и выглядит так:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#!/bin/bash<br /><br />dbus-monitor &quot;interface='org.freedesktop.Notifications', member='Notify'&quot; | $1</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Что делает этот скрипт. Он в качестве параметра принимает название первого скрипта (путь до него должен быть полный) и вызывает утилиту dbus-monitor, которая позволяет увидеть, что передается по шине dbus непосредственно для всплывающих уведомлений. Вывод от dbus-monitor мы передаем на вход нашему первому скрипту.<br /><br />Далее, добавляем в запускаемые приложения GNOME новую команду (у меня выглядит так):<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">/home/user/run_speech.sh /home/user/speech.sh</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Перезапускаем GNOME и смотрим что получилось. Для проверки можно сделать следующее:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">notify-send &quot;Привет&quot; &quot;Я твое новое голосовое сообщение&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Однако, наверняка среди установленных на вашем компьютере приложений найдется программа, всплывающие сообщения которой вы не захотите, чтобы festival озвучивал. В таком случае эту программу можно добавить, так скажем, в &quot;исключения&quot;, например, как я это сделал с rhythmbox:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">(Нажмите, чтобы показать/скрыть)</span></p>
<hr />
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span><span style=" font-family:'Ubuntu'; font-size:20pt;">Озвучка обрыва ppp0 в коньках</span><span style=" font-family:'Ubuntu';">/by </span><a href="https://forum.ubuntu.ru/index.php?action=profile;u=20674"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">goldskif</span></a><span style=" font-family:'Ubuntu';"> &amp; </span><a href="https://forum.ubuntu.ru/index.php?action=profile;u=44328"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">ratte</span></a><span style=" font-family:'Ubuntu';"><br /><br />Прописываем в коньках (~/.conkyrc):<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">${if_empty ${exec /home/user/eth.sh}} $endif</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />В папке пользователя создаем файл eth.sh:<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">#!/bin/sh<br />LOCKFILE=&quot;/tmp/$VAR.lock&quot;<br />VAR=`sudo ifconfig $1| grep &quot;ppp0&quot;`;<br />if [ &quot;$VAR&quot; = '' ] ; then<br /> if (! test -f ${LOCKFILE}) then<br />touch ${LOCKFILE}<br />echo &quot;человек. обрати внимание, связь потеряна, я нервничаю.&quot; | festival --tts --language russian<br /> fi<br />else<br /> if (test -f ${LOCKFILE}) then<br />     rm ${LOCKFILE} <br />     echo &quot;человек. мы он лайн.&quot; | festival --tts --language russian<br /> fi<br />fi</span></p>
<hr />
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br /></span><span style=" font-family:'Ubuntu'; font-size:20pt;">Озвучка подключения/отключения USB-устройств</span><span style=" font-family:'Ubuntu';"><br />(В Ubuntu 10.10 возможно работать не будет)<br /><br />Снова два скрипта.<br />Первый - /etc/udev/rules.d/62-festival.rules<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Код: </span><a href="javascript:void(0);"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">[Выделить]</span></a></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Courier New,courier';">SUBSYSTEMS==&quot;usb&quot;, RUN+=&quot;/usr/bin/boltalka.sh %k&quot;<br />SUBSYSTEMS==&quot;block&quot;, RUN+=&quot;/usr/bin/boltalka.sh %b&quot;</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Второй - /usr/bin/boltalka.sh<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">(Нажмите, чтобы показать/скрыть)</span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';"><br />Чтобы говорил по-русски, можно сделать, например, так:<br />(наименование устройства озвучиваться не будет)<br /></span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="msg_698208"></a><span style=" font-family:'Ubuntu';">(</span><span style=" font-family:'Ubuntu';">Нажмите, чтобы показать/скрыть)</span></p>
<hr />
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><span style=" font-family:'Ubuntu';">Благодарности: </span><a href="https://forum.ubuntu.ru/index.php?action=profile;u=20674"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">goldskif</span></a><span style=" font-family:'Ubuntu';">, </span><a href="https://forum.ubuntu.ru/index.php?action=profile;u=44328"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">ratte</span></a><span style=" font-family:'Ubuntu';">, </span><a href="https://forum.ubuntu.ru/index.php?action=profile;u=3547"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">OMUT</span></a><span style=" font-family:'Ubuntu';">, </span><a href="https://forum.ubuntu.ru/index.php?action=profile;u=51304"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">enfernal</span></a><span style=" font-family:'Ubuntu';">, </span><a href="https://forum.ubuntu.ru/index.php?action=profile;u=28646"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">bsod</span></a><span style=" font-family:'Ubuntu';">, </span><a href="https://forum.ubuntu.ru/index.php?action=profile;u=40158"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">КирIk</span></a><span style=" font-family:'Ubuntu';">, </span><a href="https://forum.ubuntu.ru/index.php?action=profile;u=55593"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">Rasskazow</span></a><span style=" font-family:'Ubuntu';"><br /></span><a href="http://habrahabr.ru"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">habrahabr.ru</span></a><span style=" font-family:'Ubuntu';">, </span><a href="http://ru.festivalspeaker.wikia.com"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">ru.festivalspeaker.wikia.com</span></a><span style=" font-family:'Ubuntu';">, </span><a href="http://ubuntuforums.org"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">ubuntuforums.org</span></a><span style=" font-family:'Ubuntu';">, </span><a href="http://welinux.ru"><span style=" font-family:'Ubuntu'; text-decoration: underline; color:#0000ff;">welinux.ru</span></a><span style=" font-family:'Ubuntu';"> </span></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><a name="modified_698208"></a><span style=" font-family:'Ubuntu';">«</span><span style=" font-family:'Ubuntu';"> </span><span style=" font-family:'Ubuntu'; font-style:italic;">Последнее редактирование: 12 Январь 2013, 17:31:23 от -grin-</span><span style=" font-family:'Ubuntu';"> » </span></p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-family:'Ubuntu';"><br /></p></body></html>